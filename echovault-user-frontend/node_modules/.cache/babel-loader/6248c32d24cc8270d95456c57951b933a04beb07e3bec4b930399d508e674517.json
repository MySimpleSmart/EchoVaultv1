{"ast":null,"code":"import React,{useEffect,useState,useMemo}from'react';import{BrowserRouter,Routes,Route,NavLink,useNavigate,useParams}from'react-router-dom';import Login from'./Login';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const apiBase=typeof window!=='undefined'&&window.REACT_APP_API_URL||process.env.REACT_APP_API_URL||\"\".concat(window.location.origin,\"/wp-json\");function getAuthHeaders(token){return{'Content-Type':'application/json',Authorization:\"Bearer \".concat(token)};}function Layout(_ref){let{children,user,onLogout}=_ref;return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gray-50 flex\",children:[/*#__PURE__*/_jsxs(\"aside\",{className:\"w-64 bg-white border-r border-gray-200 hidden md:flex flex-col\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"p-6 border-b border-gray-200\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"/Logo/echologo.png\",alt:\"EchoVault\",className:\"h-8 w-auto\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-2 text-xs text-gray-500\",children:\"Client Portal\"})]}),/*#__PURE__*/_jsxs(\"nav\",{className:\"flex-1 p-4 space-y-1 text-sm\",children:[/*#__PURE__*/_jsx(NavLink,{to:\"/\",end:true,className:_ref2=>{let{isActive}=_ref2;return\"block px-3 py-2 rounded-md font-medium \".concat(isActive?'bg-blue-50 text-blue-700':'text-gray-700 hover:bg-gray-50');},children:\"Dashboard\"}),/*#__PURE__*/_jsx(NavLink,{to:\"/loans\",className:_ref3=>{let{isActive}=_ref3;return\"block px-3 py-2 rounded-md font-medium \".concat(isActive?'bg-blue-50 text-blue-700':'text-gray-700 hover:bg-gray-50');},children:\"Loans\"}),/*#__PURE__*/_jsx(NavLink,{to:\"/products\",className:_ref4=>{let{isActive}=_ref4;return\"block px-3 py-2 rounded-md font-medium \".concat(isActive?'bg-blue-50 text-blue-700':'text-gray-700 hover:bg-gray-50');},children:\"Loan Products\"}),/*#__PURE__*/_jsx(NavLink,{to:\"/news\",className:_ref5=>{let{isActive}=_ref5;return\"block px-3 py-2 rounded-md font-medium \".concat(isActive?'bg-blue-50 text-blue-700':'text-gray-700 hover:bg-gray-50');},children:\"News\"}),/*#__PURE__*/_jsx(NavLink,{to:\"/profile\",className:_ref6=>{let{isActive}=_ref6;return\"block px-3 py-2 rounded-md font-medium \".concat(isActive?'bg-blue-50 text-blue-700':'text-gray-700 hover:bg-gray-50');},children:\"Profile\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"p-4 border-t border-gray-200 text-xs text-gray-500\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:(user===null||user===void 0?void 0:user.username)||'Client'}),/*#__PURE__*/_jsx(\"button\",{onClick:onLogout,className:\"text-red-600 hover:text-red-700 font-medium\",children:\"Logout\"})]})})]}),/*#__PURE__*/_jsxs(\"main\",{className:\"flex-1 flex flex-col\",children:[/*#__PURE__*/_jsx(\"header\",{className:\"h-14 bg-white border-b border-gray-200 flex items-center justify-between px-4 md:px-6\",children:/*#__PURE__*/_jsx(\"h1\",{className:\"text-sm font-medium text-gray-700\",children:\"EchoVault Client Portal\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-1 p-4 md:p-6 max-w-5xl w-full mx-auto\",children:children})]})]});}function useCurrentClient(token){const[profile,setProfile]=useState(null);const[loading,setLoading]=useState(true);const[error,setError]=useState('');useEffect(()=>{if(!token)return;let cancelled=false;const load=async()=>{setLoading(true);setError('');try{const resp=await fetch(\"\".concat(apiBase,\"/wp/v2/borrower-profile?per_page=1&context=edit\"),{headers:getAuthHeaders(token),mode:'cors'});if(!resp.ok)throw new Error('Failed to load profile');const data=await resp.json();if(!cancelled)setProfile(data[0]||null);}catch(e){if(!cancelled)setError(e.message||'Failed to load profile');}finally{if(!cancelled)setLoading(false);}};load();return()=>{cancelled=true;};},[token]);return{profile,loading,error};}function DashboardPage(_ref7){var _profile$title,_nextLoan$title,_nextLoan$meta;let{token}=_ref7;const{profile,loading,error}=useCurrentClient(token);const[loans,setLoans]=useState([]);const[loanError,setLoanError]=useState('');useEffect(()=>{if(!token||!profile)return;const loadLoans=async()=>{try{setLoanError('');const resp=await fetch(\"\".concat(apiBase,\"/wp/v2/loans?per_page=100&context=edit\"),{headers:getAuthHeaders(token),mode:'cors'});if(!resp.ok)throw new Error('Failed to load loans');const data=await resp.json();const filtered=data.filter(loan=>{var _loan$meta,_loan$fields;return String((_loan$meta=loan.meta)===null||_loan$meta===void 0?void 0:_loan$meta.borrower_id)===String(profile.id)||String((_loan$fields=loan.fields)===null||_loan$fields===void 0?void 0:_loan$fields.borrower_id)===String(profile.id);});setLoans(filtered);}catch(e){setLoanError(e.message||'Failed to load loans');}};loadLoans();},[token,profile]);const nextLoan=useMemo(()=>loans[0]||null,[loans]);return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold text-gray-900\",children:\"Dashboard\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600 mt-1\",children:[\"Welcome back, \",(profile===null||profile===void 0?void 0:profile.first_name)||(profile===null||profile===void 0?void 0:(_profile$title=profile.title)===null||_profile$title===void 0?void 0:_profile$title.rendered)||'Client']})]}),loading&&/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500\",children:\"Loading profile...\"}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-red-600\",children:error}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white border border-gray-200 rounded-lg p-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xs font-medium text-gray-500 uppercase tracking-wide\",children:\"Loans\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-2 text-2xl font-semibold text-gray-900\",children:loans.length})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white border border-gray-200 rounded-lg p-4 col-span-2\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xs font-medium text-gray-500 uppercase tracking-wide\",children:\"Next Loan\"}),loanError&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-2 text-sm text-red-600\",children:loanError}),!loanError&&!nextLoan&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-2 text-sm text-gray-600\",children:\"No active loans found.\"}),nextLoan&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-2 text-sm text-gray-700\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-medium\",children:((_nextLoan$title=nextLoan.title)===null||_nextLoan$title===void 0?void 0:_nextLoan$title.rendered)||nextLoan.loan_title||\"Loan #\".concat(nextLoan.id)}),/*#__PURE__*/_jsxs(\"p\",{className:\"mt-1 text-gray-500\",children:[\"Status: \",((_nextLoan$meta=nextLoan.meta)===null||_nextLoan$meta===void 0?void 0:_nextLoan$meta.loan_status)||'Active']})]})]})]})]});}function LoansPage(_ref8){let{token}=_ref8;const{profile}=useCurrentClient(token);const[loans,setLoans]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState('');const navigate=useNavigate();useEffect(()=>{if(!token||!profile)return;const load=async()=>{setLoading(true);setError('');try{const resp=await fetch(\"\".concat(apiBase,\"/wp/v2/loans?per_page=100&context=edit\"),{headers:getAuthHeaders(token),mode:'cors'});if(!resp.ok)throw new Error('Failed to load loans');const data=await resp.json();const filtered=data.filter(loan=>{var _loan$meta2,_loan$fields2;return String((_loan$meta2=loan.meta)===null||_loan$meta2===void 0?void 0:_loan$meta2.borrower_id)===String(profile.id)||String((_loan$fields2=loan.fields)===null||_loan$fields2===void 0?void 0:_loan$fields2.borrower_id)===String(profile.id);});setLoans(filtered);}catch(e){setError(e.message||'Failed to load loans');}finally{setLoading(false);}};load();},[token,profile]);return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold text-gray-900\",children:\"My Loans\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 mt-1\",children:\"View your active and past loans.\"})]}),loading&&/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500\",children:\"Loading loans...\"}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-red-600\",children:error}),!loading&&!error&&loans.length===0&&/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:\"You do not have any loans yet.\"}),loans.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"bg-white border border-gray-200 rounded-lg overflow-hidden\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full text-sm\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-gray-50 text-left text-xs font-semibold text-gray-500\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-2\",children:\"Loan\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-2\",children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-2\",children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"divide-y divide-gray-100\",children:loans.map(loan=>{var _loan$title,_loan$meta3;return/*#__PURE__*/_jsxs(\"tr\",{className:\"hover:bg-gray-50\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-2\",children:((_loan$title=loan.title)===null||_loan$title===void 0?void 0:_loan$title.rendered)||loan.loan_title||\"Loan #\".concat(loan.id)}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-2 text-gray-700\",children:((_loan$meta3=loan.meta)===null||_loan$meta3===void 0?void 0:_loan$meta3.loan_status)||'Active'}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-2\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate(\"/loans/\".concat(loan.id)),className:\"text-blue-600 hover:text-blue-700 text-xs font-medium\",children:\"View details\"})})]},loan.id);})})]})})]});}function LoanDetailPage(_ref9){var _loan$title2,_loan$meta4;let{token}=_ref9;const{id}=useParams();const[loan,setLoan]=useState(null);const[schedule,setSchedule]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState('');useEffect(()=>{if(!token||!id)return;const load=async()=>{setLoading(true);setError('');try{const loanResp=await fetch(\"\".concat(apiBase,\"/wp/v2/loans/\").concat(id,\"?context=edit\"),{headers:getAuthHeaders(token),mode:'cors'});if(!loanResp.ok)throw new Error('Failed to load loan');const loanJson=await loanResp.json();setLoan(loanJson);const scheduleResp=await fetch(\"\".concat(apiBase,\"/echovault/v2/get-repayment-schedule?loan_id=\").concat(id),{headers:{Authorization:\"Bearer \".concat(token)},mode:'cors'});if(scheduleResp.ok){const scheduleJson=await scheduleResp.json();if(scheduleJson.success&&scheduleJson.schedule){setSchedule(scheduleJson.schedule);}}}catch(e){setError(e.message||'Failed to load loan');}finally{setLoading(false);}};load();},[token,id]);return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold text-gray-900\",children:\"Loan Details\"}),loading&&/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500\",children:\"Loading...\"}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-red-600\",children:error}),loan&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white border border-gray-200 rounded-lg p-4 space-y-2 text-sm\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-medium\",children:((_loan$title2=loan.title)===null||_loan$title2===void 0?void 0:_loan$title2.rendered)||loan.loan_title||\"Loan #\".concat(loan.id)}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-600\",children:[\"Status: \",((_loan$meta4=loan.meta)===null||_loan$meta4===void 0?void 0:_loan$meta4.loan_status)||'Active']})]}),schedule.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white border border-gray-200 rounded-lg overflow-hidden\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"px-4 py-2 border-b border-gray-100 text-sm font-medium text-gray-800\",children:\"Repayment Schedule\"}),/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full text-xs\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-gray-50\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"px-3 py-2 text-left\",children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-3 py-2 text-left\",children:\"Start\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-3 py-2 text-left\",children:\"End\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-3 py-2 text-right\",children:\"Remain Balance\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-3 py-2 text-center\",children:\"Status\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"divide-y divide-gray-100\",children:schedule.map(r=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"px-3 py-1\",children:r.id}),/*#__PURE__*/_jsx(\"td\",{className:\"px-3 py-1\",children:r.segment_start||'-'}),/*#__PURE__*/_jsx(\"td\",{className:\"px-3 py-1\",children:r.segment_end||'-'}),/*#__PURE__*/_jsx(\"td\",{className:\"px-3 py-1 text-right\",children:(r.remain_balance||0).toFixed(2)}),/*#__PURE__*/_jsx(\"td\",{className:\"px-3 py-1 text-center text-xs text-gray-700\",children:r.repayment_status||'Pending'})]},r.id))})]})]})]});}function ProductsPage(_ref0){let{token}=_ref0;const[products,setProducts]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState('');useEffect(()=>{if(!token)return;const load=async()=>{setLoading(true);setError('');try{const resp=await fetch(\"\".concat(apiBase,\"/wp/v2/loan-product?per_page=100&status=publish\"),{headers:getAuthHeaders(token),mode:'cors'});if(!resp.ok)throw new Error('Failed to load products');const data=await resp.json();setProducts(data||[]);}catch(e){setError(e.message||'Failed to load products');}finally{setLoading(false);}};load();},[token]);return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold text-gray-900\",children:\"Active Loan Products\"}),loading&&/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500\",children:\"Loading products...\"}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-red-600\",children:error}),!loading&&!error&&products.length===0&&/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:\"No active products available.\"}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:products.map(p=>{var _p$title;return/*#__PURE__*/_jsx(\"div\",{className:\"bg-white border border-gray-200 rounded-lg p-4 text-sm space-y-1\",children:/*#__PURE__*/_jsx(\"p\",{className:\"font-medium\",children:p.product_name||((_p$title=p.title)===null||_p$title===void 0?void 0:_p$title.rendered)||'Loan Product'})},p.id);})})]});}function NewsPage(){const[posts,setPosts]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState('');useEffect(()=>{const load=async()=>{setLoading(true);setError('');try{const resp=await fetch(\"\".concat(apiBase,\"/wp/v2/posts?per_page=5\"),{mode:'cors'});if(!resp.ok)throw new Error('Failed to load news');const data=await resp.json();setPosts(data||[]);}catch(e){setError(e.message||'Failed to load news');}finally{setLoading(false);}};load();},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold text-gray-900\",children:\"News\"}),loading&&/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500\",children:\"Loading news...\"}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-red-600\",children:error}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-3\",children:posts.map(post=>{var _post$title,_post$excerpt;return/*#__PURE__*/_jsxs(\"article\",{className:\"bg-white border border-gray-200 rounded-lg p-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-sm font-semibold text-gray-900\",children:((_post$title=post.title)===null||_post$title===void 0?void 0:_post$title.rendered)||'News'}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-1 text-xs text-gray-600 line-clamp-3\",dangerouslySetInnerHTML:{__html:((_post$excerpt=post.excerpt)===null||_post$excerpt===void 0?void 0:_post$excerpt.rendered)||''}})]},post.id);})})]});}function ProfilePage(_ref1){var _profile$meta;let{token}=_ref1;const{profile,loading,error}=useCurrentClient(token);return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold text-gray-900\",children:\"Profile\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 mt-1\",children:\"This information comes from your EchoVault client profile.\"}),loading&&/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500\",children:\"Loading profile...\"}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-red-600\",children:error}),profile&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white border border-gray-200 rounded-lg p-4 text-sm space-y-2\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Name: \"}),profile.first_name,\" \",profile.last_name]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Email: \"}),profile.email_address]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Borrower ID: \"}),profile.borrower_id||((_profile$meta=profile.meta)===null||_profile$meta===void 0?void 0:_profile$meta.borrower_id)]})]})]});}function ClientApp(){const[token,setToken]=useState(localStorage.getItem('jwt_token'));const[user,setUser]=useState(()=>{try{const s=localStorage.getItem('user');return s?JSON.parse(s):null;}catch(_unused){return null;}});const handleLogout=()=>{localStorage.removeItem('jwt_token');localStorage.removeItem('user');window.location.reload();};if(!token){return/*#__PURE__*/_jsx(Login,{onLoginSuccess:(newToken,userData)=>{setToken(newToken);setUser(userData);}});}return/*#__PURE__*/_jsx(BrowserRouter,{children:/*#__PURE__*/_jsx(Layout,{user:user,onLogout:handleLogout,children:/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(DashboardPage,{token:token})}),/*#__PURE__*/_jsx(Route,{path:\"/loans\",element:/*#__PURE__*/_jsx(LoansPage,{token:token})}),/*#__PURE__*/_jsx(Route,{path:\"/loans/:id\",element:/*#__PURE__*/_jsx(LoanDetailPage,{token:token})}),/*#__PURE__*/_jsx(Route,{path:\"/products\",element:/*#__PURE__*/_jsx(ProductsPage,{token:token})}),/*#__PURE__*/_jsx(Route,{path:\"/news\",element:/*#__PURE__*/_jsx(NewsPage,{})}),/*#__PURE__*/_jsx(Route,{path:\"/profile\",element:/*#__PURE__*/_jsx(ProfilePage,{token:token})})]})})});}function App(){return/*#__PURE__*/_jsx(ClientApp,{});}export default App;","map":{"version":3,"names":["React","useEffect","useState","useMemo","BrowserRouter","Routes","Route","NavLink","useNavigate","useParams","Login","jsx","_jsx","jsxs","_jsxs","apiBase","window","REACT_APP_API_URL","process","env","concat","location","origin","getAuthHeaders","token","Authorization","Layout","_ref","children","user","onLogout","className","src","alt","to","end","_ref2","isActive","_ref3","_ref4","_ref5","_ref6","username","onClick","useCurrentClient","profile","setProfile","loading","setLoading","error","setError","cancelled","load","resp","fetch","headers","mode","ok","Error","data","json","e","message","DashboardPage","_ref7","_profile$title","_nextLoan$title","_nextLoan$meta","loans","setLoans","loanError","setLoanError","loadLoans","filtered","filter","loan","_loan$meta","_loan$fields","String","meta","borrower_id","id","fields","nextLoan","first_name","title","rendered","length","loan_title","loan_status","LoansPage","_ref8","navigate","_loan$meta2","_loan$fields2","map","_loan$title","_loan$meta3","LoanDetailPage","_ref9","_loan$title2","_loan$meta4","setLoan","schedule","setSchedule","loanResp","loanJson","scheduleResp","scheduleJson","success","r","segment_start","segment_end","remain_balance","toFixed","repayment_status","ProductsPage","_ref0","products","setProducts","p","_p$title","product_name","NewsPage","posts","setPosts","post","_post$title","_post$excerpt","dangerouslySetInnerHTML","__html","excerpt","ProfilePage","_ref1","_profile$meta","last_name","email_address","ClientApp","setToken","localStorage","getItem","setUser","s","JSON","parse","_unused","handleLogout","removeItem","reload","onLoginSuccess","newToken","userData","path","element","App"],"sources":["/Volumes/Main Data/EchoVault LMS/EchoVault v1/echovault-user-frontend/src/App.js"],"sourcesContent":["import React, { useEffect, useState, useMemo } from 'react';\nimport {\n  BrowserRouter,\n  Routes,\n  Route,\n  NavLink,\n  useNavigate,\n  useParams\n} from 'react-router-dom';\nimport Login from './Login';\n\nconst apiBase =\n  (typeof window !== 'undefined' && window.REACT_APP_API_URL) ||\n  process.env.REACT_APP_API_URL ||\n  `${window.location.origin}/wp-json`;\n\nfunction getAuthHeaders(token) {\n  return {\n    'Content-Type': 'application/json',\n    Authorization: `Bearer ${token}`\n  };\n}\n\nfunction Layout({ children, user, onLogout }) {\n  return (\n    <div className=\"min-h-screen bg-gray-50 flex\">\n      <aside className=\"w-64 bg-white border-r border-gray-200 hidden md:flex flex-col\">\n        <div className=\"p-6 border-b border-gray-200\">\n          <img src=\"/Logo/echologo.png\" alt=\"EchoVault\" className=\"h-8 w-auto\" />\n          <p className=\"mt-2 text-xs text-gray-500\">Client Portal</p>\n        </div>\n        <nav className=\"flex-1 p-4 space-y-1 text-sm\">\n          <NavLink\n            to=\"/\"\n            end\n            className={({ isActive }) =>\n              `block px-3 py-2 rounded-md font-medium ${\n                isActive ? 'bg-blue-50 text-blue-700' : 'text-gray-700 hover:bg-gray-50'\n              }`\n            }\n          >\n            Dashboard\n          </NavLink>\n          <NavLink\n            to=\"/loans\"\n            className={({ isActive }) =>\n              `block px-3 py-2 rounded-md font-medium ${\n                isActive ? 'bg-blue-50 text-blue-700' : 'text-gray-700 hover:bg-gray-50'\n              }`\n            }\n          >\n            Loans\n          </NavLink>\n          <NavLink\n            to=\"/products\"\n            className={({ isActive }) =>\n              `block px-3 py-2 rounded-md font-medium ${\n                isActive ? 'bg-blue-50 text-blue-700' : 'text-gray-700 hover:bg-gray-50'\n              }`\n            }\n          >\n            Loan Products\n          </NavLink>\n          <NavLink\n            to=\"/news\"\n            className={({ isActive }) =>\n              `block px-3 py-2 rounded-md font-medium ${\n                isActive ? 'bg-blue-50 text-blue-700' : 'text-gray-700 hover:bg-gray-50'\n              }`\n            }\n          >\n            News\n          </NavLink>\n          <NavLink\n            to=\"/profile\"\n            className={({ isActive }) =>\n              `block px-3 py-2 rounded-md font-medium ${\n                isActive ? 'bg-blue-50 text-blue-700' : 'text-gray-700 hover:bg-gray-50'\n              }`\n            }\n          >\n            Profile\n          </NavLink>\n        </nav>\n        <div className=\"p-4 border-t border-gray-200 text-xs text-gray-500\">\n          <div className=\"flex items-center justify-between\">\n            <span>{user?.username || 'Client'}</span>\n            <button\n              onClick={onLogout}\n              className=\"text-red-600 hover:text-red-700 font-medium\"\n            >\n              Logout\n            </button>\n          </div>\n        </div>\n      </aside>\n      <main className=\"flex-1 flex flex-col\">\n        <header className=\"h-14 bg-white border-b border-gray-200 flex items-center justify-between px-4 md:px-6\">\n          <h1 className=\"text-sm font-medium text-gray-700\">EchoVault Client Portal</h1>\n        </header>\n        <div className=\"flex-1 p-4 md:p-6 max-w-5xl w-full mx-auto\">{children}</div>\n      </main>\n    </div>\n  );\n}\n\nfunction useCurrentClient(token) {\n  const [profile, setProfile] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n\n  useEffect(() => {\n    if (!token) return;\n    let cancelled = false;\n    const load = async () => {\n      setLoading(true);\n      setError('');\n      try {\n        const resp = await fetch(\n          `${apiBase}/wp/v2/borrower-profile?per_page=1&context=edit`,\n          { headers: getAuthHeaders(token), mode: 'cors' }\n        );\n        if (!resp.ok) throw new Error('Failed to load profile');\n        const data = await resp.json();\n        if (!cancelled) setProfile(data[0] || null);\n      } catch (e) {\n        if (!cancelled) setError(e.message || 'Failed to load profile');\n      } finally {\n        if (!cancelled) setLoading(false);\n      }\n    };\n    load();\n    return () => {\n      cancelled = true;\n    };\n  }, [token]);\n\n  return { profile, loading, error };\n}\n\nfunction DashboardPage({ token }) {\n  const { profile, loading, error } = useCurrentClient(token);\n  const [loans, setLoans] = useState([]);\n  const [loanError, setLoanError] = useState('');\n\n  useEffect(() => {\n    if (!token || !profile) return;\n    const loadLoans = async () => {\n      try {\n        setLoanError('');\n        const resp = await fetch(\n          `${apiBase}/wp/v2/loans?per_page=100&context=edit`,\n          { headers: getAuthHeaders(token), mode: 'cors' }\n        );\n        if (!resp.ok) throw new Error('Failed to load loans');\n        const data = await resp.json();\n        const filtered = data.filter(\n          (loan) =>\n            String(loan.meta?.borrower_id) === String(profile.id) ||\n            String(loan.fields?.borrower_id) === String(profile.id)\n        );\n        setLoans(filtered);\n      } catch (e) {\n        setLoanError(e.message || 'Failed to load loans');\n      }\n    };\n    loadLoans();\n  }, [token, profile]);\n\n  const nextLoan = useMemo(() => loans[0] || null, [loans]);\n\n  return (\n    <div className=\"space-y-6\">\n      <div>\n        <h2 className=\"text-xl font-semibold text-gray-900\">Dashboard</h2>\n        <p className=\"text-sm text-gray-600 mt-1\">\n          Welcome back, {profile?.first_name || profile?.title?.rendered || 'Client'}\n        </p>\n      </div>\n\n      {loading && <p className=\"text-sm text-gray-500\">Loading profile...</p>}\n      {error && <p className=\"text-sm text-red-600\">{error}</p>}\n\n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n        <div className=\"bg-white border border-gray-200 rounded-lg p-4\">\n          <p className=\"text-xs font-medium text-gray-500 uppercase tracking-wide\">\n            Loans\n          </p>\n          <p className=\"mt-2 text-2xl font-semibold text-gray-900\">{loans.length}</p>\n        </div>\n        <div className=\"bg-white border border-gray-200 rounded-lg p-4 col-span-2\">\n          <p className=\"text-xs font-medium text-gray-500 uppercase tracking-wide\">\n            Next Loan\n          </p>\n          {loanError && <p className=\"mt-2 text-sm text-red-600\">{loanError}</p>}\n          {!loanError && !nextLoan && (\n            <p className=\"mt-2 text-sm text-gray-600\">No active loans found.</p>\n          )}\n          {nextLoan && (\n            <div className=\"mt-2 text-sm text-gray-700\">\n              <p className=\"font-medium\">\n                {nextLoan.title?.rendered || nextLoan.loan_title || `Loan #${nextLoan.id}`}\n              </p>\n              <p className=\"mt-1 text-gray-500\">\n                Status: {nextLoan.meta?.loan_status || 'Active'}\n              </p>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nfunction LoansPage({ token }) {\n  const { profile } = useCurrentClient(token);\n  const [loans, setLoans] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    if (!token || !profile) return;\n    const load = async () => {\n      setLoading(true);\n      setError('');\n      try {\n        const resp = await fetch(\n          `${apiBase}/wp/v2/loans?per_page=100&context=edit`,\n          { headers: getAuthHeaders(token), mode: 'cors' }\n        );\n        if (!resp.ok) throw new Error('Failed to load loans');\n        const data = await resp.json();\n        const filtered = data.filter(\n          (loan) =>\n            String(loan.meta?.borrower_id) === String(profile.id) ||\n            String(loan.fields?.borrower_id) === String(profile.id)\n        );\n        setLoans(filtered);\n      } catch (e) {\n        setError(e.message || 'Failed to load loans');\n      } finally {\n        setLoading(false);\n      }\n    };\n    load();\n  }, [token, profile]);\n\n  return (\n    <div className=\"space-y-4\">\n      <div>\n        <h2 className=\"text-xl font-semibold text-gray-900\">My Loans</h2>\n        <p className=\"text-sm text-gray-600 mt-1\">\n          View your active and past loans.\n        </p>\n      </div>\n      {loading && <p className=\"text-sm text-gray-500\">Loading loans...</p>}\n      {error && <p className=\"text-sm text-red-600\">{error}</p>}\n      {!loading && !error && loans.length === 0 && (\n        <p className=\"text-sm text-gray-600\">You do not have any loans yet.</p>\n      )}\n      {loans.length > 0 && (\n        <div className=\"bg-white border border-gray-200 rounded-lg overflow-hidden\">\n          <table className=\"min-w-full text-sm\">\n            <thead className=\"bg-gray-50 text-left text-xs font-semibold text-gray-500\">\n              <tr>\n                <th className=\"px-4 py-2\">Loan</th>\n                <th className=\"px-4 py-2\">Status</th>\n                <th className=\"px-4 py-2\">Actions</th>\n              </tr>\n            </thead>\n            <tbody className=\"divide-y divide-gray-100\">\n              {loans.map((loan) => (\n                <tr key={loan.id} className=\"hover:bg-gray-50\">\n                  <td className=\"px-4 py-2\">\n                    {loan.title?.rendered || loan.loan_title || `Loan #${loan.id}`}\n                  </td>\n                  <td className=\"px-4 py-2 text-gray-700\">\n                    {loan.meta?.loan_status || 'Active'}\n                  </td>\n                  <td className=\"px-4 py-2\">\n                    <button\n                      onClick={() => navigate(`/loans/${loan.id}`)}\n                      className=\"text-blue-600 hover:text-blue-700 text-xs font-medium\"\n                    >\n                      View details\n                    </button>\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n      )}\n    </div>\n  );\n}\n\nfunction LoanDetailPage({ token }) {\n  const { id } = useParams();\n  const [loan, setLoan] = useState(null);\n  const [schedule, setSchedule] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n\n  useEffect(() => {\n    if (!token || !id) return;\n    const load = async () => {\n      setLoading(true);\n      setError('');\n      try {\n        const loanResp = await fetch(\n          `${apiBase}/wp/v2/loans/${id}?context=edit`,\n          { headers: getAuthHeaders(token), mode: 'cors' }\n        );\n        if (!loanResp.ok) throw new Error('Failed to load loan');\n        const loanJson = await loanResp.json();\n        setLoan(loanJson);\n\n        const scheduleResp = await fetch(\n          `${apiBase}/echovault/v2/get-repayment-schedule?loan_id=${id}`,\n          { headers: { Authorization: `Bearer ${token}` }, mode: 'cors' }\n        );\n        if (scheduleResp.ok) {\n          const scheduleJson = await scheduleResp.json();\n          if (scheduleJson.success && scheduleJson.schedule) {\n            setSchedule(scheduleJson.schedule);\n          }\n        }\n      } catch (e) {\n        setError(e.message || 'Failed to load loan');\n      } finally {\n        setLoading(false);\n      }\n    };\n    load();\n  }, [token, id]);\n\n  return (\n    <div className=\"space-y-4\">\n      <h2 className=\"text-xl font-semibold text-gray-900\">Loan Details</h2>\n      {loading && <p className=\"text-sm text-gray-500\">Loading...</p>}\n      {error && <p className=\"text-sm text-red-600\">{error}</p>}\n      {loan && (\n        <div className=\"bg-white border border-gray-200 rounded-lg p-4 space-y-2 text-sm\">\n          <p className=\"font-medium\">\n            {loan.title?.rendered || loan.loan_title || `Loan #${loan.id}`}\n          </p>\n          <p className=\"text-gray-600\">\n            Status: {loan.meta?.loan_status || 'Active'}\n          </p>\n        </div>\n      )}\n      {schedule.length > 0 && (\n        <div className=\"bg-white border border-gray-200 rounded-lg overflow-hidden\">\n          <div className=\"px-4 py-2 border-b border-gray-100 text-sm font-medium text-gray-800\">\n            Repayment Schedule\n          </div>\n          <table className=\"min-w-full text-xs\">\n            <thead className=\"bg-gray-50\">\n              <tr>\n                <th className=\"px-3 py-2 text-left\">ID</th>\n                <th className=\"px-3 py-2 text-left\">Start</th>\n                <th className=\"px-3 py-2 text-left\">End</th>\n                <th className=\"px-3 py-2 text-right\">Remain Balance</th>\n                <th className=\"px-3 py-2 text-center\">Status</th>\n              </tr>\n            </thead>\n            <tbody className=\"divide-y divide-gray-100\">\n              {schedule.map((r) => (\n                <tr key={r.id}>\n                  <td className=\"px-3 py-1\">{r.id}</td>\n                  <td className=\"px-3 py-1\">{r.segment_start || '-'}</td>\n                  <td className=\"px-3 py-1\">{r.segment_end || '-'}</td>\n                  <td className=\"px-3 py-1 text-right\">{(r.remain_balance || 0).toFixed(2)}</td>\n                  <td className=\"px-3 py-1 text-center text-xs text-gray-700\">\n                    {r.repayment_status || 'Pending'}\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n      )}\n    </div>\n  );\n}\n\nfunction ProductsPage({ token }) {\n  const [products, setProducts] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n\n  useEffect(() => {\n    if (!token) return;\n    const load = async () => {\n      setLoading(true);\n      setError('');\n      try {\n        const resp = await fetch(\n          `${apiBase}/wp/v2/loan-product?per_page=100&status=publish`,\n          { headers: getAuthHeaders(token), mode: 'cors' }\n        );\n        if (!resp.ok) throw new Error('Failed to load products');\n        const data = await resp.json();\n        setProducts(data || []);\n      } catch (e) {\n        setError(e.message || 'Failed to load products');\n      } finally {\n        setLoading(false);\n      }\n    };\n    load();\n  }, [token]);\n\n  return (\n    <div className=\"space-y-4\">\n      <h2 className=\"text-xl font-semibold text-gray-900\">Active Loan Products</h2>\n      {loading && <p className=\"text-sm text-gray-500\">Loading products...</p>}\n      {error && <p className=\"text-sm text-red-600\">{error}</p>}\n      {!loading && !error && products.length === 0 && (\n        <p className=\"text-sm text-gray-600\">No active products available.</p>\n      )}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n        {products.map((p) => (\n          <div\n            key={p.id}\n            className=\"bg-white border border-gray-200 rounded-lg p-4 text-sm space-y-1\"\n          >\n            <p className=\"font-medium\">\n              {p.product_name || p.title?.rendered || 'Loan Product'}\n            </p>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n}\n\nfunction NewsPage() {\n  const [posts, setPosts] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n\n  useEffect(() => {\n    const load = async () => {\n      setLoading(true);\n      setError('');\n      try {\n        const resp = await fetch(`${apiBase}/wp/v2/posts?per_page=5`, {\n          mode: 'cors'\n        });\n        if (!resp.ok) throw new Error('Failed to load news');\n        const data = await resp.json();\n        setPosts(data || []);\n      } catch (e) {\n        setError(e.message || 'Failed to load news');\n      } finally {\n        setLoading(false);\n      }\n    };\n    load();\n  }, []);\n\n  return (\n    <div className=\"space-y-4\">\n      <h2 className=\"text-xl font-semibold text-gray-900\">News</h2>\n      {loading && <p className=\"text-sm text-gray-500\">Loading news...</p>}\n      {error && <p className=\"text-sm text-red-600\">{error}</p>}\n      <div className=\"space-y-3\">\n        {posts.map((post) => (\n          <article key={post.id} className=\"bg-white border border-gray-200 rounded-lg p-4\">\n            <h3 className=\"text-sm font-semibold text-gray-900\">\n              {post.title?.rendered || 'News'}\n            </h3>\n            <div\n              className=\"mt-1 text-xs text-gray-600 line-clamp-3\"\n              dangerouslySetInnerHTML={{ __html: post.excerpt?.rendered || '' }}\n            />\n          </article>\n        ))}\n      </div>\n    </div>\n  );\n}\n\nfunction ProfilePage({ token }) {\n  const { profile, loading, error } = useCurrentClient(token);\n\n  return (\n    <div className=\"space-y-4\">\n      <h2 className=\"text-xl font-semibold text-gray-900\">Profile</h2>\n      <p className=\"text-sm text-gray-600 mt-1\">\n        This information comes from your EchoVault client profile.\n      </p>\n      {loading && <p className=\"text-sm text-gray-500\">Loading profile...</p>}\n      {error && <p className=\"text-sm text-red-600\">{error}</p>}\n      {profile && (\n        <div className=\"bg-white border border-gray-200 rounded-lg p-4 text-sm space-y-2\">\n          <p>\n            <span className=\"font-medium\">Name: </span>\n            {profile.first_name} {profile.last_name}\n          </p>\n          <p>\n            <span className=\"font-medium\">Email: </span>\n            {profile.email_address}\n          </p>\n          <p>\n            <span className=\"font-medium\">Borrower ID: </span>\n            {profile.borrower_id || profile.meta?.borrower_id}\n          </p>\n        </div>\n      )}\n    </div>\n  );\n}\n\nfunction ClientApp() {\n  const [token, setToken] = useState(localStorage.getItem('jwt_token'));\n  const [user, setUser] = useState(() => {\n    try {\n      const s = localStorage.getItem('user');\n      return s ? JSON.parse(s) : null;\n    } catch {\n      return null;\n    }\n  });\n\n  const handleLogout = () => {\n    localStorage.removeItem('jwt_token');\n    localStorage.removeItem('user');\n    window.location.reload();\n  };\n\n  if (!token) {\n    return (\n      <Login\n        onLoginSuccess={(newToken, userData) => {\n          setToken(newToken);\n          setUser(userData);\n        }}\n      />\n    );\n  }\n\n  return (\n    <BrowserRouter>\n      <Layout user={user} onLogout={handleLogout}>\n        <Routes>\n          <Route path=\"/\" element={<DashboardPage token={token} />} />\n          <Route path=\"/loans\" element={<LoansPage token={token} />} />\n          <Route path=\"/loans/:id\" element={<LoanDetailPage token={token} />} />\n          <Route path=\"/products\" element={<ProductsPage token={token} />} />\n          <Route path=\"/news\" element={<NewsPage />} />\n          <Route path=\"/profile\" element={<ProfilePage token={token} />} />\n        </Routes>\n      </Layout>\n    </BrowserRouter>\n  );\n}\n\nfunction App() {\n  return <ClientApp />;\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}