{"ast":null,"code":"import React,{useEffect,useState,useMemo}from'react';import{BrowserRouter,Routes,Route,useNavigate,useParams,useLocation}from'react-router-dom';import Login from'./Login';import Sidebar from'./Sidebar';import Header from'./Header';import'./App.css';import'./styles.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const apiBase=typeof window!=='undefined'&&window.REACT_APP_API_URL||process.env.REACT_APP_API_URL||\"\".concat(window.location.origin,\"/wp-json\");function getAuthHeaders(token){return{'Content-Type':'application/json',Authorization:\"Bearer \".concat(token)};}function useCurrentClient(token){const[profile,setProfile]=useState(null);const[loading,setLoading]=useState(true);const[error,setError]=useState('');useEffect(()=>{if(!token)return;let cancelled=false;const load=async()=>{setLoading(true);setError('');try{// 1) Get email from locally stored user (set at login)\nlet userEmail='';try{const stored=localStorage.getItem('user');if(stored){const parsed=JSON.parse(stored);userEmail=(parsed.user_email||parsed.email||'').toString().toLowerCase().trim();}}catch(_){}// 2) Fallback to /users/me only if we couldn't get it from localStorage\nif(!userEmail){const meResp=await fetch(\"\".concat(apiBase,\"/wp/v2/users/me\"),{method:'GET',headers:{Authorization:\"Bearer \".concat(token),'Content-Type':'application/json'},mode:'cors'});if(meResp.ok){const me=await meResp.json();userEmail=(me.email||me.user_email||me.user_email_address||'').toString().toLowerCase().trim();}}if(!userEmail){throw new Error('Current user email not found');}// 2) Load all borrowers visible to this token\nconst listResp=await fetch(\"\".concat(apiBase,\"/wp/v2/borrower-profile?per_page=100&context=edit\"),{headers:getAuthHeaders(token),mode:'cors'});if(!listResp.ok){throw new Error('Failed to load borrower profiles');}const list=await listResp.json();let matched=null;if(Array.isArray(list)&&list.length){matched=list.find(b=>{var _b$meta,_b$fields,_b$meta2,_b$fields2;const be=(b.email_address||b.email||((_b$meta=b.meta)===null||_b$meta===void 0?void 0:_b$meta.email_address)||((_b$fields=b.fields)===null||_b$fields===void 0?void 0:_b$fields.email_address)||((_b$meta2=b.meta)===null||_b$meta2===void 0?void 0:_b$meta2.borrower_email)||((_b$fields2=b.fields)===null||_b$fields2===void 0?void 0:_b$fields2.borrower_email)||'').toString().toLowerCase().trim();return be&&be===userEmail;})||null;}if(!matched){throw new Error('No borrower profile found for this account');}if(!cancelled){setProfile(matched);}}catch(e){if(!cancelled){setError(e.message||'Failed to load profile');setProfile(null);}}finally{if(!cancelled){setLoading(false);}}};load();return()=>{cancelled=true;};},[token]);return{profile,loading,error};}function DashboardPage(_ref){var _profile$title,_nextLoan$title,_nextLoan$meta;let{token,user}=_ref;const{profile,loading,error}=useCurrentClient(token);const[loans,setLoans]=useState([]);const[loanError,setLoanError]=useState('');useEffect(()=>{if(!token||!profile)return;const loadLoans=async()=>{try{setLoanError('');const resp=await fetch(\"\".concat(apiBase,\"/wp/v2/loans?per_page=100&context=edit\"),{headers:getAuthHeaders(token),mode:'cors'});if(!resp.ok)throw new Error('Failed to load loans');const data=await resp.json();const filtered=data.filter(loan=>{var _loan$meta,_loan$fields;return String((_loan$meta=loan.meta)===null||_loan$meta===void 0?void 0:_loan$meta.borrower_id)===String(profile.id)||String((_loan$fields=loan.fields)===null||_loan$fields===void 0?void 0:_loan$fields.borrower_id)===String(profile.id);});setLoans(filtered);}catch(e){setLoanError(e.message||'Failed to load loans');}};loadLoans();},[token,profile]);const nextLoan=useMemo(()=>loans[0]||null,[loans]);return/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mb-8\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-gray-900 mb-2\",children:\"Dashboard\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-600\",children:[\"Welcome back, \",(user===null||user===void 0?void 0:user.username)||(profile===null||profile===void 0?void 0:profile.first_name)||(profile===null||profile===void 0?void 0:(_profile$title=profile.title)===null||_profile$title===void 0?void 0:_profile$title.rendered)||'Client']})]})})}),loading&&/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500\",children:\"Loading profile...\"}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-red-600\",children:error}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg shadow-sm border border-gray-200 p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-3 bg-blue-100 rounded-lg\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-6 h-6 text-blue-600\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M4 6h16M4 10h16M4 14h16M4 18h16\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-600\",children:\"Total Loans\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-gray-900\",children:loans.length})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg shadow-sm border border-gray-200 p-6 col-span-2\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-3 bg-green-100 rounded-lg\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-6 h-6 text-green-600\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-4 flex-1\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-600\",children:\"Next Loan\"}),loanError&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-red-600\",children:loanError}),!loanError&&!nextLoan&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-gray-600\",children:\"No active loans found.\"}),nextLoan&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-1\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-lg font-semibold text-gray-900\",children:((_nextLoan$title=nextLoan.title)===null||_nextLoan$title===void 0?void 0:_nextLoan$title.rendered)||nextLoan.loan_title||\"Loan #\".concat(nextLoan.id)}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-500\",children:[\"Status: \",((_nextLoan$meta=nextLoan.meta)===null||_nextLoan$meta===void 0?void 0:_nextLoan$meta.loan_status)||'Active']})]})]})]})})]})]});}function LoansPage(_ref2){let{token}=_ref2;const{profile}=useCurrentClient(token);const[loans,setLoans]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState('');const navigate=useNavigate();useEffect(()=>{if(!token||!profile)return;const load=async()=>{setLoading(true);setError('');try{const resp=await fetch(\"\".concat(apiBase,\"/wp/v2/loans?per_page=100&context=edit\"),{headers:getAuthHeaders(token),mode:'cors'});if(!resp.ok)throw new Error('Failed to load loans');const data=await resp.json();const filtered=data.filter(loan=>{var _loan$meta2,_loan$fields2;return String((_loan$meta2=loan.meta)===null||_loan$meta2===void 0?void 0:_loan$meta2.borrower_id)===String(profile.id)||String((_loan$fields2=loan.fields)===null||_loan$fields2===void 0?void 0:_loan$fields2.borrower_id)===String(profile.id);});setLoans(filtered);}catch(e){setError(e.message||'Failed to load loans');}finally{setLoading(false);}};load();},[token,profile]);return/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mb-8\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-gray-900 mb-2\",children:\"My Loans\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"View your active and past loans.\"})]})})}),loading&&/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500\",children:\"Loading loans...\"}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-red-600\",children:error}),!loading&&!error&&loans.length===0&&/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg shadow-sm border border-gray-200 p-12 text-center\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"You do not have any loans yet.\"})}),loans.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full divide-y divide-gray-200\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-gray-50\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Loan\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"bg-white divide-y divide-gray-200\",children:loans.map(loan=>{var _loan$title,_loan$meta3;return/*#__PURE__*/_jsxs(\"tr\",{className:\"hover:bg-gray-50\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900\",children:((_loan$title=loan.title)===null||_loan$title===void 0?void 0:_loan$title.rendered)||loan.loan_title||\"Loan #\".concat(loan.id)}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\",children:((_loan$meta3=loan.meta)===null||_loan$meta3===void 0?void 0:_loan$meta3.loan_status)||'Active'}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate(\"/loans/\".concat(loan.id)),className:\"text-blue-600 hover:text-blue-700 font-medium\",children:\"View details\"})})]},loan.id);})})]})})]});}function LoanDetailPage(_ref3){var _loan$meta4,_loan$title2,_loan$meta5,_loan$meta6;let{token}=_ref3;const{id}=useParams();const[loan,setLoan]=useState(null);const[schedule,setSchedule]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState('');const navigate=useNavigate();useEffect(()=>{if(!token||!id)return;const load=async()=>{setLoading(true);setError('');try{const loanResp=await fetch(\"\".concat(apiBase,\"/wp/v2/loans/\").concat(id,\"?context=edit\"),{headers:getAuthHeaders(token),mode:'cors'});if(!loanResp.ok)throw new Error('Failed to load loan');const loanJson=await loanResp.json();setLoan(loanJson);const scheduleResp=await fetch(\"\".concat(apiBase,\"/echovault/v2/get-repayment-schedule?loan_id=\").concat(id),{headers:{Authorization:\"Bearer \".concat(token)},mode:'cors'});if(scheduleResp.ok){const scheduleJson=await scheduleResp.json();if(scheduleJson.success&&scheduleJson.schedule){setSchedule(scheduleJson.schedule);}}}catch(e){setError(e.message||'Failed to load loan');}finally{setLoading(false);}};load();},[token,id]);const currency=(loan===null||loan===void 0?void 0:loan.loan_currency)||(loan===null||loan===void 0?void 0:(_loan$meta4=loan.meta)===null||_loan$meta4===void 0?void 0:_loan$meta4.loan_currency)||'AUD';const getCurrencySymbol=c=>c==='MNT'?'â‚®':'$';return/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-8\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>navigate('/loans'),className:\"text-sm text-gray-600 hover:text-gray-900 mb-4 inline-flex items-center\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-4 h-4 mr-1\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M15 19l-7-7 7-7\"})}),\"Back to Loans\"]}),/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-gray-900 mb-2\",children:\"Loan Details\"})]}),loading&&/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500\",children:\"Loading...\"}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-red-600\",children:error}),loan&&/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500\",children:\"Loan Title\"}),/*#__PURE__*/_jsx(\"p\",{className:\"font-medium text-gray-900 mt-1\",children:((_loan$title2=loan.title)===null||_loan$title2===void 0?void 0:_loan$title2.rendered)||loan.loan_title||\"Loan #\".concat(loan.id)})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500\",children:\"Status\"}),/*#__PURE__*/_jsx(\"p\",{className:\"font-medium text-gray-900 mt-1\",children:((_loan$meta5=loan.meta)===null||_loan$meta5===void 0?void 0:_loan$meta5.loan_status)||'Active'})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500\",children:\"Loan Amount\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"font-medium text-gray-900 mt-1\",children:[getCurrencySymbol(currency),loan.loan_amount||((_loan$meta6=loan.meta)===null||_loan$meta6===void 0?void 0:_loan$meta6.loan_amount)||'0']})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500\",children:\"Currency\"}),/*#__PURE__*/_jsx(\"p\",{className:\"font-medium text-gray-900 mt-1\",children:currency})]})]})}),schedule.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"px-6 py-4 border-b border-gray-200\",children:/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-semibold text-gray-900\",children:\"Repayment Schedule\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full divide-y divide-gray-200 text-xs\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-gray-50\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase\",children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase\",children:\"Start\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase\",children:\"End\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-3 py-2 text-right text-xs font-medium text-gray-500 uppercase\",children:\"Remain Balance\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-3 py-2 text-center text-xs font-medium text-gray-500 uppercase\",children:\"Status\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"bg-white divide-y divide-gray-200\",children:schedule.map(r=>/*#__PURE__*/_jsxs(\"tr\",{className:\"hover:bg-gray-50\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"px-3 py-2 whitespace-nowrap text-sm text-gray-900\",children:r.id}),/*#__PURE__*/_jsx(\"td\",{className:\"px-3 py-2 whitespace-nowrap text-sm text-gray-500\",children:r.segment_start||'-'}),/*#__PURE__*/_jsx(\"td\",{className:\"px-3 py-2 whitespace-nowrap text-sm text-gray-500\",children:r.segment_end||'-'}),/*#__PURE__*/_jsxs(\"td\",{className:\"px-3 py-2 whitespace-nowrap text-sm text-gray-900 text-right\",children:[getCurrencySymbol(currency),(r.remain_balance||0).toFixed(2)]}),/*#__PURE__*/_jsx(\"td\",{className:\"px-3 py-2 whitespace-nowrap text-center\",children:/*#__PURE__*/_jsx(\"span\",{className:\"px-2 py-1 rounded text-xs font-medium \".concat(r.repayment_status==='Paid'?'bg-green-100 text-green-800':r.repayment_status==='Partial'?'bg-yellow-100 text-yellow-800':'bg-gray-100 text-gray-800'),children:r.repayment_status||'Pending'})})]},r.id))})]})})]})]});}function ProductsPage(_ref4){let{token}=_ref4;const[products,setProducts]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState('');useEffect(()=>{if(!token)return;const load=async()=>{setLoading(true);setError('');try{const resp=await fetch(\"\".concat(apiBase,\"/wp/v2/loan-product?per_page=100&status=publish\"),{headers:getAuthHeaders(token),mode:'cors'});if(!resp.ok)throw new Error('Failed to load products');const data=await resp.json();setProducts(data||[]);}catch(e){setError(e.message||'Failed to load products');}finally{setLoading(false);}};load();},[token]);return/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mb-8\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-gray-900 mb-2\",children:\"Active Loan Products\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"Browse available loan products.\"})]})})}),loading&&/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500\",children:\"Loading products...\"}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-red-600\",children:error}),!loading&&!error&&products.length===0&&/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg shadow-sm border border-gray-200 p-12 text-center\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"No active products available.\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",children:products.map(p=>{var _p$title;return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-sm border border-gray-200 p-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900 mb-2\",children:p.product_name||((_p$title=p.title)===null||_p$title===void 0?void 0:_p$title.rendered)||'Loan Product'}),p.product_description&&/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 mb-4\",children:p.product_description}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2 text-sm\",children:[p.min_amount&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-600\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Min Amount:\"}),\" $\",p.min_amount]}),p.max_amount&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-600\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Max Amount:\"}),\" $\",p.max_amount]}),p.interest_rate&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-600\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Interest Rate:\"}),\" \",p.interest_rate,\"%\"]})]})]},p.id);})})]});}function NewsPage(){const[posts,setPosts]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState('');useEffect(()=>{const load=async()=>{setLoading(true);setError('');try{const resp=await fetch(\"\".concat(apiBase,\"/wp/v2/posts?per_page=5\"),{mode:'cors'});if(!resp.ok)throw new Error('Failed to load news');const data=await resp.json();setPosts(data||[]);}catch(e){setError(e.message||'Failed to load news');}finally{setLoading(false);}};load();},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mb-8\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-gray-900 mb-2\",children:\"News\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"Latest updates and announcements.\"})]})})}),loading&&/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500\",children:\"Loading news...\"}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-red-600\",children:error}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:posts.map(post=>{var _post$title,_post$excerpt,_post$content;return/*#__PURE__*/_jsxs(\"article\",{className:\"bg-white rounded-lg shadow-sm border border-gray-200 p-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900 mb-2\",children:((_post$title=post.title)===null||_post$title===void 0?void 0:_post$title.rendered)||'News'}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 mb-3\",children:new Date(post.date).toLocaleDateString()}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-600 line-clamp-3\",dangerouslySetInnerHTML:{__html:((_post$excerpt=post.excerpt)===null||_post$excerpt===void 0?void 0:_post$excerpt.rendered)||((_post$content=post.content)===null||_post$content===void 0?void 0:_post$content.rendered)||''}})]},post.id);})})]});}// Avatar utility function\nfunction getAvatarByBorrowerId(borrowerIdOrBorrower){const avatarImages=['monster.svg','monster (1).svg','monster (2).svg','monster (3).svg','monster (4).svg','monster (5).svg','monster (6).svg','monster (7).svg','monster (8).svg','monster (9).svg','monster (10).svg','monster (11).svg','monster (12).svg'];let avatarFilename=null;if(typeof borrowerIdOrBorrower==='object'&&borrowerIdOrBorrower!==null){var _borrower$meta,_borrower$fields,_borrower$meta2;const borrower=borrowerIdOrBorrower;let savedAvatar=borrower.avatar||((_borrower$meta=borrower.meta)===null||_borrower$meta===void 0?void 0:_borrower$meta.avatar)||((_borrower$fields=borrower.fields)===null||_borrower$fields===void 0?void 0:_borrower$fields.avatar)||(Array.isArray(borrower.avatar)?borrower.avatar[0]:null)||(Array.isArray((_borrower$meta2=borrower.meta)===null||_borrower$meta2===void 0?void 0:_borrower$meta2.avatar)?borrower.meta.avatar[0]:null);if(savedAvatar&&typeof savedAvatar==='object'){savedAvatar=savedAvatar.name||savedAvatar.filename||savedAvatar.url||savedAvatar;}if(savedAvatar&&typeof savedAvatar==='string'&&savedAvatar.trim()){avatarFilename=savedAvatar.trim();}if(!avatarFilename){const borrowerId=borrower.id||borrower.ID;if(borrowerId){const avatarIndex=borrowerId%avatarImages.length;avatarFilename=avatarImages[avatarIndex];}}}else if(typeof borrowerIdOrBorrower==='number'){const borrowerId=borrowerIdOrBorrower;const avatarIndex=borrowerId%avatarImages.length;avatarFilename=avatarImages[avatarIndex];}if(!avatarFilename){avatarFilename=avatarImages[0];}return\"/avatars/\".concat(avatarFilename);}function ProfilePage(_ref5){var _profile$meta;let{token}=_ref5;const{profile,loading,error}=useCurrentClient(token);const[activeTab,setActiveTab]=useState('general');const field=val=>val===null||val===undefined||val===''?'-':String(val);const fullName=profile?\"\".concat(profile.first_name||'',\" \").concat(profile.last_name||'').trim()||'Unknown Client':'Unknown Client';const initials=fullName.split(' ').map(n=>n[0]).join('').toUpperCase();return/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[loading&&/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500\",children:\"Loading profile...\"}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-red-600\",children:error}),!loading&&!error&&!profile&&/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500\",children:\"No client profile is linked to this account yet.\"}),profile&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"mb-8\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-6\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"img\",{src:getAvatarByBorrowerId(profile),alt:fullName,className:\"w-16 h-16 rounded-full object-cover mr-4\",onError:e=>{e.target.style.display='none';e.target.nextSibling.style.display='flex';}}),/*#__PURE__*/_jsx(\"div\",{className:\"w-16 h-16 bg-blue-600 rounded-full flex items-center justify-center text-white font-bold text-xl mr-4 hidden\",children:initials}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-gray-900 mb-1\",children:fullName}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-4\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-600\",children:[\"ID: \",profile.borrower_id||profile.id||'-']}),/*#__PURE__*/_jsx(\"span\",{className:\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800\",children:\"Active\"})]})]})]})})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-sm border border-gray-200\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"border-b border-gray-200\",children:/*#__PURE__*/_jsxs(\"nav\",{className:\"flex space-x-8 px-6\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setActiveTab('general'),className:\"py-4 px-1 border-b-2 font-medium text-sm \".concat(activeTab==='general'?'border-blue-500 text-blue-600':'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'),children:\"General Information\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setActiveTab('visa'),className:\"py-4 px-1 border-b-2 font-medium text-sm \".concat(activeTab==='visa'?'border-blue-500 text-blue-600':'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'),children:\"Visa Status\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setActiveTab('employment'),className:\"py-4 px-1 border-b-2 font-medium text-sm \".concat(activeTab==='employment'?'border-blue-500 text-blue-600':'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'),children:\"Employment\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setActiveTab('family'),className:\"py-4 px-1 border-b-2 font-medium text-sm \".concat(activeTab==='family'?'border-blue-500 text-blue-600':'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'),children:\"Family Information\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setActiveTab('bank'),className:\"py-4 px-1 border-b-2 font-medium text-sm \".concat(activeTab==='bank'?'border-blue-500 text-blue-600':'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'),children:\"Bank Details\"})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-6 text-sm text-gray-900\",children:[activeTab==='general'&&/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 mb-1\",children:\"First Name\"}),/*#__PURE__*/_jsx(\"p\",{className:\"font-medium\",children:field(profile.first_name)})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 mb-1\",children:\"Last Name\"}),/*#__PURE__*/_jsx(\"p\",{className:\"font-medium\",children:field(profile.last_name)})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 mb-1\",children:\"Email\"}),/*#__PURE__*/_jsx(\"p\",{className:\"font-medium\",children:field(profile.email_address)})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 mb-1\",children:\"Borrower ID\"}),/*#__PURE__*/_jsx(\"p\",{className:\"font-medium\",children:field(profile.borrower_id||((_profile$meta=profile.meta)===null||_profile$meta===void 0?void 0:_profile$meta.borrower_id))})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 mb-1\",children:\"Date of Birth\"}),/*#__PURE__*/_jsx(\"p\",{className:\"font-medium\",children:field(profile.date_of_birth)})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 mb-1\",children:\"Mobile Number\"}),/*#__PURE__*/_jsx(\"p\",{className:\"font-medium\",children:field(profile.mobile_number)})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 mb-1\",children:\"Registration Number\"}),/*#__PURE__*/_jsx(\"p\",{className:\"font-medium\",children:field(profile.registration_number)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"md:col-span-2\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 mb-1\",children:\"Home Address\"}),/*#__PURE__*/_jsx(\"p\",{className:\"font-medium whitespace-pre-line\",children:field(profile.home_address)})]})]}),activeTab==='visa'&&/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 mb-1\",children:\"Visa Type\"}),/*#__PURE__*/_jsx(\"p\",{className:\"font-medium\",children:field(profile.visa_type)})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 mb-1\",children:\"Visa Expiry Date\"}),/*#__PURE__*/_jsx(\"p\",{className:\"font-medium\",children:field(profile.visa_expiry_date)})]})]}),activeTab==='employment'&&/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 mb-1\",children:\"Employment Status\"}),/*#__PURE__*/_jsx(\"p\",{className:\"font-medium\",children:field(profile.employment_status)})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 mb-1\",children:\"Work Rights\"}),/*#__PURE__*/_jsx(\"p\",{className:\"font-medium\",children:field(profile.work_rights)})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 mb-1\",children:\"Employer Name\"}),/*#__PURE__*/_jsx(\"p\",{className:\"font-medium\",children:field(profile.employer_name)})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 mb-1\",children:\"Job Title\"}),/*#__PURE__*/_jsx(\"p\",{className:\"font-medium\",children:field(profile.job_title)})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 mb-1\",children:\"Monthly Income (AUD)\"}),/*#__PURE__*/_jsx(\"p\",{className:\"font-medium\",children:field(profile.monthly_income_aud)})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 mb-1\",children:\"Employment Start Date\"}),/*#__PURE__*/_jsx(\"p\",{className:\"font-medium\",children:field(profile.employment_start_date)})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 mb-1\",children:\"Employer Phone\"}),/*#__PURE__*/_jsx(\"p\",{className:\"font-medium\",children:field(profile.employer_phone)})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 mb-1\",children:\"Employer Email\"}),/*#__PURE__*/_jsx(\"p\",{className:\"font-medium\",children:field(profile.employer_email)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"md:col-span-2\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 mb-1\",children:\"Employer Address\"}),/*#__PURE__*/_jsx(\"p\",{className:\"font-medium whitespace-pre-line\",children:field(profile.employer_address)})]})]}),activeTab==='family'&&/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 mb-1\",children:\"Marital Status\"}),/*#__PURE__*/_jsx(\"p\",{className:\"font-medium\",children:field(profile.marital_status)})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 mb-1\",children:\"Family Relationship\"}),/*#__PURE__*/_jsx(\"p\",{className:\"font-medium\",children:field(profile.family_relationship)})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 mb-1\",children:\"Family Member Name\"}),/*#__PURE__*/_jsx(\"p\",{className:\"font-medium\",children:field(profile.family_member_full_name)})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 mb-1\",children:\"Family Member Phone\"}),/*#__PURE__*/_jsx(\"p\",{className:\"font-medium\",children:field(profile.family_member_phone)})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 mb-1\",children:\"Family Member Email\"}),/*#__PURE__*/_jsx(\"p\",{className:\"font-medium\",children:field(profile.family_member_email)})]})]}),activeTab==='bank'&&/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 mb-1\",children:\"Bank Name\"}),/*#__PURE__*/_jsx(\"p\",{className:\"font-medium\",children:field(profile.bank_name)})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 mb-1\",children:\"Account Name\"}),/*#__PURE__*/_jsx(\"p\",{className:\"font-medium\",children:field(profile.account_name)})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 mb-1\",children:\"BSB Number\"}),/*#__PURE__*/_jsx(\"p\",{className:\"font-medium\",children:field(profile.bsb_number)})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 mb-1\",children:\"Account Number\"}),/*#__PURE__*/_jsx(\"p\",{className:\"font-medium\",children:field(profile.account_number)})]})]})]})]})]})]});}function ClientApp(){const[token,setToken]=useState(localStorage.getItem('jwt_token'));const[user,setUser]=useState(()=>{try{const s=localStorage.getItem('user');return s?JSON.parse(s):null;}catch(_unused){return null;}});const{profile}=useCurrentClient(token);const location=useLocation();const getCurrentView=()=>{const path=location.pathname;if(path==='/'||path==='/dashboard')return'dashboard';if(path.startsWith('/loans'))return'loans';if(path==='/products')return'products';if(path==='/news')return'news';if(path==='/profile')return'profile';return'dashboard';};const handleLogout=()=>{localStorage.removeItem('jwt_token');localStorage.removeItem('user');window.location.reload();};if(!token){return/*#__PURE__*/_jsx(Login,{onLoginSuccess:(newToken,userData)=>{setToken(newToken);setUser(userData);}});}return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gray-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex\",children:[/*#__PURE__*/_jsx(Sidebar,{currentView:getCurrentView()}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 flex flex-col\",children:[/*#__PURE__*/_jsx(Header,{user:user,profile:profile,onLogout:handleLogout}),/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(DashboardPage,{token:token,user:user})}),/*#__PURE__*/_jsx(Route,{path:\"/dashboard\",element:/*#__PURE__*/_jsx(DashboardPage,{token:token,user:user})}),/*#__PURE__*/_jsx(Route,{path:\"/loans\",element:/*#__PURE__*/_jsx(LoansPage,{token:token})}),/*#__PURE__*/_jsx(Route,{path:\"/loans/:id\",element:/*#__PURE__*/_jsx(LoanDetailPage,{token:token})}),/*#__PURE__*/_jsx(Route,{path:\"/products\",element:/*#__PURE__*/_jsx(ProductsPage,{token:token})}),/*#__PURE__*/_jsx(Route,{path:\"/news\",element:/*#__PURE__*/_jsx(NewsPage,{})}),/*#__PURE__*/_jsx(Route,{path:\"/profile\",element:/*#__PURE__*/_jsx(ProfilePage,{token:token})})]})]})]})});}function App(){return/*#__PURE__*/_jsx(BrowserRouter,{children:/*#__PURE__*/_jsx(ClientApp,{})});}export default App;","map":{"version":3,"names":["React","useEffect","useState","useMemo","BrowserRouter","Routes","Route","useNavigate","useParams","useLocation","Login","Sidebar","Header","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","apiBase","window","REACT_APP_API_URL","process","env","concat","location","origin","getAuthHeaders","token","Authorization","useCurrentClient","profile","setProfile","loading","setLoading","error","setError","cancelled","load","userEmail","stored","localStorage","getItem","parsed","JSON","parse","user_email","email","toString","toLowerCase","trim","_","meResp","fetch","method","headers","mode","ok","me","json","user_email_address","Error","listResp","list","matched","Array","isArray","length","find","b","_b$meta","_b$fields","_b$meta2","_b$fields2","be","email_address","meta","fields","borrower_email","e","message","DashboardPage","_ref","_profile$title","_nextLoan$title","_nextLoan$meta","user","loans","setLoans","loanError","setLoanError","loadLoans","resp","data","filtered","filter","loan","_loan$meta","_loan$fields","String","borrower_id","id","nextLoan","className","children","username","first_name","title","rendered","fill","stroke","viewBox","strokeLinecap","strokeLinejoin","strokeWidth","d","loan_title","loan_status","LoansPage","_ref2","navigate","_loan$meta2","_loan$fields2","map","_loan$title","_loan$meta3","onClick","LoanDetailPage","_ref3","_loan$meta4","_loan$title2","_loan$meta5","_loan$meta6","setLoan","schedule","setSchedule","loanResp","loanJson","scheduleResp","scheduleJson","success","currency","loan_currency","getCurrencySymbol","c","loan_amount","r","segment_start","segment_end","remain_balance","toFixed","repayment_status","ProductsPage","_ref4","products","setProducts","p","_p$title","product_name","product_description","min_amount","max_amount","interest_rate","NewsPage","posts","setPosts","post","_post$title","_post$excerpt","_post$content","Date","date","toLocaleDateString","dangerouslySetInnerHTML","__html","excerpt","content","getAvatarByBorrowerId","borrowerIdOrBorrower","avatarImages","avatarFilename","_borrower$meta","_borrower$fields","_borrower$meta2","borrower","savedAvatar","avatar","name","filename","url","borrowerId","ID","avatarIndex","ProfilePage","_ref5","_profile$meta","activeTab","setActiveTab","field","val","undefined","fullName","last_name","initials","split","n","join","toUpperCase","src","alt","onError","target","style","display","nextSibling","type","date_of_birth","mobile_number","registration_number","home_address","visa_type","visa_expiry_date","employment_status","work_rights","employer_name","job_title","monthly_income_aud","employment_start_date","employer_phone","employer_email","employer_address","marital_status","family_relationship","family_member_full_name","family_member_phone","family_member_email","bank_name","account_name","bsb_number","account_number","ClientApp","setToken","setUser","s","_unused","getCurrentView","path","pathname","startsWith","handleLogout","removeItem","reload","onLoginSuccess","newToken","userData","currentView","onLogout","element","App"],"sources":["/Volumes/Main Data/EchoVault LMS/EchoVault v1/echovault-user-frontend/src/App.js"],"sourcesContent":["import React, { useEffect, useState, useMemo } from 'react';\nimport {\n  BrowserRouter,\n  Routes,\n  Route,\n  useNavigate,\n  useParams,\n  useLocation\n} from 'react-router-dom';\nimport Login from './Login';\nimport Sidebar from './Sidebar';\nimport Header from './Header';\nimport './App.css';\nimport './styles.css';\n\nconst apiBase =\n  (typeof window !== 'undefined' && window.REACT_APP_API_URL) ||\n  process.env.REACT_APP_API_URL ||\n  `${window.location.origin}/wp-json`;\n\nfunction getAuthHeaders(token) {\n  return {\n    'Content-Type': 'application/json',\n    Authorization: `Bearer ${token}`\n  };\n}\n\nfunction useCurrentClient(token) {\n  const [profile, setProfile] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n\n  useEffect(() => {\n    if (!token) return;\n    let cancelled = false;\n\n    const load = async () => {\n      setLoading(true);\n      setError('');\n      try {\n        // 1) Get email from locally stored user (set at login)\n        let userEmail = '';\n        try {\n          const stored = localStorage.getItem('user');\n          if (stored) {\n            const parsed = JSON.parse(stored);\n            userEmail =\n              (parsed.user_email || parsed.email || '')\n                .toString()\n                .toLowerCase()\n                .trim();\n          }\n        } catch (_) {}\n\n        // 2) Fallback to /users/me only if we couldn't get it from localStorage\n        if (!userEmail) {\n          const meResp = await fetch(`${apiBase}/wp/v2/users/me`, {\n            method: 'GET',\n            headers: {\n              Authorization: `Bearer ${token}`,\n              'Content-Type': 'application/json',\n            },\n            mode: 'cors',\n          });\n\n          if (meResp.ok) {\n            const me = await meResp.json();\n            userEmail = (\n              me.email ||\n              me.user_email ||\n              me.user_email_address ||\n              ''\n            )\n              .toString()\n              .toLowerCase()\n              .trim();\n          }\n        }\n\n        if (!userEmail) {\n          throw new Error('Current user email not found');\n        }\n\n        // 2) Load all borrowers visible to this token\n        const listResp = await fetch(\n          `${apiBase}/wp/v2/borrower-profile?per_page=100&context=edit`,\n          { headers: getAuthHeaders(token), mode: 'cors' }\n        );\n\n        if (!listResp.ok) {\n          throw new Error('Failed to load borrower profiles');\n        }\n\n        const list = await listResp.json();\n\n        let matched = null;\n        if (Array.isArray(list) && list.length) {\n          matched =\n            list.find((b) => {\n              const be = (\n                b.email_address ||\n                b.email ||\n                b.meta?.email_address ||\n                b.fields?.email_address ||\n                b.meta?.borrower_email ||\n                b.fields?.borrower_email ||\n                ''\n              )\n                .toString()\n                .toLowerCase()\n                .trim();\n              return be && be === userEmail;\n            }) || null;\n        }\n\n        if (!matched) {\n          throw new Error('No borrower profile found for this account');\n        }\n\n        if (!cancelled) {\n          setProfile(matched);\n        }\n      } catch (e) {\n        if (!cancelled) {\n          setError(e.message || 'Failed to load profile');\n          setProfile(null);\n        }\n      } finally {\n        if (!cancelled) {\n          setLoading(false);\n        }\n      }\n    };\n\n    load();\n\n    return () => {\n      cancelled = true;\n    };\n  }, [token]);\n\n  return { profile, loading, error };\n}\n\nfunction DashboardPage({ token, user }) {\n  const { profile, loading, error } = useCurrentClient(token);\n  const [loans, setLoans] = useState([]);\n  const [loanError, setLoanError] = useState('');\n\n  useEffect(() => {\n    if (!token || !profile) return;\n    const loadLoans = async () => {\n      try {\n        setLoanError('');\n        const resp = await fetch(\n          `${apiBase}/wp/v2/loans?per_page=100&context=edit`,\n          { headers: getAuthHeaders(token), mode: 'cors' }\n        );\n        if (!resp.ok) throw new Error('Failed to load loans');\n        const data = await resp.json();\n        const filtered = data.filter(\n          (loan) =>\n            String(loan.meta?.borrower_id) === String(profile.id) ||\n            String(loan.fields?.borrower_id) === String(profile.id)\n        );\n        setLoans(filtered);\n      } catch (e) {\n        setLoanError(e.message || 'Failed to load loans');\n      }\n    };\n    loadLoans();\n  }, [token, profile]);\n\n  const nextLoan = useMemo(() => loans[0] || null, [loans]);\n\n  return (\n    <div className=\"p-6\">\n      <div className=\"mb-8\">\n        <div className=\"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4\">\n      <div>\n            <h1 className=\"text-2xl font-bold text-gray-900 mb-2\">Dashboard</h1>\n            <p className=\"text-gray-600\">\n              Welcome back, {user?.username || profile?.first_name || profile?.title?.rendered || 'Client'}\n            </p>\n          </div>\n        </div>\n      </div>\n\n      {loading && <p className=\"text-sm text-gray-500\">Loading profile...</p>}\n      {error && <p className=\"text-sm text-red-600\">{error}</p>}\n\n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8\">\n        <div className=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6\">\n          <div className=\"flex items-center\">\n            <div className=\"p-3 bg-blue-100 rounded-lg\">\n              <svg className=\"w-6 h-6 text-blue-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 6h16M4 10h16M4 14h16M4 18h16\" />\n              </svg>\n            </div>\n            <div className=\"ml-4\">\n              <p className=\"text-sm font-medium text-gray-600\">Total Loans</p>\n              <p className=\"text-2xl font-bold text-gray-900\">{loans.length}</p>\n            </div>\n          </div>\n        </div>\n        <div className=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6 col-span-2\">\n          <div className=\"flex items-center\">\n            <div className=\"p-3 bg-green-100 rounded-lg\">\n              <svg className=\"w-6 h-6 text-green-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\" />\n              </svg>\n            </div>\n            <div className=\"ml-4 flex-1\">\n              <p className=\"text-sm font-medium text-gray-600\">Next Loan</p>\n              {loanError && <p className=\"mt-1 text-sm text-red-600\">{loanError}</p>}\n          {!loanError && !nextLoan && (\n                <p className=\"mt-1 text-sm text-gray-600\">No active loans found.</p>\n          )}\n          {nextLoan && (\n                <div className=\"mt-1\">\n                  <p className=\"text-lg font-semibold text-gray-900\">\n                {nextLoan.title?.rendered || nextLoan.loan_title || `Loan #${nextLoan.id}`}\n              </p>\n                  <p className=\"text-sm text-gray-500\">\n                Status: {nextLoan.meta?.loan_status || 'Active'}\n              </p>\n            </div>\n          )}\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nfunction LoansPage({ token }) {\n  const { profile } = useCurrentClient(token);\n  const [loans, setLoans] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    if (!token || !profile) return;\n    const load = async () => {\n      setLoading(true);\n      setError('');\n      try {\n        const resp = await fetch(\n          `${apiBase}/wp/v2/loans?per_page=100&context=edit`,\n          { headers: getAuthHeaders(token), mode: 'cors' }\n        );\n        if (!resp.ok) throw new Error('Failed to load loans');\n        const data = await resp.json();\n        const filtered = data.filter(\n          (loan) =>\n            String(loan.meta?.borrower_id) === String(profile.id) ||\n            String(loan.fields?.borrower_id) === String(profile.id)\n        );\n        setLoans(filtered);\n      } catch (e) {\n        setError(e.message || 'Failed to load loans');\n      } finally {\n        setLoading(false);\n      }\n    };\n    load();\n  }, [token, profile]);\n\n  return (\n    <div className=\"p-6\">\n      <div className=\"mb-8\">\n        <div className=\"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4\">\n      <div>\n            <h1 className=\"text-2xl font-bold text-gray-900 mb-2\">My Loans</h1>\n            <p className=\"text-gray-600\">View your active and past loans.</p>\n          </div>\n        </div>\n      </div>\n      {loading && <p className=\"text-sm text-gray-500\">Loading loans...</p>}\n      {error && <p className=\"text-sm text-red-600\">{error}</p>}\n      {!loading && !error && loans.length === 0 && (\n        <div className=\"bg-white rounded-lg shadow-sm border border-gray-200 p-12 text-center\">\n          <p className=\"text-gray-600\">You do not have any loans yet.</p>\n        </div>\n      )}\n      {loans.length > 0 && (\n        <div className=\"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden\">\n          <table className=\"min-w-full divide-y divide-gray-200\">\n            <thead className=\"bg-gray-50\">\n              <tr>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Loan</th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Status</th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Actions</th>\n              </tr>\n            </thead>\n            <tbody className=\"bg-white divide-y divide-gray-200\">\n              {loans.map((loan) => (\n                <tr key={loan.id} className=\"hover:bg-gray-50\">\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900\">\n                    {loan.title?.rendered || loan.loan_title || `Loan #${loan.id}`}\n                  </td>\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\n                    {loan.meta?.loan_status || 'Active'}\n                  </td>\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm\">\n                    <button\n                      onClick={() => navigate(`/loans/${loan.id}`)}\n                      className=\"text-blue-600 hover:text-blue-700 font-medium\"\n                    >\n                      View details\n                    </button>\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n      )}\n    </div>\n  );\n}\n\nfunction LoanDetailPage({ token }) {\n  const { id } = useParams();\n  const [loan, setLoan] = useState(null);\n  const [schedule, setSchedule] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    if (!token || !id) return;\n    const load = async () => {\n      setLoading(true);\n      setError('');\n      try {\n        const loanResp = await fetch(\n          `${apiBase}/wp/v2/loans/${id}?context=edit`,\n          { headers: getAuthHeaders(token), mode: 'cors' }\n        );\n        if (!loanResp.ok) throw new Error('Failed to load loan');\n        const loanJson = await loanResp.json();\n        setLoan(loanJson);\n\n        const scheduleResp = await fetch(\n          `${apiBase}/echovault/v2/get-repayment-schedule?loan_id=${id}`,\n          { headers: { Authorization: `Bearer ${token}` }, mode: 'cors' }\n        );\n        if (scheduleResp.ok) {\n          const scheduleJson = await scheduleResp.json();\n          if (scheduleJson.success && scheduleJson.schedule) {\n            setSchedule(scheduleJson.schedule);\n          }\n        }\n      } catch (e) {\n        setError(e.message || 'Failed to load loan');\n      } finally {\n        setLoading(false);\n      }\n    };\n    load();\n  }, [token, id]);\n\n  const currency = loan?.loan_currency || loan?.meta?.loan_currency || 'AUD';\n  const getCurrencySymbol = (c) => (c === 'MNT' ? 'â‚®' : '$');\n\n  return (\n    <div className=\"p-6\">\n      <div className=\"mb-8\">\n        <button\n          onClick={() => navigate('/loans')}\n          className=\"text-sm text-gray-600 hover:text-gray-900 mb-4 inline-flex items-center\"\n        >\n          <svg className=\"w-4 h-4 mr-1\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 19l-7-7 7-7\" />\n          </svg>\n          Back to Loans\n        </button>\n        <h1 className=\"text-2xl font-bold text-gray-900 mb-2\">Loan Details</h1>\n      </div>\n      {loading && <p className=\"text-sm text-gray-500\">Loading...</p>}\n      {error && <p className=\"text-sm text-red-600\">{error}</p>}\n      {loan && (\n        <div className=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6\">\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm\">\n            <div>\n              <p className=\"text-gray-500\">Loan Title</p>\n              <p className=\"font-medium text-gray-900 mt-1\">\n            {loan.title?.rendered || loan.loan_title || `Loan #${loan.id}`}\n          </p>\n            </div>\n            <div>\n              <p className=\"text-gray-500\">Status</p>\n              <p className=\"font-medium text-gray-900 mt-1\">\n                {loan.meta?.loan_status || 'Active'}\n              </p>\n            </div>\n            <div>\n              <p className=\"text-gray-500\">Loan Amount</p>\n              <p className=\"font-medium text-gray-900 mt-1\">\n                {getCurrencySymbol(currency)}{loan.loan_amount || loan.meta?.loan_amount || '0'}\n              </p>\n            </div>\n            <div>\n              <p className=\"text-gray-500\">Currency</p>\n              <p className=\"font-medium text-gray-900 mt-1\">{currency}</p>\n            </div>\n          </div>\n        </div>\n      )}\n      {schedule.length > 0 && (\n        <div className=\"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden\">\n          <div className=\"px-6 py-4 border-b border-gray-200\">\n            <h2 className=\"text-lg font-semibold text-gray-900\">Repayment Schedule</h2>\n          </div>\n          <div className=\"overflow-x-auto\">\n            <table className=\"min-w-full divide-y divide-gray-200 text-xs\">\n            <thead className=\"bg-gray-50\">\n              <tr>\n                  <th className=\"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase\">ID</th>\n                  <th className=\"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase\">Start</th>\n                  <th className=\"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase\">End</th>\n                  <th className=\"px-3 py-2 text-right text-xs font-medium text-gray-500 uppercase\">Remain Balance</th>\n                  <th className=\"px-3 py-2 text-center text-xs font-medium text-gray-500 uppercase\">Status</th>\n              </tr>\n            </thead>\n              <tbody className=\"bg-white divide-y divide-gray-200\">\n              {schedule.map((r) => (\n                  <tr key={r.id} className=\"hover:bg-gray-50\">\n                    <td className=\"px-3 py-2 whitespace-nowrap text-sm text-gray-900\">{r.id}</td>\n                    <td className=\"px-3 py-2 whitespace-nowrap text-sm text-gray-500\">{r.segment_start || '-'}</td>\n                    <td className=\"px-3 py-2 whitespace-nowrap text-sm text-gray-500\">{r.segment_end || '-'}</td>\n                    <td className=\"px-3 py-2 whitespace-nowrap text-sm text-gray-900 text-right\">\n                      {getCurrencySymbol(currency)}{(r.remain_balance || 0).toFixed(2)}\n                    </td>\n                    <td className=\"px-3 py-2 whitespace-nowrap text-center\">\n                      <span className={`px-2 py-1 rounded text-xs font-medium ${\n                        r.repayment_status === 'Paid' ? 'bg-green-100 text-green-800' :\n                        r.repayment_status === 'Partial' ? 'bg-yellow-100 text-yellow-800' :\n                        'bg-gray-100 text-gray-800'\n                      }`}>\n                    {r.repayment_status || 'Pending'}\n                      </span>\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n\nfunction ProductsPage({ token }) {\n  const [products, setProducts] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n\n  useEffect(() => {\n    if (!token) return;\n    const load = async () => {\n      setLoading(true);\n      setError('');\n      try {\n        const resp = await fetch(\n          `${apiBase}/wp/v2/loan-product?per_page=100&status=publish`,\n          { headers: getAuthHeaders(token), mode: 'cors' }\n        );\n        if (!resp.ok) throw new Error('Failed to load products');\n        const data = await resp.json();\n        setProducts(data || []);\n      } catch (e) {\n        setError(e.message || 'Failed to load products');\n      } finally {\n        setLoading(false);\n      }\n    };\n    load();\n  }, [token]);\n\n  return (\n    <div className=\"p-6\">\n      <div className=\"mb-8\">\n        <div className=\"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4\">\n          <div>\n            <h1 className=\"text-2xl font-bold text-gray-900 mb-2\">Active Loan Products</h1>\n            <p className=\"text-gray-600\">Browse available loan products.</p>\n          </div>\n        </div>\n      </div>\n      {loading && <p className=\"text-sm text-gray-500\">Loading products...</p>}\n      {error && <p className=\"text-sm text-red-600\">{error}</p>}\n      {!loading && !error && products.length === 0 && (\n        <div className=\"bg-white rounded-lg shadow-sm border border-gray-200 p-12 text-center\">\n          <p className=\"text-gray-600\">No active products available.</p>\n        </div>\n      )}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n        {products.map((p) => (\n          <div\n            key={p.id}\n            className=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6\"\n          >\n            <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">\n              {p.product_name || p.title?.rendered || 'Loan Product'}\n            </h3>\n            {p.product_description && (\n              <p className=\"text-sm text-gray-600 mb-4\">{p.product_description}</p>\n            )}\n            <div className=\"space-y-2 text-sm\">\n              {p.min_amount && (\n                <p className=\"text-gray-600\">\n                  <span className=\"font-medium\">Min Amount:</span> ${p.min_amount}\n                </p>\n              )}\n              {p.max_amount && (\n                <p className=\"text-gray-600\">\n                  <span className=\"font-medium\">Max Amount:</span> ${p.max_amount}\n                </p>\n              )}\n              {p.interest_rate && (\n                <p className=\"text-gray-600\">\n                  <span className=\"font-medium\">Interest Rate:</span> {p.interest_rate}%\n                </p>\n              )}\n            </div>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n}\n\nfunction NewsPage() {\n  const [posts, setPosts] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n\n  useEffect(() => {\n    const load = async () => {\n      setLoading(true);\n      setError('');\n      try {\n        const resp = await fetch(`${apiBase}/wp/v2/posts?per_page=5`, {\n          mode: 'cors'\n        });\n        if (!resp.ok) throw new Error('Failed to load news');\n        const data = await resp.json();\n        setPosts(data || []);\n      } catch (e) {\n        setError(e.message || 'Failed to load news');\n      } finally {\n        setLoading(false);\n      }\n    };\n    load();\n  }, []);\n\n  return (\n    <div className=\"p-6\">\n      <div className=\"mb-8\">\n        <div className=\"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4\">\n          <div>\n            <h1 className=\"text-2xl font-bold text-gray-900 mb-2\">News</h1>\n            <p className=\"text-gray-600\">Latest updates and announcements.</p>\n          </div>\n        </div>\n      </div>\n      {loading && <p className=\"text-sm text-gray-500\">Loading news...</p>}\n      {error && <p className=\"text-sm text-red-600\">{error}</p>}\n      <div className=\"space-y-4\">\n        {posts.map((post) => (\n          <article key={post.id} className=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6\">\n            <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">\n              {post.title?.rendered || 'News'}\n            </h3>\n            <p className=\"text-xs text-gray-500 mb-3\">\n              {new Date(post.date).toLocaleDateString()}\n            </p>\n            <div\n              className=\"text-sm text-gray-600 line-clamp-3\"\n              dangerouslySetInnerHTML={{ __html: post.excerpt?.rendered || post.content?.rendered || '' }}\n            />\n          </article>\n        ))}\n      </div>\n    </div>\n  );\n}\n\n// Avatar utility function\nfunction getAvatarByBorrowerId(borrowerIdOrBorrower) {\n  const avatarImages = [\n    'monster.svg',\n    'monster (1).svg',\n    'monster (2).svg',\n    'monster (3).svg',\n    'monster (4).svg',\n    'monster (5).svg',\n    'monster (6).svg',\n    'monster (7).svg',\n    'monster (8).svg',\n    'monster (9).svg',\n    'monster (10).svg',\n    'monster (11).svg',\n    'monster (12).svg'\n  ];\n\n  let avatarFilename = null;\n  \n  if (typeof borrowerIdOrBorrower === 'object' && borrowerIdOrBorrower !== null) {\n    const borrower = borrowerIdOrBorrower;\n    let savedAvatar = borrower.avatar || \n                     borrower.meta?.avatar || \n                     borrower.fields?.avatar ||\n                     (Array.isArray(borrower.avatar) ? borrower.avatar[0] : null) ||\n                     (Array.isArray(borrower.meta?.avatar) ? borrower.meta.avatar[0] : null);\n    \n    if (savedAvatar && typeof savedAvatar === 'object') {\n      savedAvatar = savedAvatar.name || savedAvatar.filename || savedAvatar.url || savedAvatar;\n    }\n    \n    if (savedAvatar && typeof savedAvatar === 'string' && savedAvatar.trim()) {\n      avatarFilename = savedAvatar.trim();\n    }\n    \n    if (!avatarFilename) {\n      const borrowerId = borrower.id || borrower.ID;\n      if (borrowerId) {\n        const avatarIndex = borrowerId % avatarImages.length;\n        avatarFilename = avatarImages[avatarIndex];\n      }\n    }\n  } else if (typeof borrowerIdOrBorrower === 'number') {\n    const borrowerId = borrowerIdOrBorrower;\n    const avatarIndex = borrowerId % avatarImages.length;\n    avatarFilename = avatarImages[avatarIndex];\n  }\n  \n  if (!avatarFilename) {\n    avatarFilename = avatarImages[0];\n  }\n  \n  return `/avatars/${avatarFilename}`;\n}\n\nfunction ProfilePage({ token }) {\n  const { profile, loading, error } = useCurrentClient(token);\n  const [activeTab, setActiveTab] = useState('general');\n\n  const field = (val) =>\n    val === null || val === undefined || val === '' ? '-' : String(val);\n\n  const fullName = profile \n    ? `${profile.first_name || ''} ${profile.last_name || ''}`.trim() || 'Unknown Client'\n    : 'Unknown Client';\n  const initials = fullName.split(' ').map(n => n[0]).join('').toUpperCase();\n\n  return (\n    <div className=\"p-6\">\n      {loading && <p className=\"text-sm text-gray-500\">Loading profile...</p>}\n      {error && <p className=\"text-sm text-red-600\">{error}</p>}\n      {!loading && !error && !profile && (\n        <p className=\"text-sm text-gray-500\">\n          No client profile is linked to this account yet.\n        </p>\n      )}\n\n      {profile && (\n        <>\n          {/* Header - matching admin side */}\n          <div className=\"mb-8\">\n            <div className=\"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-6\">\n              <div className=\"flex items-center\">\n                <div className=\"flex items-center\">\n                  <img\n                    src={getAvatarByBorrowerId(profile)}\n                    alt={fullName}\n                    className=\"w-16 h-16 rounded-full object-cover mr-4\"\n                    onError={(e) => {\n                      e.target.style.display = 'none';\n                      e.target.nextSibling.style.display = 'flex';\n                    }}\n                  />\n                  <div \n                    className=\"w-16 h-16 bg-blue-600 rounded-full flex items-center justify-center text-white font-bold text-xl mr-4 hidden\"\n                  >\n                    {initials}\n                  </div>\n                  <div>\n                    <h1 className=\"text-2xl font-bold text-gray-900 mb-1\">\n                      {fullName}\n                    </h1>\n                    <div className=\"flex items-center gap-4\">\n                      <p className=\"text-gray-600\">ID: {profile.borrower_id || profile.id || '-'}</p>\n                      <span className=\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800\">\n                        Active\n                      </span>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"bg-white rounded-lg shadow-sm border border-gray-200\">\n            {/* Tabs */}\n            <div className=\"border-b border-gray-200\">\n            <nav className=\"flex space-x-8 px-6\">\n              <button\n                type=\"button\"\n                onClick={() => setActiveTab('general')}\n                className={`py-4 px-1 border-b-2 font-medium text-sm ${\n                  activeTab === 'general'\n                    ? 'border-blue-500 text-blue-600'\n                    : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'\n                }`}\n              >\n                General Information\n              </button>\n              <button\n                type=\"button\"\n                onClick={() => setActiveTab('visa')}\n                className={`py-4 px-1 border-b-2 font-medium text-sm ${\n                  activeTab === 'visa'\n                    ? 'border-blue-500 text-blue-600'\n                    : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'\n                }`}\n              >\n                Visa Status\n              </button>\n              <button\n                type=\"button\"\n                onClick={() => setActiveTab('employment')}\n                className={`py-4 px-1 border-b-2 font-medium text-sm ${\n                  activeTab === 'employment'\n                    ? 'border-blue-500 text-blue-600'\n                    : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'\n                }`}\n              >\n                Employment\n              </button>\n              <button\n                type=\"button\"\n                onClick={() => setActiveTab('family')}\n                className={`py-4 px-1 border-b-2 font-medium text-sm ${\n                  activeTab === 'family'\n                    ? 'border-blue-500 text-blue-600'\n                    : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'\n                }`}\n              >\n                Family Information\n              </button>\n              <button\n                type=\"button\"\n                onClick={() => setActiveTab('bank')}\n                className={`py-4 px-1 border-b-2 font-medium text-sm ${\n                  activeTab === 'bank'\n                    ? 'border-blue-500 text-blue-600'\n                    : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'\n                }`}\n              >\n                Bank Details\n              </button>\n            </nav>\n          </div>\n\n          {/* Tab content â€“ read only */}\n          <div className=\"p-6 text-sm text-gray-900\">\n            {activeTab === 'general' && (\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                <div>\n                  <p className=\"text-gray-500 mb-1\">First Name</p>\n                  <p className=\"font-medium\">{field(profile.first_name)}</p>\n                </div>\n                <div>\n                  <p className=\"text-gray-500 mb-1\">Last Name</p>\n                  <p className=\"font-medium\">{field(profile.last_name)}</p>\n                </div>\n                <div>\n                  <p className=\"text-gray-500 mb-1\">Email</p>\n                  <p className=\"font-medium\">{field(profile.email_address)}</p>\n                </div>\n                <div>\n                  <p className=\"text-gray-500 mb-1\">Borrower ID</p>\n                  <p className=\"font-medium\">\n                    {field(profile.borrower_id || profile.meta?.borrower_id)}\n                  </p>\n                </div>\n                <div>\n                  <p className=\"text-gray-500 mb-1\">Date of Birth</p>\n                  <p className=\"font-medium\">{field(profile.date_of_birth)}</p>\n                </div>\n                <div>\n                  <p className=\"text-gray-500 mb-1\">Mobile Number</p>\n                  <p className=\"font-medium\">{field(profile.mobile_number)}</p>\n                </div>\n                <div>\n                  <p className=\"text-gray-500 mb-1\">Registration Number</p>\n                  <p className=\"font-medium\">\n                    {field(profile.registration_number)}\n                  </p>\n                </div>\n                <div className=\"md:col-span-2\">\n                  <p className=\"text-gray-500 mb-1\">Home Address</p>\n                  <p className=\"font-medium whitespace-pre-line\">\n                    {field(profile.home_address)}\n                  </p>\n                </div>\n              </div>\n            )}\n\n            {activeTab === 'visa' && (\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                <div>\n                  <p className=\"text-gray-500 mb-1\">Visa Type</p>\n                  <p className=\"font-medium\">{field(profile.visa_type)}</p>\n                </div>\n                <div>\n                  <p className=\"text-gray-500 mb-1\">Visa Expiry Date</p>\n                  <p className=\"font-medium\">\n                    {field(profile.visa_expiry_date)}\n                  </p>\n                </div>\n              </div>\n            )}\n\n            {activeTab === 'employment' && (\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                <div>\n                  <p className=\"text-gray-500 mb-1\">Employment Status</p>\n                  <p className=\"font-medium\">\n                    {field(profile.employment_status)}\n                  </p>\n                </div>\n                <div>\n                  <p className=\"text-gray-500 mb-1\">Work Rights</p>\n                  <p className=\"font-medium\">{field(profile.work_rights)}</p>\n                </div>\n                <div>\n                  <p className=\"text-gray-500 mb-1\">Employer Name</p>\n                  <p className=\"font-medium\">{field(profile.employer_name)}</p>\n                </div>\n                <div>\n                  <p className=\"text-gray-500 mb-1\">Job Title</p>\n                  <p className=\"font-medium\">{field(profile.job_title)}</p>\n                </div>\n                <div>\n                  <p className=\"text-gray-500 mb-1\">Monthly Income (AUD)</p>\n                  <p className=\"font-medium\">\n                    {field(profile.monthly_income_aud)}\n                  </p>\n                </div>\n                <div>\n                  <p className=\"text-gray-500 mb-1\">Employment Start Date</p>\n                  <p className=\"font-medium\">\n                    {field(profile.employment_start_date)}\n                  </p>\n                </div>\n                <div>\n                  <p className=\"text-gray-500 mb-1\">Employer Phone</p>\n                  <p className=\"font-medium\">\n                    {field(profile.employer_phone)}\n                  </p>\n                </div>\n                <div>\n                  <p className=\"text-gray-500 mb-1\">Employer Email</p>\n                  <p className=\"font-medium\">\n                    {field(profile.employer_email)}\n                  </p>\n                </div>\n                <div className=\"md:col-span-2\">\n                  <p className=\"text-gray-500 mb-1\">Employer Address</p>\n                  <p className=\"font-medium whitespace-pre-line\">\n                    {field(profile.employer_address)}\n                  </p>\n                </div>\n              </div>\n            )}\n\n            {activeTab === 'family' && (\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                <div>\n                  <p className=\"text-gray-500 mb-1\">Marital Status</p>\n                  <p className=\"font-medium\">\n                    {field(profile.marital_status)}\n                  </p>\n                </div>\n                <div>\n                  <p className=\"text-gray-500 mb-1\">Family Relationship</p>\n                  <p className=\"font-medium\">\n                    {field(profile.family_relationship)}\n                  </p>\n                </div>\n                <div>\n                  <p className=\"text-gray-500 mb-1\">Family Member Name</p>\n                  <p className=\"font-medium\">\n                    {field(profile.family_member_full_name)}\n                  </p>\n                </div>\n                <div>\n                  <p className=\"text-gray-500 mb-1\">Family Member Phone</p>\n                  <p className=\"font-medium\">\n                    {field(profile.family_member_phone)}\n                  </p>\n                </div>\n                <div>\n                  <p className=\"text-gray-500 mb-1\">Family Member Email</p>\n                  <p className=\"font-medium\">\n                    {field(profile.family_member_email)}\n                  </p>\n                </div>\n              </div>\n            )}\n\n            {activeTab === 'bank' && (\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                <div>\n                  <p className=\"text-gray-500 mb-1\">Bank Name</p>\n                  <p className=\"font-medium\">{field(profile.bank_name)}</p>\n                </div>\n                <div>\n                  <p className=\"text-gray-500 mb-1\">Account Name</p>\n                  <p className=\"font-medium\">{field(profile.account_name)}</p>\n                </div>\n                <div>\n                  <p className=\"text-gray-500 mb-1\">BSB Number</p>\n                  <p className=\"font-medium\">{field(profile.bsb_number)}</p>\n                </div>\n                <div>\n                  <p className=\"text-gray-500 mb-1\">Account Number</p>\n                  <p className=\"font-medium\">{field(profile.account_number)}</p>\n                </div>\n              </div>\n            )}\n          </div>\n        </div>\n        </>\n      )}\n    </div>\n  );\n}\n\nfunction ClientApp() {\n  const [token, setToken] = useState(localStorage.getItem('jwt_token'));\n  const [user, setUser] = useState(() => {\n    try {\n      const s = localStorage.getItem('user');\n      return s ? JSON.parse(s) : null;\n    } catch {\n      return null;\n    }\n  });\n  const { profile } = useCurrentClient(token);\n  const location = useLocation();\n\n  const getCurrentView = () => {\n    const path = location.pathname;\n    if (path === '/' || path === '/dashboard') return 'dashboard';\n    if (path.startsWith('/loans')) return 'loans';\n    if (path === '/products') return 'products';\n    if (path === '/news') return 'news';\n    if (path === '/profile') return 'profile';\n    return 'dashboard';\n  };\n\n  const handleLogout = () => {\n    localStorage.removeItem('jwt_token');\n    localStorage.removeItem('user');\n    window.location.reload();\n  };\n\n  if (!token) {\n    return (\n      <Login\n        onLoginSuccess={(newToken, userData) => {\n          setToken(newToken);\n          setUser(userData);\n        }}\n      />\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      <div className=\"flex\">\n        <Sidebar currentView={getCurrentView()} />\n        <div className=\"flex-1 flex flex-col\">\n          <Header user={user} profile={profile} onLogout={handleLogout} />\n        <Routes>\n            <Route path=\"/\" element={<DashboardPage token={token} user={user} />} />\n            <Route path=\"/dashboard\" element={<DashboardPage token={token} user={user} />} />\n          <Route path=\"/loans\" element={<LoansPage token={token} />} />\n          <Route path=\"/loans/:id\" element={<LoanDetailPage token={token} />} />\n          <Route path=\"/products\" element={<ProductsPage token={token} />} />\n          <Route path=\"/news\" element={<NewsPage />} />\n          <Route path=\"/profile\" element={<ProfilePage token={token} />} />\n        </Routes>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nfunction App() {\n  return (\n    <BrowserRouter>\n      <ClientApp />\n    </BrowserRouter>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}