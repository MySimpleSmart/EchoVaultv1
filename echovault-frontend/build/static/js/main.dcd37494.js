/*! For license information please see main.dcd37494.js.LICENSE.txt */
(()=>{"use strict";var e={4:(e,t,n)=>{var r=n(853),a=n(43),l=n(950);function o(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function i(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function c(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function d(e){if(31===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function u(e){if(i(e)!==e)throw Error(o(188))}function m(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=m(e)))return t;e=e.sibling}return null}var p=Object.assign,h=Symbol.for("react.element"),f=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),g=Symbol.for("react.fragment"),b=Symbol.for("react.strict_mode"),y=Symbol.for("react.profiler"),v=Symbol.for("react.consumer"),j=Symbol.for("react.context"),w=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),_=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),S=Symbol.for("react.lazy");Symbol.for("react.scope");var C=Symbol.for("react.activity");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var L=Symbol.for("react.memo_cache_sentinel");Symbol.for("react.view_transition");var E=Symbol.iterator;function A(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=E&&e[E]||e["@@iterator"])?e:null}var P=Symbol.for("react.client.reference");function M(e){if(null==e)return null;if("function"===typeof e)return e.$$typeof===P?null:e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case g:return"Fragment";case y:return"Profiler";case b:return"StrictMode";case N:return"Suspense";case _:return"SuspenseList";case C:return"Activity"}if("object"===typeof e)switch(e.$$typeof){case x:return"Portal";case j:return e.displayName||"Context";case v:return(e._context.displayName||"Context")+".Consumer";case w:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case k:return null!==(t=e.displayName||null)?t:M(e.type)||"Memo";case S:t=e._payload,e=e._init;try{return M(e(t))}catch(n){}}return null}var B=Array.isArray,F=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,T=l.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,D={pending:!1,data:null,method:null,action:null},z=[],R=-1;function O(e){return{current:e}}function I(e){0>R||(e.current=z[R],z[R]=null,R--)}function W(e,t){R++,z[R]=e.current,e.current=t}var V,H,U=O(null),q=O(null),$=O(null),G=O(null);function Q(e,t){switch(W($,t),W(q,e),W(U,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?gu(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=bu(t=gu(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}I(U),W(U,e)}function J(){I(U),I(q),I($)}function Y(e){null!==e.memoizedState&&W(G,e);var t=U.current,n=bu(t,e.type);t!==n&&(W(q,e),W(U,n))}function K(e){q.current===e&&(I(U),I(q)),G.current===e&&(I(G),dm._currentValue=D)}function X(e){if(void 0===V)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);V=t&&t[1]||"",H=-1<n.stack.indexOf("\n    at")?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+V+e+H}var Z=!1;function ee(e,t){if(!e||Z)return"";Z=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(a){var r=a}Reflect.construct(e,[],n)}else{try{n.call()}catch(l){r=l}e.call(n.prototype)}}else{try{throw Error()}catch(o){r=o}(n=e())&&"function"===typeof n.catch&&n.catch(function(){})}}catch(s){if(s&&r&&"string"===typeof s.stack)return[s.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var a=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");a&&a.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var l=r.DetermineComponentFrameRoot(),o=l[0],s=l[1];if(o&&s){var i=o.split("\n"),c=s.split("\n");for(a=r=0;r<i.length&&!i[r].includes("DetermineComponentFrameRoot");)r++;for(;a<c.length&&!c[a].includes("DetermineComponentFrameRoot");)a++;if(r===i.length||a===c.length)for(r=i.length-1,a=c.length-1;1<=r&&0<=a&&i[r]!==c[a];)a--;for(;1<=r&&0<=a;r--,a--)if(i[r]!==c[a]){if(1!==r||1!==a)do{if(r--,0>--a||i[r]!==c[a]){var d="\n"+i[r].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),d}}while(1<=r&&0<=a);break}}}finally{Z=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?X(n):""}function te(e,t){switch(e.tag){case 26:case 27:case 5:return X(e.type);case 16:return X("Lazy");case 13:return e.child!==t&&null!==t?X("Suspense Fallback"):X("Suspense");case 19:return X("SuspenseList");case 0:case 15:return ee(e.type,!1);case 11:return ee(e.type.render,!1);case 1:return ee(e.type,!0);case 31:return X("Activity");default:return""}}function ne(e){try{var t="",n=null;do{t+=te(e,n),n=e,e=e.return}while(e);return t}catch(r){return"\nError generating stack: "+r.message+"\n"+r.stack}}var re=Object.prototype.hasOwnProperty,ae=r.unstable_scheduleCallback,le=r.unstable_cancelCallback,oe=r.unstable_shouldYield,se=r.unstable_requestPaint,ie=r.unstable_now,ce=r.unstable_getCurrentPriorityLevel,de=r.unstable_ImmediatePriority,ue=r.unstable_UserBlockingPriority,me=r.unstable_NormalPriority,pe=r.unstable_LowPriority,he=r.unstable_IdlePriority,fe=r.log,xe=r.unstable_setDisableYieldValue,ge=null,be=null;function ye(e){if("function"===typeof fe&&xe(e),be&&"function"===typeof be.setStrictMode)try{be.setStrictMode(ge,e)}catch(t){}}var ve=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(je(e)/we|0)|0},je=Math.log,we=Math.LN2;var Ne=256,_e=262144,ke=4194304;function Se(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return 261888&e;case 262144:case 524288:case 1048576:case 2097152:return 3932160&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Ce(e,t,n){var r=e.pendingLanes;if(0===r)return 0;var a=0,l=e.suspendedLanes,o=e.pingedLanes;e=e.warmLanes;var s=134217727&r;return 0!==s?0!==(r=s&~l)?a=Se(r):0!==(o&=s)?a=Se(o):n||0!==(n=s&~e)&&(a=Se(n)):0!==(s=r&~l)?a=Se(s):0!==o?a=Se(o):n||0!==(n=r&~e)&&(a=Se(n)),0===a?0:0!==t&&t!==a&&0===(t&l)&&((l=a&-a)>=(n=t&-t)||32===l&&0!==(4194048&n))?t:a}function Le(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function Ee(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function Ae(){var e=ke;return 0===(62914560&(ke<<=1))&&(ke=4194304),e}function Pe(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Me(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Be(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-ve(t);e.entangledLanes|=t,e.entanglements[r]=1073741824|e.entanglements[r]|261930&n}function Fe(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ve(n),a=1<<r;a&t|e[r]&t&&(e[r]|=t),n&=~a}}function Te(e,t){var n=t&-t;return 0!==((n=0!==(42&n)?1:De(n))&(e.suspendedLanes|t))?0:n}function De(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function ze(e){return 2<(e&=-e)?8<e?0!==(134217727&e)?32:268435456:8:2}function Re(){var e=T.p;return 0!==e?e:void 0===(e=window.event)?32:Sm(e.type)}function Oe(e,t){var n=T.p;try{return T.p=e,t()}finally{T.p=n}}var Ie=Math.random().toString(36).slice(2),We="__reactFiber$"+Ie,Ve="__reactProps$"+Ie,He="__reactContainer$"+Ie,Ue="__reactEvents$"+Ie,qe="__reactListeners$"+Ie,$e="__reactHandles$"+Ie,Ge="__reactResources$"+Ie,Qe="__reactMarker$"+Ie;function Je(e){delete e[We],delete e[Ve],delete e[Ue],delete e[qe],delete e[$e]}function Ye(e){var t=e[We];if(t)return t;for(var n=e.parentNode;n;){if(t=n[He]||n[We]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Du(e);null!==e;){if(n=e[We])return n;e=Du(e)}return t}n=(e=n).parentNode}return null}function Ke(e){if(e=e[We]||e[He]){var t=e.tag;if(5===t||6===t||13===t||31===t||26===t||27===t||3===t)return e}return null}function Xe(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(o(33))}function Ze(e){var t=e[Ge];return t||(t=e[Ge]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function et(e){e[Qe]=!0}var tt=new Set,nt={};function rt(e,t){at(e,t),at(e+"Capture",t)}function at(e,t){for(nt[e]=t,e=0;e<t.length;e++)tt.add(t[e])}var lt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ot={},st={};function it(e,t,n){if(a=t,re.call(st,a)||!re.call(ot,a)&&(lt.test(a)?st[a]=!0:(ot[a]=!0,0)))if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var r=t.toLowerCase().slice(0,5);if("data-"!==r&&"aria-"!==r)return void e.removeAttribute(t)}e.setAttribute(t,""+n)}var a}function ct(e,t,n){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+n)}}function dt(e,t,n,r){if(null===r)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(n)}e.setAttributeNS(t,n,""+r)}}function ut(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function mt(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function pt(e){if(!e._valueTracker){var t=mt(e)?"checked":"value";e._valueTracker=function(e,t,n){var r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&"undefined"!==typeof r&&"function"===typeof r.get&&"function"===typeof r.set){var a=r.get,l=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){n=""+e,l.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e,t,""+e[t])}}function ht(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=mt(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function ft(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var xt=/[\n"\\]/g;function gt(e){return e.replace(xt,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function bt(e,t,n,r,a,l,o,s){e.name="",null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&"boolean"!==typeof o?e.type=o:e.removeAttribute("type"),null!=t?"number"===o?(0===t&&""===e.value||e.value!=t)&&(e.value=""+ut(t)):e.value!==""+ut(t)&&(e.value=""+ut(t)):"submit"!==o&&"reset"!==o||e.removeAttribute("value"),null!=t?vt(e,o,ut(t)):null!=n?vt(e,o,ut(n)):null!=r&&e.removeAttribute("value"),null==a&&null!=l&&(e.defaultChecked=!!l),null!=a&&(e.checked=a&&"function"!==typeof a&&"symbol"!==typeof a),null!=s&&"function"!==typeof s&&"symbol"!==typeof s&&"boolean"!==typeof s?e.name=""+ut(s):e.removeAttribute("name")}function yt(e,t,n,r,a,l,o,s){if(null!=l&&"function"!==typeof l&&"symbol"!==typeof l&&"boolean"!==typeof l&&(e.type=l),null!=t||null!=n){if(!("submit"!==l&&"reset"!==l||void 0!==t&&null!==t))return void pt(e);n=null!=n?""+ut(n):"",t=null!=t?""+ut(t):n,s||t===e.value||(e.value=t),e.defaultValue=t}r="function"!==typeof(r=null!=r?r:a)&&"symbol"!==typeof r&&!!r,e.checked=s?e.checked:!!r,e.defaultChecked=!!r,null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&"boolean"!==typeof o&&(e.name=o),pt(e)}function vt(e,t,n){"number"===t&&ft(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function jt(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ut(n),t=null,a=0;a<e.length;a++){if(e[a].value===n)return e[a].selected=!0,void(r&&(e[a].defaultSelected=!0));null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function wt(e,t,n){null==t||((t=""+ut(t))!==e.value&&(e.value=t),null!=n)?e.defaultValue=null!=n?""+ut(n):"":e.defaultValue!==t&&(e.defaultValue=t)}function Nt(e,t,n,r){if(null==t){if(null!=r){if(null!=n)throw Error(o(92));if(B(r)){if(1<r.length)throw Error(o(93));r=r[0]}n=r}null==n&&(n=""),t=n}n=ut(t),e.defaultValue=n,(r=e.textContent)===n&&""!==r&&null!==r&&(e.value=r),pt(e)}function _t(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var kt=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function St(e,t,n){var r=0===t.indexOf("--");null==n||"boolean"===typeof n||""===n?r?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":r?e.setProperty(t,n):"number"!==typeof n||0===n||kt.has(t)?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function Ct(e,t,n){if(null!=t&&"object"!==typeof t)throw Error(o(62));if(e=e.style,null!=n){for(var r in n)!n.hasOwnProperty(r)||null!=t&&t.hasOwnProperty(r)||(0===r.indexOf("--")?e.setProperty(r,""):"float"===r?e.cssFloat="":e[r]="");for(var a in t)r=t[a],t.hasOwnProperty(a)&&n[a]!==r&&St(e,a,r)}else for(var l in t)t.hasOwnProperty(l)&&St(e,l,t[l])}function Lt(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Et=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),At=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Pt(e){return At.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Mt(){}var Bt=null;function Ft(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Tt=null,Dt=null;function zt(e){var t=Ke(e);if(t&&(e=t.stateNode)){var n=e[Ve]||null;e:switch(e=t.stateNode,t.type){case"input":if(bt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+gt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=r[Ve]||null;if(!a)throw Error(o(90));bt(r,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name)}}for(t=0;t<n.length;t++)(r=n[t]).form===e.form&&ht(r)}break e;case"textarea":wt(e,n.value,n.defaultValue);break e;case"select":null!=(t=n.value)&&jt(e,!!n.multiple,t,!1)}}}var Rt=!1;function Ot(e,t,n){if(Rt)return e(t,n);Rt=!0;try{return e(t)}finally{if(Rt=!1,(null!==Tt||null!==Dt)&&(Zc(),Tt&&(t=Tt,e=Dt,Dt=Tt=null,zt(t),e)))for(t=0;t<e.length;t++)zt(e[t])}}function It(e,t){var n=e.stateNode;if(null===n)return null;var r=n[Ve]||null;if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var Wt=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),Vt=!1;if(Wt)try{var Ht={};Object.defineProperty(Ht,"passive",{get:function(){Vt=!0}}),window.addEventListener("test",Ht,Ht),window.removeEventListener("test",Ht,Ht)}catch(Km){Vt=!1}var Ut=null,qt=null,$t=null;function Gt(){if($t)return $t;var e,t,n=qt,r=n.length,a="value"in Ut?Ut.value:Ut.textContent,l=a.length;for(e=0;e<r&&n[e]===a[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===a[l-t];t++);return $t=a.slice(e,1<t?1-t:void 0)}function Qt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Jt(){return!0}function Yt(){return!1}function Kt(e){function t(t,n,r,a,l){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=a,this.target=l,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(a):a[o]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?Jt:Yt,this.isPropagationStopped=Yt,this}return p(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Jt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Jt)},persist:function(){},isPersistent:Jt}),t}var Xt,Zt,en,tn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},nn=Kt(tn),rn=p({},tn,{view:0,detail:0}),an=Kt(rn),ln=p({},rn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:gn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==en&&(en&&"mousemove"===e.type?(Xt=e.screenX-en.screenX,Zt=e.screenY-en.screenY):Zt=Xt=0,en=e),Xt)},movementY:function(e){return"movementY"in e?e.movementY:Zt}}),on=Kt(ln),sn=Kt(p({},ln,{dataTransfer:0})),cn=Kt(p({},rn,{relatedTarget:0})),dn=Kt(p({},tn,{animationName:0,elapsedTime:0,pseudoElement:0})),un=Kt(p({},tn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),mn=Kt(p({},tn,{data:0})),pn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},hn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=fn[e])&&!!t[e]}function gn(){return xn}var bn=Kt(p({},rn,{key:function(e){if(e.key){var t=pn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Qt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?hn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:gn,charCode:function(e){return"keypress"===e.type?Qt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Qt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),yn=Kt(p({},ln,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),vn=Kt(p({},rn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:gn})),jn=Kt(p({},tn,{propertyName:0,elapsedTime:0,pseudoElement:0})),wn=Kt(p({},ln,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),Nn=Kt(p({},tn,{newState:0,oldState:0})),_n=[9,13,27,32],kn=Wt&&"CompositionEvent"in window,Sn=null;Wt&&"documentMode"in document&&(Sn=document.documentMode);var Cn=Wt&&"TextEvent"in window&&!Sn,Ln=Wt&&(!kn||Sn&&8<Sn&&11>=Sn),En=String.fromCharCode(32),An=!1;function Pn(e,t){switch(e){case"keyup":return-1!==_n.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Mn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1;var Fn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Tn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Fn[e.type]:"textarea"===t}function Dn(e,t,n,r){Tt?Dt?Dt.push(r):Dt=[r]:Tt=r,0<(t=ru(t,"onChange")).length&&(n=new nn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var zn=null,Rn=null;function On(e){Jd(e,0)}function In(e){if(ht(Xe(e)))return e}function Wn(e,t){if("change"===e)return t}var Vn=!1;if(Wt){var Hn;if(Wt){var Un="oninput"in document;if(!Un){var qn=document.createElement("div");qn.setAttribute("oninput","return;"),Un="function"===typeof qn.oninput}Hn=Un}else Hn=!1;Vn=Hn&&(!document.documentMode||9<document.documentMode)}function $n(){zn&&(zn.detachEvent("onpropertychange",Gn),Rn=zn=null)}function Gn(e){if("value"===e.propertyName&&In(Rn)){var t=[];Dn(t,Rn,e,Ft(e)),Ot(On,t)}}function Qn(e,t,n){"focusin"===e?($n(),Rn=n,(zn=t).attachEvent("onpropertychange",Gn)):"focusout"===e&&$n()}function Jn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return In(Rn)}function Yn(e,t){if("click"===e)return In(t)}function Kn(e,t){if("input"===e||"change"===e)return In(t)}var Xn="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function Zn(e,t){if(Xn(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!re.call(t,a)||!Xn(e[a],t[a]))return!1}return!0}function er(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function tr(e,t){var n,r=er(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=er(r)}}function nr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?nr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function rr(e){for(var t=ft((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=ft((e=t.contentWindow).document)}return t}function ar(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var lr=Wt&&"documentMode"in document&&11>=document.documentMode,or=null,sr=null,ir=null,cr=!1;function dr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;cr||null==or||or!==ft(r)||("selectionStart"in(r=or)&&ar(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},ir&&Zn(ir,r)||(ir=r,0<(r=ru(sr,"onSelect")).length&&(t=new nn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=or)))}function ur(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var mr={animationend:ur("Animation","AnimationEnd"),animationiteration:ur("Animation","AnimationIteration"),animationstart:ur("Animation","AnimationStart"),transitionrun:ur("Transition","TransitionRun"),transitionstart:ur("Transition","TransitionStart"),transitioncancel:ur("Transition","TransitionCancel"),transitionend:ur("Transition","TransitionEnd")},pr={},hr={};function fr(e){if(pr[e])return pr[e];if(!mr[e])return e;var t,n=mr[e];for(t in n)if(n.hasOwnProperty(t)&&t in hr)return pr[e]=n[t];return e}Wt&&(hr=document.createElement("div").style,"AnimationEvent"in window||(delete mr.animationend.animation,delete mr.animationiteration.animation,delete mr.animationstart.animation),"TransitionEvent"in window||delete mr.transitionend.transition);var xr=fr("animationend"),gr=fr("animationiteration"),br=fr("animationstart"),yr=fr("transitionrun"),vr=fr("transitionstart"),jr=fr("transitioncancel"),wr=fr("transitionend"),Nr=new Map,_r="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function kr(e,t){Nr.set(e,t),rt(t,[e])}_r.push("scrollEnd");var Sr="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)},Cr=[],Lr=0,Er=0;function Ar(){for(var e=Lr,t=Er=Lr=0;t<e;){var n=Cr[t];Cr[t++]=null;var r=Cr[t];Cr[t++]=null;var a=Cr[t];Cr[t++]=null;var l=Cr[t];if(Cr[t++]=null,null!==r&&null!==a){var o=r.pending;null===o?a.next=a:(a.next=o.next,o.next=a),r.pending=a}0!==l&&Fr(n,a,l)}}function Pr(e,t,n,r){Cr[Lr++]=e,Cr[Lr++]=t,Cr[Lr++]=n,Cr[Lr++]=r,Er|=r,e.lanes|=r,null!==(e=e.alternate)&&(e.lanes|=r)}function Mr(e,t,n,r){return Pr(e,t,n,r),Tr(e)}function Br(e,t){return Pr(e,null,null,t),Tr(e)}function Fr(e,t,n){e.lanes|=n;var r=e.alternate;null!==r&&(r.lanes|=n);for(var a=!1,l=e.return;null!==l;)l.childLanes|=n,null!==(r=l.alternate)&&(r.childLanes|=n),22===l.tag&&(null===(e=l.stateNode)||1&e._visibility||(a=!0)),e=l,l=l.return;return 3===e.tag?(l=e.stateNode,a&&null!==t&&(a=31-ve(n),null===(r=(e=l.hiddenUpdates)[a])?e[a]=[t]:r.push(t),t.lane=536870912|n),l):null}function Tr(e){if(50<Uc)throw Uc=0,qc=null,Error(o(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Dr={};function zr(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rr(e,t,n,r){return new zr(e,t,n,r)}function Or(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ir(e,t){var n=e.alternate;return null===n?((n=Rr(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=65011712&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Wr(e,t){e.flags&=65011714;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Vr(e,t,n,r,a,l){var s=0;if(r=e,"function"===typeof e)Or(e)&&(s=1);else if("string"===typeof e)s=function(e,t,n){if(1===n||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!==typeof t.precedence||"string"!==typeof t.href||""===t.href)break;return!0;case"link":if("string"!==typeof t.rel||"string"!==typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"===typeof t.precedence&&null==e);case"script":if(t.async&&"function"!==typeof t.async&&"symbol"!==typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"===typeof t.src)return!0}return!1}(e,n,U.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case C:return(e=Rr(31,n,t,a)).elementType=C,e.lanes=l,e;case g:return Hr(n.children,a,l,t);case b:s=8,a|=24;break;case y:return(e=Rr(12,n,t,2|a)).elementType=y,e.lanes=l,e;case N:return(e=Rr(13,n,t,a)).elementType=N,e.lanes=l,e;case _:return(e=Rr(19,n,t,a)).elementType=_,e.lanes=l,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case j:s=10;break e;case v:s=9;break e;case w:s=11;break e;case k:s=14;break e;case S:s=16,r=null;break e}s=29,n=Error(o(130,null===e?"null":typeof e,"")),r=null}return(t=Rr(s,n,t,a)).elementType=e,t.type=r,t.lanes=l,t}function Hr(e,t,n,r){return(e=Rr(7,e,r,t)).lanes=n,e}function Ur(e,t,n){return(e=Rr(6,e,null,t)).lanes=n,e}function qr(e){var t=Rr(18,null,null,0);return t.stateNode=e,t}function $r(e,t,n){return(t=Rr(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Gr=new WeakMap;function Qr(e,t){if("object"===typeof e&&null!==e){var n=Gr.get(e);return void 0!==n?n:(t={value:e,source:t,stack:ne(t)},Gr.set(e,t),t)}return{value:e,source:t,stack:ne(t)}}var Jr=[],Yr=0,Kr=null,Xr=0,Zr=[],ea=0,ta=null,na=1,ra="";function aa(e,t){Jr[Yr++]=Xr,Jr[Yr++]=Kr,Kr=e,Xr=t}function la(e,t,n){Zr[ea++]=na,Zr[ea++]=ra,Zr[ea++]=ta,ta=e;var r=na;e=ra;var a=32-ve(r)-1;r&=~(1<<a),n+=1;var l=32-ve(t)+a;if(30<l){var o=a-a%5;l=(r&(1<<o)-1).toString(32),r>>=o,a-=o,na=1<<32-ve(t)+a|n<<a|r,ra=l+e}else na=1<<l|n<<a|r,ra=e}function oa(e){null!==e.return&&(aa(e,1),la(e,1,0))}function sa(e){for(;e===Kr;)Kr=Jr[--Yr],Jr[Yr]=null,Xr=Jr[--Yr],Jr[Yr]=null;for(;e===ta;)ta=Zr[--ea],Zr[ea]=null,ra=Zr[--ea],Zr[ea]=null,na=Zr[--ea],Zr[ea]=null}function ia(e,t){Zr[ea++]=na,Zr[ea++]=ra,Zr[ea++]=ta,na=t.id,ra=t.overflow,ta=e}var ca=null,da=null,ua=!1,ma=null,pa=!1,ha=Error(o(519));function fa(e){throw ja(Qr(Error(o(418,1<arguments.length&&void 0!==arguments[1]&&arguments[1]?"text":"HTML","")),e)),ha}function xa(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[We]=e,t[Ve]=r,n){case"dialog":Yd("cancel",t),Yd("close",t);break;case"iframe":case"object":case"embed":Yd("load",t);break;case"video":case"audio":for(n=0;n<Gd.length;n++)Yd(Gd[n],t);break;case"source":Yd("error",t);break;case"img":case"image":case"link":Yd("error",t),Yd("load",t);break;case"details":Yd("toggle",t);break;case"input":Yd("invalid",t),yt(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0);break;case"select":Yd("invalid",t);break;case"textarea":Yd("invalid",t),Nt(t,r.value,r.defaultValue,r.children)}"string"!==typeof(n=r.children)&&"number"!==typeof n&&"bigint"!==typeof n||t.textContent===""+n||!0===r.suppressHydrationWarning||cu(t.textContent,n)?(null!=r.popover&&(Yd("beforetoggle",t),Yd("toggle",t)),null!=r.onScroll&&Yd("scroll",t),null!=r.onScrollEnd&&Yd("scrollend",t),null!=r.onClick&&(t.onclick=Mt),t=!0):t=!1,t||fa(e,!0)}function ga(e){for(ca=e.return;ca;)switch(ca.tag){case 5:case 31:case 13:return void(pa=!1);case 27:case 3:return void(pa=!0);default:ca=ca.return}}function ba(e){if(e!==ca)return!1;if(!ua)return ga(e),ua=!0,!1;var t,n=e.tag;if((t=3!==n&&27!==n)&&((t=5===n)&&(t=!("form"!==(t=e.type)&&"button"!==t)||yu(e.type,e.memoizedProps)),t=!t),t&&da&&fa(e),ga(e),13===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));da=Tu(e)}else if(31===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));da=Tu(e)}else 27===n?(n=da,Su(e.type)?(e=Fu,Fu=null,da=e):da=n):da=ca?Bu(e.stateNode.nextSibling):null;return!0}function ya(){da=ca=null,ua=!1}function va(){var e=ma;return null!==e&&(null===Ac?Ac=e:Ac.push.apply(Ac,e),ma=null),e}function ja(e){null===ma?ma=[e]:ma.push(e)}var wa=O(null),Na=null,_a=null;function ka(e,t,n){W(wa,t._currentValue),t._currentValue=n}function Sa(e){e._currentValue=wa.current,I(wa)}function Ca(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function La(e,t,n,r){var a=e.child;for(null!==a&&(a.return=e);null!==a;){var l=a.dependencies;if(null!==l){var s=a.child;l=l.firstContext;e:for(;null!==l;){var i=l;l=a;for(var c=0;c<t.length;c++)if(i.context===t[c]){l.lanes|=n,null!==(i=l.alternate)&&(i.lanes|=n),Ca(l.return,n,e),r||(s=null);break e}l=i.next}}else if(18===a.tag){if(null===(s=a.return))throw Error(o(341));s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),Ca(s,n,e),s=null}else s=a.child;if(null!==s)s.return=a;else for(s=a;null!==s;){if(s===e){s=null;break}if(null!==(a=s.sibling)){a.return=s.return,s=a;break}s=s.return}a=s}}function Ea(e,t,n,r){e=null;for(var a=t,l=!1;null!==a;){if(!l)if(0!==(524288&a.flags))l=!0;else if(0!==(262144&a.flags))break;if(10===a.tag){var s=a.alternate;if(null===s)throw Error(o(387));if(null!==(s=s.memoizedProps)){var i=a.type;Xn(a.pendingProps.value,s.value)||(null!==e?e.push(i):e=[i])}}else if(a===G.current){if(null===(s=a.alternate))throw Error(o(387));s.memoizedState.memoizedState!==a.memoizedState.memoizedState&&(null!==e?e.push(dm):e=[dm])}a=a.return}null!==e&&La(t,e,n,r),t.flags|=262144}function Aa(e){for(e=e.firstContext;null!==e;){if(!Xn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Pa(e){Na=e,_a=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function Ma(e){return Fa(Na,e)}function Ba(e,t){return null===Na&&Pa(e),Fa(e,t)}function Fa(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},null===_a){if(null===e)throw Error(o(308));_a=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else _a=_a.next=t;return n}var Ta="undefined"!==typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},Da=r.unstable_scheduleCallback,za=r.unstable_NormalPriority,Ra={$$typeof:j,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Oa(){return{controller:new Ta,data:new Map,refCount:0}}function Ia(e){e.refCount--,0===e.refCount&&Da(za,function(){e.controller.abort()})}var Wa=null,Va=0,Ha=0,Ua=null;function qa(){if(0===--Va&&null!==Wa){null!==Ua&&(Ua.status="fulfilled");var e=Wa;Wa=null,Ha=0,Ua=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var $a=F.S;F.S=function(e,t){Bc=ie(),"object"===typeof t&&null!==t&&"function"===typeof t.then&&function(e,t){if(null===Wa){var n=Wa=[];Va=0,Ha=Vd(),Ua={status:"pending",value:void 0,then:function(e){n.push(e)}}}Va++,t.then(qa,qa)}(0,t),null!==$a&&$a(e,t)};var Ga=O(null);function Qa(){var e=Ga.current;return null!==e?e:hc.pooledCache}function Ja(e,t){W(Ga,null===t?Ga.current:t.pool)}function Ya(){var e=Qa();return null===e?null:{parent:Ra._currentValue,pool:e}}var Ka=Error(o(460)),Xa=Error(o(474)),Za=Error(o(542)),el={then:function(){}};function tl(e){return"fulfilled"===(e=e.status)||"rejected"===e}function nl(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(Mt,Mt),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw ol(e=t.reason),e;default:if("string"===typeof t.status)t.then(Mt,Mt);else{if(null!==(e=hc)&&100<e.shellSuspendCounter)throw Error(o(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}},function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw ol(e=t.reason),e}throw al=t,Ka}}function rl(e){try{return(0,e._init)(e._payload)}catch(t){if(null!==t&&"object"===typeof t&&"function"===typeof t.then)throw al=t,Ka;throw t}}var al=null;function ll(){if(null===al)throw Error(o(459));var e=al;return al=null,e}function ol(e){if(e===Ka||e===Za)throw Error(o(483))}var sl=null,il=0;function cl(e){var t=il;return il+=1,null===sl&&(sl=[]),nl(sl,e,t)}function dl(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function ul(e,t){if(t.$$typeof===h)throw Error(o(525));throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ml(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function a(e,t){return(e=Ir(e,t)).index=0,e.sibling=null,e}function l(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=67108866,n):r:(t.flags|=67108866,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function i(e,t,n,r){return null===t||6!==t.tag?((t=Ur(n,e.mode,r)).return=e,t):((t=a(t,n)).return=e,t)}function c(e,t,n,r){var l=n.type;return l===g?u(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===l||"object"===typeof l&&null!==l&&l.$$typeof===S&&rl(l)===t.type)?(dl(t=a(t,n.props),n),t.return=e,t):(dl(t=Vr(n.type,n.key,n.props,null,e.mode,r),n),t.return=e,t)}function d(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=$r(n,e.mode,r)).return=e,t):((t=a(t,n.children||[])).return=e,t)}function u(e,t,n,r,l){return null===t||7!==t.tag?((t=Hr(n,e.mode,r,l)).return=e,t):((t=a(t,n)).return=e,t)}function m(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t||"bigint"===typeof t)return(t=Ur(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case f:return dl(n=Vr(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case x:return(t=$r(t,e.mode,n)).return=e,t;case S:return m(e,t=rl(t),n)}if(B(t)||A(t))return(t=Hr(t,e.mode,n,null)).return=e,t;if("function"===typeof t.then)return m(e,cl(t),n);if(t.$$typeof===j)return m(e,Ba(e,t),n);ul(e,t)}return null}function p(e,t,n,r){var a=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n||"bigint"===typeof n)return null!==a?null:i(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case f:return n.key===a?c(e,t,n,r):null;case x:return n.key===a?d(e,t,n,r):null;case S:return p(e,t,n=rl(n),r)}if(B(n)||A(n))return null!==a?null:u(e,t,n,r,null);if("function"===typeof n.then)return p(e,t,cl(n),r);if(n.$$typeof===j)return p(e,t,Ba(e,n),r);ul(e,n)}return null}function h(e,t,n,r,a){if("string"===typeof r&&""!==r||"number"===typeof r||"bigint"===typeof r)return i(t,e=e.get(n)||null,""+r,a);if("object"===typeof r&&null!==r){switch(r.$$typeof){case f:return c(t,e=e.get(null===r.key?n:r.key)||null,r,a);case x:return d(t,e=e.get(null===r.key?n:r.key)||null,r,a);case S:return h(e,t,n,r=rl(r),a)}if(B(r)||A(r))return u(t,e=e.get(n)||null,r,a,null);if("function"===typeof r.then)return h(e,t,n,cl(r),a);if(r.$$typeof===j)return h(e,t,n,Ba(t,r),a);ul(t,r)}return null}function b(i,c,d,u){if("object"===typeof d&&null!==d&&d.type===g&&null===d.key&&(d=d.props.children),"object"===typeof d&&null!==d){switch(d.$$typeof){case f:e:{for(var y=d.key;null!==c;){if(c.key===y){if((y=d.type)===g){if(7===c.tag){n(i,c.sibling),(u=a(c,d.props.children)).return=i,i=u;break e}}else if(c.elementType===y||"object"===typeof y&&null!==y&&y.$$typeof===S&&rl(y)===c.type){n(i,c.sibling),dl(u=a(c,d.props),d),u.return=i,i=u;break e}n(i,c);break}t(i,c),c=c.sibling}d.type===g?((u=Hr(d.props.children,i.mode,u,d.key)).return=i,i=u):(dl(u=Vr(d.type,d.key,d.props,null,i.mode,u),d),u.return=i,i=u)}return s(i);case x:e:{for(y=d.key;null!==c;){if(c.key===y){if(4===c.tag&&c.stateNode.containerInfo===d.containerInfo&&c.stateNode.implementation===d.implementation){n(i,c.sibling),(u=a(c,d.children||[])).return=i,i=u;break e}n(i,c);break}t(i,c),c=c.sibling}(u=$r(d,i.mode,u)).return=i,i=u}return s(i);case S:return b(i,c,d=rl(d),u)}if(B(d))return function(a,o,s,i){for(var c=null,d=null,u=o,f=o=0,x=null;null!==u&&f<s.length;f++){u.index>f?(x=u,u=null):x=u.sibling;var g=p(a,u,s[f],i);if(null===g){null===u&&(u=x);break}e&&u&&null===g.alternate&&t(a,u),o=l(g,o,f),null===d?c=g:d.sibling=g,d=g,u=x}if(f===s.length)return n(a,u),ua&&aa(a,f),c;if(null===u){for(;f<s.length;f++)null!==(u=m(a,s[f],i))&&(o=l(u,o,f),null===d?c=u:d.sibling=u,d=u);return ua&&aa(a,f),c}for(u=r(u);f<s.length;f++)null!==(x=h(u,a,f,s[f],i))&&(e&&null!==x.alternate&&u.delete(null===x.key?f:x.key),o=l(x,o,f),null===d?c=x:d.sibling=x,d=x);return e&&u.forEach(function(e){return t(a,e)}),ua&&aa(a,f),c}(i,c,d,u);if(A(d)){if("function"!==typeof(y=A(d)))throw Error(o(150));return function(a,s,i,c){if(null==i)throw Error(o(151));for(var d=null,u=null,f=s,x=s=0,g=null,b=i.next();null!==f&&!b.done;x++,b=i.next()){f.index>x?(g=f,f=null):g=f.sibling;var y=p(a,f,b.value,c);if(null===y){null===f&&(f=g);break}e&&f&&null===y.alternate&&t(a,f),s=l(y,s,x),null===u?d=y:u.sibling=y,u=y,f=g}if(b.done)return n(a,f),ua&&aa(a,x),d;if(null===f){for(;!b.done;x++,b=i.next())null!==(b=m(a,b.value,c))&&(s=l(b,s,x),null===u?d=b:u.sibling=b,u=b);return ua&&aa(a,x),d}for(f=r(f);!b.done;x++,b=i.next())null!==(b=h(f,a,x,b.value,c))&&(e&&null!==b.alternate&&f.delete(null===b.key?x:b.key),s=l(b,s,x),null===u?d=b:u.sibling=b,u=b);return e&&f.forEach(function(e){return t(a,e)}),ua&&aa(a,x),d}(i,c,d=y.call(d),u)}if("function"===typeof d.then)return b(i,c,cl(d),u);if(d.$$typeof===j)return b(i,c,Ba(i,d),u);ul(i,d)}return"string"===typeof d&&""!==d||"number"===typeof d||"bigint"===typeof d?(d=""+d,null!==c&&6===c.tag?(n(i,c.sibling),(u=a(c,d)).return=i,i=u):(n(i,c),(u=Ur(d,i.mode,u)).return=i,i=u),s(i)):n(i,c)}return function(e,t,n,r){try{il=0;var a=b(e,t,n,r);return sl=null,a}catch(o){if(o===Ka||o===Za)throw o;var l=Rr(29,o,null,e.mode);return l.lanes=r,l.return=e,l}}}var pl=ml(!0),hl=ml(!1),fl=!1;function xl(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function gl(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function bl(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function yl(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&pc)){var a=r.pending;return null===a?t.next=t:(t.next=a.next,a.next=t),r.pending=t,t=Tr(e),Fr(e,null,n),t}return Pr(e,r,t,n),Tr(e)}function vl(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194048&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Fe(e,n)}}function jl(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var a=null,l=null;if(null!==(n=n.firstBaseUpdate)){do{var o={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===l?a=l=o:l=l.next=o,n=n.next}while(null!==n);null===l?a=l=t:l=l.next=t}else a=l=t;return n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:l,shared:r.shared,callbacks:r.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var wl=!1;function Nl(){if(wl){if(null!==Ua)throw Ua}}function _l(e,t,n,r){wl=!1;var a=e.updateQueue;fl=!1;var l=a.firstBaseUpdate,o=a.lastBaseUpdate,s=a.shared.pending;if(null!==s){a.shared.pending=null;var i=s,c=i.next;i.next=null,null===o?l=c:o.next=c,o=i;var d=e.alternate;null!==d&&((s=(d=d.updateQueue).lastBaseUpdate)!==o&&(null===s?d.firstBaseUpdate=c:s.next=c,d.lastBaseUpdate=i))}if(null!==l){var u=a.baseState;for(o=0,d=c=i=null,s=l;;){var m=-536870913&s.lane,h=m!==s.lane;if(h?(xc&m)===m:(r&m)===m){0!==m&&m===Ha&&(wl=!0),null!==d&&(d=d.next={lane:0,tag:s.tag,payload:s.payload,callback:null,next:null});e:{var f=e,x=s;m=t;var g=n;switch(x.tag){case 1:if("function"===typeof(f=x.payload)){u=f.call(g,u,m);break e}u=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(m="function"===typeof(f=x.payload)?f.call(g,u,m):f)||void 0===m)break e;u=p({},u,m);break e;case 2:fl=!0}}null!==(m=s.callback)&&(e.flags|=64,h&&(e.flags|=8192),null===(h=a.callbacks)?a.callbacks=[m]:h.push(m))}else h={lane:m,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===d?(c=d=h,i=u):d=d.next=h,o|=m;if(null===(s=s.next)){if(null===(s=a.shared.pending))break;s=(h=s).next,h.next=null,a.lastBaseUpdate=h,a.shared.pending=null}}null===d&&(i=u),a.baseState=i,a.firstBaseUpdate=c,a.lastBaseUpdate=d,null===l&&(a.shared.lanes=0),_c|=o,e.lanes=o,e.memoizedState=u}}function kl(e,t){if("function"!==typeof e)throw Error(o(191,e));e.call(t)}function Sl(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)kl(n[e],t)}var Cl=O(null),Ll=O(0);function El(e,t){W(Ll,e=wc),W(Cl,t),wc=e|t.baseLanes}function Al(){W(Ll,wc),W(Cl,Cl.current)}function Pl(){wc=Ll.current,I(Cl),I(Ll)}var Ml=O(null),Bl=null;function Fl(e){var t=e.alternate;W(Ol,1&Ol.current),W(Ml,e),null===Bl&&(null===t||null!==Cl.current||null!==t.memoizedState)&&(Bl=e)}function Tl(e){W(Ol,Ol.current),W(Ml,e),null===Bl&&(Bl=e)}function Dl(e){22===e.tag?(W(Ol,Ol.current),W(Ml,e),null===Bl&&(Bl=e)):zl()}function zl(){W(Ol,Ol.current),W(Ml,Ml.current)}function Rl(e){I(Ml),Bl===e&&(Bl=null),I(Ol)}var Ol=O(0);function Il(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||Pu(n)||Mu(n)))return t}else if(19!==t.tag||"forwards"!==t.memoizedProps.revealOrder&&"backwards"!==t.memoizedProps.revealOrder&&"unstable_legacy-backwards"!==t.memoizedProps.revealOrder&&"together"!==t.memoizedProps.revealOrder){if(null!==t.child){t.child.return=t,t=t.child;continue}}else if(0!==(128&t.flags))return t;if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Wl=0,Vl=null,Hl=null,Ul=null,ql=!1,$l=!1,Gl=!1,Ql=0,Jl=0,Yl=null,Kl=0;function Xl(){throw Error(o(321))}function Zl(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Xn(e[n],t[n]))return!1;return!0}function eo(e,t,n,r,a,l){return Wl=l,Vl=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,F.H=null===e||null===e.memoizedState?xs:gs,Gl=!1,l=n(r,a),Gl=!1,$l&&(l=no(t,n,r,a)),to(e),l}function to(e){F.H=fs;var t=null!==Hl&&null!==Hl.next;if(Wl=0,Ul=Hl=Vl=null,ql=!1,Jl=0,Yl=null,t)throw Error(o(300));null===e||Bs||null!==(e=e.dependencies)&&Aa(e)&&(Bs=!0)}function no(e,t,n,r){Vl=e;var a=0;do{if($l&&(Yl=null),Jl=0,$l=!1,25<=a)throw Error(o(301));if(a+=1,Ul=Hl=null,null!=e.updateQueue){var l=e.updateQueue;l.lastEffect=null,l.events=null,l.stores=null,null!=l.memoCache&&(l.memoCache.index=0)}F.H=bs,l=t(n,r)}while($l);return l}function ro(){var e=F.H,t=e.useState()[0];return t="function"===typeof t.then?co(t):t,e=e.useState()[0],(null!==Hl?Hl.memoizedState:null)!==e&&(Vl.flags|=1024),t}function ao(){var e=0!==Ql;return Ql=0,e}function lo(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function oo(e){if(ql){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}ql=!1}Wl=0,Ul=Hl=Vl=null,$l=!1,Jl=Ql=0,Yl=null}function so(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Ul?Vl.memoizedState=Ul=e:Ul=Ul.next=e,Ul}function io(){if(null===Hl){var e=Vl.alternate;e=null!==e?e.memoizedState:null}else e=Hl.next;var t=null===Ul?Vl.memoizedState:Ul.next;if(null!==t)Ul=t,Hl=e;else{if(null===e){if(null===Vl.alternate)throw Error(o(467));throw Error(o(310))}e={memoizedState:(Hl=e).memoizedState,baseState:Hl.baseState,baseQueue:Hl.baseQueue,queue:Hl.queue,next:null},null===Ul?Vl.memoizedState=Ul=e:Ul=Ul.next=e}return Ul}function co(e){var t=Jl;return Jl+=1,null===Yl&&(Yl=[]),e=nl(Yl,e,t),t=Vl,null===(null===Ul?t.memoizedState:Ul.next)&&(t=t.alternate,F.H=null===t||null===t.memoizedState?xs:gs),e}function uo(e){if(null!==e&&"object"===typeof e){if("function"===typeof e.then)return co(e);if(e.$$typeof===j)return Ma(e)}throw Error(o(438,String(e)))}function mo(e){var t=null,n=Vl.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var r=Vl.alternate;null!==r&&(null!==(r=r.updateQueue)&&(null!=(r=r.memoCache)&&(t={data:r.data.map(function(e){return e.slice()}),index:0})))}if(null==t&&(t={data:[],index:0}),null===n&&(n={lastEffect:null,events:null,stores:null,memoCache:null},Vl.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=L;return t.index++,n}function po(e,t){return"function"===typeof t?t(e):t}function ho(e){return fo(io(),Hl,e)}function fo(e,t,n){var r=e.queue;if(null===r)throw Error(o(311));r.lastRenderedReducer=n;var a=e.baseQueue,l=r.pending;if(null!==l){if(null!==a){var s=a.next;a.next=l.next,l.next=s}t.baseQueue=a=l,r.pending=null}if(l=e.baseState,null===a)e.memoizedState=l;else{var i=s=null,c=null,d=t=a.next,u=!1;do{var m=-536870913&d.lane;if(m!==d.lane?(xc&m)===m:(Wl&m)===m){var p=d.revertLane;if(0===p)null!==c&&(c=c.next={lane:0,revertLane:0,gesture:null,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),m===Ha&&(u=!0);else{if((Wl&p)===p){d=d.next,p===Ha&&(u=!0);continue}m={lane:0,revertLane:d.revertLane,gesture:null,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null},null===c?(i=c=m,s=l):c=c.next=m,Vl.lanes|=p,_c|=p}m=d.action,Gl&&n(l,m),l=d.hasEagerState?d.eagerState:n(l,m)}else p={lane:m,revertLane:d.revertLane,gesture:d.gesture,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null},null===c?(i=c=p,s=l):c=c.next=p,Vl.lanes|=m,_c|=m;d=d.next}while(null!==d&&d!==t);if(null===c?s=l:c.next=i,!Xn(l,e.memoizedState)&&(Bs=!0,u&&null!==(n=Ua)))throw n;e.memoizedState=l,e.baseState=s,e.baseQueue=c,r.lastRenderedState=l}return null===a&&(r.lanes=0),[e.memoizedState,r.dispatch]}function xo(e){var t=io(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,l=t.memoizedState;if(null!==a){n.pending=null;var s=a=a.next;do{l=e(l,s.action),s=s.next}while(s!==a);Xn(l,t.memoizedState)||(Bs=!0),t.memoizedState=l,null===t.baseQueue&&(t.baseState=l),n.lastRenderedState=l}return[l,r]}function go(e,t,n){var r=Vl,a=io(),l=ua;if(l){if(void 0===n)throw Error(o(407));n=n()}else n=t();var s=!Xn((Hl||a).memoizedState,n);if(s&&(a.memoizedState=n,Bs=!0),a=a.queue,Vo(vo.bind(null,r,a,e),[e]),a.getSnapshot!==t||s||null!==Ul&&1&Ul.memoizedState.tag){if(r.flags|=2048,zo(9,{destroy:void 0},yo.bind(null,r,a,n,t),null),null===hc)throw Error(o(349));l||0!==(127&Wl)||bo(r,t,n)}return n}function bo(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=Vl.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},Vl.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function yo(e,t,n,r){t.value=n,t.getSnapshot=r,jo(t)&&wo(e)}function vo(e,t,n){return n(function(){jo(t)&&wo(e)})}function jo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Xn(e,n)}catch(r){return!0}}function wo(e){var t=Br(e,2);null!==t&&Qc(t,e,2)}function No(e){var t=so();if("function"===typeof e){var n=e;if(e=n(),Gl){ye(!0);try{n()}finally{ye(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:po,lastRenderedState:e},t}function _o(e,t,n,r){return e.baseState=n,fo(e,Hl,"function"===typeof r?r:po)}function ko(e,t,n,r,a){if(ms(e))throw Error(o(485));if(null!==(e=t.action)){var l={payload:a,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){l.listeners.push(e)}};null!==F.T?n(!0):l.isTransition=!1,r(l),null===(n=t.pending)?(l.next=t.pending=l,So(t,l)):(l.next=n.next,t.pending=n.next=l)}}function So(e,t){var n=t.action,r=t.payload,a=e.state;if(t.isTransition){var l=F.T,o={};F.T=o;try{var s=n(a,r),i=F.S;null!==i&&i(o,s),Co(e,t,s)}catch(c){Eo(e,t,c)}finally{null!==l&&null!==o.types&&(l.types=o.types),F.T=l}}else try{Co(e,t,l=n(a,r))}catch(d){Eo(e,t,d)}}function Co(e,t,n){null!==n&&"object"===typeof n&&"function"===typeof n.then?n.then(function(n){Lo(e,t,n)},function(n){return Eo(e,t,n)}):Lo(e,t,n)}function Lo(e,t,n){t.status="fulfilled",t.value=n,Ao(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,So(e,n)))}function Eo(e,t,n){var r=e.pending;if(e.pending=null,null!==r){r=r.next;do{t.status="rejected",t.reason=n,Ao(t),t=t.next}while(t!==r)}e.action=null}function Ao(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Po(e,t){return t}function Mo(e,t){if(ua){var n=hc.formState;if(null!==n){e:{var r=Vl;if(ua){if(da){t:{for(var a=da,l=pa;8!==a.nodeType;){if(!l){a=null;break t}if(null===(a=Bu(a.nextSibling))){a=null;break t}}a="F!"===(l=a.data)||"F"===l?a:null}if(a){da=Bu(a.nextSibling),r="F!"===a.data;break e}}fa(r)}r=!1}r&&(t=n[0])}}return(n=so()).memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Po,lastRenderedState:t},n.queue=r,n=cs.bind(null,Vl,r),r.dispatch=n,r=No(!1),l=us.bind(null,Vl,!1,r.queue),a={state:t,dispatch:null,action:e,pending:null},(r=so()).queue=a,n=ko.bind(null,Vl,a,l,n),a.dispatch=n,r.memoizedState=e,[t,n,!1]}function Bo(e){return Fo(io(),Hl,e)}function Fo(e,t,n){if(t=fo(e,t,Po)[0],e=ho(po)[0],"object"===typeof t&&null!==t&&"function"===typeof t.then)try{var r=co(t)}catch(o){if(o===Ka)throw Za;throw o}else r=t;var a=(t=io()).queue,l=a.dispatch;return n!==t.memoizedState&&(Vl.flags|=2048,zo(9,{destroy:void 0},To.bind(null,a,n),null)),[r,l,e]}function To(e,t){e.action=t}function Do(e){var t=io(),n=Hl;if(null!==n)return Fo(t,n,e);io(),t=t.memoizedState;var r=(n=io()).queue.dispatch;return n.memoizedState=e,[t,r,!1]}function zo(e,t,n,r){return e={tag:e,create:n,deps:r,inst:t,next:null},null===(t=Vl.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},Vl.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Ro(){return io().memoizedState}function Oo(e,t,n,r){var a=so();Vl.flags|=e,a.memoizedState=zo(1|t,{destroy:void 0},n,void 0===r?null:r)}function Io(e,t,n,r){var a=io();r=void 0===r?null:r;var l=a.memoizedState.inst;null!==Hl&&null!==r&&Zl(r,Hl.memoizedState.deps)?a.memoizedState=zo(t,l,n,r):(Vl.flags|=e,a.memoizedState=zo(1|t,l,n,r))}function Wo(e,t){Oo(8390656,8,e,t)}function Vo(e,t){Io(2048,8,e,t)}function Ho(e){var t=io().memoizedState;return function(e){Vl.flags|=4;var t=Vl.updateQueue;if(null===t)t={lastEffect:null,events:null,stores:null,memoCache:null},Vl.updateQueue=t,t.events=[e];else{var n=t.events;null===n?t.events=[e]:n.push(e)}}({ref:t,nextImpl:e}),function(){if(0!==(2&pc))throw Error(o(440));return t.impl.apply(void 0,arguments)}}function Uo(e,t){return Io(4,2,e,t)}function qo(e,t){return Io(4,4,e,t)}function $o(e,t){if("function"===typeof t){e=e();var n=t(e);return function(){"function"===typeof n?n():t(null)}}if(null!==t&&void 0!==t)return e=e(),t.current=e,function(){t.current=null}}function Go(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,Io(4,4,$o.bind(null,t,e),n)}function Qo(){}function Jo(e,t){var n=io();t=void 0===t?null:t;var r=n.memoizedState;return null!==t&&Zl(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Yo(e,t){var n=io();t=void 0===t?null:t;var r=n.memoizedState;if(null!==t&&Zl(t,r[1]))return r[0];if(r=e(),Gl){ye(!0);try{e()}finally{ye(!1)}}return n.memoizedState=[r,t],r}function Ko(e,t,n){return void 0===n||0!==(1073741824&Wl)&&0===(261930&xc)?e.memoizedState=t:(e.memoizedState=n,e=Gc(),Vl.lanes|=e,_c|=e,n)}function Xo(e,t,n,r){return Xn(n,t)?n:null!==Cl.current?(e=Ko(e,n,r),Xn(e,t)||(Bs=!0),e):0===(42&Wl)||0!==(1073741824&Wl)&&0===(261930&xc)?(Bs=!0,e.memoizedState=n):(e=Gc(),Vl.lanes|=e,_c|=e,t)}function Zo(e,t,n,r,a){var l=T.p;T.p=0!==l&&8>l?l:8;var o=F.T,s={};F.T=s,us(e,!1,t,n);try{var i=a(),c=F.S;if(null!==c&&c(s,i),null!==i&&"object"===typeof i&&"function"===typeof i.then)ds(e,t,function(e,t){var n=[],r={status:"pending",value:null,reason:null,then:function(e){n.push(e)}};return e.then(function(){r.status="fulfilled",r.value=t;for(var e=0;e<n.length;e++)(0,n[e])(t)},function(e){for(r.status="rejected",r.reason=e,e=0;e<n.length;e++)(0,n[e])(void 0)}),r}(i,r),$c());else ds(e,t,r,$c())}catch(d){ds(e,t,{then:function(){},status:"rejected",reason:d},$c())}finally{T.p=l,null!==o&&null!==s.types&&(o.types=s.types),F.T=o}}function es(){}function ts(e,t,n,r){if(5!==e.tag)throw Error(o(476));var a=ns(e).queue;Zo(e,a,t,D,null===n?es:function(){return rs(e),n(r)})}function ns(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:D,baseState:D,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:po,lastRenderedState:D},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:po,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function rs(e){var t=ns(e);null===t.next&&(t=e.alternate.memoizedState),ds(e,t.next.queue,{},$c())}function as(){return Ma(dm)}function ls(){return io().memoizedState}function os(){return io().memoizedState}function ss(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=$c(),r=yl(t,e=bl(n),n);return null!==r&&(Qc(r,t,n),vl(r,t,n)),t={cache:Oa()},void(e.payload=t)}t=t.return}}function is(e,t,n){var r=$c();n={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},ms(e)?ps(t,n):null!==(n=Mr(e,t,n,r))&&(Qc(n,e,r),hs(n,t,r))}function cs(e,t,n){ds(e,t,n,$c())}function ds(e,t,n,r){var a={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(ms(e))ps(t,a);else{var l=e.alternate;if(0===e.lanes&&(null===l||0===l.lanes)&&null!==(l=t.lastRenderedReducer))try{var o=t.lastRenderedState,s=l(o,n);if(a.hasEagerState=!0,a.eagerState=s,Xn(s,o))return Pr(e,t,a,0),null===hc&&Ar(),!1}catch(i){}if(null!==(n=Mr(e,t,a,r)))return Qc(n,e,r),hs(n,t,r),!0}return!1}function us(e,t,n,r){if(r={lane:2,revertLane:Vd(),gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},ms(e)){if(t)throw Error(o(479))}else null!==(t=Mr(e,n,r,2))&&Qc(t,e,2)}function ms(e){var t=e.alternate;return e===Vl||null!==t&&t===Vl}function ps(e,t){$l=ql=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function hs(e,t,n){if(0!==(4194048&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Fe(e,n)}}var fs={readContext:Ma,use:uo,useCallback:Xl,useContext:Xl,useEffect:Xl,useImperativeHandle:Xl,useLayoutEffect:Xl,useInsertionEffect:Xl,useMemo:Xl,useReducer:Xl,useRef:Xl,useState:Xl,useDebugValue:Xl,useDeferredValue:Xl,useTransition:Xl,useSyncExternalStore:Xl,useId:Xl,useHostTransitionStatus:Xl,useFormState:Xl,useActionState:Xl,useOptimistic:Xl,useMemoCache:Xl,useCacheRefresh:Xl};fs.useEffectEvent=Xl;var xs={readContext:Ma,use:uo,useCallback:function(e,t){return so().memoizedState=[e,void 0===t?null:t],e},useContext:Ma,useEffect:Wo,useImperativeHandle:function(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,Oo(4194308,4,$o.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Oo(4194308,4,e,t)},useInsertionEffect:function(e,t){Oo(4,2,e,t)},useMemo:function(e,t){var n=so();t=void 0===t?null:t;var r=e();if(Gl){ye(!0);try{e()}finally{ye(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=so();if(void 0!==n){var a=n(t);if(Gl){ye(!0);try{n(t)}finally{ye(!1)}}}else a=t;return r.memoizedState=r.baseState=a,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:a},r.queue=e,e=e.dispatch=is.bind(null,Vl,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},so().memoizedState=e},useState:function(e){var t=(e=No(e)).queue,n=cs.bind(null,Vl,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Qo,useDeferredValue:function(e,t){return Ko(so(),e,t)},useTransition:function(){var e=No(!1);return e=Zo.bind(null,Vl,e.queue,!0,!1),so().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var r=Vl,a=so();if(ua){if(void 0===n)throw Error(o(407));n=n()}else{if(n=t(),null===hc)throw Error(o(349));0!==(127&xc)||bo(r,t,n)}a.memoizedState=n;var l={value:n,getSnapshot:t};return a.queue=l,Wo(vo.bind(null,r,l,e),[e]),r.flags|=2048,zo(9,{destroy:void 0},yo.bind(null,r,l,n,t),null),n},useId:function(){var e=so(),t=hc.identifierPrefix;if(ua){var n=ra;t="_"+t+"R_"+(n=(na&~(1<<32-ve(na)-1)).toString(32)+n),0<(n=Ql++)&&(t+="H"+n.toString(32)),t+="_"}else t="_"+t+"r_"+(n=Kl++).toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:as,useFormState:Mo,useActionState:Mo,useOptimistic:function(e){var t=so();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=us.bind(null,Vl,!0,n),n.dispatch=t,[e,t]},useMemoCache:mo,useCacheRefresh:function(){return so().memoizedState=ss.bind(null,Vl)},useEffectEvent:function(e){var t=so(),n={impl:e};return t.memoizedState=n,function(){if(0!==(2&pc))throw Error(o(440));return n.impl.apply(void 0,arguments)}}},gs={readContext:Ma,use:uo,useCallback:Jo,useContext:Ma,useEffect:Vo,useImperativeHandle:Go,useInsertionEffect:Uo,useLayoutEffect:qo,useMemo:Yo,useReducer:ho,useRef:Ro,useState:function(){return ho(po)},useDebugValue:Qo,useDeferredValue:function(e,t){return Xo(io(),Hl.memoizedState,e,t)},useTransition:function(){var e=ho(po)[0],t=io().memoizedState;return["boolean"===typeof e?e:co(e),t]},useSyncExternalStore:go,useId:ls,useHostTransitionStatus:as,useFormState:Bo,useActionState:Bo,useOptimistic:function(e,t){return _o(io(),0,e,t)},useMemoCache:mo,useCacheRefresh:os};gs.useEffectEvent=Ho;var bs={readContext:Ma,use:uo,useCallback:Jo,useContext:Ma,useEffect:Vo,useImperativeHandle:Go,useInsertionEffect:Uo,useLayoutEffect:qo,useMemo:Yo,useReducer:xo,useRef:Ro,useState:function(){return xo(po)},useDebugValue:Qo,useDeferredValue:function(e,t){var n=io();return null===Hl?Ko(n,e,t):Xo(n,Hl.memoizedState,e,t)},useTransition:function(){var e=xo(po)[0],t=io().memoizedState;return["boolean"===typeof e?e:co(e),t]},useSyncExternalStore:go,useId:ls,useHostTransitionStatus:as,useFormState:Do,useActionState:Do,useOptimistic:function(e,t){var n=io();return null!==Hl?_o(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:mo,useCacheRefresh:os};function ys(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:p({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}bs.useEffectEvent=Ho;var vs={enqueueSetState:function(e,t,n){e=e._reactInternals;var r=$c(),a=bl(r);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=yl(e,a,r))&&(Qc(t,e,r),vl(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=$c(),a=bl(r);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=yl(e,a,r))&&(Qc(t,e,r),vl(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=$c(),r=bl(n);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=yl(e,r,n))&&(Qc(t,e,n),vl(t,e,n))}};function js(e,t,n,r,a,l,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,l,o):!t.prototype||!t.prototype.isPureReactComponent||(!Zn(n,r)||!Zn(a,l))}function ws(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&vs.enqueueReplaceState(t,t.state,null)}function Ns(e,t){var n=t;if("ref"in t)for(var r in n={},t)"ref"!==r&&(n[r]=t[r]);if(e=e.defaultProps)for(var a in n===t&&(n=p({},n)),e)void 0===n[a]&&(n[a]=e[a]);return n}function _s(e){Sr(e)}function ks(e){console.error(e)}function Ss(e){Sr(e)}function Cs(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function Ls(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function Es(e,t,n){return(n=bl(n)).tag=3,n.payload={element:null},n.callback=function(){Cs(e,t)},n}function As(e){return(e=bl(e)).tag=3,e}function Ps(e,t,n,r){var a=n.type.getDerivedStateFromError;if("function"===typeof a){var l=r.value;e.payload=function(){return a(l)},e.callback=function(){Ls(t,n,r)}}var o=n.stateNode;null!==o&&"function"===typeof o.componentDidCatch&&(e.callback=function(){Ls(t,n,r),"function"!==typeof a&&(null===Dc?Dc=new Set([this]):Dc.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:null!==e?e:""})})}var Ms=Error(o(461)),Bs=!1;function Fs(e,t,n,r){t.child=null===e?hl(t,null,n,r):pl(t,e.child,n,r)}function Ts(e,t,n,r,a){n=n.render;var l=t.ref;if("ref"in r){var o={};for(var s in r)"ref"!==s&&(o[s]=r[s])}else o=r;return Pa(t),r=eo(e,t,n,o,l,a),s=ao(),null===e||Bs?(ua&&s&&oa(t),t.flags|=1,Fs(e,t,r,a),t.child):(lo(e,t,a),ai(e,t,a))}function Ds(e,t,n,r,a){if(null===e){var l=n.type;return"function"!==typeof l||Or(l)||void 0!==l.defaultProps||null!==n.compare?((e=Vr(n.type,null,r,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=l,zs(e,t,l,r,a))}if(l=e.child,!li(e,a)){var o=l.memoizedProps;if((n=null!==(n=n.compare)?n:Zn)(o,r)&&e.ref===t.ref)return ai(e,t,a)}return t.flags|=1,(e=Ir(l,r)).ref=t.ref,e.return=t,t.child=e}function zs(e,t,n,r,a){if(null!==e){var l=e.memoizedProps;if(Zn(l,r)&&e.ref===t.ref){if(Bs=!1,t.pendingProps=r=l,!li(e,a))return t.lanes=e.lanes,ai(e,t,a);0!==(131072&e.flags)&&(Bs=!0)}}return Us(e,t,n,r,a)}function Rs(e,t,n,r){var a=r.children,l=null!==e?e.memoizedState:null;if(null===e&&null===t.stateNode&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),"hidden"===r.mode){if(0!==(128&t.flags)){if(l=null!==l?l.baseLanes|n:n,null!==e){for(r=t.child=e.child,a=0;null!==r;)a=a|r.lanes|r.childLanes,r=r.sibling;r=a&~l}else r=0,t.child=null;return Is(e,t,l,n,r)}if(0===(536870912&n))return r=t.lanes=536870912,Is(e,t,null!==l?l.baseLanes|n:n,n,r);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&Ja(0,null!==l?l.cachePool:null),null!==l?El(t,l):Al(),Dl(t)}else null!==l?(Ja(0,l.cachePool),El(t,l),zl(),t.memoizedState=null):(null!==e&&Ja(0,null),Al(),zl());return Fs(e,t,a,n),t.child}function Os(e,t){return null!==e&&22===e.tag||null!==t.stateNode||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Is(e,t,n,r,a){var l=Qa();return l=null===l?null:{parent:Ra._currentValue,pool:l},t.memoizedState={baseLanes:n,cachePool:l},null!==e&&Ja(0,null),Al(),Dl(t),null!==e&&Ea(e,t,r,!0),t.childLanes=a,null}function Ws(e,t){return(t=Zs({mode:t.mode,children:t.children},e.mode)).ref=e.ref,e.child=t,t.return=e,t}function Vs(e,t,n){return pl(t,e.child,null,n),(e=Ws(t,t.pendingProps)).flags|=2,Rl(t),t.memoizedState=null,e}function Hs(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!==typeof n&&"object"!==typeof n)throw Error(o(284));null!==e&&e.ref===n||(t.flags|=4194816)}}function Us(e,t,n,r,a){return Pa(t),n=eo(e,t,n,r,void 0,a),r=ao(),null===e||Bs?(ua&&r&&oa(t),t.flags|=1,Fs(e,t,n,a),t.child):(lo(e,t,a),ai(e,t,a))}function qs(e,t,n,r,a,l){return Pa(t),t.updateQueue=null,n=no(t,r,n,a),to(e),r=ao(),null===e||Bs?(ua&&r&&oa(t),t.flags|=1,Fs(e,t,n,l),t.child):(lo(e,t,l),ai(e,t,l))}function $s(e,t,n,r,a){if(Pa(t),null===t.stateNode){var l=Dr,o=n.contextType;"object"===typeof o&&null!==o&&(l=Ma(o)),l=new n(r,l),t.memoizedState=null!==l.state&&void 0!==l.state?l.state:null,l.updater=vs,t.stateNode=l,l._reactInternals=t,(l=t.stateNode).props=r,l.state=t.memoizedState,l.refs={},xl(t),o=n.contextType,l.context="object"===typeof o&&null!==o?Ma(o):Dr,l.state=t.memoizedState,"function"===typeof(o=n.getDerivedStateFromProps)&&(ys(t,n,o,r),l.state=t.memoizedState),"function"===typeof n.getDerivedStateFromProps||"function"===typeof l.getSnapshotBeforeUpdate||"function"!==typeof l.UNSAFE_componentWillMount&&"function"!==typeof l.componentWillMount||(o=l.state,"function"===typeof l.componentWillMount&&l.componentWillMount(),"function"===typeof l.UNSAFE_componentWillMount&&l.UNSAFE_componentWillMount(),o!==l.state&&vs.enqueueReplaceState(l,l.state,null),_l(t,r,l,a),Nl(),l.state=t.memoizedState),"function"===typeof l.componentDidMount&&(t.flags|=4194308),r=!0}else if(null===e){l=t.stateNode;var s=t.memoizedProps,i=Ns(n,s);l.props=i;var c=l.context,d=n.contextType;o=Dr,"object"===typeof d&&null!==d&&(o=Ma(d));var u=n.getDerivedStateFromProps;d="function"===typeof u||"function"===typeof l.getSnapshotBeforeUpdate,s=t.pendingProps!==s,d||"function"!==typeof l.UNSAFE_componentWillReceiveProps&&"function"!==typeof l.componentWillReceiveProps||(s||c!==o)&&ws(t,l,r,o),fl=!1;var m=t.memoizedState;l.state=m,_l(t,r,l,a),Nl(),c=t.memoizedState,s||m!==c||fl?("function"===typeof u&&(ys(t,n,u,r),c=t.memoizedState),(i=fl||js(t,n,i,r,m,c,o))?(d||"function"!==typeof l.UNSAFE_componentWillMount&&"function"!==typeof l.componentWillMount||("function"===typeof l.componentWillMount&&l.componentWillMount(),"function"===typeof l.UNSAFE_componentWillMount&&l.UNSAFE_componentWillMount()),"function"===typeof l.componentDidMount&&(t.flags|=4194308)):("function"===typeof l.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),l.props=r,l.state=c,l.context=o,r=i):("function"===typeof l.componentDidMount&&(t.flags|=4194308),r=!1)}else{l=t.stateNode,gl(e,t),d=Ns(n,o=t.memoizedProps),l.props=d,u=t.pendingProps,m=l.context,c=n.contextType,i=Dr,"object"===typeof c&&null!==c&&(i=Ma(c)),(c="function"===typeof(s=n.getDerivedStateFromProps)||"function"===typeof l.getSnapshotBeforeUpdate)||"function"!==typeof l.UNSAFE_componentWillReceiveProps&&"function"!==typeof l.componentWillReceiveProps||(o!==u||m!==i)&&ws(t,l,r,i),fl=!1,m=t.memoizedState,l.state=m,_l(t,r,l,a),Nl();var p=t.memoizedState;o!==u||m!==p||fl||null!==e&&null!==e.dependencies&&Aa(e.dependencies)?("function"===typeof s&&(ys(t,n,s,r),p=t.memoizedState),(d=fl||js(t,n,d,r,m,p,i)||null!==e&&null!==e.dependencies&&Aa(e.dependencies))?(c||"function"!==typeof l.UNSAFE_componentWillUpdate&&"function"!==typeof l.componentWillUpdate||("function"===typeof l.componentWillUpdate&&l.componentWillUpdate(r,p,i),"function"===typeof l.UNSAFE_componentWillUpdate&&l.UNSAFE_componentWillUpdate(r,p,i)),"function"===typeof l.componentDidUpdate&&(t.flags|=4),"function"===typeof l.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof l.componentDidUpdate||o===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),"function"!==typeof l.getSnapshotBeforeUpdate||o===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),l.props=r,l.state=p,l.context=i,r=d):("function"!==typeof l.componentDidUpdate||o===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),"function"!==typeof l.getSnapshotBeforeUpdate||o===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),r=!1)}return l=r,Hs(e,t),r=0!==(128&t.flags),l||r?(l=t.stateNode,n=r&&"function"!==typeof n.getDerivedStateFromError?null:l.render(),t.flags|=1,null!==e&&r?(t.child=pl(t,e.child,null,a),t.child=pl(t,null,n,a)):Fs(e,t,n,a),t.memoizedState=l.state,e=t.child):e=ai(e,t,a),e}function Gs(e,t,n,r){return ya(),t.flags|=256,Fs(e,t,n,r),t.child}var Qs={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Js(e){return{baseLanes:e,cachePool:Ya()}}function Ys(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=Cc),e}function Ks(e,t,n){var r,a=t.pendingProps,l=!1,s=0!==(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&0!==(2&Ol.current)),r&&(l=!0,t.flags&=-129),r=0!==(32&t.flags),t.flags&=-33,null===e){if(ua){if(l?Fl(t):zl(),(e=da)?null!==(e=null!==(e=Au(e,pa))&&"&"!==e.data?e:null)&&(t.memoizedState={dehydrated:e,treeContext:null!==ta?{id:na,overflow:ra}:null,retryLane:536870912,hydrationErrors:null},(n=qr(e)).return=t,t.child=n,ca=t,da=null):e=null,null===e)throw fa(t);return Mu(e)?t.lanes=32:t.lanes=536870912,null}var i=a.children;return a=a.fallback,l?(zl(),i=Zs({mode:"hidden",children:i},l=t.mode),a=Hr(a,l,n,null),i.return=t,a.return=t,i.sibling=a,t.child=i,(a=t.child).memoizedState=Js(n),a.childLanes=Ys(e,r,n),t.memoizedState=Qs,Os(null,a)):(Fl(t),Xs(t,i))}var c=e.memoizedState;if(null!==c&&null!==(i=c.dehydrated)){if(s)256&t.flags?(Fl(t),t.flags&=-257,t=ei(e,t,n)):null!==t.memoizedState?(zl(),t.child=e.child,t.flags|=128,t=null):(zl(),i=a.fallback,l=t.mode,a=Zs({mode:"visible",children:a.children},l),(i=Hr(i,l,n,null)).flags|=2,a.return=t,i.return=t,a.sibling=i,t.child=a,pl(t,e.child,null,n),(a=t.child).memoizedState=Js(n),a.childLanes=Ys(e,r,n),t.memoizedState=Qs,t=Os(null,a));else if(Fl(t),Mu(i)){if(r=i.nextSibling&&i.nextSibling.dataset)var d=r.dgst;r=d,(a=Error(o(419))).stack="",a.digest=r,ja({value:a,source:null,stack:null}),t=ei(e,t,n)}else if(Bs||Ea(e,t,n,!1),r=0!==(n&e.childLanes),Bs||r){if(null!==(r=hc)&&(0!==(a=Te(r,n))&&a!==c.retryLane))throw c.retryLane=a,Br(e,a),Qc(r,e,a),Ms;Pu(i)||od(),t=ei(e,t,n)}else Pu(i)?(t.flags|=192,t.child=e.child,t=null):(e=c.treeContext,da=Bu(i.nextSibling),ca=t,ua=!0,ma=null,pa=!1,null!==e&&ia(t,e),(t=Xs(t,a.children)).flags|=4096);return t}return l?(zl(),i=a.fallback,l=t.mode,d=(c=e.child).sibling,(a=Ir(c,{mode:"hidden",children:a.children})).subtreeFlags=65011712&c.subtreeFlags,null!==d?i=Ir(d,i):(i=Hr(i,l,n,null)).flags|=2,i.return=t,a.return=t,a.sibling=i,t.child=a,Os(null,a),a=t.child,null===(i=e.child.memoizedState)?i=Js(n):(null!==(l=i.cachePool)?(c=Ra._currentValue,l=l.parent!==c?{parent:c,pool:c}:l):l=Ya(),i={baseLanes:i.baseLanes|n,cachePool:l}),a.memoizedState=i,a.childLanes=Ys(e,r,n),t.memoizedState=Qs,Os(e.child,a)):(Fl(t),e=(n=e.child).sibling,(n=Ir(n,{mode:"visible",children:a.children})).return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n)}function Xs(e,t){return(t=Zs({mode:"visible",children:t},e.mode)).return=e,e.child=t}function Zs(e,t){return(e=Rr(22,e,null,t)).lanes=0,e}function ei(e,t,n){return pl(t,e.child,null,n),(e=Xs(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function ti(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ca(e.return,t,n)}function ni(e,t,n,r,a,l){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a,treeForkCount:l}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=a,o.treeForkCount=l)}function ri(e,t,n){var r=t.pendingProps,a=r.revealOrder,l=r.tail;r=r.children;var o=Ol.current,s=0!==(2&o);if(s?(o=1&o|2,t.flags|=128):o&=1,W(Ol,o),Fs(e,t,r,n),r=ua?Xr:0,!s&&null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&ti(e,n,t);else if(19===e.tag)ti(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(a){case"forwards":for(n=t.child,a=null;null!==n;)null!==(e=n.alternate)&&null===Il(e)&&(a=n),n=n.sibling;null===(n=a)?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),ni(t,!1,a,n,l,r);break;case"backwards":case"unstable_legacy-backwards":for(n=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===Il(e)){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}ni(t,!0,n,null,l,r);break;case"together":ni(t,!1,null,null,void 0,r);break;default:t.memoizedState=null}return t.child}function ai(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),_c|=t.lanes,0===(n&t.childLanes)){if(null===e)return null;if(Ea(e,t,n,!1),0===(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Ir(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Ir(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function li(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!Aa(e))}function oi(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)Bs=!0;else{if(!li(e,n)&&0===(128&t.flags))return Bs=!1,function(e,t,n){switch(t.tag){case 3:Q(t,t.stateNode.containerInfo),ka(0,Ra,e.memoizedState.cache),ya();break;case 27:case 5:Y(t);break;case 4:Q(t,t.stateNode.containerInfo);break;case 10:ka(0,t.type,t.memoizedProps.value);break;case 31:if(null!==t.memoizedState)return t.flags|=128,Tl(t),null;break;case 13:var r=t.memoizedState;if(null!==r)return null!==r.dehydrated?(Fl(t),t.flags|=128,null):0!==(n&t.child.childLanes)?Ks(e,t,n):(Fl(t),null!==(e=ai(e,t,n))?e.sibling:null);Fl(t);break;case 19:var a=0!==(128&e.flags);if((r=0!==(n&t.childLanes))||(Ea(e,t,n,!1),r=0!==(n&t.childLanes)),a){if(r)return ri(e,t,n);t.flags|=128}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),W(Ol,Ol.current),r)break;return null;case 22:return t.lanes=0,Rs(e,t,n,t.pendingProps);case 24:ka(0,Ra,e.memoizedState.cache)}return ai(e,t,n)}(e,t,n);Bs=0!==(131072&e.flags)}else Bs=!1,ua&&0!==(1048576&t.flags)&&la(t,Xr,t.index);switch(t.lanes=0,t.tag){case 16:e:{var r=t.pendingProps;if(e=rl(t.elementType),t.type=e,"function"!==typeof e){if(void 0!==e&&null!==e){var a=e.$$typeof;if(a===w){t.tag=11,t=Ts(null,t,e,r,n);break e}if(a===k){t.tag=14,t=Ds(null,t,e,r,n);break e}}throw t=M(e)||e,Error(o(306,t,""))}Or(e)?(r=Ns(e,r),t.tag=1,t=$s(null,t,e,r,n)):(t.tag=0,t=Us(null,t,e,r,n))}return t;case 0:return Us(e,t,t.type,t.pendingProps,n);case 1:return $s(e,t,r=t.type,a=Ns(r,t.pendingProps),n);case 3:e:{if(Q(t,t.stateNode.containerInfo),null===e)throw Error(o(387));r=t.pendingProps;var l=t.memoizedState;a=l.element,gl(e,t),_l(t,r,null,n);var s=t.memoizedState;if(r=s.cache,ka(0,Ra,r),r!==l.cache&&La(t,[Ra],n,!0),Nl(),r=s.element,l.isDehydrated){if(l={element:r,isDehydrated:!1,cache:s.cache},t.updateQueue.baseState=l,t.memoizedState=l,256&t.flags){t=Gs(e,t,r,n);break e}if(r!==a){ja(a=Qr(Error(o(424)),t)),t=Gs(e,t,r,n);break e}if(9===(e=t.stateNode.containerInfo).nodeType)e=e.body;else e="HTML"===e.nodeName?e.ownerDocument.body:e;for(da=Bu(e.firstChild),ca=t,ua=!0,ma=null,pa=!0,n=hl(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(ya(),r===a){t=ai(e,t,n);break e}Fs(e,t,r,n)}t=t.child}return t;case 26:return Hs(e,t),null===e?(n=qu(t.type,null,t.pendingProps,null))?t.memoizedState=n:ua||(n=t.type,e=t.pendingProps,(r=xu($.current).createElement(n))[We]=t,r[Ve]=e,mu(r,n,e),et(r),t.stateNode=r):t.memoizedState=qu(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Y(t),null===e&&ua&&(r=t.stateNode=zu(t.type,t.pendingProps,$.current),ca=t,pa=!0,a=da,Su(t.type)?(Fu=a,da=Bu(r.firstChild)):da=a),Fs(e,t,t.pendingProps.children,n),Hs(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&ua&&((a=r=da)&&(null!==(r=function(e,t,n,r){for(;1===e.nodeType;){var a=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(r){if(!e[Qe])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(l=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(l!==a.rel||e.getAttribute("href")!==(null==a.href||""===a.href?null:a.href)||e.getAttribute("crossorigin")!==(null==a.crossOrigin?null:a.crossOrigin)||e.getAttribute("title")!==(null==a.title?null:a.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((l=e.getAttribute("src"))!==(null==a.src?null:a.src)||e.getAttribute("type")!==(null==a.type?null:a.type)||e.getAttribute("crossorigin")!==(null==a.crossOrigin?null:a.crossOrigin))&&l&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var l=null==a.name?null:""+a.name;if("hidden"===a.type&&e.getAttribute("name")===l)return e}if(null===(e=Bu(e.nextSibling)))break}return null}(r,t.type,t.pendingProps,pa))?(t.stateNode=r,ca=t,da=Bu(r.firstChild),pa=!1,a=!0):a=!1),a||fa(t)),Y(t),a=t.type,l=t.pendingProps,s=null!==e?e.memoizedProps:null,r=l.children,yu(a,l)?r=null:null!==s&&yu(a,s)&&(t.flags|=32),null!==t.memoizedState&&(a=eo(e,t,ro,null,null,n),dm._currentValue=a),Hs(e,t),Fs(e,t,r,n),t.child;case 6:return null===e&&ua&&((e=n=da)&&(null!==(n=function(e,t,n){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!n)return null;if(null===(e=Bu(e.nextSibling)))return null}return e}(n,t.pendingProps,pa))?(t.stateNode=n,ca=t,da=null,e=!0):e=!1),e||fa(t)),null;case 13:return Ks(e,t,n);case 4:return Q(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=pl(t,null,r,n):Fs(e,t,r,n),t.child;case 11:return Ts(e,t,t.type,t.pendingProps,n);case 7:return Fs(e,t,t.pendingProps,n),t.child;case 8:case 12:return Fs(e,t,t.pendingProps.children,n),t.child;case 10:return r=t.pendingProps,ka(0,t.type,r.value),Fs(e,t,r.children,n),t.child;case 9:return a=t.type._context,r=t.pendingProps.children,Pa(t),r=r(a=Ma(a)),t.flags|=1,Fs(e,t,r,n),t.child;case 14:return Ds(e,t,t.type,t.pendingProps,n);case 15:return zs(e,t,t.type,t.pendingProps,n);case 19:return ri(e,t,n);case 31:return function(e,t,n){var r=t.pendingProps,a=0!==(128&t.flags);if(t.flags&=-129,null===e){if(ua){if("hidden"===r.mode)return e=Ws(t,r),t.lanes=536870912,Os(null,e);if(Tl(t),(e=da)?null!==(e=null!==(e=Au(e,pa))&&"&"===e.data?e:null)&&(t.memoizedState={dehydrated:e,treeContext:null!==ta?{id:na,overflow:ra}:null,retryLane:536870912,hydrationErrors:null},(n=qr(e)).return=t,t.child=n,ca=t,da=null):e=null,null===e)throw fa(t);return t.lanes=536870912,null}return Ws(t,r)}var l=e.memoizedState;if(null!==l){var s=l.dehydrated;if(Tl(t),a)if(256&t.flags)t.flags&=-257,t=Vs(e,t,n);else{if(null===t.memoizedState)throw Error(o(558));t.child=e.child,t.flags|=128,t=null}else if(Bs||Ea(e,t,n,!1),a=0!==(n&e.childLanes),Bs||a){if(null!==(r=hc)&&0!==(s=Te(r,n))&&s!==l.retryLane)throw l.retryLane=s,Br(e,s),Qc(r,e,s),Ms;od(),t=Vs(e,t,n)}else e=l.treeContext,da=Bu(s.nextSibling),ca=t,ua=!0,ma=null,pa=!1,null!==e&&ia(t,e),(t=Ws(t,r)).flags|=4096;return t}return(e=Ir(e.child,{mode:r.mode,children:r.children})).ref=t.ref,t.child=e,e.return=t,e}(e,t,n);case 22:return Rs(e,t,n,t.pendingProps);case 24:return Pa(t),r=Ma(Ra),null===e?(null===(a=Qa())&&(a=hc,l=Oa(),a.pooledCache=l,l.refCount++,null!==l&&(a.pooledCacheLanes|=n),a=l),t.memoizedState={parent:r,cache:a},xl(t),ka(0,Ra,a)):(0!==(e.lanes&n)&&(gl(e,t),_l(t,null,null,n),Nl()),a=e.memoizedState,l=t.memoizedState,a.parent!==r?(a={parent:r,cache:r},t.memoizedState=a,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=a),ka(0,Ra,r)):(r=l.cache,ka(0,Ra,r),r!==a.cache&&La(t,[Ra],n,!0))),Fs(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(o(156,t.tag))}function si(e){e.flags|=4}function ii(e,t,n,r,a){if((t=0!==(32&e.mode))&&(t=!1),t){if(e.flags|=16777216,(335544128&a)===a)if(e.stateNode.complete)e.flags|=8192;else{if(!rd())throw al=el,Xa;e.flags|=8192}}else e.flags&=-16777217}function ci(e,t){if("stylesheet"!==t.type||0!==(4&t.state.loading))e.flags&=-16777217;else if(e.flags|=16777216,!am(t)){if(!rd())throw al=el,Xa;e.flags|=8192}}function di(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?Ae():536870912,e.lanes|=t,Lc|=t)}function ui(e,t){if(!ua)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function mi(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=65011712&a.subtreeFlags,r|=65011712&a.flags,a.return=e,a=a.sibling;else for(a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function pi(e,t,n){var r=t.pendingProps;switch(sa(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return mi(t),null;case 3:return n=t.stateNode,r=null,null!==e&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),Sa(Ra),J(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(ba(t)?si(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,va())),mi(t),null;case 26:var a=t.type,l=t.memoizedState;return null===e?(si(t),null!==l?(mi(t),ci(t,l)):(mi(t),ii(t,a,0,0,n))):l?l!==e.memoizedState?(si(t),mi(t),ci(t,l)):(mi(t),t.flags&=-16777217):((e=e.memoizedProps)!==r&&si(t),mi(t),ii(t,a,0,0,n)),null;case 27:if(K(t),n=$.current,a=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==r&&si(t);else{if(!r){if(null===t.stateNode)throw Error(o(166));return mi(t),null}e=U.current,ba(t)?xa(t):(e=zu(a,r,n),t.stateNode=e,si(t))}return mi(t),null;case 5:if(K(t),a=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==r&&si(t);else{if(!r){if(null===t.stateNode)throw Error(o(166));return mi(t),null}if(l=U.current,ba(t))xa(t);else{var s=xu($.current);switch(l){case 1:l=s.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:l=s.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":l=s.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":l=s.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":(l=s.createElement("div")).innerHTML="<script><\/script>",l=l.removeChild(l.firstChild);break;case"select":l="string"===typeof r.is?s.createElement("select",{is:r.is}):s.createElement("select"),r.multiple?l.multiple=!0:r.size&&(l.size=r.size);break;default:l="string"===typeof r.is?s.createElement(a,{is:r.is}):s.createElement(a)}}l[We]=t,l[Ve]=r;e:for(s=t.child;null!==s;){if(5===s.tag||6===s.tag)l.appendChild(s.stateNode);else if(4!==s.tag&&27!==s.tag&&null!==s.child){s.child.return=s,s=s.child;continue}if(s===t)break e;for(;null===s.sibling;){if(null===s.return||s.return===t)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}t.stateNode=l;e:switch(mu(l,a,r),a){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&si(t)}}return mi(t),ii(t,t.type,null===e||e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==r&&si(t);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));if(e=$.current,ba(t)){if(e=t.stateNode,n=t.memoizedProps,r=null,null!==(a=ca))switch(a.tag){case 27:case 5:r=a.memoizedProps}e[We]=t,(e=!!(e.nodeValue===n||null!==r&&!0===r.suppressHydrationWarning||cu(e.nodeValue,n)))||fa(t,!0)}else(e=xu(e).createTextNode(r))[We]=t,t.stateNode=e}return mi(t),null;case 31:if(n=t.memoizedState,null===e||null!==e.memoizedState){if(r=ba(t),null!==n){if(null===e){if(!r)throw Error(o(318));if(!(e=null!==(e=t.memoizedState)?e.dehydrated:null))throw Error(o(557));e[We]=t}else ya(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;mi(t),e=!1}else n=va(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return 256&t.flags?(Rl(t),t):(Rl(t),null);if(0!==(128&t.flags))throw Error(o(558))}return mi(t),null;case 13:if(r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(a=ba(t),null!==r&&null!==r.dehydrated){if(null===e){if(!a)throw Error(o(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(o(317));a[We]=t}else ya(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;mi(t),a=!1}else a=va(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=a),a=!0;if(!a)return 256&t.flags?(Rl(t),t):(Rl(t),null)}return Rl(t),0!==(128&t.flags)?(t.lanes=n,t):(n=null!==r,e=null!==e&&null!==e.memoizedState,n&&(a=null,null!==(r=t.child).alternate&&null!==r.alternate.memoizedState&&null!==r.alternate.memoizedState.cachePool&&(a=r.alternate.memoizedState.cachePool.pool),l=null,null!==r.memoizedState&&null!==r.memoizedState.cachePool&&(l=r.memoizedState.cachePool.pool),l!==a&&(r.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),di(t,t.updateQueue),mi(t),null);case 4:return J(),null===e&&Zd(t.stateNode.containerInfo),mi(t),null;case 10:return Sa(t.type),mi(t),null;case 19:if(I(Ol),null===(r=t.memoizedState))return mi(t),null;if(a=0!==(128&t.flags),null===(l=r.rendering))if(a)ui(r,!1);else{if(0!==Nc||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=Il(e))){for(t.flags|=128,ui(r,!1),e=l.updateQueue,t.updateQueue=e,di(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)Wr(n,e),n=n.sibling;return W(Ol,1&Ol.current|2),ua&&aa(t,r.treeForkCount),t.child}e=e.sibling}null!==r.tail&&ie()>Fc&&(t.flags|=128,a=!0,ui(r,!1),t.lanes=4194304)}else{if(!a)if(null!==(e=Il(l))){if(t.flags|=128,a=!0,e=e.updateQueue,t.updateQueue=e,di(t,e),ui(r,!0),null===r.tail&&"hidden"===r.tailMode&&!l.alternate&&!ua)return mi(t),null}else 2*ie()-r.renderingStartTime>Fc&&536870912!==n&&(t.flags|=128,a=!0,ui(r,!1),t.lanes=4194304);r.isBackwards?(l.sibling=t.child,t.child=l):(null!==(e=r.last)?e.sibling=l:t.child=l,r.last=l)}return null!==r.tail?(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=ie(),e.sibling=null,n=Ol.current,W(Ol,a?1&n|2:1&n),ua&&aa(t,r.treeForkCount),e):(mi(t),null);case 22:case 23:return Rl(t),Pl(),r=null!==t.memoizedState,null!==e?null!==e.memoizedState!==r&&(t.flags|=8192):r&&(t.flags|=8192),r?0!==(536870912&n)&&0===(128&t.flags)&&(mi(t),6&t.subtreeFlags&&(t.flags|=8192)):mi(t),null!==(n=t.updateQueue)&&di(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),r=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(r=t.memoizedState.cachePool.pool),r!==n&&(t.flags|=2048),null!==e&&I(Ga),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Sa(Ra),mi(t),null;case 25:case 30:return null}throw Error(o(156,t.tag))}function hi(e,t){switch(sa(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Sa(Ra),J(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return K(t),null;case 31:if(null!==t.memoizedState){if(Rl(t),null===t.alternate)throw Error(o(340));ya()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 13:if(Rl(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));ya()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return I(Ol),null;case 4:return J(),null;case 10:return Sa(t.type),null;case 22:case 23:return Rl(t),Pl(),null!==e&&I(Ga),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return Sa(Ra),null;default:return null}}function fi(e,t){switch(sa(t),t.tag){case 3:Sa(Ra),J();break;case 26:case 27:case 5:K(t);break;case 4:J();break;case 31:null!==t.memoizedState&&Rl(t);break;case 13:Rl(t);break;case 19:I(Ol);break;case 10:Sa(t.type);break;case 22:case 23:Rl(t),Pl(),null!==e&&I(Ga);break;case 24:Sa(Ra)}}function xi(e,t){try{var n=t.updateQueue,r=null!==n?n.lastEffect:null;if(null!==r){var a=r.next;n=a;do{if((n.tag&e)===e){r=void 0;var l=n.create,o=n.inst;r=l(),o.destroy=r}n=n.next}while(n!==a)}}catch(s){Nd(t,t.return,s)}}function gi(e,t,n){try{var r=t.updateQueue,a=null!==r?r.lastEffect:null;if(null!==a){var l=a.next;r=l;do{if((r.tag&e)===e){var o=r.inst,s=o.destroy;if(void 0!==s){o.destroy=void 0,a=t;var i=n,c=s;try{c()}catch(d){Nd(a,i,d)}}}r=r.next}while(r!==l)}}catch(d){Nd(t,t.return,d)}}function bi(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{Sl(t,n)}catch(r){Nd(e,e.return,r)}}}function yi(e,t,n){n.props=Ns(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(r){Nd(e,t,r)}}function vi(e,t){try{var n=e.ref;if(null!==n){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;default:r=e.stateNode}"function"===typeof n?e.refCleanup=n(r):n.current=r}}catch(a){Nd(e,t,a)}}function ji(e,t){var n=e.ref,r=e.refCleanup;if(null!==n)if("function"===typeof r)try{r()}catch(a){Nd(e,t,a)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"===typeof n)try{n(null)}catch(l){Nd(e,t,l)}else n.current=null}function wi(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break e;case"img":n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(a){Nd(e,e.return,a)}}function Ni(e,t,n){try{var r=e.stateNode;!function(e,t,n,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var a=null,l=null,s=null,i=null,c=null,d=null,u=null;for(h in n){var m=n[h];if(n.hasOwnProperty(h)&&null!=m)switch(h){case"checked":case"value":break;case"defaultValue":c=m;default:r.hasOwnProperty(h)||du(e,t,h,null,r,m)}}for(var p in r){var h=r[p];if(m=n[p],r.hasOwnProperty(p)&&(null!=h||null!=m))switch(p){case"type":l=h;break;case"name":a=h;break;case"checked":d=h;break;case"defaultChecked":u=h;break;case"value":s=h;break;case"defaultValue":i=h;break;case"children":case"dangerouslySetInnerHTML":if(null!=h)throw Error(o(137,t));break;default:h!==m&&du(e,t,p,h,r,m)}}return void bt(e,s,i,c,d,u,l,a);case"select":for(l in h=s=i=p=null,n)if(c=n[l],n.hasOwnProperty(l)&&null!=c)switch(l){case"value":break;case"multiple":h=c;default:r.hasOwnProperty(l)||du(e,t,l,null,r,c)}for(a in r)if(l=r[a],c=n[a],r.hasOwnProperty(a)&&(null!=l||null!=c))switch(a){case"value":p=l;break;case"defaultValue":i=l;break;case"multiple":s=l;default:l!==c&&du(e,t,a,l,r,c)}return t=i,n=s,r=h,void(null!=p?jt(e,!!n,p,!1):!!r!==!!n&&(null!=t?jt(e,!!n,t,!0):jt(e,!!n,n?[]:"",!1)));case"textarea":for(i in h=p=null,n)if(a=n[i],n.hasOwnProperty(i)&&null!=a&&!r.hasOwnProperty(i))switch(i){case"value":case"children":break;default:du(e,t,i,null,r,a)}for(s in r)if(a=r[s],l=n[s],r.hasOwnProperty(s)&&(null!=a||null!=l))switch(s){case"value":p=a;break;case"defaultValue":h=a;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=a)throw Error(o(91));break;default:a!==l&&du(e,t,s,a,r,l)}return void wt(e,p,h);case"option":for(var f in n)if(p=n[f],n.hasOwnProperty(f)&&null!=p&&!r.hasOwnProperty(f))if("selected"===f)e.selected=!1;else du(e,t,f,null,r,p);for(c in r)if(p=r[c],h=n[c],r.hasOwnProperty(c)&&p!==h&&(null!=p||null!=h))if("selected"===c)e.selected=p&&"function"!==typeof p&&"symbol"!==typeof p;else du(e,t,c,p,r,h);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var x in n)p=n[x],n.hasOwnProperty(x)&&null!=p&&!r.hasOwnProperty(x)&&du(e,t,x,null,r,p);for(d in r)if(p=r[d],h=n[d],r.hasOwnProperty(d)&&p!==h&&(null!=p||null!=h))switch(d){case"children":case"dangerouslySetInnerHTML":if(null!=p)throw Error(o(137,t));break;default:du(e,t,d,p,r,h)}return;default:if(Lt(t)){for(var g in n)p=n[g],n.hasOwnProperty(g)&&void 0!==p&&!r.hasOwnProperty(g)&&uu(e,t,g,void 0,r,p);for(u in r)p=r[u],h=n[u],!r.hasOwnProperty(u)||p===h||void 0===p&&void 0===h||uu(e,t,u,p,r,h);return}}for(var b in n)p=n[b],n.hasOwnProperty(b)&&null!=p&&!r.hasOwnProperty(b)&&du(e,t,b,null,r,p);for(m in r)p=r[m],h=n[m],!r.hasOwnProperty(m)||p===h||null==p&&null==h||du(e,t,m,p,r,h)}(r,e.type,n,t),r[Ve]=t}catch(a){Nd(e,e.return,a)}}function _i(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&Su(e.type)||4===e.tag}function ki(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||_i(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&Su(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function Si(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?(9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).insertBefore(e,t):((t=9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Mt));else if(4!==r&&(27===r&&Su(e.type)&&(n=e.stateNode,t=null),null!==(e=e.child)))for(Si(e,t,n),e=e.sibling;null!==e;)Si(e,t,n),e=e.sibling}function Ci(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&(27===r&&Su(e.type)&&(n=e.stateNode),null!==(e=e.child)))for(Ci(e,t,n),e=e.sibling;null!==e;)Ci(e,t,n),e=e.sibling}function Li(e){var t=e.stateNode,n=e.memoizedProps;try{for(var r=e.type,a=t.attributes;a.length;)t.removeAttributeNode(a[0]);mu(t,r,n),t[We]=e,t[Ve]=n}catch(l){Nd(e,e.return,l)}}var Ei=!1,Ai=!1,Pi=!1,Mi="function"===typeof WeakSet?WeakSet:Set,Bi=null;function Fi(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:Qi(e,n),4&r&&xi(5,n);break;case 1:if(Qi(e,n),4&r)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(o){Nd(n,n.return,o)}else{var a=Ns(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(a,t,e.__reactInternalSnapshotBeforeUpdate)}catch(s){Nd(n,n.return,s)}}64&r&&bi(n),512&r&&vi(n,n.return);break;case 3:if(Qi(e,n),64&r&&null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:t=n.child.stateNode}try{Sl(e,t)}catch(o){Nd(n,n.return,o)}}break;case 27:null===t&&4&r&&Li(n);case 26:case 5:Qi(e,n),null===t&&4&r&&wi(n),512&r&&vi(n,n.return);break;case 12:Qi(e,n);break;case 31:Qi(e,n),4&r&&Ii(e,n);break;case 13:Qi(e,n),4&r&&Wi(e,n),64&r&&(null!==(e=n.memoizedState)&&(null!==(e=e.dehydrated)&&function(e,t){var n=e.ownerDocument;if("$~"===e.data)e._reactRetry=t;else if("$?"!==e.data||"loading"!==n.readyState)t();else{var r=function(){t(),n.removeEventListener("DOMContentLoaded",r)};n.addEventListener("DOMContentLoaded",r),e._reactRetry=r}}(e,n=Cd.bind(null,n))));break;case 22:if(!(r=null!==n.memoizedState||Ei)){t=null!==t&&null!==t.memoizedState||Ai,a=Ei;var l=Ai;Ei=r,(Ai=t)&&!l?Yi(e,n,0!==(8772&n.subtreeFlags)):Qi(e,n),Ei=a,Ai=l}break;case 30:break;default:Qi(e,n)}}function Ti(e){var t=e.alternate;null!==t&&(e.alternate=null,Ti(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&Je(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Di=null,zi=!1;function Ri(e,t,n){for(n=n.child;null!==n;)Oi(e,t,n),n=n.sibling}function Oi(e,t,n){if(be&&"function"===typeof be.onCommitFiberUnmount)try{be.onCommitFiberUnmount(ge,n)}catch(l){}switch(n.tag){case 26:Ai||ji(n,t),Ri(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:Ai||ji(n,t);var r=Di,a=zi;Su(n.type)&&(Di=n.stateNode,zi=!1),Ri(e,t,n),Ru(n.stateNode),Di=r,zi=a;break;case 5:Ai||ji(n,t);case 6:if(r=Di,a=zi,Di=null,Ri(e,t,n),zi=a,null!==(Di=r))if(zi)try{(9===Di.nodeType?Di.body:"HTML"===Di.nodeName?Di.ownerDocument.body:Di).removeChild(n.stateNode)}catch(o){Nd(n,t,o)}else try{Di.removeChild(n.stateNode)}catch(o){Nd(n,t,o)}break;case 18:null!==Di&&(zi?(Cu(9===(e=Di).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,n.stateNode),Um(e)):Cu(Di,n.stateNode));break;case 4:r=Di,a=zi,Di=n.stateNode.containerInfo,zi=!0,Ri(e,t,n),Di=r,zi=a;break;case 0:case 11:case 14:case 15:gi(2,n,t),Ai||gi(4,n,t),Ri(e,t,n);break;case 1:Ai||(ji(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount&&yi(n,t,r)),Ri(e,t,n);break;case 21:Ri(e,t,n);break;case 22:Ai=(r=Ai)||null!==n.memoizedState,Ri(e,t,n),Ai=r;break;default:Ri(e,t,n)}}function Ii(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&null!==(e=e.memoizedState))){e=e.dehydrated;try{Um(e)}catch(n){Nd(t,t.return,n)}}}function Wi(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{Um(e)}catch(n){Nd(t,t.return,n)}}function Vi(e,t){var n=function(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new Mi),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new Mi),t;default:throw Error(o(435,e.tag))}}(e);t.forEach(function(t){if(!n.has(t)){n.add(t);var r=Ld.bind(null,e,t);t.then(r,r)}})}function Hi(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var a=n[r],l=e,s=t,i=s;e:for(;null!==i;){switch(i.tag){case 27:if(Su(i.type)){Di=i.stateNode,zi=!1;break e}break;case 5:Di=i.stateNode,zi=!1;break e;case 3:case 4:Di=i.stateNode.containerInfo,zi=!0;break e}i=i.return}if(null===Di)throw Error(o(160));Oi(l,s,a),Di=null,zi=!1,null!==(l=a.alternate)&&(l.return=null),a.return=null}if(13886&t.subtreeFlags)for(t=t.child;null!==t;)qi(t,e),t=t.sibling}var Ui=null;function qi(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Hi(t,e),$i(e),4&r&&(gi(3,e,e.return),xi(3,e),gi(5,e,e.return));break;case 1:Hi(t,e),$i(e),512&r&&(Ai||null===n||ji(n,n.return)),64&r&&Ei&&(null!==(e=e.updateQueue)&&(null!==(r=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?r:n.concat(r))));break;case 26:var a=Ui;if(Hi(t,e),$i(e),512&r&&(Ai||null===n||ji(n,n.return)),4&r){var l=null!==n?n.memoizedState:null;if(r=e.memoizedState,null===n)if(null===r)if(null===e.stateNode){e:{r=e.type,n=e.memoizedProps,a=a.ownerDocument||a;t:switch(r){case"title":(!(l=a.getElementsByTagName("title")[0])||l[Qe]||l[We]||"http://www.w3.org/2000/svg"===l.namespaceURI||l.hasAttribute("itemprop"))&&(l=a.createElement(r),a.head.insertBefore(l,a.querySelector("head > title"))),mu(l,r,n),l[We]=e,et(l),r=l;break e;case"link":var s=nm("link","href",a).get(r+(n.href||""));if(s)for(var i=0;i<s.length;i++)if((l=s[i]).getAttribute("href")===(null==n.href||""===n.href?null:n.href)&&l.getAttribute("rel")===(null==n.rel?null:n.rel)&&l.getAttribute("title")===(null==n.title?null:n.title)&&l.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){s.splice(i,1);break t}mu(l=a.createElement(r),r,n),a.head.appendChild(l);break;case"meta":if(s=nm("meta","content",a).get(r+(n.content||"")))for(i=0;i<s.length;i++)if((l=s[i]).getAttribute("content")===(null==n.content?null:""+n.content)&&l.getAttribute("name")===(null==n.name?null:n.name)&&l.getAttribute("property")===(null==n.property?null:n.property)&&l.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&l.getAttribute("charset")===(null==n.charSet?null:n.charSet)){s.splice(i,1);break t}mu(l=a.createElement(r),r,n),a.head.appendChild(l);break;default:throw Error(o(468,r))}l[We]=e,et(l),r=l}e.stateNode=r}else rm(a,e.type,e.stateNode);else e.stateNode=Ku(a,r,e.memoizedProps);else l!==r?(null===l?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):l.count--,null===r?rm(a,e.type,e.stateNode):Ku(a,r,e.memoizedProps)):null===r&&null!==e.stateNode&&Ni(e,e.memoizedProps,n.memoizedProps)}break;case 27:Hi(t,e),$i(e),512&r&&(Ai||null===n||ji(n,n.return)),null!==n&&4&r&&Ni(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Hi(t,e),$i(e),512&r&&(Ai||null===n||ji(n,n.return)),32&e.flags){a=e.stateNode;try{_t(a,"")}catch(f){Nd(e,e.return,f)}}4&r&&null!=e.stateNode&&Ni(e,a=e.memoizedProps,null!==n?n.memoizedProps:a),1024&r&&(Pi=!0);break;case 6:if(Hi(t,e),$i(e),4&r){if(null===e.stateNode)throw Error(o(162));r=e.memoizedProps,n=e.stateNode;try{n.nodeValue=r}catch(f){Nd(e,e.return,f)}}break;case 3:if(tm=null,a=Ui,Ui=Wu(t.containerInfo),Hi(t,e),Ui=a,$i(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Um(t.containerInfo)}catch(f){Nd(e,e.return,f)}Pi&&(Pi=!1,Gi(e));break;case 4:r=Ui,Ui=Wu(e.stateNode.containerInfo),Hi(t,e),$i(e),Ui=r;break;case 12:default:Hi(t,e),$i(e);break;case 31:case 19:Hi(t,e),$i(e),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,Vi(e,r)));break;case 13:Hi(t,e),$i(e),8192&e.child.flags&&null!==e.memoizedState!==(null!==n&&null!==n.memoizedState)&&(Mc=ie()),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,Vi(e,r)));break;case 22:a=null!==e.memoizedState;var c=null!==n&&null!==n.memoizedState,d=Ei,u=Ai;if(Ei=d||a,Ai=u||c,Hi(t,e),Ai=u,Ei=d,$i(e),8192&r)e:for(t=e.stateNode,t._visibility=a?-2&t._visibility:1|t._visibility,a&&(null===n||c||Ei||Ai||Ji(e)),n=null,t=e;;){if(5===t.tag||26===t.tag){if(null===n){c=n=t;try{if(l=c.stateNode,a)"function"===typeof(s=l.style).setProperty?s.setProperty("display","none","important"):s.display="none";else{i=c.stateNode;var m=c.memoizedProps.style,p=void 0!==m&&null!==m&&m.hasOwnProperty("display")?m.display:null;i.style.display=null==p||"boolean"===typeof p?"":(""+p).trim()}}catch(f){Nd(c,c.return,f)}}}else if(6===t.tag){if(null===n){c=t;try{c.stateNode.nodeValue=a?"":c.memoizedProps}catch(f){Nd(c,c.return,f)}}}else if(18===t.tag){if(null===n){c=t;try{var h=c.stateNode;a?Lu(h,!0):Lu(c.stateNode,!1)}catch(f){Nd(c,c.return,f)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&r&&(null!==(r=e.updateQueue)&&(null!==(n=r.retryQueue)&&(r.retryQueue=null,Vi(e,n))));case 30:case 21:}}function $i(e){var t=e.flags;if(2&t){try{for(var n,r=e.return;null!==r;){if(_i(r)){n=r;break}r=r.return}if(null==n)throw Error(o(160));switch(n.tag){case 27:var a=n.stateNode;Ci(e,ki(e),a);break;case 5:var l=n.stateNode;32&n.flags&&(_t(l,""),n.flags&=-33),Ci(e,ki(e),l);break;case 3:case 4:var s=n.stateNode.containerInfo;Si(e,ki(e),s);break;default:throw Error(o(161))}}catch(i){Nd(e,e.return,i)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Gi(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;Gi(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function Qi(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)Fi(e,t.alternate,t),t=t.sibling}function Ji(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:gi(4,t,t.return),Ji(t);break;case 1:ji(t,t.return);var n=t.stateNode;"function"===typeof n.componentWillUnmount&&yi(t,t.return,n),Ji(t);break;case 27:Ru(t.stateNode);case 26:case 5:ji(t,t.return),Ji(t);break;case 22:null===t.memoizedState&&Ji(t);break;default:Ji(t)}e=e.sibling}}function Yi(e,t,n){for(n=n&&0!==(8772&t.subtreeFlags),t=t.child;null!==t;){var r=t.alternate,a=e,l=t,o=l.flags;switch(l.tag){case 0:case 11:case 15:Yi(a,l,n),xi(4,l);break;case 1:if(Yi(a,l,n),"function"===typeof(a=(r=l).stateNode).componentDidMount)try{a.componentDidMount()}catch(c){Nd(r,r.return,c)}if(null!==(a=(r=l).updateQueue)){var s=r.stateNode;try{var i=a.shared.hiddenCallbacks;if(null!==i)for(a.shared.hiddenCallbacks=null,a=0;a<i.length;a++)kl(i[a],s)}catch(c){Nd(r,r.return,c)}}n&&64&o&&bi(l),vi(l,l.return);break;case 27:Li(l);case 26:case 5:Yi(a,l,n),n&&null===r&&4&o&&wi(l),vi(l,l.return);break;case 12:Yi(a,l,n);break;case 31:Yi(a,l,n),n&&4&o&&Ii(a,l);break;case 13:Yi(a,l,n),n&&4&o&&Wi(a,l);break;case 22:null===l.memoizedState&&Yi(a,l,n),vi(l,l.return);break;case 30:break;default:Yi(a,l,n)}t=t.sibling}}function Ki(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&Ia(n))}function Xi(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Ia(e))}function Zi(e,t,n,r){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)ec(e,t,n,r),t=t.sibling}function ec(e,t,n,r){var a=t.flags;switch(t.tag){case 0:case 11:case 15:Zi(e,t,n,r),2048&a&&xi(9,t);break;case 1:case 31:case 13:default:Zi(e,t,n,r);break;case 3:Zi(e,t,n,r),2048&a&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Ia(e)));break;case 12:if(2048&a){Zi(e,t,n,r),e=t.stateNode;try{var l=t.memoizedProps,o=l.id,s=l.onPostCommit;"function"===typeof s&&s(o,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(i){Nd(t,t.return,i)}}else Zi(e,t,n,r);break;case 23:break;case 22:l=t.stateNode,o=t.alternate,null!==t.memoizedState?2&l._visibility?Zi(e,t,n,r):nc(e,t):2&l._visibility?Zi(e,t,n,r):(l._visibility|=2,tc(e,t,n,r,0!==(10256&t.subtreeFlags)||!1)),2048&a&&Ki(o,t);break;case 24:Zi(e,t,n,r),2048&a&&Xi(t.alternate,t)}}function tc(e,t,n,r,a){for(a=a&&(0!==(10256&t.subtreeFlags)||!1),t=t.child;null!==t;){var l=e,o=t,s=n,i=r,c=o.flags;switch(o.tag){case 0:case 11:case 15:tc(l,o,s,i,a),xi(8,o);break;case 23:break;case 22:var d=o.stateNode;null!==o.memoizedState?2&d._visibility?tc(l,o,s,i,a):nc(l,o):(d._visibility|=2,tc(l,o,s,i,a)),a&&2048&c&&Ki(o.alternate,o);break;case 24:tc(l,o,s,i,a),a&&2048&c&&Xi(o.alternate,o);break;default:tc(l,o,s,i,a)}t=t.sibling}}function nc(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,r=t,a=r.flags;switch(r.tag){case 22:nc(n,r),2048&a&&Ki(r.alternate,r);break;case 24:nc(n,r),2048&a&&Xi(r.alternate,r);break;default:nc(n,r)}t=t.sibling}}var rc=8192;function ac(e,t,n){if(e.subtreeFlags&rc)for(e=e.child;null!==e;)lc(e,t,n),e=e.sibling}function lc(e,t,n){switch(e.tag){case 26:ac(e,t,n),e.flags&rc&&null!==e.memoizedState&&function(e,t,n,r){if("stylesheet"===n.type&&("string"!==typeof r.media||!1!==matchMedia(r.media).matches)&&0===(4&n.state.loading)){if(null===n.instance){var a=$u(r.href),l=t.querySelector(Gu(a));if(l)return null!==(t=l._p)&&"object"===typeof t&&"function"===typeof t.then&&(e.count++,e=om.bind(e),t.then(e,e)),n.state.loading|=4,n.instance=l,void et(l);l=t.ownerDocument||t,r=Qu(r),(a=Ou.get(a))&&Zu(r,a),et(l=l.createElement("link"));var o=l;o._p=new Promise(function(e,t){o.onload=e,o.onerror=t}),mu(l,"link",r),n.instance=l}null===e.stylesheets&&(e.stylesheets=new Map),e.stylesheets.set(n,t),(t=n.state.preload)&&0===(3&n.state.loading)&&(e.count++,n=om.bind(e),t.addEventListener("load",n),t.addEventListener("error",n))}}(n,Ui,e.memoizedState,e.memoizedProps);break;case 5:default:ac(e,t,n);break;case 3:case 4:var r=Ui;Ui=Wu(e.stateNode.containerInfo),ac(e,t,n),Ui=r;break;case 22:null===e.memoizedState&&(null!==(r=e.alternate)&&null!==r.memoizedState?(r=rc,rc=16777216,ac(e,t,n),rc=r):ac(e,t,n))}}function oc(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function sc(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];Bi=r,dc(r,e)}oc(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)ic(e),e=e.sibling}function ic(e){switch(e.tag){case 0:case 11:case 15:sc(e),2048&e.flags&&gi(9,e,e.return);break;case 3:case 12:default:sc(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,cc(e)):sc(e)}}function cc(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];Bi=r,dc(r,e)}oc(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:gi(8,t,t.return),cc(t);break;case 22:2&(n=t.stateNode)._visibility&&(n._visibility&=-3,cc(t));break;default:cc(t)}e=e.sibling}}function dc(e,t){for(;null!==Bi;){var n=Bi;switch(n.tag){case 0:case 11:case 15:gi(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var r=n.memoizedState.cachePool.pool;null!=r&&r.refCount++}break;case 24:Ia(n.memoizedState.cache)}if(null!==(r=n.child))r.return=n,Bi=r;else e:for(n=e;null!==Bi;){var a=(r=Bi).sibling,l=r.return;if(Ti(r),r===n){Bi=null;break e}if(null!==a){a.return=l,Bi=a;break e}Bi=l}}}var uc={getCacheForType:function(e){var t=Ma(Ra),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return Ma(Ra).controller.signal}},mc="function"===typeof WeakMap?WeakMap:Map,pc=0,hc=null,fc=null,xc=0,gc=0,bc=null,yc=!1,vc=!1,jc=!1,wc=0,Nc=0,_c=0,kc=0,Sc=0,Cc=0,Lc=0,Ec=null,Ac=null,Pc=!1,Mc=0,Bc=0,Fc=1/0,Tc=null,Dc=null,zc=0,Rc=null,Oc=null,Ic=0,Wc=0,Vc=null,Hc=null,Uc=0,qc=null;function $c(){return 0!==(2&pc)&&0!==xc?xc&-xc:null!==F.T?Vd():Re()}function Gc(){if(0===Cc)if(0===(536870912&xc)||ua){var e=_e;0===(3932160&(_e<<=1))&&(_e=262144),Cc=e}else Cc=536870912;return null!==(e=Ml.current)&&(e.flags|=32),Cc}function Qc(e,t,n){(e!==hc||2!==gc&&9!==gc)&&null===e.cancelPendingCommit||(td(e,0),Xc(e,xc,Cc,!1)),Me(e,n),0!==(2&pc)&&e===hc||(e===hc&&(0===(2&pc)&&(kc|=n),4===Nc&&Xc(e,xc,Cc,!1)),Td(e))}function Jc(e,t,n){if(0!==(6&pc))throw Error(o(327));for(var r=!n&&0===(127&t)&&0===(t&e.expiredLanes)||Le(e,t),a=r?function(e,t){var n=pc;pc|=2;var r=ad(),a=ld();hc!==e||xc!==t?(Tc=null,Fc=ie()+500,td(e,t)):vc=Le(e,t);e:for(;;)try{if(0!==gc&&null!==fc){t=fc;var l=bc;t:switch(gc){case 1:gc=0,bc=null,md(e,t,l,1);break;case 2:case 9:if(tl(l)){gc=0,bc=null,ud(t);break}t=function(){2!==gc&&9!==gc||hc!==e||(gc=7),Td(e)},l.then(t,t);break e;case 3:gc=7;break e;case 4:gc=5;break e;case 7:tl(l)?(gc=0,bc=null,ud(t)):(gc=0,bc=null,md(e,t,l,7));break;case 5:var s=null;switch(fc.tag){case 26:s=fc.memoizedState;case 5:case 27:var i=fc;if(s?am(s):i.stateNode.complete){gc=0,bc=null;var c=i.sibling;if(null!==c)fc=c;else{var d=i.return;null!==d?(fc=d,pd(d)):fc=null}break t}}gc=0,bc=null,md(e,t,l,5);break;case 6:gc=0,bc=null,md(e,t,l,6);break;case 8:ed(),Nc=6;break e;default:throw Error(o(462))}}cd();break}catch(u){nd(e,u)}return _a=Na=null,F.H=r,F.A=a,pc=n,null!==fc?0:(hc=null,xc=0,Ar(),Nc)}(e,t):sd(e,t,!0),l=r;;){if(0===a){vc&&!r&&Xc(e,t,0,!1);break}if(n=e.current.alternate,!l||Kc(n)){if(2===a){if(l=t,e.errorRecoveryDisabledLanes&l)var s=0;else s=0!==(s=-536870913&e.pendingLanes)?s:536870912&s?536870912:0;if(0!==s){t=s;e:{var i=e;a=Ec;var c=i.current.memoizedState.isDehydrated;if(c&&(td(i,s).flags|=256),2!==(s=sd(i,s,!1))){if(jc&&!c){i.errorRecoveryDisabledLanes|=l,kc|=l,a=4;break e}l=Ac,Ac=a,null!==l&&(null===Ac?Ac=l:Ac.push.apply(Ac,l))}a=s}if(l=!1,2!==a)continue}}if(1===a){td(e,0),Xc(e,t,0,!0);break}e:{switch(r=e,l=a){case 0:case 1:throw Error(o(345));case 4:if((4194048&t)!==t)break;case 6:Xc(r,t,Cc,!yc);break e;case 2:Ac=null;break;case 3:case 5:break;default:throw Error(o(329))}if((62914560&t)===t&&10<(a=Mc+300-ie())){if(Xc(r,t,Cc,!yc),0!==Ce(r,0,!0))break e;Ic=t,r.timeoutHandle=ju(Yc.bind(null,r,n,Ac,Tc,Pc,t,Cc,kc,Lc,yc,l,"Throttled",-0,0),a)}else Yc(r,n,Ac,Tc,Pc,t,Cc,kc,Lc,yc,l,null,-0,0)}break}a=sd(e,t,!1),l=!1}Td(e)}function Yc(e,t,n,r,a,l,o,s,i,c,d,u,m,p){if(e.timeoutHandle=-1,8192&(u=t.subtreeFlags)||16785408===(16785408&u)){lc(t,l,u={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Mt});var h=(62914560&l)===l?Mc-ie():(4194048&l)===l?Bc-ie():0;if(null!==(h=function(e,t){return e.stylesheets&&0===e.count&&im(e,e.stylesheets),0<e.count||0<e.imgCount?function(n){var r=setTimeout(function(){if(e.stylesheets&&im(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4+t);0<e.imgBytes&&0===lm&&(lm=62500*function(){if("function"===typeof performance.getEntriesByType){for(var e=0,t=0,n=performance.getEntriesByType("resource"),r=0;r<n.length;r++){var a=n[r],l=a.transferSize,o=a.initiatorType,s=a.duration;if(l&&s&&pu(o)){for(o=0,s=a.responseEnd,r+=1;r<n.length;r++){var i=n[r],c=i.startTime;if(c>s)break;var d=i.transferSize,u=i.initiatorType;d&&pu(u)&&(o+=d*((i=i.responseEnd)<s?1:(s-c)/(i-c)))}if(--r,t+=8*(l+o)/(a.duration/1e3),10<++e)break}}if(0<e)return t/e/1e6}return navigator.connection&&"number"===typeof(e=navigator.connection.downlink)?e:5}());var a=setTimeout(function(){if(e.waitingForImages=!1,0===e.count&&(e.stylesheets&&im(e,e.stylesheets),e.unsuspend)){var t=e.unsuspend;e.unsuspend=null,t()}},(e.imgBytes>lm?50:800)+t);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(r),clearTimeout(a)}}:null}(u,h)))return Ic=l,e.cancelPendingCommit=h(fd.bind(null,e,t,l,n,r,a,o,s,i,d,u,null,m,p)),void Xc(e,l,o,!c)}fd(e,t,l,n,r,a,o,s,i)}function Kc(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&(null!==(n=t.updateQueue)&&null!==(n=n.stores)))for(var r=0;r<n.length;r++){var a=n[r],l=a.getSnapshot;a=a.value;try{if(!Xn(l(),a))return!1}catch(o){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Xc(e,t,n,r){t&=~Sc,t&=~kc,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var a=t;0<a;){var l=31-ve(a),o=1<<l;r[l]=-1,a&=~o}0!==n&&Be(e,n,t)}function Zc(){return 0!==(6&pc)||(Dd(0,!1),!1)}function ed(){if(null!==fc){if(0===gc)var e=fc.return;else _a=Na=null,oo(e=fc),sl=null,il=0,e=fc;for(;null!==e;)fi(e.alternate,e),e=e.return;fc=null}}function td(e,t){var n=e.timeoutHandle;-1!==n&&(e.timeoutHandle=-1,wu(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),Ic=0,ed(),hc=e,fc=n=Ir(e.current,null),xc=t,gc=0,bc=null,yc=!1,vc=Le(e,t),jc=!1,Lc=Cc=Sc=kc=_c=Nc=0,Ac=Ec=null,Pc=!1,0!==(8&t)&&(t|=32&t);var r=e.entangledLanes;if(0!==r)for(e=e.entanglements,r&=t;0<r;){var a=31-ve(r),l=1<<a;t|=e[a],r&=~l}return wc=t,Ar(),n}function nd(e,t){Vl=null,F.H=fs,t===Ka||t===Za?(t=ll(),gc=3):t===Xa?(t=ll(),gc=4):gc=t===Ms?8:null!==t&&"object"===typeof t&&"function"===typeof t.then?6:1,bc=t,null===fc&&(Nc=1,Cs(e,Qr(t,e.current)))}function rd(){var e=Ml.current;return null===e||((4194048&xc)===xc?null===Bl:((62914560&xc)===xc||0!==(536870912&xc))&&e===Bl)}function ad(){var e=F.H;return F.H=fs,null===e?fs:e}function ld(){var e=F.A;return F.A=uc,e}function od(){Nc=4,yc||(4194048&xc)!==xc&&null!==Ml.current||(vc=!0),0===(134217727&_c)&&0===(134217727&kc)||null===hc||Xc(hc,xc,Cc,!1)}function sd(e,t,n){var r=pc;pc|=2;var a=ad(),l=ld();hc===e&&xc===t||(Tc=null,td(e,t)),t=!1;var o=Nc;e:for(;;)try{if(0!==gc&&null!==fc){var s=fc,i=bc;switch(gc){case 8:ed(),o=6;break e;case 3:case 2:case 9:case 6:null===Ml.current&&(t=!0);var c=gc;if(gc=0,bc=null,md(e,s,i,c),n&&vc){o=0;break e}break;default:c=gc,gc=0,bc=null,md(e,s,i,c)}}id(),o=Nc;break}catch(d){nd(e,d)}return t&&e.shellSuspendCounter++,_a=Na=null,pc=r,F.H=a,F.A=l,null===fc&&(hc=null,xc=0,Ar()),o}function id(){for(;null!==fc;)dd(fc)}function cd(){for(;null!==fc&&!oe();)dd(fc)}function dd(e){var t=oi(e.alternate,e,wc);e.memoizedProps=e.pendingProps,null===t?pd(e):fc=t}function ud(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=qs(n,t,t.pendingProps,t.type,void 0,xc);break;case 11:t=qs(n,t,t.pendingProps,t.type.render,t.ref,xc);break;case 5:oo(t);default:fi(n,t),t=oi(n,t=fc=Wr(t,wc),wc)}e.memoizedProps=e.pendingProps,null===t?pd(e):fc=t}function md(e,t,n,r){_a=Na=null,oo(t),sl=null,il=0;var a=t.return;try{if(function(e,t,n,r,a){if(n.flags|=32768,null!==r&&"object"===typeof r&&"function"===typeof r.then){if(null!==(t=n.alternate)&&Ea(t,n,a,!0),null!==(n=Ml.current)){switch(n.tag){case 31:case 13:return null===Bl?od():null===n.alternate&&0===Nc&&(Nc=3),n.flags&=-257,n.flags|=65536,n.lanes=a,r===el?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([r]):t.add(r),_d(e,r,a)),!1;case 22:return n.flags|=65536,r===el?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([r]):n.add(r),_d(e,r,a)),!1}throw Error(o(435,n.tag))}return _d(e,r,a),od(),!1}if(ua)return null!==(t=Ml.current)?(0===(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=a,r!==ha&&ja(Qr(e=Error(o(422),{cause:r}),n))):(r!==ha&&ja(Qr(t=Error(o(423),{cause:r}),n)),(e=e.current.alternate).flags|=65536,a&=-a,e.lanes|=a,r=Qr(r,n),jl(e,a=Es(e.stateNode,r,a)),4!==Nc&&(Nc=2)),!1;var l=Error(o(520),{cause:r});if(l=Qr(l,n),null===Ec?Ec=[l]:Ec.push(l),4!==Nc&&(Nc=2),null===t)return!0;r=Qr(r,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=a&-a,n.lanes|=e,jl(n,e=Es(n.stateNode,r,e)),!1;case 1:if(t=n.type,l=n.stateNode,0===(128&n.flags)&&("function"===typeof t.getDerivedStateFromError||null!==l&&"function"===typeof l.componentDidCatch&&(null===Dc||!Dc.has(l))))return n.flags|=65536,a&=-a,n.lanes|=a,Ps(a=As(a),e,n,r),jl(n,a),!1}n=n.return}while(null!==n);return!1}(e,a,t,n,xc))return Nc=1,Cs(e,Qr(n,e.current)),void(fc=null)}catch(l){if(null!==a)throw fc=a,l;return Nc=1,Cs(e,Qr(n,e.current)),void(fc=null)}32768&t.flags?(ua||1===r?e=!0:vc||0!==(536870912&xc)?e=!1:(yc=e=!0,(2===r||9===r||3===r||6===r)&&(null!==(r=Ml.current)&&13===r.tag&&(r.flags|=16384))),hd(t,e)):pd(t)}function pd(e){var t=e;do{if(0!==(32768&t.flags))return void hd(t,yc);e=t.return;var n=pi(t.alternate,t,wc);if(null!==n)return void(fc=n);if(null!==(t=t.sibling))return void(fc=t);fc=t=e}while(null!==t);0===Nc&&(Nc=5)}function hd(e,t){do{var n=hi(e.alternate,e);if(null!==n)return n.flags&=32767,void(fc=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(fc=e);fc=e=n}while(null!==e);Nc=6,fc=null}function fd(e,t,n,r,a,l,s,i,c){e.cancelPendingCommit=null;do{vd()}while(0!==zc);if(0!==(6&pc))throw Error(o(327));if(null!==t){if(t===e.current)throw Error(o(177));if(l=t.lanes|t.childLanes,function(e,t,n,r,a,l){var o=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var s=e.entanglements,i=e.expirationTimes,c=e.hiddenUpdates;for(n=o&~n;0<n;){var d=31-ve(n),u=1<<d;s[d]=0,i[d]=-1;var m=c[d];if(null!==m)for(c[d]=null,d=0;d<m.length;d++){var p=m[d];null!==p&&(p.lane&=-536870913)}n&=~u}0!==r&&Be(e,r,0),0!==l&&0===a&&0!==e.tag&&(e.suspendedLanes|=l&~(o&~t))}(e,n,l|=Er,s,i,c),e===hc&&(fc=hc=null,xc=0),Oc=t,Rc=e,Ic=n,Wc=l,Vc=a,Hc=r,0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?(e.callbackNode=null,e.callbackPriority=0,ae(me,function(){return jd(),null})):(e.callbackNode=null,e.callbackPriority=0),r=0!==(13878&t.flags),0!==(13878&t.subtreeFlags)||r){r=F.T,F.T=null,a=T.p,T.p=2,s=pc,pc|=4;try{!function(e,t){if(e=e.containerInfo,hu=ym,ar(e=rr(e))){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var a=r.anchorOffset,l=r.focusNode;r=r.focusOffset;try{n.nodeType,l.nodeType}catch(x){n=null;break e}var s=0,i=-1,c=-1,d=0,u=0,m=e,p=null;t:for(;;){for(var h;m!==n||0!==a&&3!==m.nodeType||(i=s+a),m!==l||0!==r&&3!==m.nodeType||(c=s+r),3===m.nodeType&&(s+=m.nodeValue.length),null!==(h=m.firstChild);)p=m,m=h;for(;;){if(m===e)break t;if(p===n&&++d===a&&(i=s),p===l&&++u===r&&(c=s),null!==(h=m.nextSibling))break;p=(m=p).parentNode}m=h}n=-1===i||-1===c?null:{start:i,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(fu={focusedElem:e,selectionRange:n},ym=!1,Bi=t;null!==Bi;)if(e=(t=Bi).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Bi=e;else for(;null!==Bi;){switch(l=(t=Bi).alternate,e=t.flags,t.tag){case 0:if(0!==(4&e)&&null!==(e=null!==(e=t.updateQueue)?e.events:null))for(n=0;n<e.length;n++)(a=e[n]).ref.impl=a.nextImpl;break;case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(0!==(1024&e)&&null!==l){e=void 0,n=t,a=l.memoizedProps,l=l.memoizedState,r=n.stateNode;try{var f=Ns(n.type,a);e=r.getSnapshotBeforeUpdate(f,l),r.__reactInternalSnapshotBeforeUpdate=e}catch(g){Nd(n,n.return,g)}}break;case 3:if(0!==(1024&e))if(9===(n=(e=t.stateNode.containerInfo).nodeType))Eu(e);else if(1===n)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Eu(e);break;default:e.textContent=""}break;default:if(0!==(1024&e))throw Error(o(163))}if(null!==(e=t.sibling)){e.return=t.return,Bi=e;break}Bi=t.return}}(e,t)}finally{pc=s,T.p=a,F.T=r}}zc=1,xd(),gd(),bd()}}function xd(){if(1===zc){zc=0;var e=Rc,t=Oc,n=0!==(13878&t.flags);if(0!==(13878&t.subtreeFlags)||n){n=F.T,F.T=null;var r=T.p;T.p=2;var a=pc;pc|=4;try{qi(t,e);var l=fu,o=rr(e.containerInfo),s=l.focusedElem,i=l.selectionRange;if(o!==s&&s&&s.ownerDocument&&nr(s.ownerDocument.documentElement,s)){if(null!==i&&ar(s)){var c=i.start,d=i.end;if(void 0===d&&(d=c),"selectionStart"in s)s.selectionStart=c,s.selectionEnd=Math.min(d,s.value.length);else{var u=s.ownerDocument||document,m=u&&u.defaultView||window;if(m.getSelection){var p=m.getSelection(),h=s.textContent.length,f=Math.min(i.start,h),x=void 0===i.end?f:Math.min(i.end,h);!p.extend&&f>x&&(o=x,x=f,f=o);var g=tr(s,f),b=tr(s,x);if(g&&b&&(1!==p.rangeCount||p.anchorNode!==g.node||p.anchorOffset!==g.offset||p.focusNode!==b.node||p.focusOffset!==b.offset)){var y=u.createRange();y.setStart(g.node,g.offset),p.removeAllRanges(),f>x?(p.addRange(y),p.extend(b.node,b.offset)):(y.setEnd(b.node,b.offset),p.addRange(y))}}}}for(u=[],p=s;p=p.parentNode;)1===p.nodeType&&u.push({element:p,left:p.scrollLeft,top:p.scrollTop});for("function"===typeof s.focus&&s.focus(),s=0;s<u.length;s++){var v=u[s];v.element.scrollLeft=v.left,v.element.scrollTop=v.top}}ym=!!hu,fu=hu=null}finally{pc=a,T.p=r,F.T=n}}e.current=t,zc=2}}function gd(){if(2===zc){zc=0;var e=Rc,t=Oc,n=0!==(8772&t.flags);if(0!==(8772&t.subtreeFlags)||n){n=F.T,F.T=null;var r=T.p;T.p=2;var a=pc;pc|=4;try{Fi(e,t.alternate,t)}finally{pc=a,T.p=r,F.T=n}}zc=3}}function bd(){if(4===zc||3===zc){zc=0,se();var e=Rc,t=Oc,n=Ic,r=Hc;0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?zc=5:(zc=0,Oc=Rc=null,yd(e,e.pendingLanes));var a=e.pendingLanes;if(0===a&&(Dc=null),ze(n),t=t.stateNode,be&&"function"===typeof be.onCommitFiberRoot)try{be.onCommitFiberRoot(ge,t,void 0,128===(128&t.current.flags))}catch(i){}if(null!==r){t=F.T,a=T.p,T.p=2,F.T=null;try{for(var l=e.onRecoverableError,o=0;o<r.length;o++){var s=r[o];l(s.value,{componentStack:s.stack})}}finally{F.T=t,T.p=a}}0!==(3&Ic)&&vd(),Td(e),a=e.pendingLanes,0!==(261930&n)&&0!==(42&a)?e===qc?Uc++:(Uc=0,qc=e):Uc=0,Dd(0,!1)}}function yd(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,Ia(t)))}function vd(){return xd(),gd(),bd(),jd()}function jd(){if(5!==zc)return!1;var e=Rc,t=Wc;Wc=0;var n=ze(Ic),r=F.T,a=T.p;try{T.p=32>n?32:n,F.T=null,n=Vc,Vc=null;var l=Rc,s=Ic;if(zc=0,Oc=Rc=null,Ic=0,0!==(6&pc))throw Error(o(331));var i=pc;if(pc|=4,ic(l.current),ec(l,l.current,s,n),pc=i,Dd(0,!1),be&&"function"===typeof be.onPostCommitFiberRoot)try{be.onPostCommitFiberRoot(ge,l)}catch(c){}return!0}finally{T.p=a,F.T=r,yd(e,t)}}function wd(e,t,n){t=Qr(n,t),null!==(e=yl(e,t=Es(e.stateNode,t,2),2))&&(Me(e,2),Td(e))}function Nd(e,t,n){if(3===e.tag)wd(e,e,n);else for(;null!==t;){if(3===t.tag){wd(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Dc||!Dc.has(r))){e=Qr(n,e),null!==(r=yl(t,n=As(2),2))&&(Ps(n,r,t,e),Me(r,2),Td(r));break}}t=t.return}}function _d(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new mc;var a=new Set;r.set(t,a)}else void 0===(a=r.get(t))&&(a=new Set,r.set(t,a));a.has(n)||(jc=!0,a.add(n),e=kd.bind(null,e,t,n),t.then(e,e))}function kd(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,hc===e&&(xc&n)===n&&(4===Nc||3===Nc&&(62914560&xc)===xc&&300>ie()-Mc?0===(2&pc)&&td(e,0):Sc|=n,Lc===xc&&(Lc=0)),Td(e)}function Sd(e,t){0===t&&(t=Ae()),null!==(e=Br(e,t))&&(Me(e,t),Td(e))}function Cd(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Sd(e,n)}function Ld(e,t){var n=0;switch(e.tag){case 31:case 13:var r=e.stateNode,a=e.memoizedState;null!==a&&(n=a.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(o(314))}null!==r&&r.delete(t),Sd(e,n)}var Ed=null,Ad=null,Pd=!1,Md=!1,Bd=!1,Fd=0;function Td(e){e!==Ad&&null===e.next&&(null===Ad?Ed=Ad=e:Ad=Ad.next=e),Md=!0,Pd||(Pd=!0,_u(function(){0!==(6&pc)?ae(de,zd):Rd()}))}function Dd(e,t){if(!Bd&&Md){Bd=!0;do{for(var n=!1,r=Ed;null!==r;){if(!t)if(0!==e){var a=r.pendingLanes;if(0===a)var l=0;else{var o=r.suspendedLanes,s=r.pingedLanes;l=(1<<31-ve(42|e)+1)-1,l=201326741&(l&=a&~(o&~s))?201326741&l|1:l?2|l:0}0!==l&&(n=!0,Wd(r,l))}else l=xc,0===(3&(l=Ce(r,r===hc?l:0,null!==r.cancelPendingCommit||-1!==r.timeoutHandle)))||Le(r,l)||(n=!0,Wd(r,l));r=r.next}}while(n);Bd=!1}}function zd(){Rd()}function Rd(){Md=Pd=!1;var e=0;0!==Fd&&function(){var e=window.event;if(e&&"popstate"===e.type)return e!==vu&&(vu=e,!0);return vu=null,!1}()&&(e=Fd);for(var t=ie(),n=null,r=Ed;null!==r;){var a=r.next,l=Od(r,t);0===l?(r.next=null,null===n?Ed=a:n.next=a,null===a&&(Ad=n)):(n=r,(0!==e||0!==(3&l))&&(Md=!0)),r=a}0!==zc&&5!==zc||Dd(e,!1),0!==Fd&&(Fd=0)}function Od(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,l=-62914561&e.pendingLanes;0<l;){var o=31-ve(l),s=1<<o,i=a[o];-1===i?0!==(s&n)&&0===(s&r)||(a[o]=Ee(s,t)):i<=t&&(e.expiredLanes|=s),l&=~s}if(n=xc,n=Ce(e,e===(t=hc)?n:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),r=e.callbackNode,0===n||e===t&&(2===gc||9===gc)||null!==e.cancelPendingCommit)return null!==r&&null!==r&&le(r),e.callbackNode=null,e.callbackPriority=0;if(0===(3&n)||Le(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==r&&le(r),ze(n)){case 2:case 8:n=ue;break;case 32:default:n=me;break;case 268435456:n=he}return r=Id.bind(null,e),n=ae(n,r),e.callbackPriority=t,e.callbackNode=n,t}return null!==r&&null!==r&&le(r),e.callbackPriority=2,e.callbackNode=null,2}function Id(e,t){if(0!==zc&&5!==zc)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(vd()&&e.callbackNode!==n)return null;var r=xc;return 0===(r=Ce(e,e===hc?r:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(Jc(e,r,t),Od(e,ie()),null!=e.callbackNode&&e.callbackNode===n?Id.bind(null,e):null)}function Wd(e,t){if(vd())return null;Jc(e,t,!0)}function Vd(){if(0===Fd){var e=Ha;0===e&&(e=Ne,0===(261888&(Ne<<=1))&&(Ne=256)),Fd=e}return Fd}function Hd(e){return null==e||"symbol"===typeof e||"boolean"===typeof e?null:"function"===typeof e?e:Pt(""+e)}function Ud(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}for(var qd=0;qd<_r.length;qd++){var $d=_r[qd];kr($d.toLowerCase(),"on"+($d[0].toUpperCase()+$d.slice(1)))}kr(xr,"onAnimationEnd"),kr(gr,"onAnimationIteration"),kr(br,"onAnimationStart"),kr("dblclick","onDoubleClick"),kr("focusin","onFocus"),kr("focusout","onBlur"),kr(yr,"onTransitionRun"),kr(vr,"onTransitionStart"),kr(jr,"onTransitionCancel"),kr(wr,"onTransitionEnd"),at("onMouseEnter",["mouseout","mouseover"]),at("onMouseLeave",["mouseout","mouseover"]),at("onPointerEnter",["pointerout","pointerover"]),at("onPointerLeave",["pointerout","pointerover"]),rt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),rt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),rt("onBeforeInput",["compositionend","keypress","textInput","paste"]),rt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),rt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),rt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Gd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Qd=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Gd));function Jd(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var l=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],i=s.instance,c=s.currentTarget;if(s=s.listener,i!==l&&a.isPropagationStopped())break e;l=s,a.currentTarget=c;try{l(a)}catch(d){Sr(d)}a.currentTarget=null,l=i}else for(o=0;o<r.length;o++){if(i=(s=r[o]).instance,c=s.currentTarget,s=s.listener,i!==l&&a.isPropagationStopped())break e;l=s,a.currentTarget=c;try{l(a)}catch(d){Sr(d)}a.currentTarget=null,l=i}}}}function Yd(e,t){var n=t[Ue];void 0===n&&(n=t[Ue]=new Set);var r=e+"__bubble";n.has(r)||(eu(t,e,2,!1),n.add(r))}function Kd(e,t,n){var r=0;t&&(r|=4),eu(n,e,r,t)}var Xd="_reactListening"+Math.random().toString(36).slice(2);function Zd(e){if(!e[Xd]){e[Xd]=!0,tt.forEach(function(t){"selectionchange"!==t&&(Qd.has(t)||Kd(t,!1,e),Kd(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Xd]||(t[Xd]=!0,Kd("selectionchange",!1,t))}}function eu(e,t,n,r){switch(Sm(t)){case 2:var a=vm;break;case 8:a=jm;break;default:a=wm}n=a.bind(null,t,n,e),a=void 0,!Vt||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(a=!0),r?void 0!==a?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):void 0!==a?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function tu(e,t,n,r,a){var l=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var s=r.stateNode.containerInfo;if(s===a)break;if(4===o)for(o=r.return;null!==o;){var c=o.tag;if((3===c||4===c)&&o.stateNode.containerInfo===a)return;o=o.return}for(;null!==s;){if(null===(o=Ye(s)))return;if(5===(c=o.tag)||6===c||26===c||27===c){r=l=o;continue e}s=s.parentNode}}r=r.return}Ot(function(){var r=l,a=Ft(n),o=[];e:{var s=Nr.get(e);if(void 0!==s){var c=nn,d=e;switch(e){case"keypress":if(0===Qt(n))break e;case"keydown":case"keyup":c=bn;break;case"focusin":d="focus",c=cn;break;case"focusout":d="blur",c=cn;break;case"beforeblur":case"afterblur":c=cn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=on;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=sn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=vn;break;case xr:case gr:case br:c=dn;break;case wr:c=jn;break;case"scroll":case"scrollend":c=an;break;case"wheel":c=wn;break;case"copy":case"cut":case"paste":c=un;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=yn;break;case"toggle":case"beforetoggle":c=Nn}var u=0!==(4&t),m=!u&&("scroll"===e||"scrollend"===e),p=u?null!==s?s+"Capture":null:s;u=[];for(var h,f=r;null!==f;){var x=f;if(h=x.stateNode,5!==(x=x.tag)&&26!==x&&27!==x||null===h||null===p||null!=(x=It(f,p))&&u.push(nu(f,x,h)),m)break;f=f.return}0<u.length&&(s=new c(s,d,null,n,a),o.push({event:s,listeners:u}))}}if(0===(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===Bt||!(d=n.relatedTarget||n.fromElement)||!Ye(d)&&!d[He])&&(c||s)&&(s=a.window===a?a:(s=a.ownerDocument)?s.defaultView||s.parentWindow:window,c?(c=r,null!==(d=(d=n.relatedTarget||n.toElement)?Ye(d):null)&&(m=i(d),u=d.tag,d!==m||5!==u&&27!==u&&6!==u)&&(d=null)):(c=null,d=r),c!==d)){if(u=on,x="onMouseLeave",p="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(u=yn,x="onPointerLeave",p="onPointerEnter",f="pointer"),m=null==c?s:Xe(c),h=null==d?s:Xe(d),(s=new u(x,f+"leave",c,n,a)).target=m,s.relatedTarget=h,x=null,Ye(a)===r&&((u=new u(p,f+"enter",d,n,a)).target=h,u.relatedTarget=m,x=u),m=x,c&&d)e:{for(u=au,f=d,h=0,x=p=c;x;x=u(x))h++;x=0;for(var g=f;g;g=u(g))x++;for(;0<h-x;)p=u(p),h--;for(;0<x-h;)f=u(f),x--;for(;h--;){if(p===f||null!==f&&p===f.alternate){u=p;break e}p=u(p),f=u(f)}u=null}else u=null;null!==c&&lu(o,s,c,u,!1),null!==d&&null!==m&&lu(o,m,d,u,!0)}if("select"===(c=(s=r?Xe(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===c&&"file"===s.type)var b=Wn;else if(Tn(s))if(Vn)b=Kn;else{b=Jn;var y=Qn}else!(c=s.nodeName)||"input"!==c.toLowerCase()||"checkbox"!==s.type&&"radio"!==s.type?r&&Lt(r.elementType)&&(b=Wn):b=Yn;switch(b&&(b=b(e,r))?Dn(o,b,n,a):(y&&y(e,s,r),"focusout"===e&&r&&"number"===s.type&&null!=r.memoizedProps.value&&vt(s,"number",s.value)),y=r?Xe(r):window,e){case"focusin":(Tn(y)||"true"===y.contentEditable)&&(or=y,sr=r,ir=null);break;case"focusout":ir=sr=or=null;break;case"mousedown":cr=!0;break;case"contextmenu":case"mouseup":case"dragend":cr=!1,dr(o,n,a);break;case"selectionchange":if(lr)break;case"keydown":case"keyup":dr(o,n,a)}var v;if(kn)e:{switch(e){case"compositionstart":var j="onCompositionStart";break e;case"compositionend":j="onCompositionEnd";break e;case"compositionupdate":j="onCompositionUpdate";break e}j=void 0}else Bn?Pn(e,n)&&(j="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(j="onCompositionStart");j&&(Ln&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==j?"onCompositionEnd"===j&&Bn&&(v=Gt()):(qt="value"in(Ut=a)?Ut.value:Ut.textContent,Bn=!0)),0<(y=ru(r,j)).length&&(j=new mn(j,e,null,n,a),o.push({event:j,listeners:y}),v?j.data=v:null!==(v=Mn(n))&&(j.data=v))),(v=Cn?function(e,t){switch(e){case"compositionend":return Mn(t);case"keypress":return 32!==t.which?null:(An=!0,En);case"textInput":return(e=t.data)===En&&An?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!kn&&Pn(e,t)?(e=Gt(),$t=qt=Ut=null,Bn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ln&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(j=ru(r,"onBeforeInput")).length&&(y=new mn("onBeforeInput","beforeinput",null,n,a),o.push({event:y,listeners:j}),y.data=v)),function(e,t,n,r,a){if("submit"===t&&n&&n.stateNode===a){var l=Hd((a[Ve]||null).action),o=r.submitter;o&&null!==(t=(t=o[Ve]||null)?Hd(t.formAction):o.getAttribute("formAction"))&&(l=t,o=null);var s=new nn("action","action",null,r,a);e.push({event:s,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(0!==Fd){var e=o?Ud(a,o):new FormData(a);ts(n,{pending:!0,data:e,method:a.method,action:l},null,e)}}else"function"===typeof l&&(s.preventDefault(),e=o?Ud(a,o):new FormData(a),ts(n,{pending:!0,data:e,method:a.method,action:l},l,e))},currentTarget:a}]})}}(o,e,r,n,a)}Jd(o,t)})}function nu(e,t,n){return{instance:e,listener:t,currentTarget:n}}function ru(e,t){for(var n=t+"Capture",r=[];null!==e;){var a=e,l=a.stateNode;if(5!==(a=a.tag)&&26!==a&&27!==a||null===l||(null!=(a=It(e,n))&&r.unshift(nu(e,a,l)),null!=(a=It(e,t))&&r.push(nu(e,a,l))),3===e.tag)return r;e=e.return}return[]}function au(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function lu(e,t,n,r,a){for(var l=t._reactName,o=[];null!==n&&n!==r;){var s=n,i=s.alternate,c=s.stateNode;if(s=s.tag,null!==i&&i===r)break;5!==s&&26!==s&&27!==s||null===c||(i=c,a?null!=(c=It(n,l))&&o.unshift(nu(n,c,i)):a||null!=(c=It(n,l))&&o.push(nu(n,c,i))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var ou=/\r\n?/g,su=/\u0000|\uFFFD/g;function iu(e){return("string"===typeof e?e:""+e).replace(ou,"\n").replace(su,"")}function cu(e,t){return t=iu(t),iu(e)===t}function du(e,t,n,r,a,l){switch(n){case"children":"string"===typeof r?"body"===t||"textarea"===t&&""===r||_t(e,r):("number"===typeof r||"bigint"===typeof r)&&"body"!==t&&_t(e,""+r);break;case"className":ct(e,"class",r);break;case"tabIndex":ct(e,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":ct(e,n,r);break;case"style":Ct(e,r,l);break;case"data":if("object"!==t){ct(e,"data",r);break}case"src":case"href":if(""===r&&("a"!==t||"href"!==n)){e.removeAttribute(n);break}if(null==r||"function"===typeof r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=Pt(""+r),e.setAttribute(n,r);break;case"action":case"formAction":if("function"===typeof r){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"===typeof l&&("formAction"===n?("input"!==t&&du(e,t,"name",a.name,a,null),du(e,t,"formEncType",a.formEncType,a,null),du(e,t,"formMethod",a.formMethod,a,null),du(e,t,"formTarget",a.formTarget,a,null)):(du(e,t,"encType",a.encType,a,null),du(e,t,"method",a.method,a,null),du(e,t,"target",a.target,a,null))),null==r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=Pt(""+r),e.setAttribute(n,r);break;case"onClick":null!=r&&(e.onclick=Mt);break;case"onScroll":null!=r&&Yd("scroll",e);break;case"onScrollEnd":null!=r&&Yd("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(o(61));if(null!=(n=r.__html)){if(null!=a.children)throw Error(o(60));e.innerHTML=n}}break;case"multiple":e.multiple=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"muted":e.muted=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==r||"function"===typeof r||"boolean"===typeof r||"symbol"===typeof r){e.removeAttribute("xlink:href");break}n=Pt(""+r),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""+r):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":!0===r?e.setAttribute(n,""):!1!==r&&null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,r):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=r&&"function"!==typeof r&&"symbol"!==typeof r&&!isNaN(r)&&1<=r?e.setAttribute(n,r):e.removeAttribute(n);break;case"rowSpan":case"start":null==r||"function"===typeof r||"symbol"===typeof r||isNaN(r)?e.removeAttribute(n):e.setAttribute(n,r);break;case"popover":Yd("beforetoggle",e),Yd("toggle",e),it(e,"popover",r);break;case"xlinkActuate":dt(e,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":dt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":dt(e,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":dt(e,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":dt(e,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":dt(e,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":dt(e,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":dt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":dt(e,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":it(e,"is",r);break;case"innerText":case"textContent":break;default:(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&it(e,n=Et.get(n)||n,r)}}function uu(e,t,n,r,a,l){switch(n){case"style":Ct(e,r,l);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(o(61));if(null!=(n=r.__html)){if(null!=a.children)throw Error(o(60));e.innerHTML=n}}break;case"children":"string"===typeof r?_t(e,r):("number"===typeof r||"bigint"===typeof r)&&_t(e,""+r);break;case"onScroll":null!=r&&Yd("scroll",e);break;case"onScrollEnd":null!=r&&Yd("scrollend",e);break;case"onClick":null!=r&&(e.onclick=Mt);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:nt.hasOwnProperty(n)||("o"!==n[0]||"n"!==n[1]||(a=n.endsWith("Capture"),t=n.slice(2,a?n.length-7:void 0),"function"===typeof(l=null!=(l=e[Ve]||null)?l[n]:null)&&e.removeEventListener(t,l,a),"function"!==typeof r)?n in e?e[n]=r:!0===r?e.setAttribute(n,""):it(e,n,r):("function"!==typeof l&&null!==l&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,r,a)))}}function mu(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Yd("error",e),Yd("load",e);var r,a=!1,l=!1;for(r in n)if(n.hasOwnProperty(r)){var s=n[r];if(null!=s)switch(r){case"src":a=!0;break;case"srcSet":l=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:du(e,t,r,s,n,null)}}return l&&du(e,t,"srcSet",n.srcSet,n,null),void(a&&du(e,t,"src",n.src,n,null));case"input":Yd("invalid",e);var i=r=s=l=null,c=null,d=null;for(a in n)if(n.hasOwnProperty(a)){var u=n[a];if(null!=u)switch(a){case"name":l=u;break;case"type":s=u;break;case"checked":c=u;break;case"defaultChecked":d=u;break;case"value":r=u;break;case"defaultValue":i=u;break;case"children":case"dangerouslySetInnerHTML":if(null!=u)throw Error(o(137,t));break;default:du(e,t,a,u,n,null)}}return void yt(e,r,i,c,d,s,l,!1);case"select":for(l in Yd("invalid",e),a=s=r=null,n)if(n.hasOwnProperty(l)&&null!=(i=n[l]))switch(l){case"value":r=i;break;case"defaultValue":s=i;break;case"multiple":a=i;default:du(e,t,l,i,n,null)}return t=r,n=s,e.multiple=!!a,void(null!=t?jt(e,!!a,t,!1):null!=n&&jt(e,!!a,n,!0));case"textarea":for(s in Yd("invalid",e),r=l=a=null,n)if(n.hasOwnProperty(s)&&null!=(i=n[s]))switch(s){case"value":a=i;break;case"defaultValue":l=i;break;case"children":r=i;break;case"dangerouslySetInnerHTML":if(null!=i)throw Error(o(91));break;default:du(e,t,s,i,n,null)}return void Nt(e,a,l,r);case"option":for(c in n)if(n.hasOwnProperty(c)&&null!=(a=n[c]))if("selected"===c)e.selected=a&&"function"!==typeof a&&"symbol"!==typeof a;else du(e,t,c,a,n,null);return;case"dialog":Yd("beforetoggle",e),Yd("toggle",e),Yd("cancel",e),Yd("close",e);break;case"iframe":case"object":Yd("load",e);break;case"video":case"audio":for(a=0;a<Gd.length;a++)Yd(Gd[a],e);break;case"image":Yd("error",e),Yd("load",e);break;case"details":Yd("toggle",e);break;case"embed":case"source":case"link":Yd("error",e),Yd("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(d in n)if(n.hasOwnProperty(d)&&null!=(a=n[d]))switch(d){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:du(e,t,d,a,n,null)}return;default:if(Lt(t)){for(u in n)n.hasOwnProperty(u)&&(void 0!==(a=n[u])&&uu(e,t,u,a,n,void 0));return}}for(i in n)n.hasOwnProperty(i)&&(null!=(a=n[i])&&du(e,t,i,a,n,null))}function pu(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}var hu=null,fu=null;function xu(e){return 9===e.nodeType?e:e.ownerDocument}function gu(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function bu(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function yu(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"bigint"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var vu=null;var ju="function"===typeof setTimeout?setTimeout:void 0,wu="function"===typeof clearTimeout?clearTimeout:void 0,Nu="function"===typeof Promise?Promise:void 0,_u="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof Nu?function(e){return Nu.resolve(null).then(e).catch(ku)}:ju;function ku(e){setTimeout(function(){throw e})}function Su(e){return"head"===e}function Cu(e,t){var n=t,r=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&8===a.nodeType)if("/$"===(n=a.data)||"/&"===n){if(0===r)return e.removeChild(a),void Um(t);r--}else if("$"===n||"$?"===n||"$~"===n||"$!"===n||"&"===n)r++;else if("html"===n)Ru(e.ownerDocument.documentElement);else if("head"===n){Ru(n=e.ownerDocument.head);for(var l=n.firstChild;l;){var o=l.nextSibling,s=l.nodeName;l[Qe]||"SCRIPT"===s||"STYLE"===s||"LINK"===s&&"stylesheet"===l.rel.toLowerCase()||n.removeChild(l),l=o}}else"body"===n&&Ru(e.ownerDocument.body);n=a}while(n);Um(t)}function Lu(e,t){var n=e;e=0;do{var r=n.nextSibling;if(1===n.nodeType?t?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",""===n.getAttribute("style")&&n.removeAttribute("style")):3===n.nodeType&&(t?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),r&&8===r.nodeType)if("/$"===(n=r.data)){if(0===e)break;e--}else"$"!==n&&"$?"!==n&&"$~"!==n&&"$!"!==n||e++;n=r}while(n)}function Eu(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":Eu(n),Je(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}e.removeChild(n)}}function Au(e,t){for(;8!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!t)return null;if(null===(e=Bu(e.nextSibling)))return null}return e}function Pu(e){return"$?"===e.data||"$~"===e.data}function Mu(e){return"$!"===e.data||"$?"===e.data&&"loading"!==e.ownerDocument.readyState}function Bu(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"$~"===t||"&"===t||"F!"===t||"F"===t)break;if("/$"===t||"/&"===t)return null}}return e}var Fu=null;function Tu(e){e=e.nextSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n||"/&"===n){if(0===t)return Bu(e.nextSibling);t--}else"$"!==n&&"$!"!==n&&"$?"!==n&&"$~"!==n&&"&"!==n||t++}e=e.nextSibling}return null}function Du(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n||"$~"===n||"&"===n){if(0===t)return e;t--}else"/$"!==n&&"/&"!==n||t++}e=e.previousSibling}return null}function zu(e,t,n){switch(t=xu(n),e){case"html":if(!(e=t.documentElement))throw Error(o(452));return e;case"head":if(!(e=t.head))throw Error(o(453));return e;case"body":if(!(e=t.body))throw Error(o(454));return e;default:throw Error(o(451))}}function Ru(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Je(e)}var Ou=new Map,Iu=new Set;function Wu(e){return"function"===typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var Vu=T.d;T.d={f:function(){var e=Vu.f(),t=Zc();return e||t},r:function(e){var t=Ke(e);null!==t&&5===t.tag&&"form"===t.type?rs(t):Vu.r(e)},D:function(e){Vu.D(e),Uu("dns-prefetch",e,null)},C:function(e,t){Vu.C(e,t),Uu("preconnect",e,t)},L:function(e,t,n){Vu.L(e,t,n);var r=Hu;if(r&&e&&t){var a='link[rel="preload"][as="'+gt(t)+'"]';"image"===t&&n&&n.imageSrcSet?(a+='[imagesrcset="'+gt(n.imageSrcSet)+'"]',"string"===typeof n.imageSizes&&(a+='[imagesizes="'+gt(n.imageSizes)+'"]')):a+='[href="'+gt(e)+'"]';var l=a;switch(t){case"style":l=$u(e);break;case"script":l=Ju(e)}Ou.has(l)||(e=p({rel:"preload",href:"image"===t&&n&&n.imageSrcSet?void 0:e,as:t},n),Ou.set(l,e),null!==r.querySelector(a)||"style"===t&&r.querySelector(Gu(l))||"script"===t&&r.querySelector(Yu(l))||(mu(t=r.createElement("link"),"link",e),et(t),r.head.appendChild(t)))}},m:function(e,t){Vu.m(e,t);var n=Hu;if(n&&e){var r=t&&"string"===typeof t.as?t.as:"script",a='link[rel="modulepreload"][as="'+gt(r)+'"][href="'+gt(e)+'"]',l=a;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":l=Ju(e)}if(!Ou.has(l)&&(e=p({rel:"modulepreload",href:e},t),Ou.set(l,e),null===n.querySelector(a))){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Yu(l)))return}mu(r=n.createElement("link"),"link",e),et(r),n.head.appendChild(r)}}},X:function(e,t){Vu.X(e,t);var n=Hu;if(n&&e){var r=Ze(n).hoistableScripts,a=Ju(e),l=r.get(a);l||((l=n.querySelector(Yu(a)))||(e=p({src:e,async:!0},t),(t=Ou.get(a))&&em(e,t),et(l=n.createElement("script")),mu(l,"link",e),n.head.appendChild(l)),l={type:"script",instance:l,count:1,state:null},r.set(a,l))}},S:function(e,t,n){Vu.S(e,t,n);var r=Hu;if(r&&e){var a=Ze(r).hoistableStyles,l=$u(e);t=t||"default";var o=a.get(l);if(!o){var s={loading:0,preload:null};if(o=r.querySelector(Gu(l)))s.loading=5;else{e=p({rel:"stylesheet",href:e,"data-precedence":t},n),(n=Ou.get(l))&&Zu(e,n);var i=o=r.createElement("link");et(i),mu(i,"link",e),i._p=new Promise(function(e,t){i.onload=e,i.onerror=t}),i.addEventListener("load",function(){s.loading|=1}),i.addEventListener("error",function(){s.loading|=2}),s.loading|=4,Xu(o,t,r)}o={type:"stylesheet",instance:o,count:1,state:s},a.set(l,o)}}},M:function(e,t){Vu.M(e,t);var n=Hu;if(n&&e){var r=Ze(n).hoistableScripts,a=Ju(e),l=r.get(a);l||((l=n.querySelector(Yu(a)))||(e=p({src:e,async:!0,type:"module"},t),(t=Ou.get(a))&&em(e,t),et(l=n.createElement("script")),mu(l,"link",e),n.head.appendChild(l)),l={type:"script",instance:l,count:1,state:null},r.set(a,l))}}};var Hu="undefined"===typeof document?null:document;function Uu(e,t,n){var r=Hu;if(r&&"string"===typeof t&&t){var a=gt(t);a='link[rel="'+e+'"][href="'+a+'"]',"string"===typeof n&&(a+='[crossorigin="'+n+'"]'),Iu.has(a)||(Iu.add(a),e={rel:e,crossOrigin:n,href:t},null===r.querySelector(a)&&(mu(t=r.createElement("link"),"link",e),et(t),r.head.appendChild(t)))}}function qu(e,t,n,r){var a,l,s,i,c=(c=$.current)?Wu(c):null;if(!c)throw Error(o(446));switch(e){case"meta":case"title":return null;case"style":return"string"===typeof n.precedence&&"string"===typeof n.href?(t=$u(n.href),(r=(n=Ze(c).hoistableStyles).get(t))||(r={type:"style",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"===typeof n.href&&"string"===typeof n.precedence){e=$u(n.href);var d=Ze(c).hoistableStyles,u=d.get(e);if(u||(c=c.ownerDocument||c,u={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(e,u),(d=c.querySelector(Gu(e)))&&!d._p&&(u.instance=d,u.state.loading=5),Ou.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Ou.set(e,n),d||(a=c,l=e,s=n,i=u.state,a.querySelector('link[rel="preload"][as="style"]['+l+"]")?i.loading=1:(l=a.createElement("link"),i.preload=l,l.addEventListener("load",function(){return i.loading|=1}),l.addEventListener("error",function(){return i.loading|=2}),mu(l,"link",s),et(l),a.head.appendChild(l))))),t&&null===r)throw Error(o(528,""));return u}if(t&&null!==r)throw Error(o(529,""));return null;case"script":return t=n.async,"string"===typeof(n=n.src)&&t&&"function"!==typeof t&&"symbol"!==typeof t?(t=Ju(n),(r=(n=Ze(c).hoistableScripts).get(t))||(r={type:"script",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,e))}}function $u(e){return'href="'+gt(e)+'"'}function Gu(e){return'link[rel="stylesheet"]['+e+"]"}function Qu(e){return p({},e,{"data-precedence":e.precedence,precedence:null})}function Ju(e){return'[src="'+gt(e)+'"]'}function Yu(e){return"script[async]"+e}function Ku(e,t,n){if(t.count++,null===t.instance)switch(t.type){case"style":var r=e.querySelector('style[data-href~="'+gt(n.href)+'"]');if(r)return t.instance=r,et(r),r;var a=p({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return et(r=(e.ownerDocument||e).createElement("style")),mu(r,"style",a),Xu(r,n.precedence,e),t.instance=r;case"stylesheet":a=$u(n.href);var l=e.querySelector(Gu(a));if(l)return t.state.loading|=4,t.instance=l,et(l),l;r=Qu(n),(a=Ou.get(a))&&Zu(r,a),et(l=(e.ownerDocument||e).createElement("link"));var s=l;return s._p=new Promise(function(e,t){s.onload=e,s.onerror=t}),mu(l,"link",r),t.state.loading|=4,Xu(l,n.precedence,e),t.instance=l;case"script":return l=Ju(n.src),(a=e.querySelector(Yu(l)))?(t.instance=a,et(a),a):(r=n,(a=Ou.get(l))&&em(r=p({},n),a),et(a=(e=e.ownerDocument||e).createElement("script")),mu(a,"link",r),e.head.appendChild(a),t.instance=a);case"void":return null;default:throw Error(o(443,t.type))}else"stylesheet"===t.type&&0===(4&t.state.loading)&&(r=t.instance,t.state.loading|=4,Xu(r,n.precedence,e));return t.instance}function Xu(e,t,n){for(var r=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),a=r.length?r[r.length-1]:null,l=a,o=0;o<r.length;o++){var s=r[o];if(s.dataset.precedence===t)l=s;else if(l!==a)break}l?l.parentNode.insertBefore(e,l.nextSibling):(t=9===n.nodeType?n.head:n).insertBefore(e,t.firstChild)}function Zu(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function em(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var tm=null;function nm(e,t,n){if(null===tm){var r=new Map,a=tm=new Map;a.set(n,r)}else(r=(a=tm).get(n))||(r=new Map,a.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),a=0;a<n.length;a++){var l=n[a];if(!(l[Qe]||l[We]||"link"===e&&"stylesheet"===l.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==l.namespaceURI){var o=l.getAttribute(t)||"";o=e+o;var s=r.get(o);s?s.push(l):r.set(o,[l])}}return r}function rm(e,t,n){(e=e.ownerDocument||e).head.insertBefore(n,"title"===t?e.querySelector("head > title"):null)}function am(e){return"stylesheet"!==e.type||0!==(3&e.state.loading)}var lm=0;function om(){if(this.count--,0===this.count&&(0===this.imgCount||!this.waitingForImages))if(this.stylesheets)im(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var sm=null;function im(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,sm=new Map,t.forEach(cm,e),sm=null,om.call(e))}function cm(e,t){if(!(4&t.state.loading)){var n=sm.get(e);if(n)var r=n.get(null);else{n=new Map,sm.set(e,n);for(var a=e.querySelectorAll("link[data-precedence],style[data-precedence]"),l=0;l<a.length;l++){var o=a[l];"LINK"!==o.nodeName&&"not all"===o.getAttribute("media")||(n.set(o.dataset.precedence,o),r=o)}r&&n.set(null,r)}o=(a=t.instance).getAttribute("data-precedence"),(l=n.get(o)||r)===r&&n.set(null,a),n.set(o,a),this.count++,r=om.bind(this),a.addEventListener("load",r),a.addEventListener("error",r),l?l.parentNode.insertBefore(a,l.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(a,e.firstChild),t.state.loading|=4}}var dm={$$typeof:j,Provider:null,Consumer:null,_currentValue:D,_currentValue2:D,_threadCount:0};function um(e,t,n,r,a,l,o,s,i){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Pe(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Pe(0),this.hiddenUpdates=Pe(null),this.identifierPrefix=r,this.onUncaughtError=a,this.onCaughtError=l,this.onRecoverableError=o,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=i,this.incompleteTransitions=new Map}function mm(e,t,n,r,a,l,o,s,i,c,d,u){return e=new um(e,t,n,o,i,c,d,u,s),t=1,!0===l&&(t|=24),l=Rr(3,null,null,t),e.current=l,l.stateNode=e,(t=Oa()).refCount++,e.pooledCache=t,t.refCount++,l.memoizedState={element:r,isDehydrated:n,cache:t},xl(l),e}function pm(e){return e?e=Dr:Dr}function hm(e,t,n,r,a,l){a=pm(a),null===r.context?r.context=a:r.pendingContext=a,(r=bl(t)).payload={element:n},null!==(l=void 0===l?null:l)&&(r.callback=l),null!==(n=yl(e,r,t))&&(Qc(n,0,t),vl(n,e,t))}function fm(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function xm(e,t){fm(e,t),(e=e.alternate)&&fm(e,t)}function gm(e){if(13===e.tag||31===e.tag){var t=Br(e,67108864);null!==t&&Qc(t,0,67108864),xm(e,67108864)}}function bm(e){if(13===e.tag||31===e.tag){var t=$c(),n=Br(e,t=De(t));null!==n&&Qc(n,0,t),xm(e,t)}}var ym=!0;function vm(e,t,n,r){var a=F.T;F.T=null;var l=T.p;try{T.p=2,wm(e,t,n,r)}finally{T.p=l,F.T=a}}function jm(e,t,n,r){var a=F.T;F.T=null;var l=T.p;try{T.p=8,wm(e,t,n,r)}finally{T.p=l,F.T=a}}function wm(e,t,n,r){if(ym){var a=Nm(r);if(null===a)tu(e,t,r,_m,n),Tm(e,r);else if(function(e,t,n,r,a){switch(t){case"focusin":return Lm=Dm(Lm,e,t,n,r,a),!0;case"dragenter":return Em=Dm(Em,e,t,n,r,a),!0;case"mouseover":return Am=Dm(Am,e,t,n,r,a),!0;case"pointerover":var l=a.pointerId;return Pm.set(l,Dm(Pm.get(l)||null,e,t,n,r,a)),!0;case"gotpointercapture":return l=a.pointerId,Mm.set(l,Dm(Mm.get(l)||null,e,t,n,r,a)),!0}return!1}(a,e,t,n,r))r.stopPropagation();else if(Tm(e,r),4&t&&-1<Fm.indexOf(e)){for(;null!==a;){var l=Ke(a);if(null!==l)switch(l.tag){case 3:if((l=l.stateNode).current.memoizedState.isDehydrated){var o=Se(l.pendingLanes);if(0!==o){var s=l;for(s.pendingLanes|=2,s.entangledLanes|=2;o;){var i=1<<31-ve(o);s.entanglements[1]|=i,o&=~i}Td(l),0===(6&pc)&&(Fc=ie()+500,Dd(0,!1))}}break;case 31:case 13:null!==(s=Br(l,2))&&Qc(s,0,2),Zc(),xm(l,2)}if(null===(l=Nm(r))&&tu(e,t,r,_m,n),l===a)break;a=l}null!==a&&r.stopPropagation()}else tu(e,t,r,null,n)}}function Nm(e){return km(e=Ft(e))}var _m=null;function km(e){if(_m=null,null!==(e=Ye(e))){var t=i(e);if(null===t)e=null;else{var n=t.tag;if(13===n){if(null!==(e=c(t)))return e;e=null}else if(31===n){if(null!==(e=d(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return _m=e,null}function Sm(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ce()){case de:return 2;case ue:return 8;case me:case pe:return 32;case he:return 268435456;default:return 32}default:return 32}}var Cm=!1,Lm=null,Em=null,Am=null,Pm=new Map,Mm=new Map,Bm=[],Fm="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Tm(e,t){switch(e){case"focusin":case"focusout":Lm=null;break;case"dragenter":case"dragleave":Em=null;break;case"mouseover":case"mouseout":Am=null;break;case"pointerover":case"pointerout":Pm.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mm.delete(t.pointerId)}}function Dm(e,t,n,r,a,l){return null===e||e.nativeEvent!==l?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:l,targetContainers:[a]},null!==t&&(null!==(t=Ke(t))&&gm(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==a&&-1===t.indexOf(a)&&t.push(a),e)}function zm(e){var t=Ye(e.target);if(null!==t){var n=i(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=c(n)))return e.blockedOn=t,void Oe(e.priority,function(){bm(n)})}else if(31===t){if(null!==(t=d(n)))return e.blockedOn=t,void Oe(e.priority,function(){bm(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Rm(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Nm(e.nativeEvent);if(null!==n)return null!==(t=Ke(n))&&gm(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);Bt=r,n.target.dispatchEvent(r),Bt=null,t.shift()}return!0}function Om(e,t,n){Rm(e)&&n.delete(t)}function Im(){Cm=!1,null!==Lm&&Rm(Lm)&&(Lm=null),null!==Em&&Rm(Em)&&(Em=null),null!==Am&&Rm(Am)&&(Am=null),Pm.forEach(Om),Mm.forEach(Om)}function Wm(e,t){e.blockedOn===t&&(e.blockedOn=null,Cm||(Cm=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Im)))}var Vm=null;function Hm(e){Vm!==e&&(Vm=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Vm===e&&(Vm=null);for(var t=0;t<e.length;t+=3){var n=e[t],r=e[t+1],a=e[t+2];if("function"!==typeof r){if(null===km(r||n))continue;break}var l=Ke(n);null!==l&&(e.splice(t,3),t-=3,ts(l,{pending:!0,data:a,method:n.method,action:r},r,a))}}))}function Um(e){function t(t){return Wm(t,e)}null!==Lm&&Wm(Lm,e),null!==Em&&Wm(Em,e),null!==Am&&Wm(Am,e),Pm.forEach(t),Mm.forEach(t);for(var n=0;n<Bm.length;n++){var r=Bm[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<Bm.length&&null===(n=Bm[0]).blockedOn;)zm(n),null===n.blockedOn&&Bm.shift();if(null!=(n=(e.ownerDocument||e).$$reactFormReplay))for(r=0;r<n.length;r+=3){var a=n[r],l=n[r+1],o=a[Ve]||null;if("function"===typeof l)o||Hm(n);else if(o){var s=null;if(l&&l.hasAttribute("formAction")){if(a=l,o=l[Ve]||null)s=o.formAction;else if(null!==km(a))continue}else s=o.action;"function"===typeof s?n[r+1]=s:(n.splice(r,3),r-=3),Hm(n)}}}function qm(){function e(e){e.canIntercept&&"react-transition"===e.info&&e.intercept({handler:function(){return new Promise(function(e){return a=e})},focusReset:"manual",scroll:"manual"})}function t(){null!==a&&(a(),a=null),r||setTimeout(n,20)}function n(){if(!r&&!navigation.transition){var e=navigation.currentEntry;e&&null!=e.url&&navigation.navigate(e.url,{state:e.getState(),info:"react-transition",history:"replace"})}}if("object"===typeof navigation){var r=!1,a=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(n,100),function(){r=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),null!==a&&(a(),a=null)}}}function $m(e){this._internalRoot=e}function Gm(e){this._internalRoot=e}Gm.prototype.render=$m.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));hm(t.current,$c(),e,t,null,null)},Gm.prototype.unmount=$m.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;hm(e.current,2,null,e,null,null),Zc(),t[He]=null}},Gm.prototype.unstable_scheduleHydration=function(e){if(e){var t=Re();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Bm.length&&0!==t&&t<Bm[n].priority;n++);Bm.splice(n,0,e),0===n&&zm(e)}};var Qm=a.version;if("19.2.0"!==Qm)throw Error(o(527,Qm,"19.2.0"));T.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=i(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(null===a)break;var l=a.alternate;if(null===l){if(null!==(r=a.return)){n=r;continue}break}if(a.child===l.child){for(l=a.child;l;){if(l===n)return u(a),e;if(l===r)return u(a),t;l=l.sibling}throw Error(o(188))}if(n.return!==r.return)n=a,r=l;else{for(var s=!1,c=a.child;c;){if(c===n){s=!0,n=a,r=l;break}if(c===r){s=!0,r=a,n=l;break}c=c.sibling}if(!s){for(c=l.child;c;){if(c===n){s=!0,n=l,r=a;break}if(c===r){s=!0,r=l,n=a;break}c=c.sibling}if(!s)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(t),e=null===(e=null!==e?m(e):null)?null:e.stateNode};var Jm={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:F,reconcilerVersion:"19.2.0"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Ym=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ym.isDisabled&&Ym.supportsFiber)try{ge=Ym.inject(Jm),be=Ym}catch(Xm){}}t.createRoot=function(e,t){if(!s(e))throw Error(o(299));var n=!1,r="",a=_s,l=ks,i=Ss;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onUncaughtError&&(a=t.onUncaughtError),void 0!==t.onCaughtError&&(l=t.onCaughtError),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=mm(e,1,!1,null,0,n,r,null,a,l,i,qm),e[He]=t.current,Zd(e),new $m(t)},t.hydrateRoot=function(e,t,n){if(!s(e))throw Error(o(299));var r=!1,a="",l=_s,i=ks,c=Ss,d=null;return null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onUncaughtError&&(l=n.onUncaughtError),void 0!==n.onCaughtError&&(i=n.onCaughtError),void 0!==n.onRecoverableError&&(c=n.onRecoverableError),void 0!==n.formState&&(d=n.formState)),(t=mm(e,1,!0,t,0,r,a,d,l,i,c,qm)).context=pm(null),n=t.current,(a=bl(r=De(r=$c()))).callback=null,yl(n,a,r),n=r,t.current.lanes=n,Me(t,n),Td(t),e[He]=t.current,Zd(e),new Gm(t)},t.version="19.2.0"},43:(e,t,n)=>{e.exports=n(288)},288:(e,t)=>{var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),l=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),i=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),p=Symbol.for("react.activity"),h=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,g={};function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}function y(){}function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}b.prototype.isReactComponent={},b.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},b.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=b.prototype;var j=v.prototype=new y;j.constructor=v,x(j,b.prototype),j.isPureReactComponent=!0;var w=Array.isArray;function N(){}var _={H:null,A:null,T:null,S:null},k=Object.prototype.hasOwnProperty;function S(e,t,r){var a=r.ref;return{$$typeof:n,type:e,key:t,ref:void 0!==a?a:null,props:r}}function C(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var L=/\/+/g;function E(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function A(e,t,a,l,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var i,c,d=!1;if(null===e)d=!0;else switch(s){case"bigint":case"string":case"number":d=!0;break;case"object":switch(e.$$typeof){case n:case r:d=!0;break;case m:return A((d=e._init)(e._payload),t,a,l,o)}}if(d)return o=o(e),d=""===l?"."+E(e,0):l,w(o)?(a="",null!=d&&(a=d.replace(L,"$&/")+"/"),A(o,t,a,"",function(e){return e})):null!=o&&(C(o)&&(i=o,c=a+(null==o.key||e&&e.key===o.key?"":(""+o.key).replace(L,"$&/")+"/")+d,o=S(i.type,c,i.props)),t.push(o)),1;d=0;var u,p=""===l?".":l+":";if(w(e))for(var f=0;f<e.length;f++)d+=A(l=e[f],t,a,s=p+E(l,f),o);else if("function"===typeof(f=null===(u=e)||"object"!==typeof u?null:"function"===typeof(u=h&&u[h]||u["@@iterator"])?u:null))for(e=f.call(e),f=0;!(l=e.next()).done;)d+=A(l=l.value,t,a,s=p+E(l,f++),o);else if("object"===s){if("function"===typeof e.then)return A(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"===typeof e.status?e.then(N,N):(e.status="pending",e.then(function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)},function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),t,a,l,o);throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return d}function P(e,t,n){if(null==e)return e;var r=[],a=0;return A(e,r,"","",function(e){return t.call(n,e,a++)}),r}function M(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var B="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)},F={map:P,forEach:function(e,t,n){P(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return P(e,function(){t++}),t},toArray:function(e){return P(e,function(e){return e})||[]},only:function(e){if(!C(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};t.Activity=p,t.Children=F,t.Component=b,t.Fragment=a,t.Profiler=o,t.PureComponent=v,t.StrictMode=l,t.Suspense=d,t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=_,t.__COMPILER_RUNTIME={__proto__:null,c:function(e){return _.H.useMemoCache(e)}},t.cache=function(e){return function(){return e.apply(null,arguments)}},t.cacheSignal=function(){return null},t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("The argument must be a React element, but you passed "+e+".");var r=x({},e.props),a=e.key;if(null!=t)for(l in void 0!==t.key&&(a=""+t.key),t)!k.call(t,l)||"key"===l||"__self"===l||"__source"===l||"ref"===l&&void 0===t.ref||(r[l]=t[l]);var l=arguments.length-2;if(1===l)r.children=n;else if(1<l){for(var o=Array(l),s=0;s<l;s++)o[s]=arguments[s+2];r.children=o}return S(e.type,a,r)},t.createContext=function(e){return(e={$$typeof:i,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:s,_context:e},e},t.createElement=function(e,t,n){var r,a={},l=null;if(null!=t)for(r in void 0!==t.key&&(l=""+t.key),t)k.call(t,r)&&"key"!==r&&"__self"!==r&&"__source"!==r&&(a[r]=t[r]);var o=arguments.length-2;if(1===o)a.children=n;else if(1<o){for(var s=Array(o),i=0;i<o;i++)s[i]=arguments[i+2];a.children=s}if(e&&e.defaultProps)for(r in o=e.defaultProps)void 0===a[r]&&(a[r]=o[r]);return S(e,l,a)},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:m,_payload:{_status:-1,_result:e},_init:M}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=_.T,n={};_.T=n;try{var r=e(),a=_.S;null!==a&&a(n,r),"object"===typeof r&&null!==r&&"function"===typeof r.then&&r.then(N,B)}catch(l){B(l)}finally{null!==t&&null!==n.types&&(t.types=n.types),_.T=t}},t.unstable_useCacheRefresh=function(){return _.H.useCacheRefresh()},t.use=function(e){return _.H.use(e)},t.useActionState=function(e,t,n){return _.H.useActionState(e,t,n)},t.useCallback=function(e,t){return _.H.useCallback(e,t)},t.useContext=function(e){return _.H.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e,t){return _.H.useDeferredValue(e,t)},t.useEffect=function(e,t){return _.H.useEffect(e,t)},t.useEffectEvent=function(e){return _.H.useEffectEvent(e)},t.useId=function(){return _.H.useId()},t.useImperativeHandle=function(e,t,n){return _.H.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return _.H.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return _.H.useLayoutEffect(e,t)},t.useMemo=function(e,t){return _.H.useMemo(e,t)},t.useOptimistic=function(e,t){return _.H.useOptimistic(e,t)},t.useReducer=function(e,t,n){return _.H.useReducer(e,t,n)},t.useRef=function(e){return _.H.useRef(e)},t.useState=function(e){return _.H.useState(e)},t.useSyncExternalStore=function(e,t,n){return _.H.useSyncExternalStore(e,t,n)},t.useTransition=function(){return _.H.useTransition()},t.version="19.2.0"},391:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4)},579:(e,t,n)=>{e.exports=n(799)},672:(e,t,n)=>{var r=n(43);function a(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(){}var o={d:{f:l,r:function(){throw Error(a(522))},D:l,C:l,L:l,m:l,X:l,S:l,M:l},p:0,findDOMNode:null},s=Symbol.for("react.portal");var i=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(e,t){return"font"===e?"":"string"===typeof t?"use-credentials"===t?t:"":void 0}t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(a(299));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:s,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.flushSync=function(e){var t=i.T,n=o.p;try{if(i.T=null,o.p=2,e)return e()}finally{i.T=t,o.p=n,o.d.f()}},t.preconnect=function(e,t){"string"===typeof e&&(t?t="string"===typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,o.d.C(e,t))},t.prefetchDNS=function(e){"string"===typeof e&&o.d.D(e)},t.preinit=function(e,t){if("string"===typeof e&&t&&"string"===typeof t.as){var n=t.as,r=c(n,t.crossOrigin),a="string"===typeof t.integrity?t.integrity:void 0,l="string"===typeof t.fetchPriority?t.fetchPriority:void 0;"style"===n?o.d.S(e,"string"===typeof t.precedence?t.precedence:void 0,{crossOrigin:r,integrity:a,fetchPriority:l}):"script"===n&&o.d.X(e,{crossOrigin:r,integrity:a,fetchPriority:l,nonce:"string"===typeof t.nonce?t.nonce:void 0})}},t.preinitModule=function(e,t){if("string"===typeof e)if("object"===typeof t&&null!==t){if(null==t.as||"script"===t.as){var n=c(t.as,t.crossOrigin);o.d.M(e,{crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0})}}else null==t&&o.d.M(e)},t.preload=function(e,t){if("string"===typeof e&&"object"===typeof t&&null!==t&&"string"===typeof t.as){var n=t.as,r=c(n,t.crossOrigin);o.d.L(e,n,{crossOrigin:r,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0,type:"string"===typeof t.type?t.type:void 0,fetchPriority:"string"===typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"===typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"===typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"===typeof t.imageSizes?t.imageSizes:void 0,media:"string"===typeof t.media?t.media:void 0})}},t.preloadModule=function(e,t){if("string"===typeof e)if(t){var n=c(t.as,t.crossOrigin);o.d.m(e,{as:"string"===typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0})}else o.d.m(e)},t.requestFormReset=function(e){o.d.r(e)},t.unstable_batchedUpdates=function(e,t){return e(t)},t.useFormState=function(e,t,n){return i.H.useFormState(e,t,n)},t.useFormStatus=function(){return i.H.useHostTransitionStatus()},t.version="19.2.0"},799:(e,t)=>{var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function a(e,t,r){var a=null;if(void 0!==r&&(a=""+r),void 0!==t.key&&(a=""+t.key),"key"in t)for(var l in r={},t)"key"!==l&&(r[l]=t[l]);else r=t;return t=r.ref,{$$typeof:n,type:e,key:a,ref:void 0!==t?t:null,props:r}}t.Fragment=r,t.jsx=a,t.jsxs=a},853:(e,t,n)=>{e.exports=n(896)},896:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,a=e[r];if(!(0<l(a,t)))break e;e[r]=t,e[n]=a,n=r}}function r(e){return 0===e.length?null:e[0]}function a(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,a=e.length,o=a>>>1;r<o;){var s=2*(r+1)-1,i=e[s],c=s+1,d=e[c];if(0>l(i,n))c<a&&0>l(d,i)?(e[r]=d,e[c]=n,r=c):(e[r]=i,e[s]=n,r=s);else{if(!(c<a&&0>l(d,n)))break e;e[r]=d,e[c]=n,r=c}}}return t}function l(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(t.unstable_now=void 0,"object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,i=s.now();t.unstable_now=function(){return s.now()-i}}var c=[],d=[],u=1,m=null,p=3,h=!1,f=!1,x=!1,g=!1,b="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,v="undefined"!==typeof setImmediate?setImmediate:null;function j(e){for(var t=r(d);null!==t;){if(null===t.callback)a(d);else{if(!(t.startTime<=e))break;a(d),t.sortIndex=t.expirationTime,n(c,t)}t=r(d)}}function w(e){if(x=!1,j(e),!f)if(null!==r(c))f=!0,_||(_=!0,N());else{var t=r(d);null!==t&&M(w,t.startTime-e)}}var N,_=!1,k=-1,S=5,C=-1;function L(){return!!g||!(t.unstable_now()-C<S)}function E(){if(g=!1,_){var e=t.unstable_now();C=e;var n=!0;try{e:{f=!1,x&&(x=!1,y(k),k=-1),h=!0;var l=p;try{t:{for(j(e),m=r(c);null!==m&&!(m.expirationTime>e&&L());){var o=m.callback;if("function"===typeof o){m.callback=null,p=m.priorityLevel;var s=o(m.expirationTime<=e);if(e=t.unstable_now(),"function"===typeof s){m.callback=s,j(e),n=!0;break t}m===r(c)&&a(c),j(e)}else a(c);m=r(c)}if(null!==m)n=!0;else{var i=r(d);null!==i&&M(w,i.startTime-e),n=!1}}break e}finally{m=null,p=l,h=!1}n=void 0}}finally{n?N():_=!1}}}if("function"===typeof v)N=function(){v(E)};else if("undefined"!==typeof MessageChannel){var A=new MessageChannel,P=A.port2;A.port1.onmessage=E,N=function(){P.postMessage(null)}}else N=function(){b(E,0)};function M(e,n){k=b(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_requestPaint=function(){g=!0},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,a,l){var o=t.unstable_now();switch("object"===typeof l&&null!==l?l="number"===typeof(l=l.delay)&&0<l?o+l:o:l=o,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:u++,callback:a,priorityLevel:e,startTime:l,expirationTime:s=l+s,sortIndex:-1},l>o?(e.sortIndex=l,n(d,e),null===r(c)&&e===r(d)&&(x?(y(k),k=-1):x=!0,M(w,l-o))):(e.sortIndex=s,n(c,e),f||h||(f=!0,_||(_=!0,N()))),e},t.unstable_shouldYield=L,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(672)}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var l=t[r]={exports:{}};return e[r](l,l.exports,n),l.exports}(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,a){if(1&a&&(r=this(r)),8&a)return r;if("object"===typeof r&&r){if(4&a&&r.__esModule)return r;if(16&a&&"function"===typeof r.then)return r}var l=Object.create(null);n.r(l);var o={};e=e||[null,t({}),t([]),t(t)];for(var s=2&a&&r;("object"==typeof s||"function"==typeof s)&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach(e=>o[e]=()=>r[e]);return o.default=()=>r,n.d(l,o),l}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r=n(43),a=n.t(r,2),l=n(391);function o(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function i(e){var t=function(e,t){if("object"!=s(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==s(t)?t:t+""}function c(e,t,n){return(t=i(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach(function(t){c(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}const m=["sri"],p=["page"],h=["page","matches"],f=["onClick","discover","prefetch","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],x=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],g=["discover","fetcherKey","navigate","reloadDocument","replace","state","method","action","onSubmit","relative","preventScrollReset","viewTransition"];var b="popstate";function y(){return S(function(e,t){let{pathname:n,search:r,hash:a}=e.location;return N("",{pathname:n,search:r,hash:a},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"===typeof t?t:_(t)},null,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}function v(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function j(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function w(e,t){return{usr:e.state,key:e.key,idx:t}}function N(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0;return u(u({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?k(t):t),{},{state:n,key:t&&t.key||r||Math.random().toString(36).substring(2,10)})}function _(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function k(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function S(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},{window:a=document.defaultView,v5Compat:l=!1}=r,o=a.history,s="POP",i=null,c=d();function d(){return(o.state||{idx:null}).idx}function m(){s="POP";let e=d(),t=null==e?null:e-c;c=e,i&&i({action:s,location:h.location,delta:t})}function p(e){return C(e)}null==c&&(c=0,o.replaceState(u(u({},o.state),{},{idx:c}),""));let h={get action(){return s},get location(){return e(a,o)},listen(e){if(i)throw new Error("A history only accepts one active listener");return a.addEventListener(b,m),i=e,()=>{a.removeEventListener(b,m),i=null}},createHref:e=>t(a,e),createURL:p,encodeLocation(e){let t=p(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){s="PUSH";let r=N(h.location,e,t);n&&n(r,e),c=d()+1;let u=w(r,c),m=h.createHref(r);try{o.pushState(u,"",m)}catch(p){if(p instanceof DOMException&&"DataCloneError"===p.name)throw p;a.location.assign(m)}l&&i&&i({action:s,location:h.location,delta:1})},replace:function(e,t){s="REPLACE";let r=N(h.location,e,t);n&&n(r,e),c=d();let a=w(r,c),u=h.createHref(r);o.replaceState(a,"",u),l&&i&&i({action:s,location:h.location,delta:0})},go:e=>o.go(e)};return h}function C(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n="http://localhost";"undefined"!==typeof window&&(n="null"!==window.location.origin?window.location.origin:window.location.href),v(n,"No window.location.(origin|href) available to create URL");let r="string"===typeof e?e:_(e);return r=r.replace(/ $/,"%20"),!t&&r.startsWith("//")&&(r=n+r),new URL(r,n)}new WeakMap;function L(e,t){return E(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/",!1)}function E(e,t,n,r){let a=U(("string"===typeof t?k(t):t).pathname||"/",n);if(null==a)return null;let l=A(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n]);return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(l);let o=null;for(let s=0;null==o&&s<l.length;++s){let e=H(a);o=I(l[s],e,r)}return o}function A(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],l=function(e,l){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a,s=arguments.length>3?arguments[3]:void 0,i={relativePath:void 0===s?e.path||"":s,caseSensitive:!0===e.caseSensitive,childrenIndex:l,route:e};if(i.relativePath.startsWith("/")){if(!i.relativePath.startsWith(r)&&o)return;v(i.relativePath.startsWith(r),'Absolute route path "'.concat(i.relativePath,'" nested under path "').concat(r,'" is not valid. An absolute child route path must start with the combined path of all its parent routes.')),i.relativePath=i.relativePath.slice(r.length)}let c=X([r,i.relativePath]),d=n.concat(i);e.children&&e.children.length>0&&(v(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'.concat(c,'".')),A(e.children,t,d,c,o)),(null!=e.path||e.index)&&t.push({path:c,score:O(c,e.index),routesMeta:d})};return e.forEach((e,t)=>{var n;if(""!==e.path&&null!==(n=e.path)&&void 0!==n&&n.includes("?"))for(let r of P(e.path))l(e,t,!0,r);else l(e,t)}),t}function P(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,a=n.endsWith("?"),l=n.replace(/\?$/,"");if(0===r.length)return a?[l,""]:[l];let o=P(r.join("/")),s=[];return s.push(...o.map(e=>""===e?l:[l,e].join("/"))),a&&s.push(...o),s.map(t=>e.startsWith("/")&&""===t?"/":t)}var M=/^:[\w-]+$/,B=3,F=2,T=1,D=10,z=-2,R=e=>"*"===e;function O(e,t){let n=e.split("/"),r=n.length;return n.some(R)&&(r+=z),t&&(r+=F),n.filter(e=>!R(e)).reduce((e,t)=>e+(M.test(t)?B:""===t?T:D),r)}function I(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],{routesMeta:r}=e,a={},l="/",o=[];for(let s=0;s<r.length;++s){let e=r[s],i=s===r.length-1,c="/"===l?t:t.slice(l.length)||"/",d=W({path:e.relativePath,caseSensitive:e.caseSensitive,end:i},c),u=e.route;if(!d&&i&&n&&!r[r.length-1].route.index&&(d=W({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!d)return null;Object.assign(a,d.params),o.push({params:a,pathname:X([l,d.pathname]),pathnameBase:Z(X([l,d.pathnameBase])),route:u}),"/"!==d.pathnameBase&&(l=X([l,d.pathnameBase]))}return o}function W(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=V(e.path,e.caseSensitive,e.end),a=t.match(n);if(!a)return null;let l=a[0],o=l.replace(/(.)\/+$/,"$1"),s=a.slice(1);return{params:r.reduce((e,t,n)=>{let{paramName:r,isOptional:a}=t;if("*"===r){let e=s[n]||"";o=l.slice(0,l.length-e.length).replace(/(.)\/+$/,"$1")}const i=s[n];return e[r]=a&&!i?void 0:(i||"").replace(/%2F/g,"/"),e},{}),pathname:l,pathnameBase:o,pattern:e}}function V(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];j("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'.concat(e,'" will be treated as if it were "').concat(e.replace(/\*$/,"/*"),'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "').concat(e.replace(/\*$/,"/*"),'".'));let r=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(r.push({paramName:"*"}),a+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":""!==e&&"/"!==e&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),r]}function H(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return j(!1,'The URL path "'.concat(e,'" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (').concat(t,").")),e}}function U(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}var q=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,$=e=>q.test(e);function G(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}function Q(e,t,n,r){return"Cannot include a '".concat(e,"' character in a manually specified `to.").concat(t,"` field [").concat(JSON.stringify(r),"].  Please separate it out to the `to.").concat(n,'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.')}function J(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function Y(e){let t=J(e);return t.map((e,n)=>n===t.length-1?e.pathname:e.pathnameBase)}function K(e,t,n){let r,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];"string"===typeof e?r=k(e):(r=u({},e),v(!r.pathname||!r.pathname.includes("?"),Q("?","pathname","search",r)),v(!r.pathname||!r.pathname.includes("#"),Q("#","pathname","hash",r)),v(!r.search||!r.search.includes("#"),Q("#","search","hash",r)));let l,o=""===e||""===r.pathname,s=o?"/":r.pathname;if(null==s)l=n;else{let e=t.length-1;if(!a&&s.startsWith("..")){let t=s.split("/");for(;".."===t[0];)t.shift(),e-=1;r.pathname=t.join("/")}l=e>=0?t[e]:"/"}let i=function(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",{pathname:r,search:a="",hash:l=""}="string"===typeof e?k(e):e;if(r)if($(r))t=r;else{if(r.includes("//")){let e=r;r=r.replace(/\/\/+/g,"/"),j(!1,"Pathnames cannot have embedded double slashes - normalizing ".concat(e," -> ").concat(r))}t=r.startsWith("/")?G(r.substring(1),"/"):G(r,n)}else t=n;return{pathname:t,search:ee(a),hash:te(l)}}(r,l),c=s&&"/"!==s&&s.endsWith("/"),d=(o||"."===s)&&n.endsWith("/");return i.pathname.endsWith("/")||!c&&!d||(i.pathname+="/"),i}var X=e=>e.join("/").replace(/\/\/+/g,"/"),Z=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),ee=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",te=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";function ne(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}function re(e){return e.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}Symbol("Uninstrumented");Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var ae=["POST","PUT","PATCH","DELETE"],le=(new Set(ae),["GET",...ae]);new Set(le),Symbol("ResetLoaderData");var oe=r.createContext(null);oe.displayName="DataRouter";var se=r.createContext(null);se.displayName="DataRouterState";var ie=r.createContext(!1);var ce=r.createContext({isTransitioning:!1});ce.displayName="ViewTransition";var de=r.createContext(new Map);de.displayName="Fetchers";var ue=r.createContext(null);ue.displayName="Await";var me=r.createContext(null);me.displayName="Navigation";var pe=r.createContext(null);pe.displayName="Location";var he=r.createContext({outlet:null,matches:[],isDataRoute:!1});he.displayName="Route";var fe=r.createContext(null);fe.displayName="RouteError";function xe(){return null!=r.useContext(pe)}function ge(){return v(xe(),"useLocation() may be used only in the context of a <Router> component."),r.useContext(pe).location}var be="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function ye(e){r.useContext(me).static||r.useLayoutEffect(e)}function ve(){let{isDataRoute:e}=r.useContext(he);return e?function(){let{router:e}=Ae("useNavigate"),t=Me("useNavigate"),n=r.useRef(!1);ye(()=>{n.current=!0});let a=r.useCallback(async function(r){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};j(n.current,be),n.current&&("number"===typeof r?await e.navigate(r):await e.navigate(r,u({fromRouteId:t},a)))},[e,t]);return a}():function(){v(xe(),"useNavigate() may be used only in the context of a <Router> component.");let e=r.useContext(oe),{basename:t,navigator:n}=r.useContext(me),{matches:a}=r.useContext(he),{pathname:l}=ge(),o=JSON.stringify(Y(a)),s=r.useRef(!1);ye(()=>{s.current=!0});let i=r.useCallback(function(r){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(j(s.current,be),!s.current)return;if("number"===typeof r)return void n.go(r);let i=K(r,JSON.parse(o),l,"path"===a.relative);null==e&&"/"!==t&&(i.pathname="/"===i.pathname?t:X([t,i.pathname])),(a.replace?n.replace:n.push)(i,a.state,a)},[t,n,o,l,e]);return i}()}r.createContext(null);function je(){let{matches:e}=r.useContext(he),t=e[e.length-1];return t?t.params:{}}function we(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{matches:n}=r.useContext(he),{pathname:a}=ge(),l=JSON.stringify(Y(n));return r.useMemo(()=>K(e,JSON.parse(l),a,"path"===t),[e,l,a,t])}function Ne(e,t,n,a,l){v(xe(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=r.useContext(me),{matches:s}=r.useContext(he),i=s[s.length-1],c=i?i.params:{},d=i?i.pathname:"/",m=i?i.pathnameBase:"/",p=i&&i.route;{let e=p&&p.path||"";Te(d,!p||e.endsWith("*")||e.endsWith("*?"),'You rendered descendant <Routes> (or called `useRoutes()`) at "'.concat(d,'" (under <Route path="').concat(e,'">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won\'t match anymore and therefore the child routes will never render.\n\nPlease change the parent <Route path="').concat(e,'"> to <Route path="').concat("/"===e?"*":"".concat(e,"/*"),'">.'))}let h,f=ge();if(t){var x;let e="string"===typeof t?k(t):t;v("/"===m||(null===(x=e.pathname)||void 0===x?void 0:x.startsWith(m)),'When overriding the location using `<Routes location>` or `useRoutes(routes, location)`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "'.concat(m,'" but pathname "').concat(e.pathname,'" was given in the `location` prop.')),h=e}else h=f;let g=h.pathname||"/",b=g;if("/"!==m){let e=m.replace(/^\//,"").split("/");b="/"+g.replace(/^\//,"").split("/").slice(e.length).join("/")}let y=L(e,{pathname:b});j(p||null!=y,'No routes matched location "'.concat(h.pathname).concat(h.search).concat(h.hash,'" ')),j(null==y||void 0!==y[y.length-1].route.element||void 0!==y[y.length-1].route.Component||void 0!==y[y.length-1].route.lazy,'Matched leaf route at location "'.concat(h.pathname).concat(h.search).concat(h.hash,'" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.'));let w=Le(y&&y.map(e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:X([m,o.encodeLocation?o.encodeLocation(e.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?m:X([m,o.encodeLocation?o.encodeLocation(e.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:e.pathnameBase])})),s,n,a,l);return t&&w?r.createElement(pe.Provider,{value:{location:u({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:"POP"}},w):w}function _e(){let e=Be(),t=ne(e)?"".concat(e.status," ").concat(e.statusText):e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,a="rgba(200,200,200, 0.5)",l={padding:"0.5rem",backgroundColor:a},o={padding:"2px 4px",backgroundColor:a},s=null;return console.error("Error handled by React Router default ErrorBoundary:",e),s=r.createElement(r.Fragment,null,r.createElement("p",null,"\ud83d\udcbf Hey developer \ud83d\udc4b"),r.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",r.createElement("code",{style:o},"ErrorBoundary")," or"," ",r.createElement("code",{style:o},"errorElement")," prop on your route.")),r.createElement(r.Fragment,null,r.createElement("h2",null,"Unexpected Application Error!"),r.createElement("h3",{style:{fontStyle:"italic"}},t),n?r.createElement("pre",{style:l},n):null,s)}var ke=r.createElement(_e,null),Se=class extends r.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.onError?this.props.onError(e,t):console.error("React Router caught the following error during render",e)}render(){return void 0!==this.state.error?r.createElement(he.Provider,{value:this.props.routeContext},r.createElement(fe.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Ce(e){let{routeContext:t,match:n,children:a}=e,l=r.useContext(oe);return l&&l.static&&l.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(l.staticContext._deepestRenderedBoundaryId=n.route.id),r.createElement(he.Provider,{value:t},a)}function Le(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(null==e){if(!n)return null;if(n.errors)e=n.matches;else{if(0!==t.length||n.initialized||!(n.matches.length>0))return null;e=n.matches}}let l=e,o=null===n||void 0===n?void 0:n.errors;if(null!=o){let e=l.findIndex(e=>e.route.id&&void 0!==(null===o||void 0===o?void 0:o[e.route.id]));v(e>=0,"Could not find a matching route for errors on route IDs: ".concat(Object.keys(o).join(","))),l=l.slice(0,Math.min(l.length,e+1))}let s=!1,i=-1;if(n)for(let r=0;r<l.length;r++){let e=l[r];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(i=r),e.route.id){let{loaderData:t,errors:r}=n,a=e.route.loader&&!t.hasOwnProperty(e.route.id)&&(!r||void 0===r[e.route.id]);if(e.route.lazy||a){s=!0,l=i>=0?l.slice(0,i+1):[l[0]];break}}}let c=n&&a?(e,t)=>{var r,l;a(e,{location:n.location,params:null!==(r=null===(l=n.matches)||void 0===l||null===(l=l[0])||void 0===l?void 0:l.params)&&void 0!==r?r:{},unstable_pattern:re(n.matches),errorInfo:t})}:void 0;return l.reduceRight((e,a,d)=>{let u,m=!1,p=null,h=null;n&&(u=o&&a.route.id?o[a.route.id]:void 0,p=a.route.errorElement||ke,s&&(i<0&&0===d?(Te("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),m=!0,h=null):i===d&&(m=!0,h=a.route.hydrateFallbackElement||null)));let f=t.concat(l.slice(0,d+1)),x=()=>{let t;return t=u?p:m?h:a.route.Component?r.createElement(a.route.Component,null):a.route.element?a.route.element:e,r.createElement(Ce,{match:a,routeContext:{outlet:e,matches:f,isDataRoute:null!=n},children:t})};return n&&(a.route.ErrorBoundary||a.route.errorElement||0===d)?r.createElement(Se,{location:n.location,revalidation:n.revalidation,component:p,error:u,children:x(),routeContext:{outlet:null,matches:f,isDataRoute:!0},onError:c}):x()},null)}function Ee(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function Ae(e){let t=r.useContext(oe);return v(t,Ee(e)),t}function Pe(e){let t=r.useContext(se);return v(t,Ee(e)),t}function Me(e){let t=function(e){let t=r.useContext(he);return v(t,Ee(e)),t}(e),n=t.matches[t.matches.length-1];return v(n.route.id,"".concat(e,' can only be used on routes that contain a unique "id"')),n.route.id}function Be(){var e;let t=r.useContext(fe),n=Pe("useRouteError"),a=Me("useRouteError");return void 0!==t?t:null===(e=n.errors)||void 0===e?void 0:e[a]}var Fe={};function Te(e,t,n){t||Fe[e]||(Fe[e]=!0,j(!1,n))}var De={};function ze(e,t){e||De[t]||(De[t]=!0,console.warn(t))}a.useOptimistic;r.memo(function(e){let{routes:t,future:n,state:r,unstable_onError:a}=e;return Ne(t,void 0,r,a,n)});function Re(e){let{to:t,replace:n,state:a,relative:l}=e;v(xe(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=r.useContext(me);j(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=r.useContext(he),{pathname:i}=ge(),c=ve(),d=K(t,Y(s),i,"path"===l),u=JSON.stringify(d);return r.useEffect(()=>{c(JSON.parse(u),{replace:n,state:a,relative:l})},[c,u,l,n,a]),null}function Oe(e){v(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Ie(e){let{basename:t="/",children:n=null,location:a,navigationType:l="POP",navigator:o,static:s=!1,unstable_useTransitions:i}=e;v(!xe(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=t.replace(/^\/*/,"/"),d=r.useMemo(()=>({basename:c,navigator:o,static:s,unstable_useTransitions:i,future:{}}),[c,o,s,i]);"string"===typeof a&&(a=k(a));let{pathname:u="/",search:m="",hash:p="",state:h=null,key:f="default"}=a,x=r.useMemo(()=>{let e=U(u,c);return null==e?null:{location:{pathname:e,search:m,hash:p,state:h,key:f},navigationType:l}},[c,u,m,p,h,f,l]);return j(null!=x,'<Router basename="'.concat(c,'"> is not able to match the URL "').concat(u).concat(m).concat(p,"\" because it does not start with the basename, so the <Router> won't render anything.")),null==x?null:r.createElement(me.Provider,{value:d},r.createElement(pe.Provider,{children:n,value:x}))}function We(e){let{children:t,location:n}=e;return Ne(Ve(t),n)}r.Component;function Ve(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[];return r.Children.forEach(e,(e,a)=>{if(!r.isValidElement(e))return;let l=[...t,a];if(e.type===r.Fragment)return void n.push.apply(n,Ve(e.props.children,l));v(e.type===Oe,"[".concat("string"===typeof e.type?e.type:e.type.name,"] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>")),v(!e.props.index||!e.props.children,"An index route cannot have child routes.");let o={id:e.props.id||l.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,middleware:e.props.middleware,loader:e.props.loader,action:e.props.action,hydrateFallbackElement:e.props.hydrateFallbackElement,HydrateFallback:e.props.HydrateFallback,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:!0===e.props.hasErrorBoundary||null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=Ve(e.props.children,l)),n.push(o)}),n}var He="get",Ue="application/x-www-form-urlencoded";function qe(e){return"undefined"!==typeof HTMLElement&&e instanceof HTMLElement}var $e=null;var Ge=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Qe(e){return null==e||Ge.has(e)?e:(j(!1,'"'.concat(e,'" is not a valid `encType` for `<Form>`/`<fetcher.Form>` and will default to "').concat(Ue,'"')),null)}function Je(e,t){let n,r,a,l,o;if(qe(s=e)&&"form"===s.tagName.toLowerCase()){let o=e.getAttribute("action");r=o?U(o,t):null,n=e.getAttribute("method")||He,a=Qe(e.getAttribute("enctype"))||Ue,l=new FormData(e)}else if(function(e){return qe(e)&&"button"===e.tagName.toLowerCase()}(e)||function(e){return qe(e)&&"input"===e.tagName.toLowerCase()}(e)&&("submit"===e.type||"image"===e.type)){let o=e.form;if(null==o)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let s=e.getAttribute("formaction")||o.getAttribute("action");if(r=s?U(s,t):null,n=e.getAttribute("formmethod")||o.getAttribute("method")||He,a=Qe(e.getAttribute("formenctype"))||Qe(o.getAttribute("enctype"))||Ue,l=new FormData(o,e),!function(){if(null===$e)try{new FormData(document.createElement("form"),0),$e=!1}catch(e){$e=!0}return $e}()){let{name:t,type:n,value:r}=e;if("image"===n){let e=t?"".concat(t,"."):"";l.append("".concat(e,"x"),"0"),l.append("".concat(e,"y"),"0")}else t&&l.append(t,r)}}else{if(qe(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=He,r=null,a=Ue,o=e}var s;return l&&"text/plain"===a&&(o=l,l=void 0),{action:r,method:n.toLowerCase(),encType:a,formData:l,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");"undefined"!==typeof window?window:"undefined"!==typeof globalThis&&globalThis;function Ye(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}Symbol("SingleFetchRedirect");function Ke(e,t,n){let r="string"===typeof e?new URL(e,"undefined"===typeof window?"server://singlefetch/":window.location.origin):e;return"/"===r.pathname?r.pathname="_root.".concat(n):t&&"/"===U(r.pathname,t)?r.pathname="".concat(t.replace(/\/$/,""),"/_root.").concat(n):r.pathname="".concat(r.pathname.replace(/\/$/,""),".").concat(n),r}async function Xe(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error("Error loading route module `".concat(e.module,"`, reloading page...")),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Ze(e){return null!=e&&"string"===typeof e.page}function et(e){return null!=e&&(null==e.href?"preload"===e.rel&&"string"===typeof e.imageSrcSet&&"string"===typeof e.imageSizes:"string"===typeof e.rel&&"string"===typeof e.href)}function tt(e,t,n,r,a,l){let o=(e,t)=>!n[t]||e.route.id!==n[t].route.id,s=(e,t)=>{var r;return n[t].pathname!==e.pathname||(null===(r=n[t].route.path)||void 0===r?void 0:r.endsWith("*"))&&n[t].params["*"]!==e.params["*"]};return"assets"===l?t.filter((e,t)=>o(e,t)||s(e,t)):"data"===l?t.filter((t,l)=>{let i=r.routes[t.route.id];if(!i||!i.hasLoader)return!1;if(o(t,l)||s(t,l))return!0;if(t.route.shouldRevalidate){var c;let r=t.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:(null===(c=n[0])||void 0===c?void 0:c.params)||{},nextUrl:new URL(e,window.origin),nextParams:t.params,defaultShouldRevalidate:!0});if("boolean"===typeof r)return r}return!0}):[]}function nt(e,t){let{includeHydrateFallback:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r=e.map(e=>{let r=t.routes[e.route.id];if(!r)return[];let a=[r.module];return r.clientActionModule&&(a=a.concat(r.clientActionModule)),r.clientLoaderModule&&(a=a.concat(r.clientLoaderModule)),n&&r.hydrateFallbackModule&&(a=a.concat(r.hydrateFallbackModule)),r.imports&&(a=a.concat(r.imports)),a}).flat(1),[...new Set(r)];var r}function rt(e,t){let n=new Set,r=new Set(t);return e.reduce((e,a)=>{if(t&&!Ze(a)&&"script"===a.as&&a.href&&r.has(a.href))return e;let l=JSON.stringify(function(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}(a));return n.has(l)||(n.add(l),e.push({key:l,link:a})),e},[])}function at(e,t){return"lazy"===e.mode&&!0===t}function lt(){let e=r.useContext(oe);return Ye(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function ot(){let e=r.useContext(se);return Ye(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var st=r.createContext(void 0);function it(){let e=r.useContext(st);return Ye(e,"You must render this element inside a <HydratedRouter> element"),e}function ct(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function dt(e,t,n){if(n&&!ht)return[e[0]];if(t){let n=e.findIndex(e=>void 0!==t[e.route.id]);return e.slice(0,n+1)}return e}st.displayName="FrameworkContext";function ut(e){let{page:t}=e,n=o(e,p),{router:a}=lt(),l=r.useMemo(()=>L(a.routes,t,a.basename),[a.routes,t,a.basename]);return l?r.createElement(pt,u({page:t,matches:l},n)):null}function mt(e){let{manifest:t,routeModules:n}=it(),[a,l]=r.useState([]);return r.useEffect(()=>{let r=!1;return async function(e,t,n){return rt((await Promise.all(e.map(async e=>{let r=t.routes[e.route.id];if(r){let e=await Xe(r,n);return e.links?e.links():[]}return[]}))).flat(1).filter(et).filter(e=>"stylesheet"===e.rel||"preload"===e.rel).map(e=>"stylesheet"===e.rel?u(u({},e),{},{rel:"prefetch",as:"style"}):u(u({},e),{},{rel:"prefetch"})))}(e,t,n).then(e=>{r||l(e)}),()=>{r=!0}},[e,t,n]),a}function pt(e){let{page:t,matches:n}=e,a=o(e,h),l=ge(),{manifest:s,routeModules:i}=it(),{basename:c}=lt(),{loaderData:d,matches:m}=ot(),p=r.useMemo(()=>tt(t,n,m,s,l,"data"),[t,n,m,s,l]),f=r.useMemo(()=>tt(t,n,m,s,l,"assets"),[t,n,m,s,l]),x=r.useMemo(()=>{if(t===l.pathname+l.search+l.hash)return[];let e=new Set,r=!1;if(n.forEach(t=>{var n;let a=s.routes[t.route.id];a&&a.hasLoader&&(!p.some(e=>e.route.id===t.route.id)&&t.route.id in d&&null!==(n=i[t.route.id])&&void 0!==n&&n.shouldRevalidate||a.hasClientLoader?r=!0:e.add(t.route.id))}),0===e.size)return[];let a=Ke(t,c,"data");return r&&e.size>0&&a.searchParams.set("_routes",n.filter(t=>e.has(t.route.id)).map(e=>e.route.id).join(",")),[a.pathname+a.search]},[c,d,l,s,p,n,t,i]),g=r.useMemo(()=>nt(f,s),[f,s]),b=mt(f);return r.createElement(r.Fragment,null,x.map(e=>r.createElement("link",u({key:e,rel:"prefetch",as:"fetch",href:e},a))),g.map(e=>r.createElement("link",u({key:e,rel:"modulepreload",href:e},a))),b.map(e=>{let{key:t,link:n}=e;return r.createElement("link",u({key:t,nonce:a.nonce},n))}))}var ht=!1;function ft(e){let{manifest:t,serverHandoffString:n,isSpaMode:a,renderMeta:l,routeDiscovery:s,ssr:i}=it(),{router:c,static:d,staticContext:p}=lt(),{matches:h}=ot(),f=r.useContext(ie),x=at(s,i);l&&(l.didRenderScripts=!0);let g=dt(h,null,a);r.useEffect(()=>{ht=!0},[]);let b=r.useMemo(()=>{var a;if(f)return null;let l=p?"window.__reactRouterContext = ".concat(n,";").concat("window.__reactRouterContext.stream = new ReadableStream({start(controller){window.__reactRouterContext.streamController = controller;}}).pipeThrough(new TextEncoderStream());"):" ",s=d?"".concat(null!==(a=t.hmr)&&void 0!==a&&a.runtime?"import ".concat(JSON.stringify(t.hmr.runtime),";"):"").concat(x?"":"import ".concat(JSON.stringify(t.url)),";\n").concat(g.map((e,n)=>{let r="route".concat(n),a=t.routes[e.route.id];Ye(a,"Route ".concat(e.route.id," not found in manifest"));let{clientActionModule:l,clientLoaderModule:o,clientMiddlewareModule:s,hydrateFallbackModule:i,module:c}=a,d=[...l?[{module:l,varName:"".concat(r,"_clientAction")}]:[],...o?[{module:o,varName:"".concat(r,"_clientLoader")}]:[],...s?[{module:s,varName:"".concat(r,"_clientMiddleware")}]:[],...i?[{module:i,varName:"".concat(r,"_HydrateFallback")}]:[],{module:c,varName:"".concat(r,"_main")}];return 1===d.length?"import * as ".concat(r," from ").concat(JSON.stringify(c),";"):[d.map(e=>"import * as ".concat(e.varName,' from "').concat(e.module,'";')).join("\n"),"const ".concat(r," = {").concat(d.map(e=>"...".concat(e.varName)).join(","),"};")].join("\n")}).join("\n"),"\n  ").concat(x?"window.__reactRouterManifest = ".concat(JSON.stringify(function(e,t){let{sri:n}=e,r=o(e,m),a=new Set(t.state.matches.map(e=>e.route.id)),l=t.state.location.pathname.split("/").filter(Boolean),s=["/"];for(l.pop();l.length>0;)s.push("/".concat(l.join("/"))),l.pop();s.forEach(e=>{let n=L(t.routes,e,t.basename);n&&n.forEach(e=>a.add(e.route.id))});let i=[...a].reduce((e,t)=>Object.assign(e,{[t]:r.routes[t]}),{});return u(u({},r),{},{routes:i,sri:!!n||void 0})}(t,c),null,2),";"):"","\n  window.__reactRouterRouteModules = {").concat(g.map((e,t)=>"".concat(JSON.stringify(e.route.id),":route").concat(t)).join(","),"};\n\nimport(").concat(JSON.stringify(t.entry.module),");"):" ";return r.createElement(r.Fragment,null,r.createElement("script",u(u({},e),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:l},type:void 0})),r.createElement("script",u(u({},e),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:s},type:"module",async:!0})))},[]),y=ht||f?[]:(v=t.entry.imports.concat(nt(g,t,{includeHydrateFallback:!0})),[...new Set(v)]);var v;let j="object"===typeof t.sri?t.sri:{};return ze(!f,"The <Scripts /> element is a no-op when using RSC and can be safely removed."),ht||f?null:r.createElement(r.Fragment,null,"object"===typeof t.sri?r.createElement("script",{"rr-importmap":"",type:"importmap",suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:JSON.stringify({integrity:j})}}):null,x?null:r.createElement("link",{rel:"modulepreload",href:t.url,crossOrigin:e.crossOrigin,integrity:j[t.url],suppressHydrationWarning:!0}),r.createElement("link",{rel:"modulepreload",href:t.entry.module,crossOrigin:e.crossOrigin,integrity:j[t.entry.module],suppressHydrationWarning:!0}),y.map(t=>r.createElement("link",{key:t,rel:"modulepreload",href:t,crossOrigin:e.crossOrigin,integrity:j[t],suppressHydrationWarning:!0})),b)}function xt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>{t.forEach(t=>{"function"===typeof t?t(e):null!=t&&(t.current=e)})}}r.Component;function gt(e){let{error:t,isOutsideRemixApp:n}=e;console.error(t);let a,l=r.createElement("script",{dangerouslySetInnerHTML:{__html:'\n        console.log(\n          "\ud83d\udcbf Hey developer \ud83d\udc4b. You can provide a way better UX than this when your app throws errors. Check out https://reactrouter.com/how-to/error-boundary for more information."\n        );\n      '}});if(ne(t))return r.createElement(bt,{title:"Unhandled Thrown Response!"},r.createElement("h1",{style:{fontSize:"24px"}},t.status," ",t.statusText),l);if(t instanceof Error)a=t;else{let e=null==t?"Unknown Error":"object"===typeof t&&"toString"in t?t.toString():JSON.stringify(t);a=new Error(e)}return r.createElement(bt,{title:"Application Error!",isOutsideRemixApp:n},r.createElement("h1",{style:{fontSize:"24px"}},"Application Error"),r.createElement("pre",{style:{padding:"2rem",background:"hsla(10, 50%, 50%, 0.1)",color:"red",overflow:"auto"}},a.stack),l)}function bt(e){var t;let{title:n,renderScripts:a,isOutsideRemixApp:l,children:o}=e,{routeModules:s}=it();return null!==(t=s.root)&&void 0!==t&&t.Layout&&!l?o:r.createElement("html",{lang:"en"},r.createElement("head",null,r.createElement("meta",{charSet:"utf-8"}),r.createElement("meta",{name:"viewport",content:"width=device-width,initial-scale=1,viewport-fit=cover"}),r.createElement("title",null,n)),r.createElement("body",null,r.createElement("main",{style:{fontFamily:"system-ui, sans-serif",padding:"2rem"}},o,a?r.createElement(ft,null):null)))}var yt="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement;try{yt&&(window.__reactRouterVersion="7.10.1")}catch(_n){}function vt(e){let{basename:t,children:n,unstable_useTransitions:a,window:l}=e,o=r.useRef();null==o.current&&(o.current=y({window:l,v5Compat:!0}));let s=o.current,[i,c]=r.useState({action:s.action,location:s.location}),d=r.useCallback(e=>{!1===a?c(e):r.startTransition(()=>c(e))},[a]);return r.useLayoutEffect(()=>s.listen(d),[s,d]),r.createElement(Ie,{basename:t,children:n,location:i.location,navigationType:i.action,navigator:s,unstable_useTransitions:!0===a})}var jt=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,wt=r.forwardRef(function(e,t){let n,{onClick:a,discover:l="render",prefetch:s="none",relative:i,reloadDocument:c,replace:d,state:m,target:p,to:h,preventScrollReset:x,viewTransition:g}=e,b=o(e,f),{basename:y,unstable_useTransitions:w}=r.useContext(me),N="string"===typeof h&&jt.test(h),k=!1;if("string"===typeof h&&N&&(n=h,yt))try{let e=new URL(window.location.href),t=h.startsWith("//")?new URL(e.protocol+h):new URL(h),n=U(t.pathname,y);t.origin===e.origin&&null!=n?h=n+t.search+t.hash:k=!0}catch(_n){j(!1,'<Link to="'.concat(h,'"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.'))}let S=function(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};v(xe(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:a}=r.useContext(me),{hash:l,pathname:o,search:s}=we(e,{relative:t}),i=o;return"/"!==n&&(i="/"===o?n:X([n,o])),a.createHref({pathname:i,search:s,hash:l})}(h,{relative:i}),[C,L,E]=function(e,t){let n=r.useContext(st),[a,l]=r.useState(!1),[o,s]=r.useState(!1),{onFocus:i,onBlur:c,onMouseEnter:d,onMouseLeave:u,onTouchStart:m}=t,p=r.useRef(null);r.useEffect(()=>{if("render"===e&&s(!0),"viewport"===e){let e=new IntersectionObserver(e=>{e.forEach(e=>{s(e.isIntersecting)})},{threshold:.5});return p.current&&e.observe(p.current),()=>{e.disconnect()}}},[e]),r.useEffect(()=>{if(a){let e=setTimeout(()=>{s(!0)},100);return()=>{clearTimeout(e)}}},[a]);let h=()=>{l(!0)},f=()=>{l(!1),s(!1)};return n?"intent"!==e?[o,p,{}]:[o,p,{onFocus:ct(i,h),onBlur:ct(c,f),onMouseEnter:ct(d,h),onMouseLeave:ct(u,f),onTouchStart:ct(m,h)}]:[!1,p,{}]}(s,b),A=function(e){let{target:t,replace:n,state:a,preventScrollReset:l,relative:o,viewTransition:s,unstable_useTransitions:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=ve(),d=ge(),u=we(e,{relative:o});return r.useCallback(m=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(m,t)){m.preventDefault();let t=void 0!==n?n:_(d)===_(u),p=()=>c(e,{replace:t,state:a,preventScrollReset:l,relative:o,viewTransition:s});i?r.startTransition(()=>p()):p()}},[d,c,u,n,a,t,e,l,o,s,i])}(h,{replace:d,state:m,target:p,preventScrollReset:x,relative:i,viewTransition:g,unstable_useTransitions:w});let P=r.createElement("a",u(u(u({},b),E),{},{href:n||S,onClick:k||c?a:function(e){a&&a(e),e.defaultPrevented||A(e)},ref:xt(t,L),target:p,"data-discover":N||"render"!==l?void 0:"true"}));return C&&!N?r.createElement(r.Fragment,null,P,r.createElement(ut,{page:S})):P});wt.displayName="Link",r.forwardRef(function(e,t){let{"aria-current":n="page",caseSensitive:a=!1,className:l="",end:s=!1,style:i,to:c,viewTransition:d,children:m}=e,p=o(e,x),h=we(c,{relative:p.relative}),f=ge(),g=r.useContext(se),{navigator:b,basename:y}=r.useContext(me),j=null!=g&&function(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.useContext(ce);v(null!=n,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=kt("useViewTransitionState"),l=we(e,{relative:t});if(!n.isTransitioning)return!1;let o=U(n.currentLocation.pathname,a)||n.currentLocation.pathname,s=U(n.nextLocation.pathname,a)||n.nextLocation.pathname;return null!=W(l.pathname,s)||null!=W(l.pathname,o)}(h)&&!0===d,w=b.encodeLocation?b.encodeLocation(h).pathname:h.pathname,N=f.pathname,_=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;a||(N=N.toLowerCase(),_=_?_.toLowerCase():null,w=w.toLowerCase()),_&&y&&(_=U(_,y)||_);const k="/"!==w&&w.endsWith("/")?w.length-1:w.length;let S,C=N===w||!s&&N.startsWith(w)&&"/"===N.charAt(k),L=null!=_&&(_===w||!s&&_.startsWith(w)&&"/"===_.charAt(w.length)),E={isActive:C,isPending:L,isTransitioning:j},A=C?n:void 0;S="function"===typeof l?l(E):[l,C?"active":null,L?"pending":null,j?"transitioning":null].filter(Boolean).join(" ");let P="function"===typeof i?i(E):i;return r.createElement(wt,u(u({},p),{},{"aria-current":A,className:S,ref:t,style:P,to:c,viewTransition:d}),"function"===typeof m?m(E):m)}).displayName="NavLink";var Nt=r.forwardRef((e,t)=>{let{discover:n="render",fetcherKey:a,navigate:l,reloadDocument:s,replace:i,state:c,method:d=He,action:m,onSubmit:p,relative:h,preventScrollReset:f,viewTransition:x}=e,b=o(e,g),{unstable_useTransitions:y}=r.useContext(me),j=Lt(),w=function(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{basename:n}=r.useContext(me),a=r.useContext(he);v(a,"useFormAction must be used inside a RouteContext");let[l]=a.matches.slice(-1),o=u({},we(e||".",{relative:t})),s=ge();if(null==e){o.search=s.search;let e=new URLSearchParams(o.search),t=e.getAll("index");if(t.some(e=>""===e)){e.delete("index"),t.filter(e=>e).forEach(t=>e.append("index",t));let n=e.toString();o.search=n?"?".concat(n):""}}e&&"."!==e||!l.route.index||(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index");"/"!==n&&(o.pathname="/"===o.pathname?n:X([n,o.pathname]));return _(o)}(m,{relative:h}),N="get"===d.toLowerCase()?"get":"post",k="string"===typeof m&&jt.test(m);return r.createElement("form",u(u({ref:t,method:N,action:w,onSubmit:s?p:e=>{if(p&&p(e),e.defaultPrevented)return;e.preventDefault();let t=e.nativeEvent.submitter,n=(null===t||void 0===t?void 0:t.getAttribute("formmethod"))||d,o=()=>j(t||e.currentTarget,{fetcherKey:a,method:n,navigate:l,replace:i,state:c,relative:h,preventScrollReset:f,viewTransition:x});y&&!1!==l?r.startTransition(()=>o()):o()}},b),{},{"data-discover":k||"render"!==n?void 0:"true"}))});function _t(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function kt(e){let t=r.useContext(oe);return v(t,_t(e)),t}Nt.displayName="Form";var St=0,Ct=()=>"__".concat(String(++St),"__");function Lt(){let{router:e}=kt("useSubmit"),{basename:t}=r.useContext(me),n=Me("useRouteId"),a=e.fetch,l=e.navigate;return r.useCallback(async function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{action:o,method:s,encType:i,formData:c,body:d}=Je(e,t);if(!1===r.navigate){let e=r.fetcherKey||Ct();await a(e,n,r.action||o,{preventScrollReset:r.preventScrollReset,formData:c,body:d,formMethod:r.method||s,formEncType:r.encType||i,flushSync:r.flushSync})}else await l(r.action||o,{preventScrollReset:r.preventScrollReset,formData:c,body:d,formMethod:r.method||s,formEncType:r.encType||i,replace:r.replace,state:r.state,fromRouteId:n,flushSync:r.flushSync,viewTransition:r.viewTransition})},[a,l,t,n])}var Et=n(579);const At=e=>{let{onLoginSuccess:t}=e;const[n,a]=(0,r.useState)(""),[l,o]=(0,r.useState)(""),[s,i]=(0,r.useState)(!1),[c,d]=(0,r.useState)(""),[u,m]=(0,r.useState)(!1),[p,h]=(0,r.useState)(!1);(0,r.useEffect)(()=>{const e=localStorage.getItem("saved_username"),t=localStorage.getItem("saved_password");"true"===localStorage.getItem("remember_me")&&e&&(a(e),o(t||""),m(!0))},[]);return(0,Et.jsx)("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center p-4",children:(0,Et.jsx)("div",{className:"w-full max-w-md",children:(0,Et.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-8",children:[(0,Et.jsxs)("div",{className:"text-center mb-8",children:[(0,Et.jsx)("img",{src:"/Logo/echologo.png",alt:"EchoVault",className:"mx-auto mb-4 h-12 w-auto"}),(0,Et.jsx)("p",{className:"text-gray-600 text-sm",children:"Loan Management System"})]}),(0,Et.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),i(!0),d("");try{const e="undefined"!==typeof window&&window.REACT_APP_API_URL||"https://echovault.space/wp-json",i=await fetch("".concat(e,"/jwt-auth/v1/token"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:n,password:l}),mode:"cors"}),p=await i.json();if(i.ok&&p.token){localStorage.setItem("jwt_token",p.token);try{let i=p.user_email||p.email||"";try{const e=String(p.token).split(".");if(3===e.length){var r,a,o;const t=JSON.parse(atob(e[1])),n=(null===t||void 0===t||null===(r=t.data)||void 0===r||null===(a=r.user)||void 0===a?void 0:a.user_email)||(null===t||void 0===t||null===(o=t.data)||void 0===o?void 0:o.user_email)||(null===t||void 0===t?void 0:t.user_email)||(null===t||void 0===t?void 0:t.email);n&&(i=n)}}catch(c){}const d=await fetch("".concat(e,"/jwt-auth/v1/token/validate"),{method:"POST",headers:{Authorization:"Bearer ".concat(p.token),"Content-Type":"application/json"},mode:"cors"});if(d.ok){var s;const e=await d.json(),t=(null===(s=e.data)||void 0===s?void 0:s.user_email)||e.user_email||"";t&&(i=t)}if(!i){const t=await fetch("".concat(e,"/wp/v2/users/me"),{method:"GET",headers:{Authorization:"Bearer ".concat(p.token),"Content-Type":"application/json"},mode:"cors"});if(t.ok){const e=await t.json(),n=e.email||e.user_email||"";n&&(i=n)}}const m={username:n,user_email:i,email:i};localStorage.setItem("user",JSON.stringify(m)),u?(localStorage.setItem("saved_username",n),localStorage.setItem("saved_password",l),localStorage.setItem("remember_me","true")):(localStorage.removeItem("saved_username"),localStorage.removeItem("saved_password"),localStorage.removeItem("remember_me")),t(p.token,m)}catch(m){console.error("Error fetching user profile:",m);const e={username:n,user_email:"",email:""};localStorage.setItem("user",JSON.stringify(e)),t(p.token,e)}}else d(p.message||"Login failed. Please check your credentials.")}catch(p){d("Network error. Please try again.")}finally{i(!1)}},className:"space-y-4",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700 mb-1",children:"Username"}),(0,Et.jsx)("input",{type:"text",id:"username",value:n,onChange:e=>a(e.target.value),required:!0,disabled:s,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-50"})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),(0,Et.jsxs)("div",{className:"relative",children:[(0,Et.jsx)("input",{type:p?"text":"password",id:"password",value:l,onChange:e=>o(e.target.value),required:!0,disabled:s,className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-50"}),(0,Et.jsx)("button",{type:"button",onClick:()=>h(!p),className:"absolute inset-y-0 right-0 pr-3 flex items-center",disabled:s,children:p?(0,Et.jsx)("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L3 3m6.878 6.878L21 21"})}):(0,Et.jsxs)("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]})]}),(0,Et.jsx)("div",{className:"flex items-center justify-between",children:(0,Et.jsxs)("div",{className:"flex items-center",children:[(0,Et.jsx)("input",{id:"remember-me",name:"remember-me",type:"checkbox",checked:u,onChange:e=>m(e.target.checked),disabled:s,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded focus:ring-2 focus:ring-blue-200 transition-colors duration-200"}),(0,Et.jsx)("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-gray-700 font-medium cursor-pointer select-none",children:"Remember me"})]})}),c&&(0,Et.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-md p-3",children:(0,Et.jsx)("p",{className:"text-red-700 text-sm",children:c})}),(0,Et.jsx)("button",{type:"submit",disabled:s,className:"w-full bg-blue-600 text-white py-2 px-4 rounded-md font-medium hover:bg-blue-700 focus:outline-none focus:ring-1 focus:ring-blue-500 disabled:opacity-50",children:s?"Signing in...":"Sign In"})]}),(0,Et.jsxs)("div",{className:"mt-6 flex items-center justify-center space-x-2",children:[(0,Et.jsx)("button",{type:"button",onClick:()=>window.open("mailto:support@simplesmart.com","_blank"),className:"px-3 py-1 text-xs font-medium text-blue-600 bg-blue-50 hover:bg-blue-100 rounded-md transition-colors duration-200 border border-blue-200 hover:border-blue-300",children:"Support"}),(0,Et.jsx)("span",{className:"text-xs text-gray-500",children:"by SimpleSmart"})]})]})})})},Pt=e=>{let{currentView:t,setCurrentView:n,onCreateNew:a}=e;const[l,o]=(0,r.useState)(!0),[s,i]=(0,r.useState)(!1),c=e=>{var n;return(["borrowers","borrower-detail","create-borrower","edit-borrower"].includes(n=t)?"borrowers":["loans-active","loan-requests","loan-requests-create","loan-calculator"].includes(n)?"loans-section":n)===e},d=()=>{i(!s),s||o(!1)},u=[{id:"dashboard",label:"Dashboard",icon:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2z"},{id:"borrowers",label:"Clients",icon:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 0 1 9.288 0M15 7a3 3 0 1 1-6 0 3 3 0 0 1 6 0m6 3a2 2 0 1 1-4 0 2 2 0 0 1 4 0zM7 10a2 2 0 1 1-4 0 2 2 0 0 1 4 0z"},{id:"loan-products",label:"Loan Products",icon:"M19 11H5m14 0a2 2 0 0 1 2 2v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-6a2 2 0 0 1 2-2m14 0V9a2 2 0 0 0-2-2M5 11V9a2 2 0 0 1 2-2m0 0V5a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2M7 7h10"},{id:"loan-contract",label:"Loan Contract",icon:"M9 12h6m-6 4h6m2 5H7a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5.586a1 1 0 0 1 .707.293l5.414 5.414a1 1 0 0 1 .293.707V19a2 2 0 0 1-2 2z"},{id:"bank-accounts",label:"Bank Accounts",icon:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 0 0 3-3V8a3 3 0 0 0-3-3H6a3 3 0 0 0-3 3v8a3 3 0 0 0 3 3z"},{id:"notes",label:"Notes",icon:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"},{id:"news",label:"News",icon:"M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 002-2V9a2 2 0 00-2-2h-2m-4-3H9M7 16h6M7 8h6v4H7V8z"},{id:"reports",label:"Reports",icon:"M9 19v-6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2a2 2 0 0 0 2-2zm0 0V9a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2v10m-6 0a2 2 0 0 0 2 2h2a2 2 0 0 0 2-2m0 0V5a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-2a2 2 0 0 1-2-2z"},{id:"settings",label:"Settings",icon:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 0 0-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 0 0-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 0 0-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 0 0-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 0 0 1.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"}];return(0,Et.jsxs)("div",{className:"".concat(s?"w-16":"w-64"," bg-white shadow-sm border-r border-gray-200 min-h-screen flex flex-col transition-all duration-300"),children:[(0,Et.jsxs)("div",{className:"".concat(s?"p-2":"p-6"," flex-1"),children:[(0,Et.jsxs)("div",{className:"flex items-center ".concat(s?"justify-center":"justify-between"," mb-8"),children:[!s&&(0,Et.jsx)("img",{src:"/Logo/echologo.png",alt:"EchoVault",className:"h-8 w-auto"}),s&&(0,Et.jsx)("div",{className:"flex flex-col items-center space-y-2",children:(0,Et.jsxs)("button",{onClick:d,className:"p-2 hover:bg-gray-100 rounded-md transition-colors duration-200 group relative",title:"Expand sidebar",children:[(0,Et.jsx)("img",{src:"/Logo/echologo_short.png",alt:"EchoVault",className:"h-8 w-auto"}),(0,Et.jsx)("div",{className:"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none whitespace-nowrap z-50",children:"Expand sidebar"})]})}),!s&&(0,Et.jsx)("button",{onClick:d,className:"p-1 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-md transition-colors duration-200",title:"Collapse sidebar",children:(0,Et.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})})]}),(0,Et.jsxs)("nav",{className:"space-y-2",children:[u.filter(e=>"dashboard"===e.id).map(e=>(0,Et.jsxs)("button",{onClick:()=>n(e.id),className:"w-full flex items-center ".concat(s?"justify-center px-1 group relative":"px-3"," py-2 text-sm font-medium rounded-lg transition-colors ").concat(c(e.id)?"bg-blue-100 text-blue-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"),title:s?e.label:"",children:[(0,Et.jsx)("svg",{className:"w-5 h-5 ".concat(s?"":"mr-3"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:e.icon})}),!s&&(0,Et.jsx)("span",{children:e.label}),s&&(0,Et.jsx)("div",{className:"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none whitespace-nowrap z-50",children:e.label})]},e.id)),s?(0,Et.jsxs)("button",{onClick:d,className:"w-full flex items-center justify-center px-1 py-2 text-sm font-medium rounded-lg transition-colors group relative ".concat("text-gray-600 hover:text-gray-900 hover:bg-gray-100"),title:"Loans - Click to expand",children:[(0,Et.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 10h16M4 14h16M4 18h16"})}),(0,Et.jsx)("div",{className:"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none whitespace-nowrap z-50",children:"Loans - Click to expand"})]}):(0,Et.jsxs)("div",{className:"mt-2",children:[(0,Et.jsxs)("button",{onClick:()=>o(!l),className:"w-full flex items-center justify-between px-3 py-2 text-sm font-medium rounded-lg transition-colors ".concat("text-gray-700 hover:bg-gray-100"),children:[(0,Et.jsxs)("span",{className:"inline-flex items-center",children:[(0,Et.jsx)("svg",{className:"w-5 h-5 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 10h16M4 14h16M4 18h16"})}),"Loans"]}),(0,Et.jsx)("svg",{className:"w-4 h-4 text-gray-400 transition-transform duration-200 ".concat(l?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),l&&(0,Et.jsxs)("div",{className:"ml-3 space-y-1",children:[(0,Et.jsxs)("button",{onClick:()=>n("loans-active"),className:"w-full flex items-center px-3 py-2 text-sm font-medium rounded-lg transition-colors ".concat("loans-active"===t||"loans-create"===t?"bg-blue-100 text-blue-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"),children:[(0,Et.jsx)("span",{className:"w-5 h-5 mr-3 inline-flex items-center justify-center",children:(0,Et.jsx)("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 10h16M4 14h16M4 18h16"})})}),"All Loans"]}),(0,Et.jsxs)("button",{onClick:()=>n("loan-requests"),className:"w-full flex items-center px-3 py-2 text-sm font-medium rounded-lg transition-colors ".concat("loan-requests"===t||"loan-requests-create"===t?"bg-blue-100 text-blue-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"),children:[(0,Et.jsx)("span",{className:"w-5 h-5 mr-3 inline-flex items-center justify-center",children:(0,Et.jsx)("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}),"Loan Requests"]}),(0,Et.jsxs)("button",{onClick:()=>n("loan-calculator"),className:"w-full flex items-center px-3 py-2 text-sm font-medium rounded-lg transition-colors ".concat("loan-calculator"===t?"bg-blue-100 text-blue-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"),children:[(0,Et.jsx)("span",{className:"w-5 h-5 mr-3 inline-flex items-center justify-center",children:(0,Et.jsx)("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})})}),"Loan Calculator"]})]})]}),u.filter(e=>"dashboard"!==e.id).map(e=>(0,Et.jsxs)("button",{onClick:()=>n(e.id),className:"w-full flex items-center ".concat(s?"justify-center px-1 group relative":"px-3"," py-2 text-sm font-medium rounded-lg transition-colors ").concat(c(e.id)?"bg-blue-100 text-blue-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"),title:s?e.label:"",children:[(0,Et.jsx)("svg",{className:"w-5 h-5 ".concat(s?"":"mr-3"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:e.icon})}),!s&&(0,Et.jsx)("span",{children:e.label}),s&&(0,Et.jsx)("div",{className:"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none whitespace-nowrap z-50",children:e.label})]},e.id))]})]}),!s&&(0,Et.jsxs)("div",{className:"p-6 border-t border-gray-200",children:[(0,Et.jsxs)("p",{className:"text-xs text-gray-500 text-center",children:["\xa9 2026 EchoVault LMS. Developed by"," ",(0,Et.jsx)("a",{href:"https://simplesmart.com.au/",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 hover:underline transition-colors duration-200",children:"SimpleSmart"})]}),(0,Et.jsxs)("p",{className:"text-xs text-gray-400 text-center mt-1",children:["Version ","1.1.2"]})]})]})},Mt=e=>{let{onLogout:t,user:n,onNavigateToProfile:a}=e;const[l,o]=(0,r.useState)(!1),[s,i]=(0,r.useState)(!1),[c,d]=(0,r.useState)(!1),u=(0,r.useRef)(null),m=(0,r.useRef)(null);(0,r.useEffect)(()=>{const e=e=>{u.current&&!u.current.contains(e.target)&&o(!1),m.current&&!m.current.contains(e.target)&&i(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]);return(0,Et.jsx)("header",{className:"bg-white shadow-sm border-b border-gray-200 h-16",children:(0,Et.jsxs)("div",{className:"flex items-center justify-between h-full px-6",children:[(0,Et.jsx)("div",{className:"flex items-center"}),(0,Et.jsxs)("div",{className:"flex items-center",children:[(0,Et.jsxs)("div",{className:"flex items-center space-x-2 mr-6",children:[(0,Et.jsx)("button",{onClick:()=>{alert("Terminal feature coming soon!")},className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-md transition-colors duration-200",title:"Terminal",children:(0,Et.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 9l3 3-3 3m5 0h3M5 20h14a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),(0,Et.jsx)("button",{onClick:()=>{alert("Help feature coming soon!")},className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-md transition-colors duration-200",title:"Help",children:(0,Et.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})})}),(0,Et.jsxs)("div",{className:"relative",ref:m,children:[(0,Et.jsxs)("button",{onClick:()=>{i(!s),o(!1)},className:"p-1.5 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-md transition-colors duration-200 relative",title:"Notifications",children:[(0,Et.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),(0,Et.jsx)("span",{className:"absolute -top-0.5 -right-0.5 h-2 w-2 bg-red-500 rounded-full"})]}),s&&(0,Et.jsxs)("div",{className:"absolute right-0 mt-2 w-80 bg-white rounded-md shadow-lg border border-gray-200 py-1 z-50",children:[(0,Et.jsx)("div",{className:"px-4 py-3 border-b border-gray-100",children:(0,Et.jsx)("h3",{className:"text-sm font-medium text-gray-900",children:"Notifications"})}),(0,Et.jsxs)("div",{className:"max-h-64 overflow-y-auto",children:[(0,Et.jsx)("div",{className:"px-4 py-3 hover:bg-gray-50 border-b border-gray-100",children:(0,Et.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,Et.jsx)("div",{className:"flex-shrink-0",children:(0,Et.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full mt-2"})}),(0,Et.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Et.jsx)("p",{className:"text-sm text-gray-900",children:"New loan application received"}),(0,Et.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"John Doe submitted a loan application 2 hours ago"}),(0,Et.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"2 hours ago"})]})]})}),(0,Et.jsx)("div",{className:"px-4 py-3 hover:bg-gray-50 border-b border-gray-100",children:(0,Et.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,Et.jsx)("div",{className:"flex-shrink-0",children:(0,Et.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full mt-2"})}),(0,Et.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Et.jsx)("p",{className:"text-sm text-gray-900",children:"Payment received"}),(0,Et.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Jane Smith made a payment of $500"}),(0,Et.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"4 hours ago"})]})]})}),(0,Et.jsx)("div",{className:"px-4 py-3 hover:bg-gray-50",children:(0,Et.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,Et.jsx)("div",{className:"flex-shrink-0",children:(0,Et.jsx)("div",{className:"w-2 h-2 bg-yellow-500 rounded-full mt-2"})}),(0,Et.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Et.jsx)("p",{className:"text-sm text-gray-900",children:"Document verification pending"}),(0,Et.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"3 documents need verification"}),(0,Et.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"1 day ago"})]})]})})]}),(0,Et.jsx)("div",{className:"px-4 py-2 border-t border-gray-100",children:(0,Et.jsx)("button",{className:"text-sm text-blue-600 hover:text-blue-800 font-medium",children:"View all notifications"})})]})]})]}),(0,Et.jsx)("button",{onClick:()=>{d(!c),alert("Switching to ".concat(c?"Light":"Dark"," mode!"))},className:"p-1.5 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-md transition-colors duration-200 mr-4",title:c?"Switch to Light Mode":"Switch to Dark Mode",children:c?(0,Et.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}):(0,Et.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})})}),(0,Et.jsxs)("div",{className:"relative",ref:u,children:[(0,Et.jsxs)("button",{onClick:()=>o(!l),className:"flex items-center space-x-3 p-2 rounded-md hover:bg-gray-100 transition-colors duration-200",children:[(0,Et.jsx)("div",{className:"w-8 h-8 rounded-full overflow-hidden bg-gray-100",children:(0,Et.jsx)("img",{src:"/avatars/monster (1).svg",alt:"Admin Avatar",className:"w-full h-full object-contain"})}),(0,Et.jsxs)("div",{className:"text-sm text-left",children:[(0,Et.jsx)("p",{className:"font-medium text-gray-900",children:(null===n||void 0===n?void 0:n.username)||"User"}),(0,Et.jsx)("p",{className:"text-gray-500",children:"Administrator"})]}),(0,Et.jsx)("svg",{className:"w-4 h-4 text-gray-400 transition-transform duration-200 ".concat(l?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),l&&(0,Et.jsxs)("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg border border-gray-200 py-1 z-50",children:[(0,Et.jsxs)("button",{onClick:()=>{o(!1),a()},className:"flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors duration-200",children:[(0,Et.jsx)("svg",{className:"w-4 h-4 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),"Admin Profile"]}),(0,Et.jsx)("div",{className:"border-t border-gray-100 my-1"}),(0,Et.jsxs)("button",{onClick:()=>{o(!1),t()},className:"flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors duration-200",children:[(0,Et.jsx)("svg",{className:"w-4 h-4 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"Logout"]})]})]})]})]})})},Bt=e=>{if(null===e||void 0===e)return!1;const t=String(e).trim();return""!==t&&"null"!==t&&"undefined"!==t&&"N/A"!==t&&"n/a"!==t&&"Not provided"!==t&&"not provided"!==t},Ft=e=>{if(!e||"object"!==typeof e)return{status:"Pending",color:"red",percentage:0,missingFields:[]};let t=0,n=0;const r=[];[{key:"first_name",label:"First Name",category:"Basic Info"},{key:"last_name",label:"Last Name",category:"Basic Info"},{key:"email_address",label:"Email Address",category:"Basic Info"},{key:"date_of_birth",label:"Date of Birth",category:"Basic Info"},{key:"mobile_number",label:"Mobile Number",category:"Basic Info"},{key:"registration_number",label:"Registration Number",category:"Basic Info"},{key:"home_address",label:"Home Address",category:"Basic Info"},{key:"document_type",label:"Document Type",category:"Basic Info"},{key:"social_link_1",label:"Social Link 1",category:"Social"},{key:"employment_status",label:"Employment Status",category:"Employment"},{key:"work_rights",label:"Work Rights",category:"Employment"},{key:"employer_name",label:"Employer Name",category:"Employment"},{key:"job_title",label:"Job Title",category:"Employment"},{key:"monthly_income_aud",label:"Monthly Income",category:"Employment"},{key:"employment_start_date",label:"Employment Start Date",category:"Employment"},{key:"employer_phone",label:"Employer Phone",category:"Employment"},{key:"employer_email",label:"Employer Email",category:"Employment"},{key:"employer_address",label:"Employer Address",category:"Employment"},{key:"marital_status",label:"Marital Status",category:"Family"},{key:"family_relationship",label:"Family Relationship",category:"Family"},{key:"family_member_full_name",label:"Family Member Name",category:"Family"},{key:"family_member_phone",label:"Family Member Phone",category:"Family"},{key:"family_member_email",label:"Family Member Email",category:"Family"},{key:"bank_name",label:"Bank Name",category:"Banking"},{key:"account_name",label:"Account Name",category:"Banking"},{key:"bsb_number",label:"BSB Number",category:"Banking"},{key:"account_number",label:"Account Number",category:"Banking"},{key:"visa_type",label:"Visa Type",category:"Visa Status"},{key:"visa_expiry_date",label:"Visa Expiry Date",category:"Visa Status"}].forEach(a=>{const l=e[a.key];var o;n++,"email_address"===a.key?Bt(o=l)&&/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(String(o).trim())?t++:r.push(a):Bt(l)?t++:r.push(a)});const a=n>0?Math.round(t/n*100):0;return 100===a?{status:"Verified",color:"green",percentage:a,missingFields:[]}:a>=75?{status:"Almost Complete",color:"blue",percentage:a,missingFields:r}:a>=50?{status:"In Progress",color:"yellow",percentage:a,missingFields:r}:{status:"Pending",color:"red",percentage:a,missingFields:r}},Tt=e=>{let{isOpen:t,onClose:n,missingFields:r,verificationStatus:a}=e;if(!t||!r||0===r.length)return null;const l=r.reduce((e,t)=>(e[t.category]||(e[t.category]=[]),e[t.category].push(t),e),{}),o=e=>{switch(e){case"Basic Info":return(0,Et.jsx)("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})});case"Social":return(0,Et.jsx)("svg",{className:"w-5 h-5 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})});case"Employment":return(0,Et.jsx)("svg",{className:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2-2v2m8 0V6a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V8a2 2 0 012-2V6"})});case"Family":return(0,Et.jsx)("svg",{className:"w-5 h-5 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})});case"Banking":return(0,Et.jsx)("svg",{className:"w-5 h-5 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})});default:return(0,Et.jsx)("svg",{className:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}},s=e=>{switch(e){case"Basic Info":return"bg-blue-50 border-blue-200";case"Social":return"bg-purple-50 border-purple-200";case"Employment":return"bg-green-50 border-green-200";case"Family":return"bg-orange-50 border-orange-200";case"Banking":return"bg-indigo-50 border-indigo-200";default:return"bg-gray-50 border-gray-200"}};return(0,Et.jsx)("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:(0,Et.jsxs)("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[(0,Et.jsx)("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:n}),(0,Et.jsxs)("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-2xl sm:w-full",children:[(0,Et.jsx)("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:(0,Et.jsxs)("div",{className:"sm:flex sm:items-start",children:[(0,Et.jsx)("div",{className:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-yellow-100 sm:mx-0 sm:h-10 sm:w-10",children:(0,Et.jsx)("svg",{className:"w-6 h-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,Et.jsxs)("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left",children:[(0,Et.jsx)("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"Missing Fields for Verification"}),(0,Et.jsxs)("div",{className:"mt-2",children:[(0,Et.jsxs)("p",{className:"text-sm text-gray-500",children:["Complete these ",r.length," fields to achieve 100% verification"]}),(0,Et.jsx)("div",{className:"mt-2",children:(0,Et.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat("green"===a.color?"bg-green-100 text-green-800":"blue"===a.color?"bg-blue-100 text-blue-800":"red"===a.color?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"),children:[a.status," - ",a.percentage,"% Complete"]})})]})]})]})}),(0,Et.jsx)("div",{className:"bg-white px-4 pb-4 sm:px-6 max-h-96 overflow-y-auto",children:(0,Et.jsx)("div",{className:"space-y-4",children:Object.entries(l).map(e=>{let[t,n]=e;return(0,Et.jsxs)("div",{className:"p-4 rounded-lg border ".concat(s(t)),children:[(0,Et.jsxs)("div",{className:"flex items-center mb-3",children:[(0,Et.jsx)("div",{className:"mr-3",children:o(t)}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("h4",{className:"text-sm font-semibold text-gray-900",children:t}),(0,Et.jsxs)("p",{className:"text-xs text-gray-600",children:[n.length," missing field",1!==n.length?"s":""]})]})]}),(0,Et.jsx)("div",{className:"space-y-2",children:n.map((e,t)=>(0,Et.jsxs)("div",{className:"flex items-center text-sm text-gray-700",children:[(0,Et.jsx)("div",{className:"w-2 h-2 bg-red-400 rounded-full mr-3 flex-shrink-0"}),(0,Et.jsx)("span",{children:e.label})]},t))})]},t)})})}),(0,Et.jsxs)("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:[(0,Et.jsx)("button",{type:"button",className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:ml-3 sm:w-auto sm:text-sm",onClick:n,children:"Got it"}),(0,Et.jsx)("button",{type:"button",className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm",onClick:n,children:"Close"})]})]})]})})},Dt=["monster.svg","monster (1).svg","monster (2).svg","monster (3).svg","monster (4).svg","monster (5).svg","monster (6).svg","monster (7).svg","monster (8).svg","monster (9).svg","monster (10).svg","monster (11).svg","monster (12).svg"],zt=()=>{const e=Math.floor(Math.random()*Dt.length);return Dt[e]},Rt=e=>{let t=e;return t||(t=Dt[0]),"object"===typeof t&&null!==t&&(t=t.name||t.filename||t),Array.isArray(t)&&(t=t[0]),t=String(t).trim(),t||(t=Dt[0]),"/avatars/".concat(t)},Ot=e=>{let t=null;if("object"===typeof e&&null!==e){var n,r,a;const l=e;let o=l.avatar||(null===(n=l.meta)||void 0===n?void 0:n.avatar)||(null===(r=l.fields)||void 0===r?void 0:r.avatar)||(Array.isArray(l.avatar)?l.avatar[0]:null)||(Array.isArray(null===(a=l.meta)||void 0===a?void 0:a.avatar)?l.meta.avatar[0]:null);if(o&&"object"===typeof o&&(o=o.name||o.filename||o.url||o),o&&"string"===typeof o&&o.trim()&&(t=o.trim()),!t){const e=l.id||l.ID;if(e){t=Dt[e%Dt.length]}}}else if("number"===typeof e){t=Dt[e%Dt.length]}return t||(t=Dt[0]),Rt(t)},It=e=>{let{onSelectBorrower:t,onCreateNew:n}=e;const[a,l]=(0,r.useState)([]),[o,s]=(0,r.useState)([]),[i,c]=(0,r.useState)(!0),[d,u]=(0,r.useState)(""),[m,p]=(0,r.useState)(!1),[h,f]=(0,r.useState)(null),[x,g]=(0,r.useState)(""),[b,y]=(0,r.useState)("all"),[v,j]=(0,r.useState)("all"),[w,N]=(0,r.useState)(50),[_,k]=(0,r.useState)(1);(0,r.useEffect)(()=>{R()},[]),(0,r.useEffect)(()=>{E(),k(1)},[a,x,b,v]);const S=(e=>{if(!e||!Array.isArray(e))return{total:0,verified:0,almostComplete:0,inProgress:0,pending:0};const t={total:e.length,verified:0,almostComplete:0,inProgress:0,pending:0};return e.forEach(e=>{switch(Ft(e).status){case"Verified":t.verified++;break;case"Almost Complete":t.almostComplete++;break;case"In Progress":t.inProgress++;break;default:t.pending++}}),t})(a),C=S.verified,L=S.total-S.verified,E=()=>{let e=[...a];if(x){const t=x.toLowerCase();e=e.filter(e=>{var n,r;const a=e.first_name&&e.last_name?"".concat(e.first_name," ").concat(e.last_name):(null===(n=e.title)||void 0===n?void 0:n.rendered)||"",l=e.email_address||"",o=e.borrower_id||(null===(r=e.meta)||void 0===r?void 0:r.borrower_id)||"EV".concat(e.id.toString().padStart(7,"0"));return a.toLowerCase().includes(t)||l.toLowerCase().includes(t)||o.toLowerCase().includes(t)})}"all"!==b&&(e=e.filter(e=>Ft(e).status.toLowerCase()===b.toLowerCase())),"all"!==v&&(e=e.filter(e=>{const t=e.document_type;if(!t)return!1;return(Array.isArray(t)?t:[t]).some(e=>e.toLowerCase().includes(v.toLowerCase()))})),s(e)},A=()=>{g(""),y("all"),j("all")},P=o.length,M=Math.max(1,Math.ceil(P/w)),B=(_-1)*w,F=Math.min(B+w,P),T=o.slice(B,F),D=e=>{e<1||e>M||k(e)},z="undefined"!==typeof window&&window.REACT_APP_API_URL||"https://echovault.space/wp-json",R=async()=>{try{const e=localStorage.getItem("jwt_token");if(!e)return u("Authentication token not found. Please login again."),void c(!1);const t=await fetch("".concat(z,"/wp/v2/borrower-profile"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},mode:"cors"});if(t.ok){const e=await t.json();l(e)}else u("Failed to fetch borrowers. Please try again.")}catch(e){console.error("Error fetching borrowers:",e),u("Network error. Please try again.")}finally{c(!1)}};return i?(0,Et.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,Et.jsxs)("div",{className:"text-center",children:[(0,Et.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-blue-200 border-t-blue-600 mx-auto mb-4"}),(0,Et.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Loading Clients"}),(0,Et.jsx)("p",{className:"text-gray-600",children:"Please wait while we fetch the latest data..."})]})}):d?(0,Et.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:(0,Et.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-8 max-w-md w-full border border-gray-200",children:(0,Et.jsxs)("div",{className:"text-center",children:[(0,Et.jsx)("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,Et.jsx)("svg",{className:"w-8 h-8 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,Et.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Unable to Load Clients"}),(0,Et.jsx)("p",{className:"text-gray-600 mb-6",children:d}),(0,Et.jsx)("button",{onClick:R,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-medium",children:"Try Again"})]})})}):(0,Et.jsxs)("div",{children:[(0,Et.jsx)("div",{className:"mb-8",children:(0,Et.jsxs)("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Client List"}),(0,Et.jsx)("p",{className:"text-gray-600",children:"Manage and view client profiles and loan information"}),(0,Et.jsxs)("p",{className:"text-sm text-gray-600 mt-2",children:[(0,Et.jsxs)("span",{className:"text-green-600 font-medium",children:[C," verified"]})," \u2022 ",(0,Et.jsxs)("span",{className:"text-gray-500",children:[L," unverified"]})]})]}),(0,Et.jsxs)("button",{onClick:n,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-medium flex items-center space-x-2 self-start sm:self-center",children:[(0,Et.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),(0,Et.jsx)("span",{children:"Create New Profile"})]})]})}),(0,Et.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6",children:[(0,Et.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[(0,Et.jsxs)("div",{className:"md:col-span-2",children:[(0,Et.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search Clients"}),(0,Et.jsxs)("div",{className:"relative",children:[(0,Et.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,Et.jsx)("svg",{className:"h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),(0,Et.jsx)("input",{type:"text",placeholder:"Search by name, email, or ID...",value:x,onChange:e=>g(e.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500"})]})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Filter by Status"}),(0,Et.jsxs)("select",{value:b,onChange:e=>y(e.target.value),className:"block w-full px-3 py-2 border border-gray-300 rounded-md bg-white focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",children:[(0,Et.jsx)("option",{value:"all",children:"All Statuses"}),(()=>{const e=new Set;return a.forEach(t=>{const n=Ft(t);e.add(n.status)}),Array.from(e).sort()})().map(e=>(0,Et.jsx)("option",{value:e,children:e},e))]})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Filter by Document Type"}),(0,Et.jsxs)("select",{value:v,onChange:e=>j(e.target.value),className:"block w-full px-3 py-2 border border-gray-300 rounded-md bg-white focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",children:[(0,Et.jsx)("option",{value:"all",children:"All Document Types"}),(()=>{const e=new Set;return a.forEach(t=>{if(t.document_type){(Array.isArray(t.document_type)?t.document_type:[t.document_type]).forEach(t=>e.add(t))}}),Array.from(e).sort()})().map(e=>(0,Et.jsx)("option",{value:e,children:e},e))]})]})]}),(0,Et.jsxs)("div",{className:"flex justify-between items-center mt-4 pt-4 border-t border-gray-200",children:[(0,Et.jsxs)("div",{className:"text-sm text-gray-600",children:["Showing ",B+1,"-",F," of ",o.length," clients",(x||"all"!==b||"all"!==v)&&(0,Et.jsx)("span",{className:"ml-2 text-blue-600",children:"(filtered)"})]}),(x||"all"!==b||"all"!==v)&&(0,Et.jsx)("button",{onClick:A,className:"text-sm text-gray-500 hover:text-gray-700 underline",children:"Clear all filters"})]})]}),0===a.length?(0,Et.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-12 text-center",children:[(0,Et.jsx)("div",{className:"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,Et.jsx)("svg",{className:"w-12 h-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),(0,Et.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No clients found"}),(0,Et.jsx)("p",{className:"text-gray-500 mb-8 max-w-md mx-auto",children:"Get started by creating your first client profile. This will help you manage loan applications and track client information."}),(0,Et.jsxs)("button",{onClick:n,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-medium flex items-center space-x-2 mx-auto",children:[(0,Et.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),(0,Et.jsx)("span",{children:"Create First Profile"})]})]}):0===o.length?(0,Et.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-12 text-center",children:[(0,Et.jsx)("div",{className:"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,Et.jsx)("svg",{className:"w-12 h-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),(0,Et.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No clients found"}),(0,Et.jsx)("p",{className:"text-gray-500 mb-8 max-w-md mx-auto",children:"No clients match your current search and filter criteria. Try adjusting your filters or search terms."}),(0,Et.jsxs)("button",{onClick:A,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-medium flex items-center space-x-2 mx-auto",children:[(0,Et.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),(0,Et.jsx)("span",{children:"Clear Filters"})]})]}):(0,Et.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[(0,Et.jsx)("div",{className:"overflow-x-auto",children:(0,Et.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Et.jsx)("thead",{className:"bg-gray-50",children:(0,Et.jsxs)("tr",{children:[(0,Et.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Borrower"}),(0,Et.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact"}),(0,Et.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Document Type"}),(0,Et.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,Et.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created"}),(0,Et.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,Et.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:T.map(e=>{var n,r;const a=e.first_name&&e.last_name?"".concat(e.first_name," ").concat(e.last_name):(null===(n=e.title)||void 0===n?void 0:n.rendered)||"Unknown Borrower",l=a.split(" ").map(e=>e[0]).join("").toUpperCase(),o=Ft(e);return(0,Et.jsxs)("tr",{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>t(e),children:[(0,Et.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Et.jsxs)("div",{className:"flex items-center",children:[(0,Et.jsx)("img",{src:Ot(e),alt:a,className:"w-10 h-10 rounded-full object-cover",onError:e=>{e.target.style.display="none",e.target.nextSibling.style.display="flex"}}),(0,Et.jsx)("div",{className:"w-10 h-10 bg-blue-600 rounded-full flex items-center justify-center text-white font-semibold text-sm hidden",children:l}),(0,Et.jsxs)("div",{className:"ml-4",children:[(0,Et.jsx)("div",{className:"text-sm font-medium text-gray-900",children:a}),(0,Et.jsxs)("div",{className:"text-sm text-gray-500",children:["ID: ",e.borrower_id||(null===(r=e.meta)||void 0===r?void 0:r.borrower_id)||"EV".concat(e.id.toString().padStart(7,"0"))]})]})]})}),(0,Et.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,Et.jsx)("div",{className:"text-sm text-gray-900",children:e.email_address||"-"}),(0,Et.jsx)("div",{className:"text-sm text-gray-500",children:e.mobile_number||"-"})]}),(0,Et.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Et.jsx)("div",{className:"text-sm text-gray-900",children:e.document_type?Array.isArray(e.document_type)?e.document_type.join(", "):e.document_type:"-"})}),(0,Et.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Et.jsxs)("div",{className:"flex flex-col space-y-1",children:[(0,Et.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat("green"===o.color?"bg-green-100 text-green-800":"blue"===o.color?"bg-blue-100 text-blue-800":"red"===o.color?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"),children:o.status}),(0,Et.jsxs)("span",{className:"text-xs text-gray-500",children:[Math.round(o.percentage),"% Complete"]}),o.missingFields.length>0&&(0,Et.jsxs)("button",{onClick:t=>{t.stopPropagation(),f(e),p(!0)},className:"text-xs text-yellow-600 hover:text-yellow-800 underline",children:[o.missingFields.length," missing"]})]})}),(0,Et.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(e.date).toLocaleDateString()}),(0,Et.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,Et.jsx)("button",{onClick:n=>{n.stopPropagation(),t(e)},className:"text-blue-600 hover:text-blue-900",children:"View Details"})})]},e.id)})})]})}),(0,Et.jsxs)("div",{className:"px-6 py-4 flex flex-col sm:flex-row items-center justify-between gap-3 bg-white border-t border-gray-200",children:[(0,Et.jsxs)("div",{className:"flex items-center gap-3 text-sm text-gray-700",children:[(0,Et.jsx)("span",{children:"Rows per page:"}),(0,Et.jsxs)("select",{value:w,onChange:e=>{const t=Number(e.target.value);N(t),k(1)},className:"px-2 py-1 border border-gray-300 rounded",children:[(0,Et.jsx)("option",{value:5,children:"5"}),(0,Et.jsx)("option",{value:10,children:"10"}),(0,Et.jsx)("option",{value:50,children:"50"}),(0,Et.jsx)("option",{value:100,children:"100"})]}),(0,Et.jsxs)("span",{children:[0===P?"0":B+1,"-",F," of ",P]})]}),(0,Et.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Et.jsx)("button",{onClick:()=>D(1),disabled:1===_,className:"px-3 py-1 text-sm border rounded disabled:opacity-50 disabled:cursor-not-allowed",children:"\xab First"}),(0,Et.jsx)("button",{onClick:()=>D(_-1),disabled:1===_,className:"px-3 py-1 text-sm border rounded disabled:opacity-50 disabled:cursor-not-allowed",children:"\u2039 Prev"}),(0,Et.jsx)("button",{onClick:()=>D(_+1),disabled:_===M,className:"px-3 py-1 text-sm border rounded disabled:opacity-50 disabled:cursor-not-allowed",children:"Next \u203a"}),(0,Et.jsx)("button",{onClick:()=>D(M),disabled:_===M,className:"px-3 py-1 text-sm border rounded disabled:opacity-50 disabled:cursor-not-allowed",children:"Last \xbb"})]})]})]}),h&&(0,Et.jsx)(Tt,{isOpen:m,onClose:()=>{p(!1),f(null)},missingFields:Ft(h).missingFields,verificationStatus:Ft(h)})]})},Wt=e=>{var t,n,a,l,o,s,i,c,d,u,m;let{isOpen:p,onClose:h,documentData:f}=e;const[x,g]=(0,r.useState)(!1),[b,y]=(0,r.useState)(""),[v,j]=(0,r.useState)(null);if(console.log("DocumentViewer props:",{isOpen:p,documentData:f}),(0,r.useEffect)(()=>(document.body.style.overflow=p?"hidden":"unset",()=>{document.body.style.overflow="unset"}),[p]),(0,r.useEffect)(()=>{(async()=>{var e,t;let n=null;if("number"===typeof(null===f||void 0===f?void 0:f.ID)?n=f.ID:"string"!==typeof(null===f||void 0===f?void 0:f.ID)||isNaN(f.ID)?null!==f&&void 0!==f&&f.ID&&"object"===typeof f.ID&&(n=f.ID.ID||f.ID.id||f.ID.value,n&&"string"===typeof n&&!isNaN(n)&&(n=parseInt(n))):n=parseInt(f.ID),console.log("Attempting to fetch media details:",{documentData:f,mediaId:n,hasSourceUrl:!(null===f||void 0===f||!f.source_url),hasGuid:!(null===f||void 0===f||null===(e=f.guid)||void 0===e||!e.rendered)}),p&&n&&!f.source_url&&(null===(t=f.guid)||void 0===t||!t.rendered)){g(!0);try{const e=localStorage.getItem("jwt_token"),t="undefined"!==typeof window&&window.REACT_APP_API_URL||"https://echovault.space/wp-json",r=await fetch("".concat(t,"/wp/v2/media/").concat(n),{headers:{Authorization:"Bearer ".concat(e)},mode:"cors"});if(r.ok){const e=await r.json();console.log("Fetched media data:",e),j(e)}else console.error("Failed to fetch media details:",r.status)}catch(r){console.error("Error fetching media details:",r)}finally{g(!1)}}})()},[p,f]),!p||!f)return null;const w=async e=>{e.preventDefault();try{const e=localStorage.getItem("jwt_token"),t=await fetch(S,{headers:{Authorization:"Bearer ".concat(e)},mode:"cors"});if(t.ok){const e=await t.blob(),n=window.URL.createObjectURL(e),r=document.createElement("a");r.href=n,r.download=E||"document",document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(n)}else console.error("Failed to download file:",t.status)}catch(b){console.error("Download error:",b),window.open(S,"_blank")}},N=v||f,_=null!==(k=N.mime_type||N.post_mime_type)&&void 0!==k&&k.includes("pdf")?"pdf":null!==k&&void 0!==k&&k.includes("image")?"image":"other";var k;let S=N.source_url||(null===(t=N.guid)||void 0===t?void 0:t.rendered)||N.url||N.link||(null===(n=N.media_details)||void 0===n||null===(a=n.sizes)||void 0===a||null===(l=a.full)||void 0===l?void 0:l.source_url)||(null===(o=N.media_details)||void 0===o||null===(s=o.sizes)||void 0===s||null===(i=s.large)||void 0===i?void 0:i.source_url)||(null===(c=N.media_details)||void 0===c||null===(d=c.sizes)||void 0===d||null===(u=d.medium)||void 0===u?void 0:u.source_url);if(!S&&N.ID){var C,L;const e=("undefined"!==typeof window&&window.REACT_APP_API_URL||"https://echovault.space/wp-json").replace("/wp-json","")||window.location.origin,t=null===(C=N.post_date)||void 0===C||null===(L=C.split(" ")[0])||void 0===L?void 0:L.replace(/-/g,"/");let n=null;"string"===typeof N.ID?n=N.ID:"number"===typeof N.ID?n=N.ID.toString():"object"===typeof N.ID&&N.ID&&(n=N.ID.ID||N.ID.id||N.ID.value||N.ID.toString());const r=N.post_name||N.post_title||n;if(console.log("Constructing fallback URL:",{siteUrl:e,uploadDate:t,fileName:r,post_date:N.post_date,post_name:N.post_name,post_title:N.post_title,currentData:N,originalId:N.ID,idType:typeof N.ID}),t&&r&&"[object Object]"!==r)S="".concat(e,"/wp-content/uploads/").concat(t,"/").concat(r);else if(r&&"[object Object]"!==r)S="".concat(e,"/wp-content/uploads/").concat(r);else{const t="number"===typeof N.ID?N.ID:"string"!==typeof N.ID||isNaN(N.ID)?N.ID&&"object"===typeof N.ID?N.ID.ID||N.ID.id||N.ID.value:null:parseInt(N.ID);t&&(S="".concat(e,"/wp-content/uploads/").concat(t))}}const E=(null===(m=N.title)||void 0===m?void 0:m.rendered)||N.post_title||N.title,A=N.mime_type||N.post_mime_type;return console.log("DocumentViewer data:",{fileType:_,documentUrl:S,documentTitle:E,documentMimeType:A,availableFields:Object.keys(N),fullData:N,fetchedMediaData:v,originalData:f}),(0,Et.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",onClick:e=>{e.target===e.currentTarget&&h()},children:(0,Et.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl max-h-[90vh] w-full overflow-hidden flex flex-col",children:[(0,Et.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[(0,Et.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Et.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,Et.jsx)("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:E||"Document Viewer"}),(0,Et.jsx)("p",{className:"text-sm text-gray-500",children:A||"Unknown file type"})]})]}),(0,Et.jsx)("button",{onClick:h,className:"p-2 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-100",children:(0,Et.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),x&&(0,Et.jsxs)("div",{className:"p-6 text-center",children:[(0,Et.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,Et.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading document details..."})]}),!x&&(0,Et.jsxs)(Et.Fragment,{children:[(0,Et.jsxs)("div",{className:"p-4 flex-1 overflow-auto flex items-center justify-center",children:["image"===_?(0,Et.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,Et.jsx)("img",{src:S,alt:E||"Document",className:"max-w-[80vw] max-h-[70vh] object-contain rounded-lg shadow-sm",style:{minHeight:"200px",minWidth:"200px"},onLoad:()=>{g(!1),console.log("Image loaded successfully:",S)},onError:e=>{console.error("Image failed to load:",S,e),y("Failed to load image")}})}):"pdf"===_?(0,Et.jsx)("div",{className:"w-full h-[600px]",children:(0,Et.jsx)("iframe",{src:S,className:"w-full h-full border-0 rounded-lg",title:E||"PDF Document",onError:()=>y("Failed to load PDF")})}):(0,Et.jsxs)("div",{className:"text-center py-12",children:[(0,Et.jsx)("div",{className:"p-4 bg-gray-100 rounded-full w-16 h-16 mx-auto mb-4 flex items-center justify-center",children:(0,Et.jsx)("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),(0,Et.jsx)("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"Document Preview Not Available"}),(0,Et.jsx)("p",{className:"text-gray-600 mb-4",children:"This file type cannot be previewed in the browser."}),S&&(0,Et.jsxs)("button",{onClick:w,className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[(0,Et.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Download Document"]})]}),b&&(0,Et.jsxs)("div",{className:"mt-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:[(0,Et.jsxs)("div",{className:"flex items-center",children:[(0,Et.jsx)("svg",{className:"w-5 h-5 text-red-400 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,Et.jsx)("span",{className:"text-red-800",children:b})]}),S&&(0,Et.jsx)("div",{className:"mt-3",children:(0,Et.jsxs)("button",{onClick:w,className:"inline-flex items-center px-3 py-2 text-sm bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[(0,Et.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Try Downloading Instead"]})})]})]}),(0,Et.jsxs)("div",{className:"flex items-center justify-between p-4 border-t border-gray-200 bg-gray-50 flex-shrink-0",children:[(0,Et.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,Et.jsxs)("a",{href:S,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center px-3 py-2 text-sm bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[(0,Et.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})}),"Open in New Tab"]}),(0,Et.jsxs)("button",{onClick:w,className:"inline-flex items-center px-3 py-2 text-sm bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[(0,Et.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Download"]})]}),(0,Et.jsx)("button",{onClick:h,className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:"Close"})]})]})]})})},Vt=e=>{var t,n,a,l,o,s,i,c,d,u,m,p,h;let{borrower:f,onBack:x,onEdit:g}=e;const[b,y]=(0,r.useState)(null),[v,j]=(0,r.useState)(!1),[w,N]=(0,r.useState)("general"),[_,k]=(0,r.useState)(!1),[S,C]=(0,r.useState)(!1),[L,E]=(0,r.useState)([]),[A,P]=(0,r.useState)(!1);if((0,r.useEffect)(()=>{(async()=>{var e;const t=(null===f||void 0===f?void 0:f.document_upload)||(null===f||void 0===f||null===(e=f.meta)||void 0===e?void 0:e.document_upload);if(t)if("number"===typeof t||"string"===typeof t&&!isNaN(t)){const e=parseInt(t);j(!0);try{const t=localStorage.getItem("jwt_token"),n="undefined"!==typeof window&&window.REACT_APP_API_URL||"https://echovault.space/wp-json",r=await fetch("".concat(n,"/wp/v2/media/").concat(e),{headers:{Authorization:"Bearer ".concat(t)},mode:"cors"});if(r.ok){const e=await r.json();y(e)}else console.error("Failed to fetch media details:",r.status)}catch(n){console.error("Error fetching media details:",n)}finally{j(!1)}}else"object"===typeof t&&t.id?y(t):"object"===typeof t&&t.name&&(console.error("Document upload is a File object, not a media ID"),y(null))})()},[null===f||void 0===f?void 0:f.document_upload,null===f||void 0===f||null===(t=f.meta)||void 0===t?void 0:t.document_upload]),(0,r.useEffect)(()=>{(async()=>{try{var e,t;P(!0);const r=(null===f||void 0===f?void 0:f.active_loan)||(null===f||void 0===f||null===(e=f.meta)||void 0===e?void 0:e.active_loan)||(null===f||void 0===f||null===(t=f.fields)||void 0===t?void 0:t.active_loan)||[];let a=[];if(Array.isArray(r))a=r.map(e=>"object"===typeof e&&null!==e&&void 0!==e&&e.ID?String(e.ID):String(e)).filter(Boolean);else if("string"===typeof r)try{const e=JSON.parse(r);Array.isArray(e)&&(a=e.map(String))}catch(n){a=r.split(",").map(e=>e.trim()).filter(Boolean)}else r&&(a=[String(r)]);if(!a.length)return void E([]);const l=localStorage.getItem("jwt_token"),o=l?{Authorization:"Bearer ".concat(l)}:{},s=[],i="undefined"!==typeof window&&window.REACT_APP_API_URL||"https://echovault.space/wp-json";for(const e of a)try{const t=await fetch("".concat(i,"/wp/v2/loans/").concat(e,"?context=edit"),{headers:o,mode:"cors"});t.ok&&s.push(await t.json())}catch(n){}E(s)}finally{P(!1)}})()},[null===f||void 0===f?void 0:f.active_loan,null===f||void 0===f||null===(n=f.meta)||void 0===n?void 0:n.active_loan]),!f)return(0,Et.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:(0,Et.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8 max-w-md w-full",children:(0,Et.jsxs)("div",{className:"text-center",children:[(0,Et.jsx)("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,Et.jsx)("svg",{className:"w-8 h-8 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,Et.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Borrower Selected"}),(0,Et.jsx)("p",{className:"text-gray-500",children:"Please select a borrower to view their details."})]})})});const M=e=>e?new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"Not provided",B=Ft(f),F=(null===(a=f.title)||void 0===a?void 0:a.rendered)||"".concat(f.first_name||""," ").concat(f.last_name||"").trim()||"Unknown Borrower",T=F.split(" ").map(e=>e[0]).join("").toUpperCase();return(0,Et.jsxs)("div",{children:[(0,Et.jsx)("div",{className:"mb-8",children:(0,Et.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-6",children:[(0,Et.jsxs)("div",{className:"flex items-center",children:[(0,Et.jsx)("button",{onClick:x,className:"mr-4 p-2 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-100",children:(0,Et.jsx)("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),(0,Et.jsxs)("div",{className:"flex items-center",children:[(0,Et.jsx)("img",{src:Ot(f),alt:F,className:"w-16 h-16 rounded-full object-cover mr-4",onError:e=>{e.target.style.display="none",e.target.nextSibling.style.display="flex"}}),(0,Et.jsx)("div",{className:"w-16 h-16 bg-blue-600 rounded-full flex items-center justify-center text-white font-bold text-xl mr-4 hidden",children:T}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-1",children:F}),(0,Et.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Et.jsxs)("p",{className:"text-gray-600",children:["ID: ",f.id]}),(0,Et.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat("green"===B.color?"bg-green-100 text-green-800":"blue"===B.color?"bg-blue-100 text-blue-800":"red"===B.color?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"),children:B.status}),(0,Et.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[Math.round(B.percentage),"% Complete"]}),B.missingFields.length>0&&(0,Et.jsxs)("button",{onClick:()=>k(!0),className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800 hover:bg-yellow-200 transition-colors",children:[(0,Et.jsx)("svg",{className:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})}),B.missingFields.length," missing"]})]})]})]})]}),(0,Et.jsx)("div",{className:"flex gap-3",children:(0,Et.jsxs)("button",{onClick:()=>g(f),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-medium flex items-center space-x-2",children:[(0,Et.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),(0,Et.jsx)("span",{children:"Edit Profile"})]})})]})}),(0,Et.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 mb-6",children:(0,Et.jsx)("div",{className:"border-b border-gray-200",children:(0,Et.jsxs)("nav",{className:"flex space-x-8 px-6",children:[(0,Et.jsx)("button",{type:"button",onClick:()=>N("general"),className:"py-4 px-1 border-b-2 font-medium text-sm ".concat("general"===w?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"General Information"}),(0,Et.jsx)("button",{type:"button",onClick:()=>N("visa"),className:"py-4 px-1 border-b-2 font-medium text-sm ".concat("visa"===w?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Visa Status"}),(0,Et.jsx)("button",{type:"button",onClick:()=>N("document"),className:"py-4 px-1 border-b-2 font-medium text-sm ".concat("document"===w?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Personal Document"}),(0,Et.jsx)("button",{type:"button",onClick:()=>N("employment"),className:"py-4 px-1 border-b-2 font-medium text-sm ".concat("employment"===w?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Employment"}),(0,Et.jsx)("button",{type:"button",onClick:()=>N("family"),className:"py-4 px-1 border-b-2 font-medium text-sm ".concat("family"===w?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Family Information"}),(0,Et.jsx)("button",{type:"button",onClick:()=>N("bank"),className:"py-4 px-1 border-b-2 font-medium text-sm ".concat("bank"===w?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Bank Details"}),(0,Et.jsx)("button",{type:"button",onClick:()=>N("active_loans"),className:"py-4 px-1 border-b-2 font-medium text-sm ".concat("active_loans"===w?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Active Loans"})]})})}),(0,Et.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,Et.jsx)("div",{className:"lg:col-span-2",children:(0,Et.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:["general"===w&&(0,Et.jsx)("div",{className:"p-6",children:(0,Et.jsxs)("div",{className:"space-y-8",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsx)("div",{className:"px-6 py-4 border-b border-gray-200 bg-gray-50 rounded-t-xl mb-6",children:(0,Et.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[(0,Et.jsx)("svg",{className:"w-5 h-5 mr-2 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),"Personal Details"]})}),(0,Et.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"First Name"}),(0,Et.jsx)("div",{className:"p-3 bg-gray-50 rounded-lg border",children:(0,Et.jsx)("span",{className:"text-gray-900",children:f.first_name||(null===(l=f.title)||void 0===l||null===(o=l.rendered)||void 0===o?void 0:o.split(" ")[0])||"Not specified"})})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Last Name"}),(0,Et.jsx)("div",{className:"p-3 bg-gray-50 rounded-lg border",children:(0,Et.jsx)("span",{className:"text-gray-900",children:f.last_name||(null===(s=f.title)||void 0===s||null===(i=s.rendered)||void 0===i?void 0:i.split(" ").slice(1).join(" "))||"Not specified"})})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date of Birth"}),(0,Et.jsx)("div",{className:"p-3 bg-gray-50 rounded-lg border",children:(0,Et.jsx)("span",{className:"text-gray-900",children:f.date_of_birth?M(f.date_of_birth):"Not specified"})})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Registration Number"}),(0,Et.jsx)("div",{className:"p-3 bg-gray-50 rounded-lg border",children:(0,Et.jsx)("span",{className:"text-gray-900",children:f.registration_number||"Not specified"})})]})]})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("div",{className:"px-6 py-4 border-b border-gray-200 bg-gray-50 rounded-t-xl mb-6",children:(0,Et.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[(0,Et.jsx)("svg",{className:"w-5 h-5 mr-2 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),"Contact Information"]})}),(0,Et.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),(0,Et.jsx)("div",{className:"p-3 bg-gray-50 rounded-lg border",children:(0,Et.jsx)("span",{className:"text-gray-900",children:f.email_address||"Not specified"})})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mobile Number"}),(0,Et.jsx)("div",{className:"p-3 bg-gray-50 rounded-lg border",children:(0,Et.jsx)("span",{className:"text-gray-900",children:f.mobile_number||"Not specified"})})]})]}),(0,Et.jsxs)("div",{className:"mt-6",children:[(0,Et.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Home Address"}),(0,Et.jsx)("div",{className:"p-3 bg-gray-50 rounded-lg border",children:(0,Et.jsx)("span",{className:"text-gray-900 whitespace-pre-line",children:f.home_address||"Not specified"})})]})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("div",{className:"px-6 py-4 border-b border-gray-200 bg-gray-50 rounded-t-xl mb-6",children:(0,Et.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[(0,Et.jsx)("svg",{className:"w-5 h-5 mr-2 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})}),"Social Links"]})}),(0,Et.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Social Link 1"}),(0,Et.jsx)("div",{className:"p-3 bg-gray-50 rounded-lg border",children:(0,Et.jsx)("span",{className:"text-gray-900",children:f.social_link_1?(0,Et.jsx)("a",{href:f.social_link_1,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 underline",children:f.social_link_1}):"Not specified"})})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Social Link 2"}),(0,Et.jsx)("div",{className:"p-3 bg-gray-50 rounded-lg border",children:(0,Et.jsx)("span",{className:"text-gray-900",children:f.social_link_2?(0,Et.jsx)("a",{href:f.social_link_2,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 underline",children:f.social_link_2}):"Not specified"})})]})]})]})]})}),"visa"===w&&(0,Et.jsx)("div",{className:"p-6",children:(0,Et.jsx)("div",{className:"space-y-8",children:(0,Et.jsxs)("div",{children:[(0,Et.jsx)("div",{className:"px-6 py-4 border-b border-gray-200 bg-gray-50 rounded-t-xl mb-6",children:(0,Et.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[(0,Et.jsx)("svg",{className:"w-5 h-5 mr-2 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Visa Status"]})}),(0,Et.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Visa Type"}),(0,Et.jsx)("div",{className:"p-3 bg-gray-50 rounded-lg border",children:(0,Et.jsx)("span",{className:"text-gray-900",children:f.visa_type||"Not specified"})})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Visa Expiry Date"}),(0,Et.jsx)("div",{className:"p-3 bg-gray-50 rounded-lg border",children:(0,Et.jsx)("span",{className:"text-gray-900",children:f.visa_expiry_date?new Date(f.visa_expiry_date).toLocaleDateString():"Not specified"})})]})]})]})})}),"document"===w&&(0,Et.jsx)("div",{className:"p-6",children:(0,Et.jsx)("div",{className:"space-y-8",children:(0,Et.jsxs)("div",{children:[(0,Et.jsx)("div",{className:"px-6 py-4 border-b border-gray-200 bg-gray-50 rounded-t-xl mb-6",children:(0,Et.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[(0,Et.jsx)("svg",{className:"w-5 h-5 mr-2 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Personal Document"]})}),(0,Et.jsxs)("div",{className:"space-y-6",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Document Type"}),(0,Et.jsx)("div",{className:"p-3 bg-gray-50 rounded-lg border",children:(0,Et.jsx)("span",{className:"text-gray-900",children:Array.isArray(f.document_type)?f.document_type.join(", "):f.document_type||"Not specified"})})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Document Number"}),(0,Et.jsx)("div",{className:"p-3 bg-gray-50 rounded-lg border",children:(0,Et.jsx)("span",{className:"text-gray-900",children:f.document_number||(null===(c=f.meta)||void 0===c?void 0:c.document_number)||"Not specified"})})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Document Upload"}),v?(0,Et.jsxs)("div",{className:"flex items-center p-4 bg-blue-50 rounded-lg border border-blue-200",children:[(0,Et.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-2 border-blue-200 border-t-blue-600 mr-3"}),(0,Et.jsx)("p",{className:"text-sm text-blue-700 font-medium",children:"Loading document details..."})]}):(f.document_upload||null!==(d=f.meta)&&void 0!==d&&d.document_upload)&&!1!==f.document_upload&&""!==f.document_upload?(0,Et.jsxs)("div",{className:"flex items-center p-4 bg-green-50 rounded-lg border border-green-200",children:[(0,Et.jsx)("div",{className:"p-2 bg-green-100 rounded-lg mr-4",children:(0,Et.jsx)("svg",{className:"h-6 w-6 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),(0,Et.jsx)("div",{children:"object"===typeof f.document_upload&&f.document_upload.name?(0,Et.jsxs)("div",{children:[(0,Et.jsx)("p",{className:"text-sm font-medium text-red-700",children:"Document upload error"}),(0,Et.jsxs)("p",{className:"text-xs text-gray-500",children:["Document was uploaded but not properly saved. File: ",f.document_upload.name]}),(0,Et.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Please try uploading the document again."})]}):(0,Et.jsxs)("div",{children:[(0,Et.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsx)("p",{className:"text-sm font-medium text-gray-900",children:(null===b||void 0===b||null===(u=b.title)||void 0===u?void 0:u.rendered)||(null===b||void 0===b?void 0:b.post_title)||"Document uploaded"}),(0,Et.jsx)("p",{className:"text-xs text-gray-500",children:(null===b||void 0===b?void 0:b.mime_type)||(null===b||void 0===b?void 0:b.post_mime_type)||"File uploaded to media library"})]}),(0,Et.jsx)("button",{type:"button",onClick:e=>{e.preventDefault(),e.stopPropagation(),C(!0)},className:"ml-4 p-2 bg-blue-100 text-blue-600 rounded-lg hover:bg-blue-200 transition-colors",title:"View Document",children:(0,Et.jsxs)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]}),(null===b||void 0===b?void 0:b.source_url)&&(0,Et.jsxs)("div",{className:"mt-2 flex space-x-2",children:[(0,Et.jsxs)("a",{href:b.source_url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center text-xs text-blue-600 hover:text-blue-800 underline font-medium",children:[(0,Et.jsx)("svg",{className:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})}),"Open in New Tab"]}),(0,Et.jsxs)("a",{href:b.source_url,download:!0,className:"inline-flex items-center text-xs text-green-600 hover:text-green-800 underline font-medium",children:[(0,Et.jsx)("svg",{className:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Download"]})]})]})})]}):(0,Et.jsxs)("div",{className:"flex items-center p-4 bg-gray-50 rounded-lg border border-gray-200",children:[(0,Et.jsx)("div",{className:"p-2 bg-gray-100 rounded-lg mr-4",children:(0,Et.jsx)("svg",{className:"h-6 w-6 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),(0,Et.jsx)("p",{className:"text-sm text-gray-500 font-medium",children:"No document uploaded"})]})]})]})]})})}),"employment"===w&&(0,Et.jsx)("div",{className:"p-6",children:(0,Et.jsxs)("div",{className:"space-y-8",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsx)("div",{className:"px-6 py-4 border-b border-gray-200 bg-gray-50 rounded-t-xl mb-6",children:(0,Et.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[(0,Et.jsx)("svg",{className:"w-5 h-5 mr-2 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2-2v2m8 0V6a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V8a2 2 0 012-2V6"})}),"Employment Status"]})}),(0,Et.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Employment Status"}),(0,Et.jsx)("div",{className:"p-3 bg-gray-50 rounded-lg border",children:(0,Et.jsx)("span",{className:"text-gray-900",children:f.employment_status||"Not specified"})})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Work Rights"}),(0,Et.jsx)("div",{className:"p-3 bg-gray-50 rounded-lg border",children:(0,Et.jsx)("span",{className:"text-gray-900",children:f.work_rights||"Not specified"})})]})]})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("div",{className:"px-6 py-4 border-b border-gray-200 bg-gray-50 rounded-t-xl mb-6",children:(0,Et.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[(0,Et.jsx)("svg",{className:"w-5 h-5 mr-2 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),"Job Details"]})}),(0,Et.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Employer Name"}),(0,Et.jsx)("div",{className:"p-3 bg-gray-50 rounded-lg border",children:(0,Et.jsx)("span",{className:"text-gray-900",children:f.employer_name||"Not specified"})})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Job Title"}),(0,Et.jsx)("div",{className:"p-3 bg-gray-50 rounded-lg border",children:(0,Et.jsx)("span",{className:"text-gray-900",children:f.job_title||"Not specified"})})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Monthly Income (AUD)"}),(0,Et.jsx)("div",{className:"p-3 bg-gray-50 rounded-lg border",children:(0,Et.jsx)("span",{className:"text-gray-900",children:f.monthly_income_aud?"$".concat(f.monthly_income_aud):"Not specified"})})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Employment Start Date"}),(0,Et.jsx)("div",{className:"p-3 bg-gray-50 rounded-lg border",children:(0,Et.jsx)("span",{className:"text-gray-900",children:f.employment_start_date?M(f.employment_start_date):"Not specified"})})]})]})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("div",{className:"px-6 py-4 border-b border-gray-200 bg-gray-50 rounded-t-xl mb-6",children:(0,Et.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[(0,Et.jsx)("svg",{className:"w-5 h-5 mr-2 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),"Employer Contact"]})}),(0,Et.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Employer Phone"}),(0,Et.jsx)("div",{className:"p-3 bg-gray-50 rounded-lg border",children:(0,Et.jsx)("span",{className:"text-gray-900",children:f.employer_phone||"Not specified"})})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Employer Email"}),(0,Et.jsx)("div",{className:"p-3 bg-gray-50 rounded-lg border",children:(0,Et.jsx)("span",{className:"text-gray-900",children:f.employer_email?(0,Et.jsx)("a",{href:"mailto:".concat(f.employer_email),className:"text-blue-600 hover:text-blue-800 underline",children:f.employer_email}):"Not specified"})})]})]}),(0,Et.jsxs)("div",{className:"mt-6",children:[(0,Et.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Employer Address"}),(0,Et.jsx)("div",{className:"p-3 bg-gray-50 rounded-lg border",children:(0,Et.jsx)("span",{className:"text-gray-900 whitespace-pre-line",children:f.employer_address||"Not specified"})})]})]})]})}),"family"===w&&(0,Et.jsx)("div",{className:"p-6",children:(0,Et.jsxs)("div",{className:"space-y-8",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsx)("div",{className:"px-6 py-4 border-b border-gray-200 bg-gray-50 rounded-t-xl mb-6",children:(0,Et.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[(0,Et.jsx)("svg",{className:"w-5 h-5 mr-2 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}),"Family Status"]})}),(0,Et.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Marital Status"}),(0,Et.jsx)("div",{className:"p-3 bg-gray-50 rounded-lg border",children:(0,Et.jsx)("span",{className:"text-gray-900",children:f.marital_status||"Not specified"})})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Family Relationship"}),(0,Et.jsx)("div",{className:"p-3 bg-gray-50 rounded-lg border",children:(0,Et.jsx)("span",{className:"text-gray-900",children:f.family_relationship||"Not specified"})})]})]})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("div",{className:"px-6 py-4 border-b border-gray-200 bg-gray-50 rounded-t-xl mb-6",children:(0,Et.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[(0,Et.jsx)("svg",{className:"w-5 h-5 mr-2 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),"Family Member Details"]})}),(0,Et.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Family Member Full Name"}),(0,Et.jsx)("div",{className:"p-3 bg-gray-50 rounded-lg border",children:(0,Et.jsx)("span",{className:"text-gray-900",children:f.family_member_full_name||"Not specified"})})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Family Member Phone"}),(0,Et.jsx)("div",{className:"p-3 bg-gray-50 rounded-lg border",children:(0,Et.jsx)("span",{className:"text-gray-900",children:f.family_member_phone||"Not specified"})})]})]}),(0,Et.jsxs)("div",{className:"mt-6",children:[(0,Et.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Family Member Email"}),(0,Et.jsx)("div",{className:"p-3 bg-gray-50 rounded-lg border",children:(0,Et.jsx)("span",{className:"text-gray-900",children:f.family_member_email?(0,Et.jsx)("a",{href:"mailto:".concat(f.family_member_email),className:"text-blue-600 hover:text-blue-800 underline",children:f.family_member_email}):"Not specified"})})]})]})]})}),"bank"===w&&(0,Et.jsx)("div",{className:"p-6",children:(0,Et.jsx)("div",{className:"space-y-8",children:(0,Et.jsxs)("div",{children:[(0,Et.jsx)("div",{className:"px-6 py-4 border-b border-gray-200 bg-gray-50 rounded-t-xl mb-6",children:(0,Et.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[(0,Et.jsx)("svg",{className:"w-5 h-5 mr-2 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Account Details"]})}),(0,Et.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bank Name"}),(0,Et.jsx)("div",{className:"p-3 bg-gray-50 rounded-lg border",children:(0,Et.jsx)("span",{className:"text-gray-900",children:f.bank_name||"Not specified"})})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Account Name"}),(0,Et.jsx)("div",{className:"p-3 bg-gray-50 rounded-lg border",children:(0,Et.jsx)("span",{className:"text-gray-900",children:f.account_name||"Not specified"})})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"BSB Number"}),(0,Et.jsx)("div",{className:"p-3 bg-gray-50 rounded-lg border",children:(0,Et.jsx)("span",{className:"text-gray-900",children:f.bsb&&String(f.bsb).trim()?f.bsb:f.bsb_number&&String(f.bsb_number).trim()?f.bsb_number:"Not specified"})})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Account Number"}),(0,Et.jsx)("div",{className:"p-3 bg-gray-50 rounded-lg border",children:(0,Et.jsx)("span",{className:"text-gray-900",children:f.account_number&&String(f.account_number).trim()?f.account_number:"Not specified"})})]})]})]})})}),"active_loans"===w&&(0,Et.jsx)("div",{className:"p-6",children:(0,Et.jsxs)("div",{className:"space-y-4",children:[(0,Et.jsx)("div",{className:"px-6 py-4 border-b border-gray-200 bg-gray-50 rounded-t-xl mb-4",children:(0,Et.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[(0,Et.jsx)("svg",{className:"w-5 h-5 mr-2 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Active Loans"]})}),A?(0,Et.jsx)("div",{className:"text-sm text-gray-600",children:"Loading loans\u2026"}):L&&L.length>0?(0,Et.jsx)("div",{className:"overflow-x-auto border rounded-md",children:(0,Et.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 text-sm",children:[(0,Et.jsx)("thead",{className:"bg-gray-50",children:(0,Et.jsxs)("tr",{children:[(0,Et.jsx)("th",{className:"px-3 py-2 text-left font-medium text-gray-700",children:"Loan ID"}),(0,Et.jsx)("th",{className:"px-3 py-2 text-left font-medium text-gray-700",children:"Product"}),(0,Et.jsx)("th",{className:"px-3 py-2 text-right font-medium text-gray-700",children:"Amount"}),(0,Et.jsx)("th",{className:"px-3 py-2 text-left font-medium text-gray-700",children:"Status"}),(0,Et.jsx)("th",{className:"px-3 py-2 text-left font-medium text-gray-700",children:"Start"}),(0,Et.jsx)("th",{className:"px-3 py-2 text-left font-medium text-gray-700",children:"Action"})]})}),(0,Et.jsx)("tbody",{className:"divide-y divide-gray-100",children:L.map(e=>{var t,n,r,a,l,o;return(0,Et.jsxs)("tr",{children:[(0,Et.jsx)("td",{className:"px-3 py-2 font-mono",children:e.loan_id||(null===(t=e.meta)||void 0===t?void 0:t.loan_id)||(null===(n=e.title)||void 0===n?void 0:n.rendered)||"#".concat(e.id)}),(0,Et.jsx)("td",{className:"px-3 py-2",children:e.loan_product||(null===(r=e.meta)||void 0===r?void 0:r.loan_product_name)||"-"}),(0,Et.jsx)("td",{className:"px-3 py-2 text-right",children:e.loan_amount||(null===(a=e.meta)||void 0===a?void 0:a.loan_amount)||"-"}),(0,Et.jsx)("td",{className:"px-3 py-2",children:e.loan_status||(null===(l=e.meta)||void 0===l?void 0:l.loan_status)||e.status||"-"}),(0,Et.jsx)("td",{className:"px-3 py-2",children:e.start_date||(null===(o=e.meta)||void 0===o?void 0:o.start_date)||"-"}),(0,Et.jsx)("td",{className:"px-3 py-2",children:(0,Et.jsx)("button",{type:"button",onClick:()=>{const t="".concat(window.location.origin,"?view=loan-detail&loanId=").concat(e.id);window.open(t,"_blank","noopener")},className:"text-blue-600 hover:text-blue-900 p-1 rounded hover:bg-blue-50",children:"View Details"})})]},e.id)})})]})}):(0,Et.jsx)("div",{className:"text-sm text-gray-600",children:"No related active loans."})]})})]})}),(0,Et.jsx)("div",{className:"lg:col-span-1",children:(0,Et.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 sticky top-8",children:[(0,Et.jsx)("div",{className:"px-6 py-4 border-b border-gray-200 bg-gray-50 rounded-t-xl",children:(0,Et.jsxs)("h2",{className:"text-xl font-semibold text-gray-900 flex items-center",children:[(0,Et.jsx)("svg",{className:"w-5 h-5 mr-2 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Additional Information"]})}),(0,Et.jsx)("div",{className:"px-6 py-6",children:(0,Et.jsxs)("div",{className:"grid grid-cols-1 gap-6",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Verification Status"}),(0,Et.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Et.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat("green"===B.color?"bg-green-100 text-green-800":"blue"===B.color?"bg-blue-100 text-blue-800":"red"===B.color?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"),children:B.status}),(0,Et.jsxs)("span",{className:"text-xs text-gray-500",children:[Math.round(B.percentage),"%"]}),B.missingFields.length>0&&(0,Et.jsxs)("button",{onClick:()=>k(!0),className:"text-xs text-yellow-600 hover:text-yellow-800 underline",children:["View ",B.missingFields.length," missing fields"]})]})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Profile Created"}),(0,Et.jsx)("p",{className:"text-gray-900 font-medium",children:M(f.date)})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Last Modified"}),(0,Et.jsx)("p",{className:"text-gray-900 font-medium",children:M(f.modified)})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),(0,Et.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:f.status||"Active"})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Borrower ID"}),(0,Et.jsx)("p",{className:"text-gray-900 font-medium",children:f.borrower_id||(null===(m=f.meta)||void 0===m?void 0:m.borrower_id)||"EV".concat(f.id.toString().padStart(7,"0"))})]})]})})]})})]}),(0,Et.jsx)(Tt,{isOpen:_,onClose:()=>k(!1),missingFields:B.missingFields,verificationStatus:B}),(0,Et.jsx)(Wt,{isOpen:S,onClose:()=>C(!1),documentData:b||(null!==f&&void 0!==f&&f.document_upload?{ID:"number"===typeof f.document_upload||"string"===typeof f.document_upload?f.document_upload:(null===(p=f.document_upload)||void 0===p?void 0:p.ID)||(null===(h=f.document_upload)||void 0===h?void 0:h.id)||f.document_upload}:null)})]})},Ht=e=>{let{isOpen:t,onClose:n,onConfirm:r,title:a,message:l,confirmText:o="Confirm",cancelText:s="Cancel",type:i="warning"}=e;if(!t)return null;const{icon:c,bgColor:d,iconBg:u,buttonColor:m}=(()=>{switch(i){case"success":return{icon:(0,Et.jsx)("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),bgColor:"bg-green-50",borderColor:"border-green-200",iconBg:"bg-green-100",buttonColor:"bg-green-600 hover:bg-green-700 focus:ring-green-500"};case"error":return{icon:(0,Et.jsx)("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})}),bgColor:"bg-red-50",borderColor:"border-red-200",iconBg:"bg-red-100",buttonColor:"bg-red-600 hover:bg-red-700 focus:ring-red-500"};case"info":return{icon:(0,Et.jsx)("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),bgColor:"bg-blue-50",borderColor:"border-blue-200",iconBg:"bg-blue-100",buttonColor:"bg-blue-600 hover:bg-blue-700 focus:ring-blue-500"};default:return{icon:(0,Et.jsx)("svg",{className:"w-6 h-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})}),bgColor:"bg-yellow-50",borderColor:"border-yellow-200",iconBg:"bg-yellow-100",buttonColor:"bg-yellow-600 hover:bg-yellow-700 focus:ring-yellow-500"}}})();return(0,Et.jsx)("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:(0,Et.jsxs)("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[(0,Et.jsx)("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:n}),(0,Et.jsxs)("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:[(0,Et.jsx)("div",{className:"".concat(d," px-4 pt-5 pb-4 sm:p-6 sm:pb-4"),children:(0,Et.jsxs)("div",{className:"sm:flex sm:items-start",children:[(0,Et.jsx)("div",{className:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full ".concat(u," sm:mx-0 sm:h-10 sm:w-10"),children:c}),(0,Et.jsxs)("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left",children:[(0,Et.jsx)("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:a}),(0,Et.jsx)("div",{className:"mt-2",children:(0,Et.jsx)("p",{className:"text-sm text-gray-500",children:l})})]})]})}),(0,Et.jsxs)("div",{className:"".concat(d," px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"),children:[(0,Et.jsx)("button",{type:"button",className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 text-base font-medium text-white ".concat(m," focus:outline-none focus:ring-2 focus:ring-offset-2 sm:ml-3 sm:w-auto sm:text-sm"),onClick:r,children:o}),(0,Et.jsx)("button",{type:"button",className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm",onClick:n,children:s})]})]})]})})},Ut=e=>{let{isVisible:t,onClose:n,message:a,type:l="success",autoClose:o=!0,duration:s=5e3}=e;if((0,r.useEffect)(()=>{if(t&&o){const e=setTimeout(()=>{n()},s);return()=>clearTimeout(e)}},[t,o,s,n]),!t)return null;const{icon:i,bgColor:c,borderColor:d,textColor:u}=(()=>{switch(l){case"success":return{icon:(0,Et.jsx)("svg",{className:"w-5 h-5 text-green-400",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Et.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),bgColor:"bg-green-50",borderColor:"border-green-200",textColor:"text-green-800"};case"error":return{icon:(0,Et.jsx)("svg",{className:"w-5 h-5 text-red-400",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Et.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),bgColor:"bg-red-50",borderColor:"border-red-200",textColor:"text-red-800"};case"warning":return{icon:(0,Et.jsx)("svg",{className:"w-5 h-5 text-yellow-400",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Et.jsx)("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),bgColor:"bg-yellow-50",borderColor:"border-yellow-200",textColor:"text-yellow-800"};default:return{icon:(0,Et.jsx)("svg",{className:"w-5 h-5 text-blue-400",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Et.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),bgColor:"bg-blue-50",borderColor:"border-blue-200",textColor:"text-blue-800"}}})();return(0,Et.jsx)("div",{className:"fixed top-4 right-4 z-50 max-w-sm w-full",children:(0,Et.jsx)("div",{className:"".concat(c," border ").concat(d," rounded-md p-4 shadow-lg"),children:(0,Et.jsxs)("div",{className:"flex",children:[(0,Et.jsx)("div",{className:"flex-shrink-0",children:i}),(0,Et.jsx)("div",{className:"ml-3",children:(0,Et.jsx)("p",{className:"text-sm font-medium ".concat(u),children:a})}),(0,Et.jsx)("div",{className:"ml-auto pl-3",children:(0,Et.jsx)("div",{className:"-mx-1.5 -my-1.5",children:(0,Et.jsxs)("button",{type:"button",className:"inline-flex ".concat(c," rounded-md p-1.5 ").concat(u," hover:bg-opacity-75 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-green-50 focus:ring-green-600"),onClick:n,children:[(0,Et.jsx)("span",{className:"sr-only",children:"Dismiss"}),(0,Et.jsx)("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Et.jsx)("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})]})})})]})})})},qt=e=>{var t,n,a;let{userEmail:l,onProfileComplete:o,onCancel:s,editingBorrower:i,isEditing:c}=e;const[d,m]=(0,r.useState)({first_name:"",last_name:"",email_address:"",date_of_birth:"",mobile_number:"",registration_number:"",home_address:"",document_type:"",document_number:"",document_upload:null,social_link_1:"",social_link_2:"",employment_status:"",work_rights:"",employer_name:"",job_title:"",monthly_income_aud:"",employment_start_date:"",employer_phone:"",employer_email:"",employer_address:"",marital_status:"",family_relationship:"",family_member_full_name:"",family_member_phone:"",family_member_email:"",bank_name:"",account_name:"",bsb_number:"",account_number:"",visa_type:"",visa_expiry_date:"",borrower_id:""}),[p,h]=(0,r.useState)(!1),[f,x]=(0,r.useState)(""),[g,b]=(0,r.useState)(""),[y,v]=(0,r.useState)(!1),[j,w]=(0,r.useState)(null),[N,_]=(0,r.useState)(null),[k,S]=(0,r.useState)("general"),[C,L]=(0,r.useState)(!1),[E,A]=(0,r.useState)(!1),[P,M]=(0,r.useState)(""),[B,F]=(0,r.useState)(!1),[T,D]=(0,r.useState)(!1),[z,R]=(0,r.useState)(0),[O,I]=(0,r.useState)(!1),[W,V]=(0,r.useState)(!1);(0,r.useEffect)(()=>{c&&i&&(m({first_name:i.first_name||"",last_name:i.last_name||"",email_address:i.email_address||"",date_of_birth:i.date_of_birth||"",mobile_number:i.mobile_number||"",registration_number:i.registration_number||"",home_address:i.home_address||"",document_type:i.document_type||"",document_number:i.document_number||"",document_upload:null,social_link_1:i.social_link_1||"",social_link_2:i.social_link_2||"",employment_status:i.employment_status||"",work_rights:i.work_rights||"",employer_name:i.employer_name||"",job_title:i.job_title||"",monthly_income_aud:i.monthly_income_aud||"",employment_start_date:i.employment_start_date||"",employer_phone:i.employer_phone||"",employer_email:i.employer_email||"",employer_address:i.employer_address||"",marital_status:i.marital_status||"",family_relationship:i.family_relationship||"",family_member_full_name:i.family_member_full_name||"",family_member_phone:i.family_member_phone||"",family_member_email:i.family_member_email||"",bank_name:i.bank_name||"",account_name:i.account_name||"",bsb_number:i.bsb_number||"",account_number:i.account_number||"",visa_type:i.visa_type||"",visa_expiry_date:i.visa_expiry_date||"",borrower_id:i.borrower_id||""}),i.document_upload&&(w(i.document_upload),"number"===typeof i.document_upload?U(i.document_upload):"object"===typeof i.document_upload&&_(i.document_upload)))},[c,i]);const H="undefined"!==typeof window&&window.REACT_APP_API_URL||"https://echovault.space/wp-json",U=async e=>{try{const t=localStorage.getItem("jwt_token"),n=await fetch("".concat(H,"/wp/v2/media/").concat(e),{headers:{Authorization:"Bearer ".concat(t)},mode:"cors"});if(n.ok){const e=await n.json();_(e)}}catch(t){console.error("Error fetching media details:",t)}},q=async e=>{const{name:t,value:n,type:r,files:a}=e.target;if("file"===r&&"document_upload"===t&&a[0]){const e=a[0];m(n=>u(u({},n),{},{[t]:e}));const n={name:e.name,type:e.type,size:e.size,isTemporary:!0,file:e};m(e=>u(u({},e),{},{tempUploadedFile:n})),V(!0),b("File selected! Click Update to upload and save to borrower profile."),setTimeout(()=>b(""),3e3),F(!0)}else m(e=>u(u({},e),{},{[t]:"file"===r?a[0]:n})),F(!0)};return(0,Et.jsxs)(Et.Fragment,{children:[(0,Et.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[(0,Et.jsx)("div",{className:"border-b border-gray-200",children:(0,Et.jsxs)("nav",{className:"flex space-x-8 px-6",children:[(0,Et.jsx)("button",{type:"button",onClick:()=>S("general"),className:"py-4 px-1 border-b-2 font-medium text-sm ".concat("general"===k?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"General Information"}),(0,Et.jsx)("button",{type:"button",onClick:()=>S("visa"),className:"py-4 px-1 border-b-2 font-medium text-sm ".concat("visa"===k?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Visa Status"}),(0,Et.jsx)("button",{type:"button",onClick:()=>S("document"),className:"py-4 px-1 border-b-2 font-medium text-sm ".concat("document"===k?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Personal Document"}),(0,Et.jsx)("button",{type:"button",onClick:()=>S("employment"),className:"py-4 px-1 border-b-2 font-medium text-sm ".concat("employment"===k?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Employment"}),(0,Et.jsx)("button",{type:"button",onClick:()=>S("family"),className:"py-4 px-1 border-b-2 font-medium text-sm ".concat("family"===k?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Family Information"}),(0,Et.jsx)("button",{type:"button",onClick:()=>S("bank"),className:"py-4 px-1 border-b-2 font-medium text-sm ".concat("bank"===k?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Bank Details"})]})}),(0,Et.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),h(!0),x(""),b(""),!d.first_name.trim()||!d.last_name.trim()||!d.email_address.trim())return x("Please fill in First Name, Last Name, and Email Address."),void h(!1);if(y)return x("Please wait while we verify the email address."),void h(!1);if(!c){const e=localStorage.getItem("jwt_token");if(e)try{const t=await fetch("".concat(H,"/wp/v2/borrower-profile"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},mode:"cors"});if(t.ok){const e=await t.json();if(e.some(e=>e.email_address&&e.email_address.toLowerCase()===d.email_address.toLowerCase()))return x("This email address is already registered. Please use a different email."),void h(!1)}}catch(s){console.error("Error checking email during submission:",s)}}if(d.document_upload&&!d.document_type)return x("Please select a document type when uploading a document."),void h(!1);try{const e=localStorage.getItem("jwt_token");if(!e)return x("Authentication token not found. Please login again."),void h(!1);let p=null===i||void 0===i?void 0:i.author;if(!c){const t=async(t,n,r)=>{const a=t.split("@")[0].toLowerCase().replace(/[^a-z0-9]/g,"").substring(0,20);let l=a,o=1;for(;;)try{const t=await fetch("".concat(H,"/wp/v2/users?search=").concat(l),{headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"},mode:"cors"});if(t.ok){const e=await t.json();if(!e.some(e=>e.slug===l))break}if(l="".concat(a).concat(o),o++,o>999){l="".concat(a).concat(Date.now().toString().slice(-4));break}}catch(f){console.error("Error checking username:",f),l="".concat(a).concat(Date.now().toString().slice(-4));break}return l},n={username:await t(d.email_address,d.first_name,d.last_name),email:d.email_address,password:"TempPassword123!",first_name:d.first_name,last_name:d.last_name,roles:["editor"]},r=await fetch("".concat(H,"/wp/v2/users"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify(n),mode:"cors"});if(!r.ok){const e=await r.json();return x("Failed to create user account: ".concat(e.message||"Unknown error")),void h(!1)}p=(await r.json()).id}let g=null;if(d.tempUploadedFile&&d.tempUploadedFile.isTemporary)try{I(!0),R(0);const t=new FormData;t.append("file",d.tempUploadedFile.file),t.append("title","Document for ".concat(d.first_name||"Borrower"," ").concat(d.last_name||"")),t.append("description","Document upload for borrower profile");const n=setInterval(()=>{R(e=>Math.min(e+10,90))},200),r=await fetch("".concat(H,"/wp/v2/media"),{method:"POST",headers:{Authorization:"Bearer ".concat(e)},body:t,mode:"cors"});if(clearInterval(n),R(100),!r.ok){const e=await r.json();throw new Error(e.message||"Failed to upload document")}{const e=await r.json();g=e.id,_(e),m(t=>u(u({},t),{},{tempUploadedFile:null,document_upload:e.id})),b("Document uploaded and saved successfully!")}}catch(s){return console.error("Error uploading document:",s),x("Failed to upload document: ".concat(s.message)),I(!1),void R(0)}finally{I(!1),R(0)}else d.newUploadedMedia?(g=d.newUploadedMedia.id,_(d.newUploadedMedia)):d.document_upload&&"number"===typeof d.document_upload?g=d.document_upload:c&&j&&(g=j);let y=d.borrower_id;if(c||y)c&&!y&&(y="EV".concat(i.id.toString().padStart(7,"0")));else try{const t=await fetch("".concat(H,"/wp/v2/borrower-profile?per_page=100&orderby=id&order=desc"),{headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"},mode:"cors"});if(t.ok){const e=await t.json();let n=0;e.forEach(e=>{if(e.borrower_id&&e.borrower_id.startsWith("EV")){const t=parseInt(e.borrower_id.substring(2));!isNaN(t)&&t>n&&(n=t)}});y="EV".concat((n+1).toString().padStart(7,"0"))}else y="EV".concat(Date.now().toString().slice(-7))}catch(f){console.error("Error generating borrower ID:",f),y="EV".concat(Date.now().toString().slice(-7))}const v={title:"".concat(d.first_name," ").concat(d.last_name),status:"publish",author:p,first_name:d.first_name,last_name:d.last_name,email_address:d.email_address,borrower_id:y};v.meta={borrower_id:y};let w=null;if(c){if(i){var t,n,r;w=i.avatar||(null===(t=i.meta)||void 0===t?void 0:t.avatar)||(null===(n=i.fields)||void 0===n?void 0:n.avatar)||(Array.isArray(i.avatar)?i.avatar[0]:null)||(Array.isArray(null===(r=i.meta)||void 0===r?void 0:r.avatar)?i.meta.avatar[0]:null)}}else w=zt();w||(w=zt()),v.avatar=w,v.meta.avatar=w,g&&(v.meta.document_upload=g);["date_of_birth","mobile_number","registration_number","home_address","social_link_1","social_link_2","employment_status","work_rights","employer_name","job_title","monthly_income_aud","employment_start_date","employer_phone","employer_email","employer_address","marital_status","family_relationship","family_member_full_name","family_member_phone","family_member_email","bank_name","account_name","bsb_number","account_number","visa_type","visa_expiry_date","document_type","document_number"].forEach(e=>{const t=d[e];null!==t&&void 0!==t&&(v[e]="monthly_income_aud"===e?""===t?"":parseFloat(t)||0:t)}),g&&(v.document_upload=g);const N=c?"".concat(H,"/wp/v2/borrower-profile/").concat(i.id):"".concat(H,"/wp/v2/borrower-profile"),k=c?"PUT":"POST",S=await fetch(N,{method:k,headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify(v),mode:"cors"}),C=await S.json();if(S.ok&&C.id){var a,l;const e=c?"Borrower profile updated successfully!":"Borrower profile created successfully! New user account created for ".concat(d.email_address,". A welcome email with password setup instructions has been sent.");M(e),A(!0),F(!1);const t=C.avatar||(null===(a=C.meta)||void 0===a?void 0:a.avatar)||(null===(l=C.fields)||void 0===l?void 0:l.avatar)||v.avatar,n=u(u({},d),{},{id:C.id,userId:p,avatar:t});localStorage.setItem("borrower_profile",JSON.stringify(n)),o&&o(n)}else{let e="";e=C.message?C.message:C.code?"Error: ".concat(C.code):400===S.status?"Invalid data provided. Please check your input and try again.":401===S.status?"Authentication failed. Please login again.":403===S.status?"You do not have permission to perform this action.":500===S.status?"Server error. Please try again later.":c?"Failed to update borrower profile. Please try again.":"Failed to create borrower profile. Please try again.",console.error("API Error Details:",{status:S.status,statusText:S.statusText,data:C,url:N,method:k}),x(e)}}catch(s){console.error("Network/Fetch Error:",s),s.message.includes("CORS")||s.message.includes("Access-Control-Allow-Origin")?x("CORS error: Please check if the WordPress backend allows requests from this domain."):s.message.includes("Failed to fetch")?x("Network error: Unable to connect to the server. Please check your internet connection and try again."):"TypeError"===s.name&&s.message.includes("fetch")?x("Connection error: Unable to reach the server. Please check your internet connection."):x("Unexpected error: ".concat(s.message))}finally{h(!1)}},className:"p-6",children:["general"===k&&(0,Et.jsxs)("div",{className:"mb-8",children:[(0,Et.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsxs)("label",{htmlFor:"first_name",className:"block text-sm font-medium text-gray-700 mb-2",children:["First Name ",(0,Et.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Et.jsx)("input",{type:"text",id:"first_name",name:"first_name",value:d.first_name,onChange:q,required:!0,disabled:p,placeholder:"Enter first name",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-50"})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsxs)("label",{htmlFor:"last_name",className:"block text-sm font-medium text-gray-700 mb-2",children:["Last Name ",(0,Et.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Et.jsx)("input",{type:"text",id:"last_name",name:"last_name",value:d.last_name,onChange:q,required:!0,disabled:p,placeholder:"Enter last name",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-50"})]})]}),(0,Et.jsxs)("div",{className:"mt-6",children:[(0,Et.jsxs)("label",{htmlFor:"email_address",className:"block text-sm font-medium text-gray-700 mb-2",children:["Email Address ",(0,Et.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Et.jsx)("input",{type:"email",id:"email_address",name:"email_address",value:d.email_address,onChange:q,required:!0,disabled:p||c,placeholder:"Enter borrower's email address",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-50"}),(0,Et.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:c?"Email address cannot be changed after registration as it's linked to the user account.":"Enter the borrower's email address."})]}),(0,Et.jsxs)("div",{className:"mt-6",children:[(0,Et.jsx)("label",{htmlFor:"date_of_birth",className:"block text-sm font-medium text-gray-700 mb-2",children:"Date of Birth"}),(0,Et.jsx)("input",{type:"date",id:"date_of_birth",name:"date_of_birth",value:d.date_of_birth,onChange:q,disabled:p,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-50"})]}),(0,Et.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-6",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{htmlFor:"mobile_number",className:"block text-sm font-medium text-gray-700 mb-2",children:"Mobile Number"}),(0,Et.jsx)("input",{type:"tel",id:"mobile_number",name:"mobile_number",value:d.mobile_number,onChange:q,disabled:p,placeholder:"Enter mobile number",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-50"})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{htmlFor:"registration_number",className:"block text-sm font-medium text-gray-700 mb-2",children:"Registration Number"}),(0,Et.jsx)("input",{type:"text",id:"registration_number",name:"registration_number",value:d.registration_number,onChange:q,disabled:p,placeholder:"Enter registration number",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-50"})]})]}),(0,Et.jsxs)("div",{className:"mt-6",children:[(0,Et.jsx)("label",{htmlFor:"home_address",className:"block text-sm font-medium text-gray-700 mb-2",children:"Home Address"}),(0,Et.jsx)("textarea",{id:"home_address",name:"home_address",value:d.home_address,onChange:q,disabled:p,placeholder:"Enter home address",rows:"3",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-50 resize-none"})]}),(0,Et.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-6",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{htmlFor:"social_link_1",className:"block text-sm font-medium text-gray-700 mb-2",children:"Social Link 1"}),(0,Et.jsx)("input",{type:"url",id:"social_link_1",name:"social_link_1",value:d.social_link_1,onChange:q,disabled:p,placeholder:"https://example.com",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-50"})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{htmlFor:"social_link_2",className:"block text-sm font-medium text-gray-700 mb-2",children:"Social Link 2"}),(0,Et.jsx)("input",{type:"url",id:"social_link_2",name:"social_link_2",value:d.social_link_2,onChange:q,disabled:p,placeholder:"https://example.com",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-50"})]})]})]}),"visa"===k&&(0,Et.jsx)("div",{className:"mb-8",children:(0,Et.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{htmlFor:"visa_type",className:"block text-sm font-medium text-gray-700 mb-2",children:"Visa Type"}),(0,Et.jsxs)("select",{id:"visa_type",name:"visa_type",value:d.visa_type,onChange:q,disabled:p,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-50",children:[(0,Et.jsx)("option",{value:"",children:"Select visa type"}),(0,Et.jsx)("option",{value:"Australian Citizen",children:"Australian Citizen"}),(0,Et.jsx)("option",{value:"Permanent Resident",children:"Permanent Resident"}),(0,Et.jsx)("option",{value:"Temporary Skill Shortage Visa (Subclass 482)",children:"Temporary Skill Shortage Visa (Subclass 482)"}),(0,Et.jsx)("option",{value:"Skilled Independent Visa (Subclass 189)",children:"Skilled Independent Visa (Subclass 189)"}),(0,Et.jsx)("option",{value:"Skilled Nominated Visa (Subclass 190)",children:"Skilled Nominated Visa (Subclass 190)"}),(0,Et.jsx)("option",{value:"Skilled Work Regional (Provisional) Visa (Subclass 491)",children:"Skilled Work Regional (Provisional) Visa (Subclass 491)"}),(0,Et.jsx)("option",{value:"Student Visa (Subclass 500)",children:"Student Visa (Subclass 500)"}),(0,Et.jsx)("option",{value:"Graduate Visa (Subclass 485)",children:"Graduate Visa (Subclass 485)"}),(0,Et.jsx)("option",{value:"Working Holiday Visa (Subclass 417)",children:"Working Holiday Visa (Subclass 417)"}),(0,Et.jsx)("option",{value:"Work and Holiday Visa (Subclass 462)",children:"Work and Holiday Visa (Subclass 462)"}),(0,Et.jsx)("option",{value:"Partner Visa (Subclass 820/801)",children:"Partner Visa (Subclass 820/801)"}),(0,Et.jsx)("option",{value:"Bridging Visa A",children:"Bridging Visa A"}),(0,Et.jsx)("option",{value:"Bridging Visa B",children:"Bridging Visa B"}),(0,Et.jsx)("option",{value:"Bridging Visa C",children:"Bridging Visa C"}),(0,Et.jsx)("option",{value:"Protection / Humanitarian Visa (Subclass 866)",children:"Protection / Humanitarian Visa (Subclass 866)"}),(0,Et.jsx)("option",{value:"Refugee Visa (Subclass 200)",children:"Refugee Visa (Subclass 200)"}),(0,Et.jsx)("option",{value:"Tourist Visa (Subclass 600)",children:"Tourist Visa (Subclass 600)"}),(0,Et.jsx)("option",{value:"Visitor Visa (Subclass 651)",children:"Visitor Visa (Subclass 651)"}),(0,Et.jsx)("option",{value:"Temporary Activity Visa (Subclass 408)",children:"Temporary Activity Visa (Subclass 408)"}),(0,Et.jsx)("option",{value:"Business Innovation and Investment Visa (Subclass 188/888)",children:"Business Innovation and Investment Visa (Subclass 188/888)"}),(0,Et.jsx)("option",{value:"Employer Nomination Scheme (Subclass 186)",children:"Employer Nomination Scheme (Subclass 186)"}),(0,Et.jsx)("option",{value:"Regional Sponsored Migration Scheme (Subclass 187)",children:"Regional Sponsored Migration Scheme (Subclass 187)"}),(0,Et.jsx)("option",{value:"Training Visa (Subclass 407)",children:"Training Visa (Subclass 407)"}),(0,Et.jsx)("option",{value:"Temporary Graduate Visa (Subclass 485)",children:"Temporary Graduate Visa (Subclass 485)"}),(0,Et.jsx)("option",{value:"Temporary Work (Short Stay Specialist) Visa (Subclass 400)",children:"Temporary Work (Short Stay Specialist) Visa (Subclass 400)"}),(0,Et.jsx)("option",{value:"Working Holiday Maker (WHM) Extension Visa",children:"Working Holiday Maker (WHM) Extension Visa"}),(0,Et.jsx)("option",{value:"Resident Return Visa (Subclass 155/157)",children:"Resident Return Visa (Subclass 155/157)"}),(0,Et.jsx)("option",{value:"Other",children:"Other"})]})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{htmlFor:"visa_expiry_date",className:"block text-sm font-medium text-gray-700 mb-2",children:"Visa Expiry Date"}),(0,Et.jsx)("input",{type:"date",id:"visa_expiry_date",name:"visa_expiry_date",value:d.visa_expiry_date,onChange:q,disabled:p,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-50"})]})]})}),"document"===k&&(0,Et.jsxs)("div",{className:"mb-8",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{htmlFor:"document_type",className:"block text-sm font-medium text-gray-700 mb-2",children:"Document Type"}),(0,Et.jsxs)("select",{id:"document_type",name:"document_type",value:d.document_type,onChange:q,disabled:p,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-50",children:[(0,Et.jsx)("option",{value:"",children:"Select document type"}),(0,Et.jsx)("option",{value:"Passport",children:"Passport"}),(0,Et.jsx)("option",{value:"National ID",children:"National ID"}),(0,Et.jsx)("option",{value:"Driver License (AUD)",children:"Driver License (AUD)"})]})]}),(0,Et.jsxs)("div",{className:"mt-6",children:[(0,Et.jsx)("label",{htmlFor:"document_number",className:"block text-sm font-medium text-gray-700 mb-2",children:"Document Number"}),(0,Et.jsx)("input",{type:"text",id:"document_number",name:"document_number",value:d.document_number,onChange:q,disabled:p,placeholder:"Enter document number",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-50"})]}),d.document_type&&(0,Et.jsxs)("div",{className:"mt-6",children:[(0,Et.jsx)("label",{htmlFor:"document_upload",className:"block text-sm font-medium text-gray-700 mb-2",children:"Document Upload"}),c&&j&&(0,Et.jsxs)("div",{className:"mb-4 p-4 bg-green-50 rounded-lg border border-green-200",children:[(0,Et.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Et.jsxs)("div",{className:"flex items-center",children:[(0,Et.jsx)("div",{className:"p-2 bg-green-100 rounded-lg mr-3",children:(0,Et.jsx)("svg",{className:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("p",{className:"text-sm font-medium text-gray-900 mb-1",children:"Current Document:"}),(0,Et.jsx)("p",{className:"text-sm text-gray-600",children:(null===N||void 0===N||null===(t=N.title)||void 0===t?void 0:t.rendered)||(null===N||void 0===N?void 0:N.post_title)||"Document uploaded (ID: ".concat(j,")")}),(0,Et.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:(null===N||void 0===N?void 0:N.mime_type)||(null===N||void 0===N?void 0:N.post_mime_type)||"File uploaded to media library"})]})]}),(0,Et.jsx)("button",{type:"button",onClick:e=>{e.preventDefault(),D(!0)},className:"p-2 bg-blue-100 text-blue-600 rounded-lg hover:bg-blue-200 transition-colors",title:"View Document",children:(0,Et.jsxs)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]}),(null===N||void 0===N?void 0:N.source_url)&&(0,Et.jsxs)("div",{className:"mt-2 flex space-x-2",children:[(0,Et.jsxs)("a",{href:N.source_url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center text-xs text-blue-600 hover:text-blue-800 underline font-medium",children:[(0,Et.jsx)("svg",{className:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})}),"Open in New Tab"]}),(0,Et.jsxs)("a",{href:N.source_url,download:!0,className:"inline-flex items-center text-xs text-green-600 hover:text-green-800 underline font-medium",children:[(0,Et.jsx)("svg",{className:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Download"]})]})]}),O&&(0,Et.jsxs)("div",{className:"mb-4 p-4 bg-blue-50 rounded-lg border border-blue-200",children:[(0,Et.jsxs)("div",{className:"flex items-center mb-2",children:[(0,Et.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-blue-200 border-t-blue-600 mr-2"}),(0,Et.jsx)("span",{className:"text-sm font-medium text-blue-700",children:"Uploading document..."})]}),(0,Et.jsx)("div",{className:"w-full bg-blue-200 rounded-full h-2",children:(0,Et.jsx)("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:"".concat(z,"%")}})}),(0,Et.jsxs)("p",{className:"text-xs text-blue-600 mt-1",children:[z,"% complete"]})]}),d.tempUploadedFile&&d.tempUploadedFile.isTemporary&&(0,Et.jsx)("div",{className:"mb-4 p-4 bg-green-50 rounded-lg border border-green-200",children:(0,Et.jsxs)("div",{className:"flex items-start justify-between",children:[(0,Et.jsxs)("div",{className:"flex items-start",children:[(0,Et.jsx)("svg",{className:"w-5 h-5 text-green-600 mr-2 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("span",{className:"text-sm font-medium text-green-700",children:"File selected! Click Update to upload and save."}),(0,Et.jsxs)("div",{className:"mt-1 text-xs text-gray-600",children:[(0,Et.jsxs)("p",{children:[(0,Et.jsx)("strong",{children:"Name:"})," ",d.tempUploadedFile.name]}),(0,Et.jsxs)("p",{children:[(0,Et.jsx)("strong",{children:"Type:"})," ",d.tempUploadedFile.type]}),(0,Et.jsxs)("p",{children:[(0,Et.jsx)("strong",{children:"Size:"})," ",(d.tempUploadedFile.size/1024).toFixed(1)," KB"]})]})]})]}),(0,Et.jsx)("button",{type:"button",onClick:()=>{m(e=>u(u({},e),{},{tempUploadedFile:null,document_upload:null})),b("")},className:"p-1 text-red-600 hover:text-red-800 transition-colors",title:"Remove Selected File",children:(0,Et.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),W&&N&&N.isTemporary&&(0,Et.jsx)("div",{className:"mb-4 p-4 bg-green-50 rounded-lg border border-green-200",children:(0,Et.jsxs)("div",{className:"flex items-start justify-between",children:[(0,Et.jsxs)("div",{className:"flex items-start",children:[(0,Et.jsx)("svg",{className:"w-5 h-5 text-green-600 mr-2 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("span",{className:"text-sm font-medium text-green-700",children:"File uploaded successfully! Click Update to save to borrower profile."}),(0,Et.jsxs)("div",{className:"mt-1 text-xs text-gray-600",children:[(0,Et.jsxs)("p",{children:[(0,Et.jsx)("strong",{children:"Name:"})," ",(null===(n=N.title)||void 0===n?void 0:n.rendered)||N.post_title||"Document"]}),(0,Et.jsxs)("p",{children:[(0,Et.jsx)("strong",{children:"Type:"})," ",N.mime_type||"Unknown"]}),(0,Et.jsxs)("p",{children:[(0,Et.jsx)("strong",{children:"Size:"})," ",null!==(a=N.media_details)&&void 0!==a&&a.filesize?"".concat((N.media_details.filesize/1024).toFixed(1)," KB"):"Unknown"]})]})]})]}),(0,Et.jsxs)("div",{className:"flex space-x-2",children:[(0,Et.jsx)("button",{type:"button",onClick:()=>D(!0),className:"p-1 text-blue-600 hover:text-blue-800 transition-colors",title:"View Document",children:(0,Et.jsxs)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),(0,Et.jsx)("button",{type:"button",onClick:()=>{m(e=>u(u({},e),{},{document_upload:null})),_(null),V(!1),b(""),x(""),F(!0)},className:"p-1 text-red-600 hover:text-red-800 transition-colors",title:"Delete Document",children:(0,Et.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})}),(0,Et.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-blue-400 transition-colors",children:[(0,Et.jsx)("input",{type:"file",id:"document_upload",name:"document_upload",onChange:q,disabled:p,accept:".pdf,.jpg,.jpeg,.png,.gif",className:"hidden"}),(0,Et.jsxs)("label",{htmlFor:"document_upload",className:"cursor-pointer",children:[(0,Et.jsx)("svg",{className:"w-12 h-12 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),(0,Et.jsxs)("p",{className:"text-sm text-gray-600 mb-2",children:[(0,Et.jsx)("span",{className:"font-medium text-blue-600 hover:text-blue-500",children:"Click to upload"})," or drag and drop"]}),(0,Et.jsx)("p",{className:"text-xs text-gray-500",children:c?"Leave empty to keep current document, or upload a new one to replace it":"PDF, JPG, PNG, DOC, DOCX (MAX. 5MB)"})]})]})]})]}),"employment"===k&&(0,Et.jsxs)("div",{className:"mb-8",children:[(0,Et.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{htmlFor:"employment_status",className:"block text-sm font-medium text-gray-700 mb-2",children:"Employment Status"}),(0,Et.jsxs)("select",{id:"employment_status",name:"employment_status",value:d.employment_status,onChange:q,disabled:p,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-50",children:[(0,Et.jsx)("option",{value:"",children:"Select employment status"}),(0,Et.jsx)("option",{value:"Employed (Full-Time)",children:"Employed (Full-Time)"}),(0,Et.jsx)("option",{value:"Employed (Part-Time)",children:"Employed (Part-Time)"}),(0,Et.jsx)("option",{value:"Self-Employed",children:"Self-Employed"}),(0,Et.jsx)("option",{value:"Unemployed",children:"Unemployed"}),(0,Et.jsx)("option",{value:"Student",children:"Student"}),(0,Et.jsx)("option",{value:"Retired",children:"Retired"}),(0,Et.jsx)("option",{value:"Contract / Temporary",children:"Contract / Temporary"}),(0,Et.jsx)("option",{value:"Casual / On-Call",children:"Casual / On-Call"}),(0,Et.jsx)("option",{value:"Homemaker / Carer",children:"Homemaker / Carer"}),(0,Et.jsx)("option",{value:"Other",children:"Other"})]})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{htmlFor:"work_rights",className:"block text-sm font-medium text-gray-700 mb-2",children:"Work Rights"}),(0,Et.jsxs)("select",{id:"work_rights",name:"work_rights",value:d.work_rights,onChange:q,disabled:p,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-50",children:[(0,Et.jsx)("option",{value:"",children:"Select work rights"}),(0,Et.jsx)("option",{value:"Full-time Work Rights",children:"Full-time Work Rights"}),(0,Et.jsx)("option",{value:"Part-time Work Rights",children:"Part-time Work Rights"}),(0,Et.jsx)("option",{value:"Casual Work Rights",children:"Casual Work Rights"}),(0,Et.jsx)("option",{value:"Limited Work Rights (20 hrs/week)",children:"Limited Work Rights (20 hrs/week)"}),(0,Et.jsx)("option",{value:"Restricted Student Visa Work Rights",children:"Restricted Student Visa Work Rights"}),(0,Et.jsx)("option",{value:"Working Holiday Visa (6-month limit per employer)",children:"Working Holiday Visa (6-month limit per employer)"}),(0,Et.jsx)("option",{value:"No Work Rights",children:"No Work Rights"}),(0,Et.jsx)("option",{value:"Awaiting Visa Approval (Bridging)",children:"Awaiting Visa Approval (Bridging)"}),(0,Et.jsx)("option",{value:"Permanent Full Work Rights",children:"Permanent Full Work Rights"}),(0,Et.jsx)("option",{value:"Other",children:"Other"})]})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{htmlFor:"employer_name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Employer Name"}),(0,Et.jsx)("input",{type:"text",id:"employer_name",name:"employer_name",value:d.employer_name,onChange:q,disabled:p,placeholder:"Enter employer name",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-50"})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{htmlFor:"job_title",className:"block text-sm font-medium text-gray-700 mb-2",children:"Job Title"}),(0,Et.jsx)("input",{type:"text",id:"job_title",name:"job_title",value:d.job_title,onChange:q,disabled:p,placeholder:"Enter job title",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-50"})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{htmlFor:"monthly_income_aud",className:"block text-sm font-medium text-gray-700 mb-2",children:"Monthly Income (AUD)"}),(0,Et.jsxs)("div",{className:"relative",children:[(0,Et.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,Et.jsx)("span",{className:"text-gray-500 sm:text-sm",children:"$"})}),(0,Et.jsx)("input",{type:"number",id:"monthly_income_aud",name:"monthly_income_aud",value:d.monthly_income_aud,onChange:q,disabled:p,placeholder:"0.00",min:"0",step:"0.01",className:"w-full pl-8 pr-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-50"})]})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{htmlFor:"employment_start_date",className:"block text-sm font-medium text-gray-700 mb-2",children:"Employment Start Date"}),(0,Et.jsx)("input",{type:"date",id:"employment_start_date",name:"employment_start_date",value:d.employment_start_date,onChange:q,disabled:p,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-50"})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{htmlFor:"employer_phone",className:"block text-sm font-medium text-gray-700 mb-2",children:"Employer Phone"}),(0,Et.jsx)("input",{type:"tel",id:"employer_phone",name:"employer_phone",value:d.employer_phone,onChange:q,disabled:p,placeholder:"Enter employer phone number",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-50"})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{htmlFor:"employer_email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Employer Email"}),(0,Et.jsx)("input",{type:"email",id:"employer_email",name:"employer_email",value:d.employer_email,onChange:q,disabled:p,placeholder:"Enter employer email",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-50"})]})]}),(0,Et.jsxs)("div",{className:"mt-6",children:[(0,Et.jsx)("label",{htmlFor:"employer_address",className:"block text-sm font-medium text-gray-700 mb-2",children:"Employer Address"}),(0,Et.jsx)("textarea",{id:"employer_address",name:"employer_address",value:d.employer_address,onChange:q,disabled:p,rows:3,placeholder:"Enter employer address",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-50"})]})]}),"family"===k&&(0,Et.jsxs)("div",{className:"mb-8",children:[(0,Et.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{htmlFor:"marital_status",className:"block text-sm font-medium text-gray-700 mb-2",children:"Marital Status"}),(0,Et.jsxs)("select",{id:"marital_status",name:"marital_status",value:d.marital_status,onChange:q,disabled:p,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-50",children:[(0,Et.jsx)("option",{value:"",children:"Select marital status"}),(0,Et.jsx)("option",{value:"Single",children:"Single"}),(0,Et.jsx)("option",{value:"Married",children:"Married"}),(0,Et.jsx)("option",{value:"De Facto Relationship",children:"De Facto Relationship"}),(0,Et.jsx)("option",{value:"Separated",children:"Separated"}),(0,Et.jsx)("option",{value:"Divorced",children:"Divorced"}),(0,Et.jsx)("option",{value:"Widowed",children:"Widowed"}),(0,Et.jsx)("option",{value:"Engaged",children:"Engaged"}),(0,Et.jsx)("option",{value:"Other",children:"Other"})]})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{htmlFor:"family_relationship",className:"block text-sm font-medium text-gray-700 mb-2",children:"Family Relationship"}),(0,Et.jsxs)("select",{id:"family_relationship",name:"family_relationship",value:d.family_relationship,onChange:q,disabled:p,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-50",children:[(0,Et.jsx)("option",{value:"",children:"Select family relationship"}),(0,Et.jsx)("option",{value:"Father",children:"Father"}),(0,Et.jsx)("option",{value:"Mother",children:"Mother"}),(0,Et.jsx)("option",{value:"Husband",children:"Husband"}),(0,Et.jsx)("option",{value:"Wife",children:"Wife"}),(0,Et.jsx)("option",{value:"Son",children:"Son"}),(0,Et.jsx)("option",{value:"Daughter",children:"Daughter"}),(0,Et.jsx)("option",{value:"Brother",children:"Brother"}),(0,Et.jsx)("option",{value:"Sister",children:"Sister"}),(0,Et.jsx)("option",{value:"Grandfather",children:"Grandfather"}),(0,Et.jsx)("option",{value:"Grandmother",children:"Grandmother"}),(0,Et.jsx)("option",{value:"Grandson",children:"Grandson"}),(0,Et.jsx)("option",{value:"Granddaughter",children:"Granddaughter"}),(0,Et.jsx)("option",{value:"Uncle",children:"Uncle"}),(0,Et.jsx)("option",{value:"Aunt",children:"Aunt"}),(0,Et.jsx)("option",{value:"Cousin",children:"Cousin"}),(0,Et.jsx)("option",{value:"Nephew",children:"Nephew"}),(0,Et.jsx)("option",{value:"Niece",children:"Niece"}),(0,Et.jsx)("option",{value:"Partner",children:"Partner"}),(0,Et.jsx)("option",{value:"Fianc\xe9 / Fianc\xe9e",children:"Fianc\xe9 / Fianc\xe9e"}),(0,Et.jsx)("option",{value:"De Facto Partner",children:"De Facto Partner"}),(0,Et.jsx)("option",{value:"Guardian",children:"Guardian"}),(0,Et.jsx)("option",{value:"Child",children:"Child"}),(0,Et.jsx)("option",{value:"Parent",children:"Parent"}),(0,Et.jsx)("option",{value:"Relative",children:"Relative"}),(0,Et.jsx)("option",{value:"Friend",children:"Friend"}),(0,Et.jsx)("option",{value:"Other",children:"Other"})]})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{htmlFor:"family_member_full_name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Family Member Full Name"}),(0,Et.jsx)("input",{type:"text",id:"family_member_full_name",name:"family_member_full_name",value:d.family_member_full_name,onChange:q,disabled:p,placeholder:"Enter family member's full name",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-50"})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{htmlFor:"family_member_phone",className:"block text-sm font-medium text-gray-700 mb-2",children:"Family Member Phone"}),(0,Et.jsx)("input",{type:"tel",id:"family_member_phone",name:"family_member_phone",value:d.family_member_phone,onChange:q,disabled:p,placeholder:"Enter family member's phone number",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-50"})]})]}),(0,Et.jsxs)("div",{className:"mt-6",children:[(0,Et.jsx)("label",{htmlFor:"family_member_email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Family Member Email"}),(0,Et.jsx)("input",{type:"email",id:"family_member_email",name:"family_member_email",value:d.family_member_email,onChange:q,disabled:p,placeholder:"Enter family member's email address",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-50"})]})]}),"bank"===k&&(0,Et.jsx)("div",{className:"mb-8",children:(0,Et.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{htmlFor:"bank_name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Bank Name"}),(0,Et.jsxs)("select",{id:"bank_name",name:"bank_name",value:d.bank_name,onChange:q,disabled:p,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-50",children:[(0,Et.jsx)("option",{value:"",children:"Select bank"}),(0,Et.jsx)("option",{value:"ANZ (Australia and New Zealand Banking Group)",children:"ANZ (Australia and New Zealand Banking Group)"}),(0,Et.jsx)("option",{value:"Commonwealth Bank of Australia (CBA)",children:"Commonwealth Bank of Australia (CBA)"}),(0,Et.jsx)("option",{value:"Westpac Banking Corporation",children:"Westpac Banking Corporation"}),(0,Et.jsx)("option",{value:"National Australia Bank (NAB)",children:"National Australia Bank (NAB)"}),(0,Et.jsx)("option",{value:"Macquarie Bank",children:"Macquarie Bank"}),(0,Et.jsx)("option",{value:"AMP Bank",children:"AMP Bank"}),(0,Et.jsx)("option",{value:"Bank of Queensland (BOQ)",children:"Bank of Queensland (BOQ)"}),(0,Et.jsx)("option",{value:"Bendigo Bank",children:"Bendigo Bank"}),(0,Et.jsx)("option",{value:"Suncorp Bank",children:"Suncorp Bank"}),(0,Et.jsx)("option",{value:"ING Bank (Australia)",children:"ING Bank (Australia)"}),(0,Et.jsx)("option",{value:"HSBC Bank Australia",children:"HSBC Bank Australia"}),(0,Et.jsx)("option",{value:"Citibank Australia",children:"Citibank Australia"}),(0,Et.jsx)("option",{value:"Bankwest",children:"Bankwest"}),(0,Et.jsx)("option",{value:"ME Bank (Members Equity Bank)",children:"ME Bank (Members Equity Bank)"}),(0,Et.jsx)("option",{value:"UBank",children:"UBank"}),(0,Et.jsx)("option",{value:"Virgin Money Australia",children:"Virgin Money Australia"}),(0,Et.jsx)("option",{value:"Bank Australia",children:"Bank Australia"}),(0,Et.jsx)("option",{value:"Heritage Bank",children:"Heritage Bank"}),(0,Et.jsx)("option",{value:"Greater Bank",children:"Greater Bank"}),(0,Et.jsx)("option",{value:"Newcastle Permanent",children:"Newcastle Permanent"}),(0,Et.jsx)("option",{value:"People's Choice Credit Union",children:"People's Choice Credit Union"}),(0,Et.jsx)("option",{value:"Beyond Bank Australia",children:"Beyond Bank Australia"}),(0,Et.jsx)("option",{value:"Defence Bank",children:"Defence Bank"}),(0,Et.jsx)("option",{value:"P&N Bank",children:"P&N Bank"}),(0,Et.jsx)("option",{value:"Hume Bank",children:"Hume Bank"}),(0,Et.jsx)("option",{value:"Teachers Mutual Bank",children:"Teachers Mutual Bank"}),(0,Et.jsx)("option",{value:"Australian Military Bank",children:"Australian Military Bank"}),(0,Et.jsx)("option",{value:"Police Bank",children:"Police Bank"}),(0,Et.jsx)("option",{value:"Australian Unity Bank",children:"Australian Unity Bank"}),(0,Et.jsx)("option",{value:"Bank of Sydney",children:"Bank of Sydney"}),(0,Et.jsx)("option",{value:"BankSA",children:"BankSA"}),(0,Et.jsx)("option",{value:"Bank of Melbourne",children:"Bank of Melbourne"}),(0,Et.jsx)("option",{value:"RACQ Bank",children:"RACQ Bank"}),(0,Et.jsx)("option",{value:"Gateway Bank",children:"Gateway Bank"}),(0,Et.jsx)("option",{value:"Judo Bank",children:"Judo Bank"}),(0,Et.jsx)("option",{value:"Volt Bank",children:"Volt Bank"}),(0,Et.jsx)("option",{value:"Up Bank",children:"Up Bank"}),(0,Et.jsx)("option",{value:"Alex Bank",children:"Alex Bank"}),(0,Et.jsx)("option",{value:"86400 Bank",children:"86400 Bank"}),(0,Et.jsx)("option",{value:"Revolut Australia",children:"Revolut Australia"}),(0,Et.jsx)("option",{value:"Wise (formerly TransferWise)",children:"Wise (formerly TransferWise)"}),(0,Et.jsx)("option",{value:"PayID / Osko (NPP)",children:"PayID / Osko (NPP)"}),(0,Et.jsx)("option",{value:"Other",children:"Other"})]})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{htmlFor:"account_name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Account Name"}),(0,Et.jsx)("input",{type:"text",id:"account_name",name:"account_name",value:d.account_name,onChange:q,disabled:p,placeholder:"Enter account holder name",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-50"})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{htmlFor:"bsb_number",className:"block text-sm font-medium text-gray-700 mb-2",children:"BSB Number"}),(0,Et.jsx)("input",{type:"text",id:"bsb_number",name:"bsb_number",value:d.bsb_number,onChange:q,disabled:p,placeholder:"000000",maxLength:"6",pattern:"[0-9]{6}",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-50"})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{htmlFor:"account_number",className:"block text-sm font-medium text-gray-700 mb-2",children:"Account Number"}),(0,Et.jsx)("input",{type:"text",id:"account_number",name:"account_number",value:d.account_number,onChange:q,disabled:p,placeholder:"Enter account number",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-50"})]})]})}),f&&(0,Et.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 flex items-center space-x-2 mb-6",children:[(0,Et.jsx)("svg",{className:"w-5 h-5 text-red-500 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})}),(0,Et.jsx)("p",{className:"text-red-700 text-sm",children:f})]}),g&&(0,Et.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 flex items-center space-x-2 mb-6",children:[(0,Et.jsx)("svg",{className:"w-5 h-5 text-green-500 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,Et.jsx)("p",{className:"text-green-700 text-sm",children:g})]}),(0,Et.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 pt-6 border-t border-gray-200",children:[(0,Et.jsxs)("button",{type:"submit",disabled:p,className:"w-full sm:w-auto bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:[p&&(0,Et.jsxs)("svg",{className:"animate-spin h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",children:[(0,Et.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,Et.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,Et.jsx)("span",{children:p?c?"Updating Profile...":"Creating Profile...":c?"Update Borrower Profile":"Create Borrower Profile"})]}),(0,Et.jsx)("button",{type:"button",onClick:()=>{B?L(!0):s()},className:"w-full sm:w-auto bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-2 rounded-lg font-medium",children:"Cancel"})]})]})]}),(0,Et.jsx)(Ht,{isOpen:C,onClose:()=>L(!1),onConfirm:()=>{L(!1),F(!1),s()},title:"Unsaved Changes",message:"You have unsaved changes. Are you sure you want to leave without saving?",confirmText:"Leave Without Saving",cancelText:"Continue Editing",type:"warning"}),(0,Et.jsx)(Ut,{isVisible:E,onClose:()=>A(!1),message:P,type:"success",autoClose:!0,duration:5e3}),(0,Et.jsx)(Wt,{isOpen:T,onClose:()=>D(!1),documentData:N})]})},$t=e=>{let{currentView:t,borrowers:n,selectedBorrower:a,onSelectBorrower:l,onCreateNew:o,onEdit:s,onBack:i,loading:c,error:d,token:u}=e;const m=ve(),[p,h]=(0,r.useState)([]),[f,x]=(0,r.useState)(!1);(0,r.useEffect)(()=>{if(!u||"dashboard"!==t)return;(async()=>{x(!0);try{const e="undefined"!==typeof window&&window.REACT_APP_API_URL||"https://echovault.space/wp-json",t=await fetch("".concat(e,"/wp/v2/loans?per_page=100&status=publish,draft&context=edit"),{headers:{Authorization:"Bearer ".concat(u)},mode:"cors"});if(t.ok){const e=await t.json();h(e||[])}}catch(_n){console.error("Failed to fetch loans for dashboard:",_n)}finally{x(!1)}})()},[u,t]);const g=p.filter(e=>{var t;const n=e.loan_status||(null===(t=e.meta)||void 0===t?void 0:t.loan_status)||"";return n&&!/^(closed|completed|cancelled)$/i.test(n)}),b=p.filter(e=>{var t;const n=e.loan_status||(null===(t=e.meta)||void 0===t?void 0:t.loan_status)||"";return n&&/^(pending|draft)$/i.test(n)}),y=p.reduce((e,t)=>{var n;return e+parseFloat(t.loan_amount||(null===(n=t.meta)||void 0===n?void 0:n.loan_amount)||0)},0),v=o||(()=>m("/clients/new")),j=()=>m("/clients");return"dashboard"===t?(0,Et.jsxs)("div",{className:"p-6",children:[(0,Et.jsxs)("div",{className:"mb-6",children:[(0,Et.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Dashboard Overview"}),(0,Et.jsx)("p",{className:"text-gray-600",children:"Welcome to your loan management system"})]}),(0,Et.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[(0,Et.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:(0,Et.jsxs)("div",{className:"flex items-center",children:[(0,Et.jsx)("div",{className:"p-3 bg-blue-100 rounded-lg",children:(0,Et.jsx)("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),(0,Et.jsxs)("div",{className:"ml-4",children:[(0,Et.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Borrowers"}),(0,Et.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:n.length})]})]})}),(0,Et.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:(0,Et.jsxs)("div",{className:"flex items-center",children:[(0,Et.jsx)("div",{className:"p-3 bg-green-100 rounded-lg",children:(0,Et.jsx)("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,Et.jsxs)("div",{className:"ml-4",children:[(0,Et.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Active Loans"}),(0,Et.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:f?"...":g.length})]})]})}),(0,Et.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:(0,Et.jsxs)("div",{className:"flex items-center",children:[(0,Et.jsx)("div",{className:"p-3 bg-yellow-100 rounded-lg",children:(0,Et.jsx)("svg",{className:"w-6 h-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,Et.jsxs)("div",{className:"ml-4",children:[(0,Et.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Pending Applications"}),(0,Et.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:f?"...":b.length})]})]})}),(0,Et.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:(0,Et.jsxs)("div",{className:"flex items-center",children:[(0,Et.jsx)("div",{className:"p-3 bg-purple-100 rounded-lg",children:(0,Et.jsx)("svg",{className:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})})}),(0,Et.jsxs)("div",{className:"ml-4",children:[(0,Et.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Value"}),(0,Et.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:f?"...":"$".concat(y.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}))})]})]})})]}),(0,Et.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,Et.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,Et.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Actions"}),(0,Et.jsxs)("div",{className:"space-y-3",children:[(0,Et.jsx)("button",{onClick:j,className:"w-full flex items-center justify-between p-3 bg-blue-50 hover:bg-blue-100 rounded-lg",children:(0,Et.jsxs)("div",{className:"flex items-center",children:[(0,Et.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg mr-3",children:(0,Et.jsx)("svg",{className:"w-4 h-4 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),(0,Et.jsxs)("div",{className:"text-left",children:[(0,Et.jsx)("p",{className:"font-medium text-gray-900",children:"View All Borrowers"}),(0,Et.jsx)("p",{className:"text-sm text-gray-500",children:"Manage borrower profiles"})]})]})}),(0,Et.jsx)("button",{onClick:v,className:"w-full flex items-center justify-between p-3 bg-green-50 hover:bg-green-100 rounded-lg",children:(0,Et.jsxs)("div",{className:"flex items-center",children:[(0,Et.jsx)("div",{className:"p-2 bg-green-100 rounded-lg mr-3",children:(0,Et.jsx)("svg",{className:"w-4 h-4 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}),(0,Et.jsxs)("div",{className:"text-left",children:[(0,Et.jsx)("p",{className:"font-medium text-gray-900",children:"Create New Profile"}),(0,Et.jsx)("p",{className:"text-sm text-gray-500",children:"Add a new borrower"})]})]})}),(0,Et.jsx)("button",{onClick:()=>m("/loans"),className:"w-full flex items-center justify-between p-3 bg-indigo-50 hover:bg-indigo-100 rounded-lg",children:(0,Et.jsxs)("div",{className:"flex items-center",children:[(0,Et.jsx)("div",{className:"p-2 bg-indigo-100 rounded-lg mr-3",children:(0,Et.jsx)("svg",{className:"w-4 h-4 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),(0,Et.jsxs)("div",{className:"text-left",children:[(0,Et.jsx)("p",{className:"font-medium text-gray-900",children:"View All Loans"}),(0,Et.jsx)("p",{className:"text-sm text-gray-500",children:"Manage loan applications"})]})]})}),(0,Et.jsx)("button",{onClick:()=>m("/loans/new"),className:"w-full flex items-center justify-between p-3 bg-purple-50 hover:bg-purple-100 rounded-lg",children:(0,Et.jsxs)("div",{className:"flex items-center",children:[(0,Et.jsx)("div",{className:"p-2 bg-purple-100 rounded-lg mr-3",children:(0,Et.jsx)("svg",{className:"w-4 h-4 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}),(0,Et.jsxs)("div",{className:"text-left",children:[(0,Et.jsx)("p",{className:"font-medium text-gray-900",children:"Create a New Loan"}),(0,Et.jsx)("p",{className:"text-sm text-gray-500",children:"Add a new loan application"})]})]})}),(0,Et.jsx)("button",{onClick:()=>m("/notes"),className:"w-full flex items-center justify-between p-3 bg-yellow-50 hover:bg-yellow-100 rounded-lg",children:(0,Et.jsxs)("div",{className:"flex items-center",children:[(0,Et.jsx)("div",{className:"p-2 bg-yellow-100 rounded-lg mr-3",children:(0,Et.jsx)("svg",{className:"w-4 h-4 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})}),(0,Et.jsxs)("div",{className:"text-left",children:[(0,Et.jsx)("p",{className:"font-medium text-gray-900",children:"Note"}),(0,Et.jsx)("p",{className:"text-sm text-gray-500",children:"View and manage notes"})]})]})})]})]}),(0,Et.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,Et.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"System Status"}),(0,Et.jsxs)("div",{className:"space-y-3",children:[(0,Et.jsxs)("div",{className:"flex items-center justify-between p-3 bg-green-50 rounded-lg",children:[(0,Et.jsx)("span",{className:"text-sm font-medium text-gray-900",children:"Backend Connection"}),(0,Et.jsx)("span",{className:"text-sm text-green-600 font-medium",children:"Connected"})]}),(0,Et.jsxs)("div",{className:"flex items-center justify-between p-3 bg-green-50 rounded-lg",children:[(0,Et.jsx)("span",{className:"text-sm font-medium text-gray-900",children:"Database"}),(0,Et.jsx)("span",{className:"text-sm text-green-600 font-medium",children:"Online"})]}),(0,Et.jsxs)("div",{className:"flex items-center justify-between p-3 bg-green-50 rounded-lg",children:[(0,Et.jsx)("span",{className:"text-sm font-medium text-gray-900",children:"File Storage"}),(0,Et.jsx)("span",{className:"text-sm text-green-600 font-medium",children:"Available"})]})]})]})]})]}):"borrowers"===t?(0,Et.jsx)("div",{className:"p-6",children:(0,Et.jsx)(It,{borrowers:n,loading:c,error:d,onSelectBorrower:l,onCreateNew:o})}):"borrower-detail"===t&&a?(0,Et.jsx)("div",{className:"p-6",children:(0,Et.jsx)(Vt,{borrower:a,onBack:i,onEdit:s})}):"create-borrower"===t||"edit-borrower"===t?(0,Et.jsxs)("div",{className:"p-6",children:[(0,Et.jsxs)("div",{className:"mb-6",children:[(0,Et.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"edit-borrower"===t?"Edit Borrower Profile":"Create New Borrower Profile"}),(0,Et.jsx)("p",{className:"text-gray-600",children:"Create or update borrower information"})]}),(0,Et.jsx)(qt,{editingBorrower:"edit-borrower"===t?a:null,isEditing:"edit-borrower"===t,onCancel:i})]}):"reports"===t?(0,Et.jsxs)("div",{className:"p-6",children:[(0,Et.jsx)("div",{className:"mb-8",children:(0,Et.jsxs)("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Reports"}),(0,Et.jsx)("p",{className:"text-gray-600",children:"Generate and view system reports and analytics"})]}),(0,Et.jsxs)("button",{className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-medium flex items-center space-x-2 self-start sm:self-center",children:[(0,Et.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),(0,Et.jsx)("span",{children:"Generate Report"})]})]})}),(0,Et.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-12 text-center",children:[(0,Et.jsx)("div",{className:"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,Et.jsx)("svg",{className:"w-12 h-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),(0,Et.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No reports found"}),(0,Et.jsx)("p",{className:"text-gray-500 mb-8 max-w-md mx-auto",children:"Get started by generating your first report. This will help you analyze loan data, track performance, and monitor system metrics."}),(0,Et.jsxs)("button",{className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-medium flex items-center space-x-2 mx-auto",children:[(0,Et.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),(0,Et.jsx)("span",{children:"Generate First Report"})]})]})]}):"settings"===t?(0,Et.jsxs)("div",{className:"p-6",children:[(0,Et.jsx)("div",{className:"mb-8",children:(0,Et.jsxs)("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Settings"}),(0,Et.jsx)("p",{className:"text-gray-600",children:"Configure system settings and preferences"})]}),(0,Et.jsxs)("button",{className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-medium flex items-center space-x-2 self-start sm:self-center",children:[(0,Et.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),(0,Et.jsx)("span",{children:"Add Setting"})]})]})}),(0,Et.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-12 text-center",children:[(0,Et.jsx)("div",{className:"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,Et.jsx)("svg",{className:"w-12 h-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z M15 12a3 3 0 11-6 0 3 3 0 016 0z"})})}),(0,Et.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No settings configured"}),(0,Et.jsx)("p",{className:"text-gray-500 mb-8 max-w-md mx-auto",children:"Get started by configuring your first system setting. This will help you customize the application behavior and preferences."}),(0,Et.jsxs)("button",{className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-medium flex items-center space-x-2 mx-auto",children:[(0,Et.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),(0,Et.jsx)("span",{children:"Configure First Setting"})]})]})]}):null},Gt="undefined"!==typeof window&&window.REACT_APP_API_URL||"https://echovault.space/wp-json",Qt=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return null===e||void 0===e?t:"string"===typeof e||"number"===typeof e||"boolean"===typeof e?e:Array.isArray(e)?Qt(e[0],t):e&&"object"===typeof e&&"rendered"in e?Qt(e.rendered,t):t},Jt=e=>{if(null===e||void 0===e)return"";if("number"===typeof e||"string"===typeof e)return String(e);if(Array.isArray(e))return Jt(e[0]);if("object"===typeof e){if("id"in e)return String(e.id);if("ID"in e)return String(e.ID)}return""},Yt=e=>{let{token:t,setCurrentView:n}=e;const[a,l]=(0,r.useState)([]),[o,s]=(0,r.useState)(!1),[i,c]=(0,r.useState)(""),[d,u]=(0,r.useState)([]),[m,p]=(0,r.useState)([]),[h,f]=(0,r.useState)([]),[x,g]=(0,r.useState)(""),[b,y]=(0,r.useState)("all"),[v,j]=(0,r.useState)("all"),[w,N]=(0,r.useState)("all"),[_,k]=(0,r.useState)(10),[S,C]=(0,r.useState)(1);(0,r.useEffect)(()=>{if(!t)return;(async()=>{s(!0),c("");try{const[e,n,r,a]=await Promise.all([fetch("".concat(Gt,"/wp/v2/loans?per_page=100&status=publish,draft&context=edit"),{headers:{Authorization:"Bearer ".concat(t)},mode:"cors"}),fetch("".concat(Gt,"/wp/v2/loan-product?per_page=100&context=edit&status=publish,draft"),{headers:{Authorization:"Bearer ".concat(t)},mode:"cors"}),fetch("".concat(Gt,"/wp/v2/bank-account-system?per_page=100&status=publish,draft"),{headers:{Authorization:"Bearer ".concat(t)},mode:"cors"}),fetch("".concat(Gt,"/wp/v2/borrower-profile?per_page=100&context=edit"),{headers:{Authorization:"Bearer ".concat(t)},mode:"cors"})]);if(!e.ok)throw new Error("Failed to fetch loans");if(!n.ok)throw new Error("Failed to fetch products");if(!r.ok)throw new Error("Failed to fetch accounts");if(!a.ok)throw new Error("Failed to fetch borrowers");const[o,s,i,c]=await Promise.all([e.json(),n.json(),r.json(),a.json()]);l(o||[]),u(s||[]),p(i||[]),f(c||[])}catch(_n){c(_n.message||"Failed to load loans")}finally{s(!1)}})()},[t]);const L=(0,r.useMemo)(()=>{const e=new Map;return(d||[]).forEach(t=>{const n=t.id,r=t.product_name||t.title&&t.title.rendered||"";n&&r&&e.set(String(n),String(r))}),e},[d]),E=(0,r.useMemo)(()=>{const e=new Map;return(d||[]).forEach(t=>{const n=t.id,r=(Array.isArray(t.currency)?t.currency[0]:t.currency)||"AUD";n&&r&&e.set(String(n),String(r))}),e},[d]),A=((0,r.useMemo)(()=>{const e=new Map;return(m||[]).forEach(t=>{const n=t.id,r="Australia"===(Array.isArray(t.account_type)?t.account_type[0]:t.account_type)?Array.isArray(t.bank_name_au)?t.bank_name_au[0]:t.bank_name_au:Array.isArray(t.bank_name_mn)?t.bank_name_mn[0]:t.bank_name_mn;n&&e.set(String(n),{bank:r||"",name:t.account_name||""})}),e},[m]),(0,r.useMemo)(()=>{const e=new Map;return(h||[]).forEach(t=>{const n=[Qt(t.first_name),Qt(t.last_name)].filter(Boolean).join(" ");e.set(String(t.id),{name:n,email:Qt(t.email_address),phone:Qt(t.mobile_number)})}),e},[h])),P=(0,r.useMemo)(()=>{const e=x.trim().toLowerCase();let t=a.slice();return"all"!==b&&(t=t.filter(e=>Qt(e.status,"").toLowerCase()===b)),"all"!==v&&(t=t.filter(e=>{var t,n;const r=Qt(null===(t=e.meta)||void 0===t?void 0:t.loan_product_name)||Qt(e.loan_product)||Qt(null===(n=e.meta)||void 0===n?void 0:n.loan_product),a=r?String(r):"",l=L.get(String(r))||a;return l&&String(l).toLowerCase()===String(v).toLowerCase()})),"all"!==w&&(t=t.filter(e=>{var t;const n=Qt(e.loan_currency)||Qt(null===(t=e.meta)||void 0===t?void 0:t.loan_currency)||"";return String(n).toLowerCase()===String(w).toLowerCase()})),e&&(t=t.filter(t=>{var n,r,a,l,o,s,i,c,d,u;const m=(Qt(t.loan_id)||Qt(null===(n=t.meta)||void 0===n?void 0:n.loan_id)||"").toLowerCase(),p=Qt(null===(r=t.meta)||void 0===r?void 0:r.loan_product_name)||Qt(t.loan_product)||Qt(null===(a=t.meta)||void 0===a?void 0:a.loan_product),h=(L.get(String(p))||p||"").toLowerCase(),f=(Qt(t.loan_currency)||Qt(null===(l=t.meta)||void 0===l?void 0:l.loan_currency)||"").toLowerCase(),x=Jt(null===(o=t.meta)||void 0===o?void 0:o.borrower_id)||Jt(t.borrower)||Jt(null===(s=t.meta)||void 0===s?void 0:s.borrower)||Jt(null===(i=t.meta)||void 0===i?void 0:i.borrower_profile),g=x?A.get(String(x)):null,b=((null===g||void 0===g?void 0:g.name)||Qt(t.borrower_name)||Qt(null===(c=t.meta)||void 0===c?void 0:c.borrower_name)||"").toLowerCase(),y=((null===g||void 0===g?void 0:g.email)||Qt(t.borrower_email)||Qt(null===(d=t.meta)||void 0===d?void 0:d.borrower_email)||"").toLowerCase(),v=((null===g||void 0===g?void 0:g.phone)||Qt(t.borrower_phone)||Qt(null===(u=t.meta)||void 0===u?void 0:u.borrower_phone)||"").toLowerCase();return m.includes(e)||h.includes(e)||f.includes(e)||b.includes(e)||y.includes(e)||v.includes(e)})),t},[a,x,b,v,w,L,A]),M=(0,r.useMemo)(()=>{const e=new Set;return a.forEach(t=>{var n;const r=Qt(t.loan_currency)||Qt(null===(n=t.meta)||void 0===n?void 0:n.loan_currency);r&&e.add(String(r))}),Array.from(e)},[a]),B=(0,r.useMemo)(()=>{const e=new Set;return d.forEach(t=>{var n;const r=t.product_name||(null===(n=t.title)||void 0===n?void 0:n.rendered);r&&e.add(String(r))}),Array.from(e)},[d]),F=Math.max(1,Math.ceil(P.length/_)),T=Math.min(S,F),D=(0,r.useMemo)(()=>{const e=(T-1)*_;return P.slice(e,e+_)},[P,T,_]);return o?(0,Et.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-12 text-center",children:[(0,Et.jsx)("div",{className:"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,Et.jsxs)("svg",{className:"animate-spin h-12 w-12 text-blue-600",fill:"none",viewBox:"0 0 24 24",children:[(0,Et.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,Et.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}),(0,Et.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Loading loans..."}),(0,Et.jsx)("p",{className:"text-gray-500",children:"Please wait while we fetch loans."})]}):i?(0,Et.jsx)("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:i}):a&&0!==a.length?(0,Et.jsxs)("div",{children:[(0,Et.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6",children:[(0,Et.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[(0,Et.jsxs)("div",{className:"md:col-span-2",children:[(0,Et.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search Loans"}),(0,Et.jsxs)("div",{className:"relative",children:[(0,Et.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,Et.jsx)("svg",{className:"h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),(0,Et.jsx)("input",{type:"text",value:x,onChange:e=>{g(e.target.value),C(1)},className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500",placeholder:"Search by loan ID, borrower, email, phone, product, currency"})]})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Filter by Status"}),(0,Et.jsxs)("select",{value:b,onChange:e=>{y(e.target.value),C(1)},className:"block w-full px-3 py-2 border border-gray-300 rounded-md bg-white focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",children:[(0,Et.jsx)("option",{value:"all",children:"All Statuses"}),(0,Et.jsx)("option",{value:"publish",children:"Published"}),(0,Et.jsx)("option",{value:"draft",children:"Draft"})]})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Filter by Product"}),(0,Et.jsxs)("select",{value:v,onChange:e=>{j(e.target.value),C(1)},className:"block w-full px-3 py-2 border border-gray-300 rounded-md bg-white focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",children:[(0,Et.jsx)("option",{value:"all",children:"All Products"}),B.map(e=>(0,Et.jsx)("option",{value:e,children:e},e))]})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Filter by Currency"}),(0,Et.jsxs)("select",{value:w,onChange:e=>{N(e.target.value),C(1)},className:"block w-full px-3 py-2 border border-gray-300 rounded-md bg-white focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",children:[(0,Et.jsx)("option",{value:"all",children:"All Currencies"}),M.map(e=>(0,Et.jsx)("option",{value:e,children:e},e))]})]})]}),(0,Et.jsxs)("div",{className:"flex justify-between items-center mt-4 pt-4 border-t border-gray-200 text-sm text-gray-600",children:[(0,Et.jsxs)("div",{children:["Showing ",0===P.length?"0":(T-1)*_+1,"-",Math.min(T*_,P.length)," of ",P.length," loans",(x||"all"!==b||"all"!==v||"all"!==w)&&(0,Et.jsx)("span",{className:"ml-2 text-blue-600",children:"(filtered)"})]}),(x||"all"!==b||"all"!==v||"all"!==w)&&(0,Et.jsx)("button",{onClick:()=>{g(""),y("all"),j("all"),N("all"),C(1)},className:"text-sm text-gray-500 hover:text-gray-700 underline",children:"Clear all filters"})]})]}),(0,Et.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[(0,Et.jsx)("div",{className:"overflow-x-auto",children:(0,Et.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Et.jsx)("thead",{className:"bg-gray-50",children:(0,Et.jsxs)("tr",{children:[(0,Et.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Loan ID"}),(0,Et.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Borrower"}),(0,Et.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),(0,Et.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Currency"}),(0,Et.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product"}),(0,Et.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Term"}),(0,Et.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Method"}),(0,Et.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Frequency"}),(0,Et.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,Et.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Repayment Status"}),(0,Et.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Action"})]})}),(0,Et.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:D.map(e=>{var t,r,a,l,o,s,i,c,d,u,m,p,h,f,x;const g=Qt(e.loan_id)||Qt(null===(t=e.meta)||void 0===t?void 0:t.loan_id)||Qt(null===(r=e.title)||void 0===r?void 0:r.rendered,"-");let b=Qt(e.loan_currency)||Qt(null===(a=e.meta)||void 0===a?void 0:a.loan_currency)||"";const y=Qt(e.loan_amount)||Qt(null===(l=e.meta)||void 0===l?void 0:l.loan_amount)||0,v=Number(y)||0,j=(Qt(e.loan_status)||Qt(null===(o=e.meta)||void 0===o?void 0:o.loan_status)||Qt(e.status,"")).toString(),w=j.toLowerCase();let N="Unknown";N="publish"===w?"Active":"draft"===w?"Draft":["pending","active","inactive","closed","rejected"].includes(w)?w.charAt(0).toUpperCase()+w.slice(1):j?j.charAt(0).toUpperCase()+j.slice(1):"-";const _=/^active$/i.test(N)?"bg-green-100 text-green-800":/^pending$/i.test(N)?"bg-blue-100 text-blue-800":/^rejected$/i.test(N)?"bg-red-100 text-red-800":/^inactive$/i.test(N)?"bg-gray-200 text-gray-800":/^closed$/i.test(N)?"bg-purple-100 text-purple-800":/^draft$/i.test(N)?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800";let k=Qt(null===(s=e.meta)||void 0===s?void 0:s.loan_product_name);if(!k){var S;const t=Qt(e.loan_product)||Qt(null===(S=e.meta)||void 0===S?void 0:S.loan_product);if(t){if(k=L.get(String(t))||t,!b){const e=E.get(String(t));e&&(b=e)}}}k||(k="-");Qt(e.date)||(new Date).toISOString();let C=Qt(e.borrower_name)||Qt(null===(i=e.meta)||void 0===i?void 0:i.borrower_name)||"";const P=Qt(e.borrower_email)||Qt(null===(c=e.meta)||void 0===c?void 0:c.borrower_email)||"",M=Qt(e.borrower_phone)||Qt(null===(d=e.meta)||void 0===d?void 0:d.borrower_phone)||"",B=Jt(null===(u=e.meta)||void 0===u?void 0:u.borrower_id)||Jt(e.borrower)||Jt(null===(m=e.meta)||void 0===m?void 0:m.borrower)||Jt(null===(p=e.meta)||void 0===p?void 0:p.borrower_profile);let F=null;if(C?F={name:C,email:P,phone:M}:B&&(F=A.get(String(B))||null),!F){var T,D;const t=P,n=M,r=[Qt(null===(T=e.meta)||void 0===T?void 0:T.borrower_first_name)||Qt(e.borrower_first_name)||"",Qt(null===(D=e.meta)||void 0===D?void 0:D.borrower_last_name)||Qt(e.borrower_last_name)||""].filter(Boolean).join(" ");(r||t||n)&&(F={name:r,email:t,phone:n})}const z=Qt(e.loan_term)||Qt(null===(h=e.meta)||void 0===h?void 0:h.loan_term)||"",R=Qt(e.repayment_method)||Qt(null===(f=e.meta)||void 0===f?void 0:f.repayment_method)||"",O=Qt(e.repayment_frequency)||Qt(null===(x=e.meta)||void 0===x?void 0:x.repayment_frequency)||"";return(0,Et.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,Et.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-mono text-gray-900",children:g}),(0,Et.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:F?(0,Et.jsxs)("div",{children:[(0,Et.jsx)("div",{className:"font-medium",children:F.name||"-"}),(0,Et.jsx)("div",{className:"text-gray-500 text-xs",children:F.email||"-"}),(0,Et.jsx)("div",{className:"text-gray-500 text-xs",children:F.phone||"-"})]}):"-"}),(0,Et.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-right",children:[(I=b,"MNT"===I?"\u20ae":"$"),v]}),(0,Et.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700",children:Qt(b,"-")}),(0,Et.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:k}),(0,Et.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:z||"-"}),(0,Et.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:R||"-"}),(0,Et.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:O||"-"}),(0,Et.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:(0,Et.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full ".concat(_),children:N})}),(0,Et.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:(t=>{let n="Pending",r="bg-gray-100 text-gray-800";const a=Qt(e.end_date)||Qt(null===(t=e.meta)||void 0===t?void 0:t.end_date);if(a)try{const e=new Date;e.setHours(0,0,0,0);const t=new Date(a);t.setHours(0,0,0,0),t<e?(n="Overdue",r="bg-red-100 text-red-800"):(n="Pending",r="bg-gray-100 text-gray-800")}catch(_n){n="Pending",r="bg-gray-100 text-gray-800"}return(0,Et.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full ".concat(r),children:n})})()}),(0,Et.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:(0,Et.jsx)("button",{onClick:()=>n({view:"loan-detail",loanId:e.id}),className:"text-blue-600 hover:text-blue-900 p-1 rounded hover:bg-blue-50",children:"View Details"})})]},e.id);var I})})]})}),(0,Et.jsxs)("div",{className:"px-4 py-3 border-t border-gray-200 flex flex-col sm:flex-row items-center justify-between gap-3",children:[(0,Et.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-700",children:[(0,Et.jsx)("span",{children:"Rows per page:"}),(0,Et.jsx)("select",{value:_,onChange:e=>{k(Number(e.target.value)),C(1)},className:"px-2 py-1 border border-gray-300 rounded",children:[10,25,50].map(e=>(0,Et.jsx)("option",{value:e,children:e},e))}),(0,Et.jsxs)("span",{children:[0===P.length?"0":(T-1)*_+1,"-",Math.min(T*_,P.length)," of ",P.length]})]}),(0,Et.jsxs)("div",{className:"flex items-center gap-1",children:[(0,Et.jsx)("button",{onClick:()=>C(e=>Math.max(1,e-1)),disabled:1===T,className:"px-2 py-1 border border-gray-300 rounded disabled:opacity-50",children:"Prev"}),Array.from({length:F}).slice(0,5).map((e,t)=>{const n=t+1;return(0,Et.jsx)("button",{onClick:()=>C(n),className:"px-2 py-1 border border-gray-300 rounded ".concat(T===n?"bg-blue-50 border-blue-300 text-blue-700":""),children:n},n)}),(0,Et.jsx)("button",{onClick:()=>C(e=>Math.min(F,e+1)),disabled:T===F,className:"px-2 py-1 border border-gray-300 rounded disabled:opacity-50",children:"Next"})]})]})]})]}):(0,Et.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-12 text-center",children:[(0,Et.jsx)("div",{className:"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,Et.jsx)("svg",{className:"w-12 h-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M3 10h18M7 15h10M5 19h14M7 6h10M12 3v3"})})}),(0,Et.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No loans yet"}),(0,Et.jsx)("p",{className:"text-gray-500",children:"Create a loan to see it listed here."})]})},Kt="undefined"!==typeof window&&window.REACT_APP_API_URL||"https://echovault.space/wp-json",Xt=e=>"MNT"===e?"\u20ae":"$",Zt=["Summary","Repayment Schedule","Bank Statements","Collateral","Contract","Note","Settings"],en=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return null===e||void 0===e?t:"string"===typeof e||"number"===typeof e||"boolean"===typeof e?e:Array.isArray(e)?en(e[0],t):e&&"object"===typeof e&&"rendered"in e?en(e.rendered,t):t},tn=e=>{if(null===e||void 0===e)return"";if("number"===typeof e||"string"===typeof e)return String(e);if(Array.isArray(e))return tn(e[0]);if("object"===typeof e){if("id"in e)return String(e.id);if("ID"in e)return String(e.ID)}return""},nn=e=>{var t,n,a,l,o,s,i,c,d,m,p,h,f,x,g,b,y,v,j,w,N,_,k,S,C,L,E,A,P,M,B,F,T,D,z,R,O,I,W,V;let{token:H,loanId:U,onBack:q,onOpenBorrower:$,onEditLoan:G}=e;const[Q,J]=(0,r.useState)("Summary"),[Y,K]=(0,r.useState)(null),[X,Z]=(0,r.useState)(null),[ee,te]=(0,r.useState)(null),[ne,re]=(0,r.useState)(null),[ae,le]=(0,r.useState)(!1),[oe,se]=(0,r.useState)(""),[ie,ce]=(0,r.useState)([]),[de,ue]=(0,r.useState)(null),[me,pe]=(0,r.useState)(null);(0,r.useEffect)(()=>{(async()=>{if(H&&U){le(!0),se("");try{var e,t,n,r,a,l,o,s,i,c,d,u,m,p,h,f;const w={Authorization:"Bearer ".concat(H)},N=await fetch("".concat(Kt,"/wp/v2/loans/").concat(U,"?context=edit"),{headers:w,mode:"cors"});if(!N.ok)throw new Error("Failed to load loan");const _=await N.json();K(_);const k=null===(e=_.meta)||void 0===e?void 0:e.loan_product_id;if(k){const e=await fetch("".concat(Kt,"/wp/v2/loan-product/").concat(k,"?context=edit"),{headers:w,mode:"cors"});e.ok&&Z(await e.json())}let S=tn(null===(t=_.meta)||void 0===t?void 0:t.borrower_id)||tn(_.borrower)||tn(null===(n=_.meta)||void 0===n?void 0:n.borrower)||tn(null===(r=_.meta)||void 0===r?void 0:r.borrower_profile);var x,g,b,y;if(S||(S=tn(null===(x=_.fields)||void 0===x?void 0:x.borrower_id)||tn(null===(g=_.acf)||void 0===g?void 0:g.borrower_id)||tn(null===(b=_.fields)||void 0===b?void 0:b.borrower)||tn(null===(y=_.acf)||void 0===y?void 0:y.borrower)),S||!_.borrower||"object"!==typeof _.borrower||Array.isArray(_.borrower)||(S=tn(_.borrower.id)||tn(_.borrower.ID)),S)try{const e=await fetch("".concat(Kt,"/wp/v2/borrower-profile/").concat(S,"?context=edit"),{headers:w,mode:"cors"});if(e.ok){const t=await e.json();te(t)}else{const t=await e.text();console.error("LoansDetail: Failed to fetch borrower profile:",e.status,e.statusText,t)}}catch(v){console.error("LoansDetail: Error fetching borrower profile:",v)}else console.warn("LoansDetail: No borrower ID found in loan data. Loan meta:",_.meta);const C=en(_.co_borrower_status)||en(null===(a=_.meta)||void 0===a?void 0:a.co_borrower_status),L=tn(null===(l=_.meta)||void 0===l?void 0:l.co_borrower_id)||tn(_.co_borrower)||tn(null===(o=_.meta)||void 0===o?void 0:o.co_borrower);if(C&&/^yes$/i.test(String(C))&&L){const e=await fetch("".concat(Kt,"/wp/v2/borrower-profile/").concat(L,"?context=edit"),{headers:w,mode:"cors"});e.ok&&re(await e.json())}const E=(null===(s=_.meta)||void 0===s?void 0:s.bank_statement)||(null===(i=_.fields)||void 0===i?void 0:i.bank_statement)||(null===(c=_.acf)||void 0===c?void 0:c.bank_statement)||_.bank_statement;let A=[];if(Array.isArray(E))A=E.map(tn).filter(Boolean);else if("string"===typeof E)try{const e=JSON.parse(E);Array.isArray(e)&&(A=e.map(tn).filter(Boolean))}catch(j){A=E.split(",").map(e=>e.trim()).map(tn).filter(Boolean)}else"number"===typeof E&&(A=[String(E)]);if(A.length){const e=[];for(const t of A){const n=await fetch("".concat(Kt,"/wp/v2/media/").concat(t),{headers:w,mode:"cors"});n.ok&&e.push(await n.json())}ce(e)}const P=tn((null===(d=_.meta)||void 0===d?void 0:d.collateral)||(null===(u=_.fields)||void 0===u?void 0:u.collateral)||(null===(m=_.acf)||void 0===m?void 0:m.collateral)||_.collateral);if(P){const e=await fetch("".concat(Kt,"/wp/v2/media/").concat(P),{headers:w,mode:"cors"});e.ok&&ue(await e.json())}const M=tn((null===(p=_.meta)||void 0===p?void 0:p.loan_contract)||(null===(h=_.fields)||void 0===h?void 0:h.loan_contract)||(null===(f=_.acf)||void 0===f?void 0:f.loan_contract)||_.loan_contract);if(M){const e=await fetch("".concat(Kt,"/wp/v2/media/").concat(M),{headers:w,mode:"cors"});e.ok&&pe(await e.json())}}catch(_n){se(_n.message||"Failed to load")}finally{le(!1)}}})()},[H,U]);const[he,fe]=(0,r.useState)([]),[xe,ge]=(0,r.useState)(!1),[be,ye]=(0,r.useState)([]),[ve,je]=(0,r.useState)(!1),[we,Ne]=(0,r.useState)(!1),[_e,ke]=(0,r.useState)(null),[Se,Ce]=(0,r.useState)({paid_interest:"",paid_principles:"",payment_date:(new Date).toISOString().split("T")[0],repayment_note:""}),[Le,Ee]=(0,r.useState)({paid_interest:""}),[Ae,Pe]=(0,r.useState)(!1);(0,r.useEffect)(()=>{(async()=>{if(Y&&H&&U){ge(!0);try{const e="".concat(Kt,"/echovault/v2/get-repayment-schedule?loan_id=").concat(U),t=await fetch(e,{method:"GET",headers:{Authorization:H?"Bearer ".concat(H):"",Accept:"application/json"},mode:"cors",credentials:"omit"});if(t.ok){const e=await t.json();if(e.success&&e.schedule&&e.schedule.length>0)return void fe(e.schedule)}fe([])}catch(oe){console.warn("Error fetching repayment schedule:",oe),fe([])}finally{ge(!1)}}else fe([])})();(async()=>{if(U&&H){je(!0);try{const e="".concat(Kt,"/echovault/v2/get-payment-history?loan_id=").concat(U),t=await fetch(e,{method:"GET",headers:{Authorization:H?"Bearer ".concat(H):"",Accept:"application/json"},mode:"cors",credentials:"omit"});if(t.ok){const e=await t.json();if(e.success&&e.history)return void ye(e.history)}ye([])}catch(oe){console.warn("Error fetching payment history:",oe),ye([])}finally{je(!1)}}else ye([])})()},[Y,H,U]);const Me=e=>{ke(e);let t=null;he&&he.length>0&&he.forEach(e=>{if(e.paid_date&&""!==e.paid_date.trim()&&"-"!==e.paid_date){const n=new Date(e.paid_date);(!t||n>t)&&(t=n)}});let n=new Date;if(t){const e=new Date(t);e.setDate(e.getDate()+1),e>n&&(n=e)}Ce({paid_interest:"",paid_principles:"",payment_date:n.toISOString().split("T")[0],repayment_note:""}),Ne(!0)};if(ae)return(0,Et.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-12 text-center",children:[(0,Et.jsx)("div",{className:"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,Et.jsxs)("svg",{className:"animate-spin h-12 w-12 text-blue-600",fill:"none",viewBox:"0 0 24 24",children:[(0,Et.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,Et.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}),(0,Et.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Loading loan details..."}),(0,Et.jsx)("p",{className:"text-gray-500",children:"Please wait while we fetch the loan and related profiles."})]});if(oe)return(0,Et.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:oe});if(!Y)return null;const Be=Y.loan_currency||(null===(t=Y.meta)||void 0===t?void 0:t.loan_currency)||(null===X||void 0===X?void 0:X.currency)||"AUD";let Fe=tn(null===Y||void 0===Y||null===(n=Y.meta)||void 0===n?void 0:n.borrower_id)||tn(null===Y||void 0===Y?void 0:Y.borrower)||tn(null===Y||void 0===Y||null===(a=Y.meta)||void 0===a?void 0:a.borrower)||tn(null===Y||void 0===Y||null===(l=Y.meta)||void 0===l?void 0:l.borrower_profile);var Te,De,ze,Re;Fe||(Fe=tn(null===Y||void 0===Y||null===(Te=Y.fields)||void 0===Te?void 0:Te.borrower_id)||tn(null===Y||void 0===Y||null===(De=Y.acf)||void 0===De?void 0:De.borrower_id)||tn(null===Y||void 0===Y||null===(ze=Y.fields)||void 0===ze?void 0:ze.borrower)||tn(null===Y||void 0===Y||null===(Re=Y.acf)||void 0===Re?void 0:Re.borrower));Fe||null===Y||void 0===Y||!Y.borrower||"object"!==typeof Y.borrower||Array.isArray(Y.borrower)||(Fe=tn(Y.borrower.id)||tn(Y.borrower.ID));const Oe=tn(null===Y||void 0===Y||null===(o=Y.meta)||void 0===o?void 0:o.co_borrower_id)||tn(null===Y||void 0===Y?void 0:Y.co_borrower)||tn(null===Y||void 0===Y||null===(s=Y.meta)||void 0===s?void 0:s.co_borrower),Ie=(Y.loan_status||(null===(i=Y.meta)||void 0===i?void 0:i.loan_status)||Y.status||"").toString(),We=Ie.toLowerCase();let Ve="Unknown";Ve="publish"===We?"Active":"draft"===We?"Draft":["pending","active","inactive","closed","rejected"].includes(We)?We.charAt(0).toUpperCase()+We.slice(1):Ie?Ie.charAt(0).toUpperCase()+Ie.slice(1):"-";const He=/^active$/i.test(Ve)?"bg-green-100 text-green-800":/^pending$/i.test(Ve)?"bg-blue-100 text-blue-800":/^rejected$/i.test(Ve)?"bg-red-100 text-red-800":/^inactive$/i.test(Ve)?"bg-gray-200 text-gray-800":/^closed$/i.test(Ve)?"bg-purple-100 text-purple-800":/^draft$/i.test(Ve)?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800";return(0,Et.jsxs)("div",{className:"w-full max-w-full overflow-x-hidden",children:[(0,Et.jsxs)("div",{className:"mb-6 flex items-center justify-between",children:[(0,Et.jsxs)("div",{className:"flex items-center",children:[(0,Et.jsx)("button",{onClick:q,className:"mr-4 p-2 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-100",title:"Back",children:(0,Et.jsx)("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),(0,Et.jsxs)("div",{children:[(0,Et.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Et.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Loan Details"}),(0,Et.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full ".concat(He),children:Ve})]}),(0,Et.jsx)("p",{className:"text-gray-600",children:Y.loan_id||(null===(c=Y.meta)||void 0===c?void 0:c.loan_id)})]})]}),(0,Et.jsx)("div",{children:Y&&"draft"===Ve.toLowerCase()&&G&&(0,Et.jsxs)("button",{onClick:()=>G(Y),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-medium flex items-center space-x-2",children:[(0,Et.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),(0,Et.jsx)("span",{children:"Edit Draft"})]})})]}),(0,Et.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 mb-6",children:(0,Et.jsx)("div",{className:"border-b border-gray-200",children:(0,Et.jsx)("nav",{className:"flex space-x-8 px-6",children:Zt.map(e=>(0,Et.jsx)("button",{type:"button",onClick:()=>J(e),className:"py-4 px-1 border-b-2 font-medium text-sm ".concat(Q===e?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:e},e))})})}),"Summary"===Q&&(0,Et.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,Et.jsxs)("div",{className:"p-4 border rounded-lg bg-white",children:[(0,Et.jsx)("div",{className:"font-semibold text-gray-900 mb-2",children:"Loan Summary"}),(0,Et.jsxs)("div",{className:"grid grid-cols-2 gap-y-1 text-sm",children:[(0,Et.jsx)("div",{className:"text-gray-500",children:"Loan ID"}),(0,Et.jsx)("div",{className:"text-gray-900 font-medium",children:Y.loan_id||(null===(d=Y.meta)||void 0===d?void 0:d.loan_id)}),(0,Et.jsx)("div",{className:"text-gray-500",children:"Product"}),(0,Et.jsx)("div",{className:"text-gray-900 font-medium",children:Y.loan_product||(null===(m=Y.meta)||void 0===m?void 0:m.loan_product_name)||"-"}),(0,Et.jsx)("div",{className:"text-gray-500",children:"Interest"}),(0,Et.jsxs)("div",{className:"text-gray-900 font-medium",children:[Y.loan_interest||(null===(p=Y.meta)||void 0===p?void 0:p.loan_interest),"%"]}),(0,Et.jsx)("div",{className:"text-gray-500",children:"Term"}),(0,Et.jsxs)("div",{className:"text-gray-900 font-medium",children:[Y.loan_term||(null===(h=Y.meta)||void 0===h?void 0:h.loan_term)," months"]}),(0,Et.jsx)("div",{className:"text-gray-500",children:"Amount"}),(0,Et.jsxs)("div",{className:"text-gray-900 font-medium",children:[Xt(Be),Y.loan_amount||(null===(f=Y.meta)||void 0===f?void 0:f.loan_amount)]}),(0,Et.jsx)("div",{className:"text-gray-500",children:"Method"}),(0,Et.jsx)("div",{className:"text-gray-900 font-medium",children:Y.repayment_method||(null===(x=Y.meta)||void 0===x?void 0:x.repayment_method)}),(0,Et.jsx)("div",{className:"text-gray-500",children:"Frequency"}),(0,Et.jsx)("div",{className:"text-gray-900 font-medium",children:Y.repayment_frequency||(null===(g=Y.meta)||void 0===g?void 0:g.repayment_frequency)}),(0,Et.jsx)("div",{className:"text-gray-500",children:"Type"}),(0,Et.jsx)("div",{className:"text-gray-900 font-medium",children:Y.repayment_type||(null===(b=Y.meta)||void 0===b?void 0:b.repayment_type)||"-"}),(0,Et.jsx)("div",{className:"text-gray-500",children:"Start"}),(0,Et.jsx)("div",{className:"text-gray-900 font-medium",children:Y.start_date||(null===(y=Y.meta)||void 0===y?void 0:y.start_date)}),(0,Et.jsx)("div",{className:"text-gray-500",children:"End"}),(0,Et.jsx)("div",{className:"text-gray-900 font-medium",children:Y.end_date||(null===(v=Y.meta)||void 0===v?void 0:v.end_date)}),(0,Et.jsx)("div",{className:"text-gray-500",children:"Repayment Status"}),(0,Et.jsx)("div",{className:"text-gray-900 font-medium",children:(e=>{let t="Pending",n="bg-gray-100 text-gray-800";const r=Y.end_date||(null===(e=Y.meta)||void 0===e?void 0:e.end_date);if(r)try{const e=new Date;e.setHours(0,0,0,0);const a=new Date(r);a.setHours(0,0,0,0),a<e?(t="Overdue",n="bg-red-100 text-red-800"):(t="Pending",n="bg-gray-100 text-gray-800")}catch(_n){t="Pending",n="bg-gray-100 text-gray-800"}return(0,Et.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded text-xs font-medium ".concat(n),children:t})})()})]})]}),(0,Et.jsxs)("div",{className:"p-4 border rounded-lg bg-white",children:[(0,Et.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,Et.jsx)("div",{className:"font-semibold text-gray-900",children:"Borrower"}),Fe&&$&&(0,Et.jsx)("button",{onClick:()=>$(Fe),className:"inline-flex items-center px-2 py-1 text-xs font-medium text-blue-700 bg-blue-50 hover:bg-blue-100 border border-blue-200 rounded",children:"View Profile"})]}),(0,Et.jsx)("div",{className:"text-sm text-gray-900 font-medium",children:Y.borrower_name&&String(Y.borrower_name).trim()||en(null===(j=Y.meta)||void 0===j?void 0:j.borrower_name)||[en(null===(w=Y.meta)||void 0===w?void 0:w.borrower_first_name),en(null===(N=Y.meta)||void 0===N?void 0:N.borrower_last_name)].filter(Boolean).join(" ")||[en(null===ee||void 0===ee?void 0:ee.first_name),en(null===ee||void 0===ee?void 0:ee.last_name)].filter(Boolean).join(" ")||en(null===ee||void 0===ee||null===(_=ee.title)||void 0===_?void 0:_.rendered)||"-"}),(0,Et.jsx)("div",{className:"text-xs text-gray-600",children:en(Y.borrower_email)||en(null===(k=Y.meta)||void 0===k?void 0:k.borrower_email)||en(null===ee||void 0===ee?void 0:ee.email_address)||""}),(0,Et.jsx)("div",{className:"text-xs text-gray-600",children:en(Y.borrower_phone)||en(null===(S=Y.meta)||void 0===S?void 0:S.borrower_phone)||en(null===ee||void 0===ee?void 0:ee.mobile_number)||""}),(0,Et.jsxs)("div",{className:"grid grid-cols-1 gap-1 text-xs text-gray-600 mt-2",children:[(en(null===ee||void 0===ee?void 0:ee.date_of_birth)||en(null===(C=Y.meta)||void 0===C?void 0:C.borrower_date_of_birth))&&(0,Et.jsxs)("div",{children:[(0,Et.jsx)("span",{className:"text-gray-500",children:"DOB: "}),en(null===ee||void 0===ee?void 0:ee.date_of_birth)||en(null===(L=Y.meta)||void 0===L?void 0:L.borrower_date_of_birth)]}),(en(null===ee||void 0===ee?void 0:ee.home_address)||en(null===(E=Y.meta)||void 0===E?void 0:E.borrower_home_address)||en(null===(A=Y.meta)||void 0===A?void 0:A.borrower_address))&&(0,Et.jsxs)("div",{children:[(0,Et.jsx)("span",{className:"text-gray-500",children:"Address: "}),en(null===ee||void 0===ee?void 0:ee.home_address)||en(null===(P=Y.meta)||void 0===P?void 0:P.borrower_home_address)||en(null===(M=Y.meta)||void 0===M?void 0:M.borrower_address)]}),(en(null===ee||void 0===ee?void 0:ee.employment_status)||en(null===(B=Y.meta)||void 0===B?void 0:B.borrower_employment_status))&&(0,Et.jsxs)("div",{children:[(0,Et.jsx)("span",{className:"text-gray-500",children:"Employment: "}),en(null===ee||void 0===ee?void 0:ee.employment_status)||en(null===(F=Y.meta)||void 0===F?void 0:F.borrower_employment_status)]})]})]}),(0,Et.jsxs)("div",{className:"p-4 border rounded-lg bg-white",children:[(0,Et.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,Et.jsx)("div",{className:"font-semibold text-gray-900",children:"Co-borrower"}),Oe&&$&&(0,Et.jsx)("button",{onClick:()=>$(Oe),className:"inline-flex items-center px-2 py-1 text-xs font-medium text-blue-700 bg-blue-50 hover:bg-blue-100 border border-blue-200 rounded",children:"View Profile"})]}),ne?(0,Et.jsxs)(Et.Fragment,{children:[(0,Et.jsx)("div",{className:"text-sm text-gray-900 font-medium",children:[en(ne.first_name),en(ne.last_name)].filter(Boolean).join(" ")||en(null===ne||void 0===ne||null===(T=ne.title)||void 0===T?void 0:T.rendered)||"-"}),(0,Et.jsx)("div",{className:"text-xs text-gray-600",children:en(null===ne||void 0===ne?void 0:ne.email_address)||""}),(0,Et.jsx)("div",{className:"text-xs text-gray-600",children:en(null===ne||void 0===ne?void 0:ne.mobile_number)||""}),(0,Et.jsxs)("div",{className:"grid grid-cols-1 gap-1 text-xs text-gray-600 mt-2",children:[en(null===ne||void 0===ne?void 0:ne.date_of_birth)&&(0,Et.jsxs)("div",{children:[(0,Et.jsx)("span",{className:"text-gray-500",children:"DOB: "}),en(null===ne||void 0===ne?void 0:ne.date_of_birth)]}),en(null===ne||void 0===ne?void 0:ne.home_address)&&(0,Et.jsxs)("div",{children:[(0,Et.jsx)("span",{className:"text-gray-500",children:"Address: "}),en(null===ne||void 0===ne?void 0:ne.home_address)]}),en(null===ne||void 0===ne?void 0:ne.employment_status)&&(0,Et.jsxs)("div",{children:[(0,Et.jsx)("span",{className:"text-gray-500",children:"Employment: "}),en(null===ne||void 0===ne?void 0:ne.employment_status)]})]})]}):(0,Et.jsx)("div",{className:"text-sm text-gray-500",children:"No co-borrower"})]}),(0,Et.jsxs)("div",{className:"p-4 border rounded-lg bg-white",children:[(0,Et.jsx)("div",{className:"font-semibold text-gray-900 mb-2",children:"Accounts"}),(0,Et.jsxs)("div",{className:"text-sm",children:[(0,Et.jsx)("div",{className:"text-gray-500",children:"Disbursement"}),(0,Et.jsx)("div",{className:"text-gray-900 font-medium break-all",children:Y.loan_disbursement_account||"-"}),(0,Et.jsx)("div",{className:"mt-2 text-gray-500",children:"Repayment"}),(0,Et.jsx)("div",{className:"text-gray-900 font-medium break-all",children:Y.loan_repayment_account||"-"})]})]})]}),"Repayment Schedule"===Q&&(0,Et.jsxs)("div",{className:"bg-white rounded-lg border p-4 overflow-hidden",children:[(0,Et.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-3 gap-3",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Repayment Schedule"}),Y&&(Y.repayment_frequency||(null===(D=Y.meta)||void 0===D?void 0:D.repayment_frequency))&&(0,Et.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:["Scheduled by ",(0,Et.jsx)("span",{className:"font-medium text-gray-800",children:Array.isArray(Y.repayment_frequency)?Y.repayment_frequency[0]:Y.repayment_frequency||(null===(z=Y.meta)||void 0===z?void 0:z.repayment_frequency)||"Monthly"})]})]}),(0,Et.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[he&&he.length>0&&(0,Et.jsx)("button",{type:"button",onClick:()=>{const e=he.find(e=>"Pending"===e.repayment_status);e?Me(e):he.length>0&&Me(he[0])},className:"px-3 py-1.5 text-sm bg-blue-600 text-white rounded hover:bg-blue-700 font-medium disabled:opacity-50 disabled:cursor-not-allowed",title:"Register Payment",children:"Register Payment"}),(0,Et.jsx)("button",{type:"button",onClick:()=>window.print(),disabled:!he||0===he.length,className:"px-3 py-1.5 text-sm rounded border border-gray-300 text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",title:"Print schedule",children:"Print"}),(0,Et.jsx)("button",{type:"button",onClick:()=>{var e;if(!he||0===he.length)return;const t=[["ID","Segment Start","Segment End","Days","Start Balance","Accrued Interest","Paid Interest","Paid Principal","Total Payment","Outstanding Interest","Remain Balance","Status","Note"],...he.map(e=>[e.id,e.segment_start||"",e.segment_end||"",e.loan_days||0,(e.start_balance||0).toFixed(2),(e.accrued_interest||0).toFixed(2),(e.paid_interest||0).toFixed(2),(e.paid_principles||0).toFixed(2),(e.total_payment||0).toFixed(2),(e.outstanding_interest||0).toFixed(2),(e.remain_balance||0).toFixed(2),e.repayment_status||"Pending",e.repayment_note||""])].map(e=>e.join(",")).join("\n"),n=new Blob([t],{type:"text/csv;charset=utf-8;"}),r=URL.createObjectURL(n),a=document.createElement("a");a.href=r;const l="repayment_schedule_".concat((null===Y||void 0===Y?void 0:Y.loan_id)||(null===Y||void 0===Y||null===(e=Y.meta)||void 0===e?void 0:e.loan_id)||"loan",".csv");a.setAttribute("download",l),document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(r)},disabled:!he||0===he.length,className:"px-3 py-1.5 text-sm rounded border border-gray-300 text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",title:"Download CSV",children:"Download CSV"})]})]}),xe?(0,Et.jsx)("div",{className:"text-gray-600 text-sm py-4 text-center",children:(0,Et.jsxs)("div",{className:"inline-flex items-center",children:[(0,Et.jsxs)("svg",{className:"animate-spin h-5 w-5 text-blue-600 mr-2",fill:"none",viewBox:"0 0 24 24",children:[(0,Et.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,Et.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Calculating schedule..."]})}):he&&0!==he.length?(0,Et.jsx)("div",{className:"w-full border border-gray-200 rounded",style:{maxHeight:"600px",overflow:"auto"},children:(0,Et.jsxs)("table",{className:"divide-y divide-gray-200 text-xs w-full",style:{minWidth:"1200px"},children:[(0,Et.jsx)("thead",{className:"bg-gray-50 sticky top-0 z-10",children:(0,Et.jsxs)("tr",{children:[(0,Et.jsx)("th",{className:"px-2 py-2 text-center",children:"#"}),(0,Et.jsx)("th",{className:"px-2 py-2 text-left",children:"Start Date"}),(0,Et.jsx)("th",{className:"px-2 py-2 text-left",children:"End Date"}),(0,Et.jsx)("th",{className:"px-2 py-2 text-left",children:"Paid Date"}),(0,Et.jsx)("th",{className:"px-2 py-2 text-center",children:"Days"}),(0,Et.jsx)("th",{className:"px-2 py-2 text-right",children:"Start Balance"}),(0,Et.jsx)("th",{className:"px-2 py-2 text-right",children:"Interest"}),(0,Et.jsx)("th",{className:"px-2 py-2 text-right",children:"Principal"}),(0,Et.jsx)("th",{className:"px-2 py-2 text-right",children:"Total Payment"}),(0,Et.jsx)("th",{className:"px-2 py-2 text-right",children:"Outstanding Interest"}),(0,Et.jsx)("th",{className:"px-2 py-2 text-right",children:"Paid Interest"}),(0,Et.jsx)("th",{className:"px-2 py-2 text-right",children:"Paid Principal"}),(0,Et.jsx)("th",{className:"px-2 py-2 text-right",children:"Paid Total Payment"}),(0,Et.jsx)("th",{className:"px-2 py-2 text-right",children:"Remain Balance"}),(0,Et.jsx)("th",{className:"px-2 py-2 text-center",children:"Status"}),(0,Et.jsx)("th",{className:"px-3 py-2 text-left min-w-[250px] w-64",children:"Note"})]})}),(0,Et.jsx)("tbody",{className:"divide-y divide-gray-100",children:he.map((e,t)=>{const n=String(e.repayment_status||"Pending").trim();let r="Pending",a="bg-gray-100 text-gray-800";e.total_payment&&parseFloat(e.total_payment)>0||e.paid_date&&""!==e.paid_date.trim()&&"-"!==e.paid_date||e.paid_interest&&parseFloat(e.paid_interest)>0||e.paid_principles&&parseFloat(e.paid_principles)>0||"paid"===n.toLowerCase()?(r="Paid",a="bg-green-100 text-green-800"):(r="Pending",a="bg-gray-100 text-gray-800");const l=void 0!==e.scheduled_principal?e.scheduled_principal||0:(e.start_balance||0)-(e.remain_balance||0),o=void 0!==e.scheduled_total_payment?e.scheduled_total_payment||0:(e.accrued_interest||0)+l;return(0,Et.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,Et.jsx)("td",{className:"px-2 py-1 text-center",children:t+1}),(0,Et.jsx)("td",{className:"px-2 py-1",children:e.segment_start||"-"}),(0,Et.jsx)("td",{className:"px-2 py-1",children:e.segment_end||"-"}),(0,Et.jsx)("td",{className:"px-2 py-1",children:e.paid_date||"-"}),(0,Et.jsx)("td",{className:"px-2 py-1 text-center",children:e.loan_days||0}),(0,Et.jsxs)("td",{className:"px-2 py-1 text-right",children:[Xt(Be),(e.start_balance||0).toFixed(2)]}),(0,Et.jsxs)("td",{className:"px-2 py-1 text-right",children:[Xt(Be),(e.accrued_interest||0).toFixed(2)]}),(0,Et.jsxs)("td",{className:"px-2 py-1 text-right",children:[Xt(Be),l.toFixed(2)]}),(0,Et.jsxs)("td",{className:"px-2 py-1 text-right font-medium",children:[Xt(Be),o.toFixed(2)]}),(0,Et.jsxs)("td",{className:"px-2 py-1 text-right",children:[Xt(Be),(e.outstanding_interest||0).toFixed(2)]}),(0,Et.jsxs)("td",{className:"px-2 py-1 text-right",children:[Xt(Be),(e.paid_interest||0).toFixed(2)]}),(0,Et.jsxs)("td",{className:"px-2 py-1 text-right",children:[Xt(Be),(e.paid_principles||0).toFixed(2)]}),(0,Et.jsxs)("td",{className:"px-2 py-1 text-right font-medium",children:[Xt(Be),(e.total_payment||0).toFixed(2)]}),(0,Et.jsxs)("td",{className:"px-2 py-1 text-right font-medium",children:[Xt(Be),(e.remain_balance||0).toFixed(2)]}),(0,Et.jsx)("td",{className:"px-2 py-1 text-center",children:(0,Et.jsx)("span",{className:"px-2 py-1 rounded text-xs font-medium ".concat(a),children:r})}),(0,Et.jsx)("td",{className:"px-3 py-1 text-xs text-gray-600 min-w-[250px] w-64 break-words",children:e.repayment_note||"-"})]},e.id)})}),(0,Et.jsx)("tfoot",{className:"bg-gray-100 border-t-2 border-gray-300 font-semibold",children:(0,Et.jsxs)("tr",{children:[(0,Et.jsx)("td",{className:"px-2 py-2 text-center",colSpan:"5",children:"TOTAL"}),(0,Et.jsxs)("td",{className:"px-2 py-2 text-right",children:[Xt(Be),((null===(R=he[0])||void 0===R?void 0:R.start_balance)||0).toFixed(2)]}),(0,Et.jsxs)("td",{className:"px-2 py-2 text-right",children:[Xt(Be),he.reduce((e,t)=>e+(parseFloat(t.accrued_interest)||0),0).toFixed(2)]}),(0,Et.jsxs)("td",{className:"px-2 py-2 text-right",children:[Xt(Be),he.reduce((e,t)=>e+(void 0!==t.scheduled_principal?t.scheduled_principal||0:(t.start_balance||0)-(t.remain_balance||0)),0).toFixed(2)]}),(0,Et.jsxs)("td",{className:"px-2 py-2 text-right",children:[Xt(Be),he.reduce((e,t)=>{const n=void 0!==t.scheduled_principal?t.scheduled_principal||0:(t.start_balance||0)-(t.remain_balance||0);return e+(void 0!==t.scheduled_total_payment?t.scheduled_total_payment||0:(t.accrued_interest||0)+n)},0).toFixed(2)]}),(0,Et.jsxs)("td",{className:"px-2 py-2 text-right",children:[Xt(Be),he.reduce((e,t)=>e+(parseFloat(t.outstanding_interest)||0),0).toFixed(2)]}),(0,Et.jsxs)("td",{className:"px-2 py-2 text-right",children:[Xt(Be),he.reduce((e,t)=>e+(parseFloat(t.paid_interest)||0),0).toFixed(2)]}),(0,Et.jsxs)("td",{className:"px-2 py-2 text-right",children:[Xt(Be),he.reduce((e,t)=>e+(parseFloat(t.paid_principles)||0),0).toFixed(2)]}),(0,Et.jsxs)("td",{className:"px-2 py-2 text-right",children:[Xt(Be),he.reduce((e,t)=>e+(parseFloat(t.total_payment)||0),0).toFixed(2)]}),(0,Et.jsxs)("td",{className:"px-2 py-2 text-right",children:[Xt(Be),((null===(O=he[he.length-1])||void 0===O?void 0:O.remain_balance)||0).toFixed(2)]}),(0,Et.jsx)("td",{className:"px-2 py-2 text-center",colSpan:"2"})]})})]})}):(0,Et.jsxs)("div",{className:"text-gray-600 text-sm py-4 text-center",children:[(0,Et.jsx)("p",{children:"Repayment schedule will be generated automatically when the loan is created."}),(0,Et.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"If the schedule doesn't appear, please refresh the page."})]}),(0,Et.jsxs)("div",{className:"mt-6 border-t pt-4",children:[(0,Et.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-3 gap-3",children:[(0,Et.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Payment History"}),(0,Et.jsx)("button",{type:"button",onClick:()=>{if(!be||0===be.length)return;const e=[["ID","Segment ID","Segment Start","Segment End","Payment Date","Loan Days","Paid Loan Days","Paid Interest","Paid Principal","Total Payment","Balance Before","Balance After","Outstanding Interest Before","Outstanding Interest After","Note","Created At"],...be.map(e=>[e.id,e.segment_id||"",e.segment_start||"",e.segment_end||"",e.payment_date||"",e.loan_days||0,e.paid_loan_days||0,(e.paid_interest||0).toFixed(2),(e.paid_principal||0).toFixed(2),(e.total_payment||0).toFixed(2),(e.balance_before||0).toFixed(2),(e.balance_after||0).toFixed(2),(e.outstanding_interest_before||0).toFixed(2),(e.outstanding_interest_after||0).toFixed(2),e.note||"",e.created_at||""])].map(e=>e.map(e=>'"'.concat(String(e).replace(/"/g,'""'),'"')).join(",")).join("\n"),t=new Blob([e],{type:"text/csv"}),n=window.URL.createObjectURL(t),r=document.createElement("a");r.href=n,r.download="payment_history_loan_".concat(U,"_").concat((new Date).toISOString().split("T")[0],".csv"),document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(n)},disabled:!be||0===be.length,className:"px-3 py-1.5 text-sm rounded border border-gray-300 text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",title:"Download Payment History CSV",children:"Download Payment History CSV"})]}),ve?(0,Et.jsx)("div",{className:"text-center py-4 text-gray-500",children:"Loading payment history..."}):be&&be.length>0?(0,Et.jsx)("div",{className:"w-full border border-gray-200 rounded",style:{maxHeight:"400px",overflow:"auto"},children:(0,Et.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 text-xs",children:[(0,Et.jsx)("thead",{className:"bg-gray-50 sticky top-0 z-10",children:(0,Et.jsxs)("tr",{children:[(0,Et.jsx)("th",{className:"px-2 py-2 text-left font-semibold text-gray-700",children:"ID"}),(0,Et.jsx)("th",{className:"px-2 py-2 text-left font-semibold text-gray-700",children:"Segment Start"}),(0,Et.jsx)("th",{className:"px-2 py-2 text-left font-semibold text-gray-700",children:"Segment End"}),(0,Et.jsx)("th",{className:"px-2 py-2 text-left font-semibold text-gray-700",children:"Payment Date"}),(0,Et.jsx)("th",{className:"px-2 py-2 text-center font-semibold text-gray-700",children:"Loan Days"}),(0,Et.jsx)("th",{className:"px-2 py-2 text-center font-semibold text-gray-700",children:"Paid Loan Days"}),(0,Et.jsx)("th",{className:"px-2 py-2 text-right font-semibold text-gray-700",children:"Paid Interest"}),(0,Et.jsx)("th",{className:"px-2 py-2 text-right font-semibold text-gray-700",children:"Paid Principal"}),(0,Et.jsx)("th",{className:"px-2 py-2 text-right font-semibold text-gray-700",children:"Total Payment"}),(0,Et.jsx)("th",{className:"px-2 py-2 text-right font-semibold text-gray-700",children:"Balance Before"}),(0,Et.jsx)("th",{className:"px-2 py-2 text-right font-semibold text-gray-700",children:"Balance After"}),(0,Et.jsx)("th",{className:"px-2 py-2 text-right font-semibold text-gray-700",children:"Outstanding Int. Before"}),(0,Et.jsx)("th",{className:"px-2 py-2 text-right font-semibold text-gray-700",children:"Outstanding Int. After"}),(0,Et.jsx)("th",{className:"px-2 py-2 text-left font-semibold text-gray-700",children:"Note"}),(0,Et.jsx)("th",{className:"px-2 py-2 text-left font-semibold text-gray-700",children:"Created At"})]})}),(0,Et.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:be.map((e,t)=>(0,Et.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,Et.jsx)("td",{className:"px-2 py-1",children:e.id}),(0,Et.jsx)("td",{className:"px-2 py-1",children:e.segment_start||"-"}),(0,Et.jsx)("td",{className:"px-2 py-1",children:e.segment_end||"-"}),(0,Et.jsx)("td",{className:"px-2 py-1",children:e.payment_date||"-"}),(0,Et.jsx)("td",{className:"px-2 py-1 text-center",children:e.loan_days||0}),(0,Et.jsx)("td",{className:"px-2 py-1 text-center",children:e.paid_loan_days||0}),(0,Et.jsxs)("td",{className:"px-2 py-1 text-right",children:[Xt(Be),(e.paid_interest||0).toFixed(2)]}),(0,Et.jsxs)("td",{className:"px-2 py-1 text-right",children:[Xt(Be),(e.paid_principal||0).toFixed(2)]}),(0,Et.jsxs)("td",{className:"px-2 py-1 text-right font-medium",children:[Xt(Be),(e.total_payment||0).toFixed(2)]}),(0,Et.jsxs)("td",{className:"px-2 py-1 text-right",children:[Xt(Be),(e.balance_before||0).toFixed(2)]}),(0,Et.jsxs)("td",{className:"px-2 py-1 text-right",children:[Xt(Be),(e.balance_after||0).toFixed(2)]}),(0,Et.jsxs)("td",{className:"px-2 py-1 text-right",children:[Xt(Be),(e.outstanding_interest_before||0).toFixed(2)]}),(0,Et.jsxs)("td",{className:"px-2 py-1 text-right",children:[Xt(Be),(e.outstanding_interest_after||0).toFixed(2)]}),(0,Et.jsx)("td",{className:"px-2 py-1 text-xs text-gray-600 min-w-[150px] break-words",children:e.note||"-"}),(0,Et.jsx)("td",{className:"px-2 py-1 text-xs text-gray-600",children:e.created_at?new Date(e.created_at).toLocaleString():"-"})]},e.id||t))})]})}):(0,Et.jsx)("div",{className:"text-center py-4 text-gray-500",children:"No payment history available"})]}),we&&_e&&(0,Et.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Et.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4 max-h-[90vh] flex flex-col",children:[(0,Et.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Register Payment"}),(0,Et.jsxs)("div",{className:"space-y-4 overflow-y-auto flex-1 pr-2",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Segment ID"}),(0,Et.jsx)("input",{type:"text",value:_e.id,disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50"})]}),(0,Et.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),(0,Et.jsx)("input",{type:"text",value:_e.segment_start||"-",disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50"})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),(0,Et.jsx)("input",{type:"text",value:_e.segment_end||"-",disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50"})]})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Repayment Status"}),(0,Et.jsx)("div",{className:"flex items-center",children:(()=>{const e=String(_e.repayment_status||"Pending").trim();let t="Pending",n="bg-gray-100 text-gray-800";return _e.total_payment&&parseFloat(_e.total_payment)>0||_e.paid_date&&""!==_e.paid_date.trim()&&"-"!==_e.paid_date||_e.paid_interest&&parseFloat(_e.paid_interest)>0||_e.paid_principles&&parseFloat(_e.paid_principles)>0||"paid"===e.toLowerCase()?(t="Paid",n="bg-green-100 text-green-800"):(t="Pending",n="bg-gray-100 text-gray-800"),(0,Et.jsx)("span",{className:"px-2 py-1 rounded text-xs font-medium ".concat(n),children:t})})()})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Remain Balance"}),(0,Et.jsx)("input",{type:"text",value:"".concat(Xt(Be)).concat((_e.remain_balance||0).toFixed(2)),disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50"})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Payment Date ",(0,Et.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Et.jsx)("input",{type:"date",value:Se.payment_date,onChange:e=>{const t=e.target.value;let n=null;if(he&&he.length>0&&he.forEach(e=>{if(e.paid_date&&""!==e.paid_date.trim()&&"-"!==e.paid_date){const t=new Date(e.paid_date);(!n||t>n)&&(n=t)}}),n){const e=n.toISOString().split("T")[0];if(t<=e)return void alert("Payment date must be after the last payment date (".concat(e,"). Please select a later date."))}Ce(u(u({},Se),{},{payment_date:t}))},min:(()=>{let e=null;if(he&&he.length>0&&he.forEach(t=>{if(t.paid_date&&""!==t.paid_date.trim()&&"-"!==t.paid_date){const n=new Date(t.paid_date);(!e||n>e)&&(e=n)}}),e){const t=new Date(e);return t.setDate(t.getDate()+1),t.toISOString().split("T")[0]}return""})(),className:"w-full px-3 py-2 border border-gray-300 rounded-md",required:!0}),(0,Et.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Required - Must be after last payment date"})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Interest (Accrued)"}),(0,Et.jsx)("input",{type:"text",value:(e=>{const t=parseFloat((null===Y||void 0===Y?void 0:Y.loan_interest)||(null===Y||void 0===Y||null===(e=Y.meta)||void 0===e?void 0:e.loan_interest)||0)/100,n=_e.segment_start,r=Se.payment_date||_e.paid_date||n,a=parseFloat(_e.start_balance||0);let l=0;if(r&&n&&t>0&&a>0)try{const e=new Date(r),o=new Date(n),s=o,i=e>=o?e:o,c=Math.max(0,Math.ceil((i-s)/864e5));l=a*t*(c/30)+parseFloat(_e.outstanding_interest||0)}catch(_n){console.warn("Error calculating interest:",_n),l=_e.accrued_interest||0}else l=_e.accrued_interest||0;return"".concat(Xt(Be)).concat(l.toFixed(2))})(),disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50"}),(0,Et.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Calculated from segment start to payment date based on loan days"})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Principal (Remaining)"}),(0,Et.jsx)("input",{type:"text",value:"".concat(Xt(Be)).concat((_e.remain_balance||0).toFixed(2)),disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50"}),(0,Et.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Current remaining balance to pay"})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Total Payment (Scheduled)"}),(0,Et.jsx)("input",{type:"text",value:"".concat(Xt(Be)).concat((_e.scheduled_total_payment||(_e.accrued_interest||0)+(_e.scheduled_principal||0)).toFixed(2)),disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50"})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Outstanding Interest"}),(0,Et.jsx)("input",{type:"text",value:"".concat(Xt(Be)).concat((_e.outstanding_interest||0).toFixed(2)),disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50"}),(0,Et.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Previous unpaid interest that should be settled"})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Interest Payment"}),(0,Et.jsx)("input",{type:"number",step:"0.01",min:"0",max:(e=>{const t=parseFloat((null===Y||void 0===Y?void 0:Y.loan_interest)||(null===Y||void 0===Y||null===(e=Y.meta)||void 0===e?void 0:e.loan_interest)||0)/100,n=_e.segment_start,r=Se.payment_date||_e.paid_date||n,a=parseFloat(_e.start_balance||0);let l=0;if(r&&n&&t>0&&a>0)try{const e=new Date(r),o=new Date(n),s=Math.max(0,Math.ceil((e-o)/864e5));l=a*t*(s/30)+parseFloat(_e.outstanding_interest||0)}catch(_n){l=parseFloat(_e.accrued_interest||0)+parseFloat(_e.outstanding_interest||0)}else l=parseFloat(_e.accrued_interest||0)+parseFloat(_e.outstanding_interest||0);return l.toFixed(2)})(),value:Se.paid_interest,onChange:e=>{var t;const n=parseFloat(e.target.value)||0,r=parseFloat((null===Y||void 0===Y?void 0:Y.loan_interest)||(null===Y||void 0===Y||null===(t=Y.meta)||void 0===t?void 0:t.loan_interest)||0)/100,a=_e.segment_start,l=Se.payment_date||_e.paid_date||a,o=parseFloat(_e.start_balance||0);let s=0;if(l&&a&&r>0&&o>0)try{const e=new Date(l),t=new Date(a),n=Math.max(0,Math.ceil((e-t)/864e5));s=o*r*(n/30)+parseFloat(_e.outstanding_interest||0)}catch(e){s=parseFloat(_e.accrued_interest||0)+parseFloat(_e.outstanding_interest||0)}else s=parseFloat(_e.accrued_interest||0)+parseFloat(_e.outstanding_interest||0);Ee(u(u({},Le),{},n>s?{paid_interest:"Interest payment cannot exceed the accrued interest amount (".concat(Xt(Be)).concat(s.toFixed(2),"). Please enter a value less than or equal to this amount.")}:{paid_interest:""})),Ce(u(u({},Se),{},{paid_interest:e.target.value}))},className:"w-full px-3 py-2 border rounded-md ".concat(Le.paid_interest?"border-red-500 focus:border-red-500 focus:ring-red-500":"border-gray-300"),placeholder:"Enter interest amount (0 if no interest)"}),Le.paid_interest?(0,Et.jsx)("p",{className:"text-xs text-red-500 mt-1",children:Le.paid_interest}):(0,Et.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Enter 0 if no interest payment, or amount up to accrued interest (",Xt(Be),(e=>{const t=parseFloat((null===Y||void 0===Y?void 0:Y.loan_interest)||(null===Y||void 0===Y||null===(e=Y.meta)||void 0===e?void 0:e.loan_interest)||0)/100,n=_e.segment_start,r=Se.payment_date||_e.paid_date||n,a=parseFloat(_e.start_balance||0);let l=0;if(r&&n&&t>0&&a>0)try{const e=new Date(r),o=new Date(n),s=Math.max(0,Math.ceil((e-o)/864e5));l=a*t*(s/30)+parseFloat(_e.outstanding_interest||0)}catch(_n){l=parseFloat(_e.accrued_interest||0)+parseFloat(_e.outstanding_interest||0)}else l=parseFloat(_e.accrued_interest||0)+parseFloat(_e.outstanding_interest||0);return l.toFixed(2)})(),")"]})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Principal Payment"}),(0,Et.jsx)("input",{type:"number",step:"0.01",min:"0",value:Se.paid_principles,onChange:e=>Ce(u(u({},Se),{},{paid_principles:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"Enter principal amount (0 if no principal)"}),(0,Et.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Enter 0 if no principal payment, or amount to pay"})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Note"}),(0,Et.jsx)("textarea",{value:Se.repayment_note,onChange:e=>Ce(u(u({},Se),{},{repayment_note:e.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"Payment notes..."})]})]}),(0,Et.jsxs)("div",{className:"flex justify-end gap-2 mt-6",children:[(0,Et.jsx)("button",{onClick:()=>{Ne(!1),ke(null)},className:"px-4 py-2 text-sm border border-gray-300 rounded-md hover:bg-gray-50",disabled:Ae,children:"Cancel"}),(0,Et.jsx)("button",{onClick:async()=>{if(!_e||!H||!U)return;if(!Se.payment_date)return void alert("Payment Date is required");const e=parseFloat(Se.paid_interest)||0,t=parseFloat(Se.paid_principles)||0;if(0!==e||0!==t){if(e>0){var n;const t=parseFloat((null===Y||void 0===Y?void 0:Y.loan_interest)||(null===Y||void 0===Y||null===(n=Y.meta)||void 0===n?void 0:n.loan_interest)||0)/100,r=_e.segment_start,a=Se.payment_date||_e.paid_date||r,l=parseFloat(_e.start_balance||0);let o=0;if(a&&r&&t>0&&l>0)try{const e=new Date(a),n=new Date(r),s=Math.max(0,Math.ceil((e-n)/864e5));o=l*t*(s/30)+parseFloat(_e.outstanding_interest||0)}catch(_n){o=parseFloat(_e.accrued_interest||0)+parseFloat(_e.outstanding_interest||0)}else o=parseFloat(_e.accrued_interest||0)+parseFloat(_e.outstanding_interest||0);if(e>o)return void Ee(u(u({},Le),{},{paid_interest:"Interest payment (".concat(Xt(Be)).concat(e.toFixed(2),") cannot exceed the accrued interest amount (").concat(Xt(Be)).concat(o.toFixed(2),"). Please enter a value less than or equal to this amount.")}))}Pe(!0);try{const n="".concat(Kt,"/echovault/v2/register-payment"),r=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json",Authorization:H?"Bearer ".concat(H):"",Accept:"application/json"},body:JSON.stringify({loan_id:parseInt(U),segment_id:parseInt(_e.id),paid_interest:e,paid_principles:t,payment_date:Se.payment_date,repayment_note:Se.repayment_note||""}),mode:"cors",credentials:"omit"});if(r.ok){const e=await r.json();if(e.success){if(e.schedule&&Array.isArray(e.schedule))fe(e.schedule);else{const e="".concat(Kt,"/echovault/v2/get-repayment-schedule?loan_id=").concat(U),t=await fetch(e,{method:"GET",headers:{Authorization:H?"Bearer ".concat(H):"",Accept:"application/json"},mode:"cors",credentials:"omit"});if(t.ok){const e=await t.json();e.success&&e.schedule&&fe(e.schedule)}}const t="".concat(Kt,"/echovault/v2/get-payment-history?loan_id=").concat(U),n=await fetch(t,{method:"GET",headers:{Authorization:H?"Bearer ".concat(H):"",Accept:"application/json"},mode:"cors",credentials:"omit"});if(n.ok){const e=await n.json();e.success&&e.history&&ye(e.history)}Ne(!1),ke(null),Ce({paid_interest:"",paid_principles:"",payment_date:(new Date).toISOString().split("T")[0],repayment_note:""}),Ee({paid_interest:""})}else alert("Error: "+(e.error||"Failed to register payment"))}else{const e=await r.json().catch(()=>({error:"Failed to register payment"}));alert("Error: "+(e.error||"Failed to register payment"))}}catch(oe){console.error("Error registering payment:",oe),alert("Error: "+oe.message)}finally{Pe(!1)}}else alert("Please enter at least an Interest or Principal payment amount")},disabled:Ae,className:"px-4 py-2 text-sm bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",children:Ae?"Registering...":"Register Payment"})]})]})})]}),"Bank Statements"===Q&&(0,Et.jsxs)("div",{className:"bg-white rounded-lg border p-6",children:[(0,Et.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Bank Statements"}),ie&&0!==ie.length?(0,Et.jsx)("ul",{className:"divide-y divide-gray-200 rounded-md border border-gray-200",children:ie.map(e=>{var t;return(0,Et.jsxs)("li",{className:"flex items-center justify-between px-3 py-2 text-sm",children:[(0,Et.jsxs)("div",{className:"min-w-0",children:[(0,Et.jsx)("div",{className:"truncate text-gray-900",children:(null===(t=e.title)||void 0===t?void 0:t.rendered)||e.filename||"File #".concat(e.id)}),(0,Et.jsx)("div",{className:"text-xs text-gray-500",children:e.mime_type||e.post_mime_type})]}),e.source_url&&(0,Et.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Et.jsx)("a",{href:e.source_url,target:"_blank",rel:"noopener noreferrer",className:"px-2 py-1 text-xs border border-gray-300 rounded hover:bg-gray-50",children:"View"}),(0,Et.jsx)("a",{href:e.source_url,target:"_blank",rel:"noopener noreferrer",download:!0,className:"px-2 py-1 text-xs border border-gray-300 rounded hover:bg-gray-50",children:"Download"})]})]},e.id)})}):(0,Et.jsx)("div",{className:"text-sm text-gray-600",children:"No bank statements uploaded."})]}),"Note"===Q&&(0,Et.jsxs)("div",{className:"bg-white rounded-lg border p-6",children:[(0,Et.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Note"}),(0,Et.jsx)("div",{className:"text-gray-900 whitespace-pre-wrap",children:(Y.loan_note||(null===(I=Y.meta)||void 0===I?void 0:I.loan_note)||"").toString().trim()||"No note saved."})]}),"Collateral"===Q&&(0,Et.jsxs)("div",{className:"bg-white rounded-lg border p-6",children:[(0,Et.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Collateral"}),de?(0,Et.jsx)("ul",{className:"divide-y divide-gray-200 rounded-md border border-gray-200",children:(0,Et.jsxs)("li",{className:"flex items-center justify-between px-3 py-2 text-sm",children:[(0,Et.jsxs)("div",{className:"min-w-0",children:[(0,Et.jsx)("div",{className:"truncate text-gray-900",children:(null===(W=de.title)||void 0===W?void 0:W.rendered)||de.filename||"File #".concat(de.id)}),(0,Et.jsx)("div",{className:"text-xs text-gray-500",children:de.mime_type||de.post_mime_type})]}),de.source_url&&(0,Et.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Et.jsx)("a",{href:de.source_url,target:"_blank",rel:"noopener noreferrer",className:"px-2 py-1 text-xs border border-gray-300 rounded hover:bg-gray-50",children:"View"}),(0,Et.jsx)("a",{href:de.source_url,target:"_blank",rel:"noopener noreferrer",download:!0,className:"px-2 py-1 text-xs border border-gray-300 rounded hover:bg-gray-50",children:"Download"})]})]})}):(0,Et.jsx)("div",{className:"text-sm text-gray-600",children:"No collateral uploaded."})]}),"Contract"===Q&&(0,Et.jsxs)("div",{className:"bg-white rounded-lg border p-6",children:[(0,Et.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Loan Contract"}),me?(0,Et.jsx)("ul",{className:"divide-y divide-gray-200 rounded-md border border-gray-200",children:(0,Et.jsxs)("li",{className:"flex items-center justify-between px-3 py-2 text-sm",children:[(0,Et.jsxs)("div",{className:"min-w-0",children:[(0,Et.jsx)("div",{className:"truncate text-gray-900",children:(null===(V=me.title)||void 0===V?void 0:V.rendered)||me.filename||"File #".concat(me.id)}),(0,Et.jsx)("div",{className:"text-xs text-gray-500",children:me.mime_type||me.post_mime_type})]}),me.source_url&&(0,Et.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Et.jsx)("a",{href:me.source_url,target:"_blank",rel:"noopener noreferrer",className:"px-2 py-1 text-xs border border-gray-300 rounded hover:bg-gray-50",children:"View"}),(0,Et.jsx)("a",{href:me.source_url,target:"_blank",rel:"noopener noreferrer",download:!0,className:"px-2 py-1 text-xs border border-gray-300 rounded hover:bg-gray-50",children:"Download"})]})]})}):(0,Et.jsx)("div",{className:"text-sm text-gray-600",children:"No loan contract uploaded."})]}),"Summary"!==Q&&"Repayment Schedule"!==Q&&"Note"!==Q&&"Bank Statements"!==Q&&"Collateral"!==Q&&"Contract"!==Q&&(0,Et.jsxs)("div",{className:"bg-white rounded-lg border p-8 text-center text-gray-500",children:[Q," coming soon."]})]})},rn=e=>{let{token:t}=e;const[n,a]=(0,r.useState)([]),[l,o]=(0,r.useState)({}),[s,i]=(0,r.useState)(!1),[c,d]=(0,r.useState)(""),[m,p]=(0,r.useState)(!1),[h,f]=(0,r.useState)(!1),[x,g]=(0,r.useState)(null),[b,y]=(0,r.useState)({product_description:"",product_status:"Active"}),[v,j]=(0,r.useState)({product_description:"",product_status:"Active"}),[w,N]=(0,r.useState)(!1),[_,k]=(0,r.useState)({show:!1,message:"",type:"success"}),[S,C]=(0,r.useState)({product_id:"",product_name:"",product_description:"",interest_rate:"",term_min:"",term_max:"",currency:"AUD",min_amount:"",max_amount:"",product_status:"Active"}),L="undefined"!==typeof window&&window.REACT_APP_API_URL||"https://echovault.space/wp-json",E=e=>Array.isArray(e)?e[0]:e,A=e=>{if(null===e||void 0===e)return"";const t=String(E(e)).trim();if(""===t)return"";const n=t.match(/[+-]?(?:\d+\.?\d*|\.\d+)/);if(!n)return"";const r=Number(n[0]);return Number.isNaN(r)?"":r},P=e=>{if(null===e||void 0===e||""===e)return"";const t=Number(E(e));return Number.isNaN(t)?"":t},M=e=>{var t,n,r,a,l,o,s,i,c,d,u,m,p,h,f,x,g,b,y,v,j,w,N,_,k,S,C,L,E,M,B,F,T,D,z,R,O,I,W,V,H,U;let q=e.product_status;Array.isArray(q)&&(q=q[0]||""),q&&""!==q||(q="publish"===e.status?"Active":"Inactive");const $=null!==(t=null!==(n=e.related_loans)&&void 0!==n?n:null===(r=e.meta)||void 0===r?void 0:r.related_loans)&&void 0!==t?t:null===(a=e.fields)||void 0===a?void 0:a.related_loans,G=P($);return{id:e.id,product_id:null!==(l=e.product_id)&&void 0!==l?l:"",product_name:null!==(o=e.product_name)&&void 0!==o?o:null!==(s=null===(i=e.title)||void 0===i?void 0:i.rendered)&&void 0!==s?s:"",product_description:null!==(c=e.product_description)&&void 0!==c?c:null!==(d=null===(u=e.content)||void 0===u?void 0:u.rendered)&&void 0!==d?d:"",interest_rate:A(null!==(m=null!==(p=null!==(h=null!==(f=e.interest_rate)&&void 0!==f?f:null===(x=e.meta)||void 0===x?void 0:x.interest_rate)&&void 0!==h?h:null===(g=e.fields)||void 0===g?void 0:g.interest_rate)&&void 0!==p?p:null===(b=e.acf)||void 0===b?void 0:b.interest_rate)&&void 0!==m?m:""),term_min:P(null!==(y=null!==(v=null!==(j=e.term_min)&&void 0!==j?j:null===(w=e.meta)||void 0===w?void 0:w.term_min)&&void 0!==v?v:null===(N=e.fields)||void 0===N?void 0:N.term_min)&&void 0!==y?y:""),term_max:P(null!==(_=null!==(k=null!==(S=e.term_max)&&void 0!==S?S:null===(C=e.meta)||void 0===C?void 0:C.term_max)&&void 0!==k?k:null===(L=e.fields)||void 0===L?void 0:L.term_max)&&void 0!==_?_:""),currency:(Array.isArray(e.currency)?e.currency[0]:null!==(E=null!==(M=e.currency)&&void 0!==M?M:null===(B=e.meta)||void 0===B?void 0:B.currency)&&void 0!==E?E:null===(F=e.fields)||void 0===F?void 0:F.currency)||"AUD",min_amount:P(null!==(T=null!==(D=null!==(z=e.min_amount)&&void 0!==z?z:null===(R=e.meta)||void 0===R?void 0:R.min_amount)&&void 0!==D?D:null===(O=e.fields)||void 0===O?void 0:O.min_amount)&&void 0!==T?T:""),max_amount:P(null!==(I=null!==(W=null!==(V=e.max_amount)&&void 0!==V?V:null===(H=e.meta)||void 0===H?void 0:H.max_amount)&&void 0!==W?W:null===(U=e.fields)||void 0===U?void 0:U.max_amount)&&void 0!==I?I:""),related_loans:""===G?void 0:Number(G),product_status:q,date:e.date}},B=async()=>{if(t){i(!0),d("");try{const n=await fetch("".concat(L,"/wp/v2/loan-product?per_page=100&context=edit&status=publish,draft"),{headers:{Authorization:"Bearer ".concat(t)},mode:"cors"});if(!n.ok)throw new Error("Failed to fetch loan products");const r=(await n.json()).map(e=>M(e));a(r);try{const e=await F();o(e)}catch(e){}}catch(_n){d("Could not load loan products")}finally{i(!1)}}},F=async()=>{const e={};try{const r="".concat(L,"/wp/v2/loans?per_page=100&context=edit&status=publish"),a=await fetch(r,{headers:{Authorization:"Bearer ".concat(t)},mode:"cors"});if(!a.ok)return e;const l=Number(a.headers.get("X-WP-TotalPages")||"1"),o=[...await a.json()||[]];for(let e=2;e<=l;e++)try{const n=await fetch("".concat(r,"&page=").concat(e),{headers:{Authorization:"Bearer ".concat(t)},mode:"cors"});if(n.ok){const e=await n.json();o.push(...e||[])}}catch(n){}(o||[]).forEach(t=>{var n,r,a,l,o,s,i,c,d,u;const m=(Array.isArray(null===(n=t.meta)||void 0===n?void 0:n.loan_product_id)?t.meta.loan_product_id[0]:null===(r=t.meta)||void 0===r?void 0:r.loan_product_id)||(Array.isArray(null===(a=t.fields)||void 0===a?void 0:a.loan_product_id)?t.fields.loan_product_id[0]:null===(l=t.fields)||void 0===l?void 0:l.loan_product_id)||(Array.isArray(null===(o=t.acf)||void 0===o?void 0:o.loan_product_id)?t.acf.loan_product_id[0]:null===(s=t.acf)||void 0===s?void 0:s.loan_product_id)||null,p=null!==m&&void 0!==m?String(m).trim():"",h=/^\d+$/.test(p),f=/^LP\d+$/i.test(p),x=(Array.isArray(t.loan_product)?t.loan_product[0]:t.loan_product)||(Array.isArray(null===(i=t.meta)||void 0===i?void 0:i.loan_product_name)?t.meta.loan_product_name[0]:null===(c=t.meta)||void 0===c?void 0:c.loan_product_name)||(Array.isArray(null===(d=t.fields)||void 0===d?void 0:d.loan_product_name)?t.fields.loan_product_name[0]:null===(u=t.fields)||void 0===u?void 0:u.loan_product_name)||null,g=x?String(x).trim():"";let b="";h?b="id|".concat(p):f?b="code|".concat(p.toUpperCase()):g&&(b="name|".concat(g)),b&&(e[b]=(e[b]||0)+1)})}catch(n){}return e},T=e=>{const t="id|".concat(e.id);if(void 0!==l[t])return l[t]||0;const n=(e.product_id||"").toString().trim().toUpperCase();if(n){const e="code|".concat(n);if(void 0!==l[e])return l[e]||0}const r=(e.product_name||"").toString().trim();if(r){const e="name|".concat(r);if(void 0!==l[e])return l[e]||0}return 0};(0,r.useEffect)(()=>{B()},[t]);const D=()=>{const e=(e=>{let t=0;e.forEach(e=>{const n=String(e.product_id||"").trim().match(/^LP(\d{1,})$/);if(n){const e=parseInt(n[1],10);!Number.isNaN(e)&&e>t&&(t=e)}});const n=String(t+1).padStart(6,"0");return"".concat("LP").concat(n)})(n);C(t=>u(u({},t),{},{product_id:e})),p(!0)},z=async e=>{if(e.preventDefault(),t){i(!0),d("");try{const e=e=>""===e?"":Number(e),n=(S.product_name,S.product_description,S.product_status,S.product_id,S.product_name,S.product_description,e(S.interest_rate),e(S.term_min),e(S.term_max),S.currency,e(S.min_amount),e(S.max_amount),S.product_status,await fetch("".concat(L,"/wp/v2/loan-product"),{method:"POST",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify({title:S.product_name,content:S.product_description,status:"Active"===S.product_status?"publish":"draft",product_id:S.product_id,product_name:S.product_name,product_description:S.product_description,interest_rate:e(S.interest_rate),term_min:e(S.term_min),term_max:e(S.term_max),currency:S.currency,min_amount:e(S.min_amount),max_amount:e(S.max_amount),product_status:S.product_status,meta:{currency:S.currency}}),mode:"cors"}));if(!n.ok)throw new Error("Failed to create product");await n.json();k({show:!0,message:"Loan product created successfully!",type:"success"}),p(!1),C({product_id:"",product_name:"",product_description:"",interest_rate:"",term_min:"",term_max:"",currency:"AUD",min_amount:"",max_amount:"",product_status:"Active"}),B()}catch(e){d("Could not create product")}finally{i(!1)}}},R=e=>"MNT"===e?"\u20ae":"$",O=async()=>{if(t&&x){i(!0),d("");try{const e={content:b.product_description,status:"Active"===b.product_status?"publish":"draft",product_description:b.product_description,product_status:b.product_status,currency:null===x||void 0===x?void 0:x.currency,meta:{currency:null===x||void 0===x?void 0:x.currency}},n=await fetch("".concat(L,"/wp/v2/loan-product/").concat(x.id),{method:"POST",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify(e),mode:"cors"});if(!n.ok){const e=await n.text();throw console.error("Update failed:",e),new Error("Failed to update product")}k({show:!0,message:"Product updated successfully!",type:"success"}),g(e=>u(u({},e),{},{product_description:b.product_description,product_status:b.product_status})),a(e=>e.map(e=>e.id===x.id?u(u({},e),{},{product_description:b.product_description,product_status:b.product_status}):e)),f(!1),B()}catch(_n){console.error("Product update error:",_n),d("Could not update product")}finally{i(!1)}}};return m?(0,Et.jsxs)("div",{children:[(0,Et.jsx)("div",{className:"mb-8",children:(0,Et.jsxs)("div",{children:[(0,Et.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Create Loan Product"}),(0,Et.jsx)("p",{className:"text-gray-600",children:"Add a new loan product to your system"})]})}),(0,Et.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:(0,Et.jsxs)("form",{onSubmit:z,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product ID"}),(0,Et.jsx)("input",{type:"text",value:S.product_id,disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 text-gray-500"})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product Name"}),(0,Et.jsx)("input",{type:"text",value:S.product_name,onChange:e=>C(u(u({},S),{},{product_name:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500",required:!0})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Interest Rate (%)"}),(0,Et.jsx)("input",{type:"number",step:"0.01",min:"0",value:S.interest_rate,onChange:e=>C(u(u({},S),{},{interest_rate:e.target.value})),placeholder:"e.g. 12.5",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500"})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Minimum Term (months)"}),(0,Et.jsx)("input",{type:"number",step:"1",min:"1",value:S.term_min,onChange:e=>C(u(u({},S),{},{term_min:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500"})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Maximum Term (months)"}),(0,Et.jsx)("input",{type:"number",step:"1",min:S.term_min||1,value:S.term_max,onChange:e=>C(u(u({},S),{},{term_max:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500"})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Currency"}),(0,Et.jsxs)("select",{value:S.currency,onChange:e=>C(u(u({},S),{},{currency:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500",children:[(0,Et.jsx)("option",{value:"AUD",children:"AUD"}),(0,Et.jsx)("option",{value:"MNT",children:"MNT"})]})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Minimum Amount"}),(0,Et.jsxs)("div",{className:"relative",children:[(0,Et.jsx)("span",{className:"absolute inset-y-0 left-0 pl-3 flex items-center text-gray-500",children:R(S.currency)}),(0,Et.jsx)("input",{type:"number",step:"1",min:"0",value:S.min_amount,onChange:e=>C(u(u({},S),{},{min_amount:e.target.value})),className:"w-full pl-8 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500"})]})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Maximum Amount"}),(0,Et.jsxs)("div",{className:"relative",children:[(0,Et.jsx)("span",{className:"absolute inset-y-0 left-0 pl-3 flex items-center text-gray-500",children:R(S.currency)}),(0,Et.jsx)("input",{type:"number",step:"1",min:S.min_amount||0,value:S.max_amount,onChange:e=>C(u(u({},S),{},{max_amount:e.target.value})),className:"w-full pl-8 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500"})]})]}),(0,Et.jsxs)("div",{className:"md:col-span-2",children:[(0,Et.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product Description"}),(0,Et.jsx)("textarea",{value:S.product_description,onChange:e=>C(u(u({},S),{},{product_description:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500",rows:3})]}),(0,Et.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Et.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Product Status"}),(0,Et.jsx)("button",{type:"button",onClick:()=>C(u(u({},S),{},{product_status:"Active"===S.product_status?"Inactive":"Active"})),className:"relative inline-flex h-7 w-12 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 ".concat("Active"===S.product_status?"bg-green-500 focus:ring-green-300":"bg-gray-300 focus:ring-gray-300"),"aria-pressed":"Active"===S.product_status,"aria-label":"Toggle product status",children:(0,Et.jsx)("span",{className:"inline-block h-5 w-5 transform rounded-full bg-white shadow transition-transform ".concat("Active"===S.product_status?"translate-x-6":"translate-x-1")})}),(0,Et.jsx)("span",{className:"text-sm ".concat("Active"===S.product_status?"text-green-700":"text-gray-700"),children:S.product_status})]}),(0,Et.jsxs)("div",{className:"md:col-span-2 flex justify-end space-x-4 pt-6 border-t border-gray-200",children:[(0,Et.jsx)("button",{type:"button",onClick:()=>p(!1),className:"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg font-medium",children:"Cancel"}),(0,Et.jsxs)("button",{type:"submit",disabled:s,className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:[s&&(0,Et.jsxs)("svg",{className:"animate-spin h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[(0,Et.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,Et.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,Et.jsx)("span",{children:s?"Creating...":"Create Product"})]})]}),c&&(0,Et.jsx)("div",{className:"md:col-span-2 text-red-600 text-sm",children:c})]})})]}):(0,Et.jsxs)("div",{children:[(0,Et.jsx)("div",{className:"mb-8",children:(0,Et.jsxs)("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Loan Products"}),(0,Et.jsx)("p",{className:"text-gray-600",children:"Manage and view loan products and configurations"})]}),(0,Et.jsx)("div",{className:"flex gap-3 self-start sm:self-center",children:(0,Et.jsxs)("button",{onClick:D,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-medium flex items-center space-x-2",children:[(0,Et.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),(0,Et.jsx)("span",{children:"Create New Product"})]})})]})}),0===n.length?(0,Et.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-12 text-center",children:[(0,Et.jsx)("div",{className:"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,Et.jsx)("svg",{className:"w-12 h-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),(0,Et.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No products found"}),(0,Et.jsx)("p",{className:"text-gray-500 mb-8 max-w-md mx-auto",children:"Get started by creating your first loan product. This will help you configure loan types, interest rates, and terms."}),(0,Et.jsxs)("button",{onClick:D,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-medium flex items-center space-x-2 mx-auto",children:[(0,Et.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),(0,Et.jsx)("span",{children:"Create First Product"})]})]}):(0,Et.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:(0,Et.jsx)("div",{className:"overflow-x-auto",children:(0,Et.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Et.jsx)("thead",{className:"bg-gray-50",children:(0,Et.jsxs)("tr",{children:[(0,Et.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product ID"}),(0,Et.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product Name"}),(0,Et.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Interest Rate (%)"}),(0,Et.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Term (Month)"}),(0,Et.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Currency"}),(0,Et.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount Range"}),(0,Et.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Related Active Loans"}),(0,Et.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,Et.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created"}),(0,Et.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,Et.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map(e=>(0,Et.jsxs)("tr",{children:[(0,Et.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-mono text-gray-900",children:e.product_id}),(0,Et.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.product_name}),(0,Et.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700",children:e.interest_rate}),(0,Et.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700",children:[e.term_min,"-",e.term_max]}),(0,Et.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700",children:e.currency}),(0,Et.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700",children:[R(e.currency),e.min_amount," - ",R(e.currency),e.max_amount]}),(0,Et.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700",children:T(e)}),(0,Et.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:(0,Et.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full ".concat("Active"===e.product_status?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:e.product_status})}),(0,Et.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(e.date).toLocaleDateString()}),(0,Et.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(0,Et.jsx)("button",{onClick:()=>(e=>{g(e);const t={product_description:e.product_description||"",product_status:e.product_status||"Active"};y(t),j(t),f(!0)})(e),className:"text-blue-600 hover:text-blue-900 p-1 rounded hover:bg-blue-50",title:"View/Edit Product",children:(0,Et.jsxs)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})})]},e.id))})]})})}),h&&x&&(0,Et.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:(0,Et.jsx)("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:(0,Et.jsxs)("div",{className:"mt-3",children:[(0,Et.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Product Details"}),(0,Et.jsxs)("div",{className:"space-y-3",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Product ID"}),(0,Et.jsx)("p",{className:"text-sm text-gray-900",children:x.product_id})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Product Name"}),(0,Et.jsx)("p",{className:"text-sm text-gray-900",children:x.product_name})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Interest Rate"}),(0,Et.jsxs)("p",{className:"text-sm text-gray-900",children:[x.interest_rate,"%"]})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Term Range"}),(0,Et.jsxs)("p",{className:"text-sm text-gray-900",children:[x.term_min," - ",x.term_max," months"]})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Currency"}),(0,Et.jsx)("p",{className:"text-sm text-gray-900",children:x.currency})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Amount Range"}),(0,Et.jsxs)("p",{className:"text-sm text-gray-900",children:[R(x.currency),x.min_amount," - ",R(x.currency),x.max_amount]})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Related Active Loans"}),(0,Et.jsx)("p",{className:"text-sm text-gray-900",children:T(x)})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,Et.jsx)("textarea",{value:b.product_description,onChange:e=>y(u(u({},b),{},{product_description:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500",rows:3,placeholder:"Enter product description..."})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Product Status"}),(0,Et.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Et.jsx)("button",{onClick:()=>y(u(u({},b),{},{product_status:"Active"===b.product_status?"Inactive":"Active"})),className:"relative inline-flex h-7 w-12 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 ".concat("Active"===b.product_status?"bg-green-500 focus:ring-green-300":"bg-gray-300 focus:ring-gray-300"),"aria-pressed":"Active"===b.product_status,"aria-label":"Toggle product status",children:(0,Et.jsx)("span",{className:"inline-block h-5 w-5 transform rounded-full bg-white shadow transition-transform ".concat("Active"===b.product_status?"translate-x-6":"translate-x-1")})}),(0,Et.jsx)("span",{className:"text-sm ".concat("Active"===b.product_status?"text-green-700":"text-gray-700"),children:b.product_status})]})]})]}),(0,Et.jsxs)("div",{className:"flex justify-end gap-2 mt-6",children:[(0,Et.jsx)("button",{onClick:()=>{b.product_description!==v.product_description||b.product_status!==v.product_status?N(!0):f(!1)},className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-md",children:"Cancel"}),(0,Et.jsx)("button",{onClick:O,disabled:s,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-md disabled:opacity-50 disabled:cursor-not-allowed",children:s?"Updating...":"Update Product"})]})]})})}),w&&(0,Et.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:(0,Et.jsx)("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:(0,Et.jsxs)("div",{className:"mt-3",children:[(0,Et.jsx)("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-yellow-100",children:(0,Et.jsx)("svg",{className:"h-6 w-6 text-yellow-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,Et.jsxs)("div",{className:"mt-2 text-center",children:[(0,Et.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Unsaved Changes"}),(0,Et.jsx)("div",{className:"mt-2",children:(0,Et.jsx)("p",{className:"text-sm text-gray-500",children:"You have unsaved changes. Do you want to save them before closing?"})})]}),(0,Et.jsxs)("div",{className:"flex justify-center gap-3 mt-6",children:[(0,Et.jsx)("button",{onClick:()=>{f(!1),N(!1)},className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-md",children:"Discard Changes"}),(0,Et.jsx)("button",{onClick:()=>{N(!1),O()},className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-md",children:"Save Changes"})]})]})})}),(0,Et.jsx)(Ut,{isVisible:_.show,onClose:()=>k({show:!1,message:"",type:"success"}),message:_.message,type:_.type})]})},an="undefined"!==typeof window&&window.REACT_APP_API_URL||"https://echovault.space/wp-json",ln=e=>"MNT"===e?"\u20ae":"$",on=e=>{if(null===e||void 0===e)return"";if("number"===typeof e||"string"===typeof e)return String(e);if(Array.isArray(e))return on(e[0]);if("object"===typeof e){if("id"in e)return String(e.id);if("ID"in e)return String(e.ID)}return""},sn=e=>{var t,n;let{token:a,setCurrentView:l,onOpenBorrower:o,editingLoan:s}=e;const[i,c]=(0,r.useState)(!1),[d,m]=(0,r.useState)(!1),[p,h]=(0,r.useState)(!1),[f,x]=(0,r.useState)(""),[g,b]=(0,r.useState)({show:!1,message:"",type:"success"}),[y,v]=(0,r.useState)(1),[j,w]=(0,r.useState)(!1),[N,_]=(0,r.useState)(null),[k,S]=(0,r.useState)(!1),[C,L]=(0,r.useState)([]),[E,A]=(0,r.useState)([]),[P,M]=(0,r.useState)([]),[B,F]=(0,r.useState)([]),[T,D]=(0,r.useState)(""),[z,R]=(0,r.useState)(null),[O,I]=(0,r.useState)(null),[W,V]=(0,r.useState)([]),[H,U]=(0,r.useState)([]),[q,$]=(0,r.useState)(!1),[G,Q]=(0,r.useState)(""),[J,Y]=(0,r.useState)(!1),[K,X]=(0,r.useState)({loan_id:"EL-0000001",borrower:"",co_borrower_status:"No",co_borrower:"",loan_product:"",loan_currency:"",loan_interest:"",loan_term:"",loan_amount:"",repayment_method:"Equal Principal",repayment_frequency:"Monthly",repayment_type:"Graphical",loan_status:"Draft",start_date:"",end_date:"",loan_disbursement_account:"",loan_repayment_account:"",loan_note:""}),Z=(0,r.useMemo)(()=>E.filter(e=>{let t=e.product_status;return Array.isArray(t)&&(t=t[0]),"active"===(t||"").toString().toLowerCase()}),[E]),ee=(0,r.useMemo)(()=>C.filter(e=>"Verified"===Ft(e).status),[C]),te=(0,r.useMemo)(()=>P.filter(e=>{let t=e.account_status;return Array.isArray(t)&&(t=t[0]),!0===t||"active"===(t||"").toString().toLowerCase()}),[P]),ne=(0,r.useMemo)(()=>Z.find(e=>String(e.id)===String(K.loan_product)),[Z,K.loan_product]),re=(0,r.useMemo)(()=>C.find(e=>String(e.id)===String(K.borrower)),[C,K.borrower]),ae=(0,r.useMemo)(()=>C.filter(e=>String(e.id)!==String(K.borrower)),[C,K.borrower]),le=(0,r.useMemo)(()=>!!K.borrower||!!K.loan_product||!!K.loan_term||!!K.loan_amount||!!K.start_date||!!K.loan_disbursement_account||!!K.loan_repayment_account||!!K.loan_note||!!z||!!O,[K,z,O]);(0,r.useEffect)(()=>{const e=e=>{le&&(e.preventDefault(),e.returnValue="")};return window.addEventListener("beforeunload",e),()=>window.removeEventListener("beforeunload",e)},[le]);(0,r.useEffect)(()=>{if(!a)return;let e=!0;return(async()=>{c(!0),x("");try{const n={Authorization:"Bearer ".concat(a)},[r,l,o,s]=await Promise.all([fetch("".concat(an,"/wp/v2/borrower-profile?per_page=100&context=edit"),{headers:n,mode:"cors"}),fetch("".concat(an,"/wp/v2/loan-product?per_page=100&context=edit&status=publish,draft"),{headers:n,mode:"cors"}),fetch("".concat(an,"/wp/v2/bank-account-system?per_page=100&status=publish,draft"),{headers:n,mode:"cors"}),fetch("".concat(an,"/wp/v2/loans?per_page=100&status=publish,draft"),{headers:n,mode:"cors"})]);if(!r.ok)throw new Error("Failed to load borrowers");if(!l.ok)throw new Error("Failed to load products");if(!o.ok)throw new Error("Failed to load system accounts");if(!s.ok)throw new Error("Failed to load loans");const[i,c,d,m]=await Promise.all([r.json(),l.json(),o.json(),s.json()]);if(!e)return;L(i||[]),A(c||[]),M(d||[]);try{let e=0;(m||[]).forEach(t=>{const n=String(t.loan_id||t.meta&&t.meta.loan_id||"").trim().match(/^EL-(\d{1,})$/);if(n){const t=parseInt(n[1],10);!Number.isNaN(t)&&t>e&&(e=t)}});const t=String(e+1).padStart(7,"0");X(e=>u(u({},e),{},{loan_id:"EL-".concat(t)}))}catch(t){}}catch(_n){if(!e)return;x(_n.message||"Failed to load data")}finally{e&&c(!1)}})(),()=>{e=!1}},[a]),(0,r.useEffect)(()=>{k||X(ne?e=>u(u({},e),{},{loan_currency:ne.currency||"AUD",loan_interest:ne.interest_rate||""}):e=>u(u({},e),{},{loan_currency:"",loan_interest:""}))},[ne,k]),(0,r.useEffect)(()=>{if(s&&C.length&&E.length&&P.length){S(!0);try{var e,t,n,r,l,o,i,c,d,u,m;const f=s,x=on(null===(e=f.meta)||void 0===e?void 0:e.borrower_id)||on(f.borrower),g=on(null===(t=f.meta)||void 0===t?void 0:t.co_borrower_id)||on(f.co_borrower)||"";let b=on(null===(n=f.meta)||void 0===n?void 0:n.loan_product_id);if(!b&&f.loan_product){const e=Array.isArray(f.loan_product)?f.loan_product[0]:f.loan_product,t=E.find(t=>String(t.product_name)===String(e));t&&(b=String(t.id))}let y=on(null===(r=f.meta)||void 0===r?void 0:r.repayment_account_id);if(!y&&f.loan_repayment_account){const e=Array.isArray(f.loan_repayment_account)?f.loan_repayment_account[0]:f.loan_repayment_account;for(const t of P){const n="Australia"===(Array.isArray(t.account_type)?t.account_type[0]:t.account_type)?Array.isArray(t.bank_name_au)?t.bank_name_au[0]:t.bank_name_au:Array.isArray(t.bank_name_mn)?t.bank_name_mn[0]:t.bank_name_mn,r="".concat(t.account_name||""," \u2022 ").concat(n||""," \u2022 ").concat(t.account_number||"").concat(t.bsb?" \u2022 BSB ".concat(t.bsb):"");if(r&&e&&r.trim()===e.trim()){y=String(t.id);break}}}let v="";const j=C.find(e=>String(e.id)===String(x));if(j&&(j.account_name||j.account_number)){const e="Mongolia"===(j.account_type||j.bank_country||"")?j.bank_name_mn||j.bank_name:j.bank_name||j.bank_name_au;v=JSON.stringify({accountName:j.account_name||"",bankName:e||"",bsb:j.bsb_number||j.bsb||"",accountNumber:j.account_number||""})}if(X({loan_id:f.loan_id||(null===(l=f.meta)||void 0===l?void 0:l.loan_id)||"EL-0000001",borrower:x,co_borrower_status:Array.isArray(f.co_borrower_status)?f.co_borrower_status[0]:f.co_borrower_status||"No",co_borrower:g,loan_product:b,loan_currency:Array.isArray(f.loan_currency)?f.loan_currency[0]:f.loan_currency||"",loan_interest:Array.isArray(f.loan_interest)?f.loan_interest[0]:f.loan_interest||"",loan_term:Array.isArray(f.loan_term)?f.loan_term[0]:f.loan_term||"",loan_amount:Array.isArray(f.loan_amount)?f.loan_amount[0]:f.loan_amount||"",repayment_method:Array.isArray(f.repayment_method)?f.repayment_method[0]:f.repayment_method||"Equal Principal",repayment_frequency:Array.isArray(f.repayment_frequency)?f.repayment_frequency[0]:f.repayment_frequency||"Monthly",repayment_type:Array.isArray(f.repayment_type)?f.repayment_type[0]:f.repayment_type||"Graphical",loan_status:Array.isArray(f.loan_status)?f.loan_status[0]:f.loan_status||"Draft",start_date:f.start_date||"",end_date:f.end_date||"",loan_disbursement_account:v,loan_repayment_account:y,loan_note:f.loan_note||""}),null!==(o=f.meta)&&void 0!==o&&o.bank_statement||null!==(i=f.fields)&&void 0!==i&&i.bank_statement||f.bank_statement){var p,h;const e=f.bank_statement||(null===(p=f.meta)||void 0===p?void 0:p.bank_statement)||(null===(h=f.fields)||void 0===h?void 0:h.bank_statement);if(Array.isArray(e)&&e.length>0)if("object"===typeof e[0]&&e[0].ID)F(e);else{const t=e.map(e=>on(e)).filter(Boolean);if(t.length>0){(async()=>{try{const e=t.map(e=>fetch("".concat(an,"/wp/v2/media/").concat(e),{headers:{Authorization:"Bearer ".concat(a)},mode:"cors"}).then(e=>e.ok?e.json():null)),n=await Promise.all(e);F(n.filter(Boolean))}catch(_n){console.error("Failed to load bank statements:",_n)}})()}}}const w=on((null===(c=f.meta)||void 0===c?void 0:c.collateral)||(null===(d=f.fields)||void 0===d?void 0:d.collateral)||f.collateral);if(w){(async()=>{try{const e=await fetch("".concat(an,"/wp/v2/media/").concat(w),{headers:{Authorization:"Bearer ".concat(a)},mode:"cors"});if(e.ok){const t=await e.json();R(t)}}catch(_n){console.error("Failed to load collateral:",_n)}})()}const N=on((null===(u=f.meta)||void 0===u?void 0:u.loan_contract)||(null===(m=f.fields)||void 0===m?void 0:m.loan_contract)||f.loan_contract);if(N){(async()=>{try{const e=await fetch("".concat(an,"/wp/v2/media/").concat(N),{headers:{Authorization:"Bearer ".concat(a)},mode:"cors"});if(e.ok){const t=await e.json();I(t)}}catch(_n){console.error("Failed to load loan contract:",_n)}})()}}catch(f){console.error("Error loading editing loan:",f),x("Failed to load loan data for editing")}finally{S(!1)}}},[s,C,E,P,a]),(0,r.useEffect)(()=>{X(e=>"Yes"!==e.co_borrower_status&&e.co_borrower||e.co_borrower&&String(e.co_borrower)===String(e.borrower)?u(u({},e),{},{co_borrower:""}):e)},[K.borrower,K.co_borrower_status]),(0,r.useEffect)(()=>{if(K.start_date&&K.loan_term){const e=Number(K.loan_term);if(!Number.isNaN(e)&&e>0){const t=new Date(K.start_date),n=new Date(t);n.setMonth(n.getMonth()+e);const r=n.getFullYear(),a=String(n.getMonth()+1).padStart(2,"0"),l=String(n.getDate()).padStart(2,"0");X(e=>u(u({},e),{},{end_date:"".concat(r,"-").concat(a,"-").concat(l)}))}}else X(e=>u(u({},e),{},{end_date:""}))},[K.start_date,K.loan_term]);const oe=(null===ne||void 0===ne?void 0:ne.term_min)||"",se=(null===ne||void 0===ne?void 0:ne.term_max)||"",ie=(null===ne||void 0===ne?void 0:ne.min_amount)||"",ce=(null===ne||void 0===ne?void 0:ne.max_amount)||"",de=Number(oe||0),ue=Number(se||0),me=Number(ie||0),pe=Number(ce||0),he=""!==K.loan_term&&null!==K.loan_term&&Number(K.loan_term)>0&&(de&&Number(K.loan_term)<de||ue&&Number(K.loan_term)>ue),fe=""!==K.loan_amount&&null!==K.loan_amount&&Number(K.loan_amount)>0&&(me&&Number(K.loan_amount)<me||pe&&Number(K.loan_amount)>pe),xe=(0,r.useMemo)(()=>{if(!re)return[];const e="Mongolia"===(re.account_type||re.bank_country||"")?re.bank_name_mn||re.bank_name:re.bank_name||re.bank_name_au,t=re.account_name,n=re.bsb_number||re.bsb||"",r=re.account_number,a=[t,e,r,n&&"BSB ".concat(n)].filter(Boolean).join(" \u2022 "),l=JSON.stringify({accountName:t,bankName:e,bsb:n,accountNumber:r});return r?[{label:a,value:l}]:[]},[re]),ge=e=>X(t=>u(u({},t),{},{[e.target.name]:e.target.value})),be=e=>{const{name:t,value:n}=e.target;if(""===n)return X(e=>u(u({},e),{},{[t]:""}));const r=Number(n);Number.isNaN(r)||X(e=>u(u({},e),{},{[t]:r}))},ye=e=>!(""===e||null===e||void 0===e),ve=()=>{const e=[];return ye(K.borrower)||e.push("Borrower"),ye(K.loan_product)||e.push("Loan Product"),Number(K.loan_term)>0&&!he||e.push("Loan Term"),Number(K.loan_amount)>0&&!fe||e.push("Loan Amount"),ye(K.start_date)||e.push("Start Date"),"Yes"!==K.co_borrower_status||ye(K.co_borrower)||e.push("Co-borrower"),e},je=()=>{const e=[];return"Yes"!==K.co_borrower_status||ye(K.co_borrower)||e.push("Co-borrower"),e},we=()=>{const e=[];return Number(K.loan_term)>0||e.push("Loan Term"),Number(K.loan_amount)>0||e.push("Loan Amount"),ye(K.start_date)||e.push("Start Date"),e},Ne=!ye(K.borrower),_e=!ye(K.loan_product),ke=!(Number(K.loan_term)>0)||he,Se=!(Number(K.loan_amount)>0)||fe,Ce=!ye(K.start_date),Le="Yes"===K.co_borrower_status&&!ye(K.co_borrower),Ee=xe&&xe.length>0&&!ye(K.loan_disbursement_account),Ae=!ye(K.loan_repayment_account);(0,r.useEffect)(()=>{x("")},[y,K.borrower,K.loan_product,K.co_borrower_status,K.co_borrower,K.loan_term,K.loan_amount,K.start_date]);const Pe=(e,t)=>{const n=new Date(e);return n.setDate(n.getDate()+t),n},Me=(e,t)=>{const n=new Date(e);return n.setMonth(n.getMonth()+t),n},Be=(e,t,n)=>"Monthly"===n?Me(e,t+1):"Fortnightly"===n?Pe(e,14*(t+1)):"Weekly"===n?Pe(e,7*(t+1)):Me(e,t+1),Fe=(e,t)=>{if(e.length!==t.length)return{match:!1,message:"Different lengths: Client ".concat(e.length," vs API ").concat(t.length)};const n=[];for(let r=0;r<e.length;r++){const a=e[r],l=t[r],o=Math.abs(a.payment-l.payment),s=Math.abs(a.principal-l.principal),i=Math.abs(a.interest-l.interest),c=Math.abs(a.balance-l.balance),d=.01;(o>d||s>d||i>d||c>d)&&n.push({row:r+1,payment:{client:a.payment,api:l.payment,diff:o},principal:{client:a.principal,api:l.principal,diff:s},interest:{client:a.interest,api:l.interest,diff:i},balance:{client:a.balance,api:l.balance,diff:c}})}return{match:0===n.length,differences:n,message:0===n.length?"Schedules match perfectly!":"Found ".concat(n.length," row(s) with differences")}},Te=async e=>{const t=new FormData;t.append("file",e,e.name);const n=await fetch("".concat(an,"/wp/v2/media"),{method:"POST",headers:{Authorization:"Bearer ".concat(a)},body:t,mode:"cors"});if(!n.ok){const t=await n.text();throw new Error(t||"Failed to upload ".concat(e.name))}const r=await n.json();return null===r||void 0===r?void 0:r.id},De=async()=>{if(!B||0===B.length)return[];const e=[];for(const t of B)if("object"!==typeof t||!t.ID&&!t.id||t instanceof File||t instanceof Blob){if(t instanceof File||t instanceof Blob){const n=await Te(t);n&&e.push(n)}}else{const n=t.ID||t.id;n&&e.push(n)}return e},ze=()=>{if(!K.loan_amount||!K.loan_term||!K.start_date||!ne)return void V([]);const e=Number(K.loan_amount),t=((e,t)=>{if(!e)return 0;const n=Number(e);return"Monthly"===t?n:"Fortnightly"===t?Math.ceil(12*n*2/12):"Weekly"===t?Math.ceil(52*n/12):n})(K.loan_term,K.repayment_frequency),n=((e,t)=>{const n=Number(e||0)/100;return"Monthly"===t?n/12:"Fortnightly"===t?n/26:"Weekly"===t?n/52:n/12})(K.loan_interest||(null===ne||void 0===ne?void 0:ne.interest_rate)||0,K.repayment_frequency);if(!t||e<=0)return void V([]);const r=[];let a=e;const l=new Date(K.start_date);if("Equal Total"===K.repayment_method){const o=0===n?e/t:e*n/(1-Math.pow(1+n,-t));for(let e=0;e<t;e++){const t=a*n,s=Math.min(o-t,a);a=Math.max(0,a-s),r.push({idx:e+1,date:Be(l,e,K.repayment_frequency),payment:o,principal:s,interest:t,balance:a})}}else if("Interest-Only"===K.repayment_method){const e=a*n;for(let n=0;n<t-1;n++)r.push({idx:n+1,date:Be(l,n,K.repayment_frequency),payment:e,principal:0,interest:e,balance:a});r.push({idx:t,date:Be(l,t-1,K.repayment_frequency),payment:e+a,principal:a,interest:e,balance:0})}else{const o=e/t;for(let e=0;e<t;e++){const t=a*n,s=o+t;a=Math.max(0,a-o),r.push({idx:e+1,date:Be(l,e,K.repayment_frequency),payment:s,principal:o,interest:t,balance:a})}}V(r)};(0,r.useEffect)(()=>{(async()=>{if(K.loan_amount&&K.loan_term&&K.start_date&&ne)try{const e="".concat(an,"/echovault/v2/calculate-schedule"),t={loan_amount:Number(K.loan_amount),loan_term:Number(K.loan_term),loan_interest:Number(K.loan_interest||(null===ne||void 0===ne?void 0:ne.interest_rate)||0),repayment_method:K.repayment_method,repayment_frequency:K.repayment_frequency,start_date:K.start_date},n=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json",Authorization:a?"Bearer ".concat(a):"",Accept:"application/json"},body:JSON.stringify(t),mode:"cors",credentials:"omit"});if(n.ok){const e=await n.json();if(e.success&&e.schedule){e.debug&&console.log("API Response Debug:",{frequency:e.debug.frequency,method:e.debug.method,periods:e.debug.periods,scheduleLength:e.schedule.length});const t=e.schedule.map(e=>u(u({},e),{},{date:new Date(e.date)}));return V(t),void Q("")}console.error("API returned success=false:",e)}else{const e=await n.json().catch(()=>({message:"Unknown error"}));console.error("API calculation failed:",n.status,e)}console.warn("API calculation failed, falling back to client-side calculation"),ze()}catch(f){console.warn("API calculation error, falling back to client-side calculation:",f),ze()}else V([])})()},[K.loan_amount,K.loan_term,K.repayment_frequency,K.repayment_method,K.start_date,K.loan_interest,ne,a]);const Re=()=>K.borrower?"Yes"!==K.co_borrower_status||K.co_borrower?K.loan_product?K.loan_term?K.loan_amount?oe&&Number(K.loan_term)<Number(oe)?"Loan term must be \u2265 ".concat(oe):se&&Number(K.loan_term)>Number(se)?"Loan term must be \u2264 ".concat(se):ie&&Number(K.loan_amount)<Number(ie)?"Amount must be \u2265 ".concat(ie):ce&&Number(K.loan_amount)>Number(ce)?"Amount must be \u2264 ".concat(ce):K.start_date?K.end_date?K.loan_repayment_account?"":"Repayment account is required":"End date is required":"Start date is required":"Loan amount is required":"Loan term is required":"Loan product is required":"Co-borrower is required":"Borrower is required",Oe=async()=>{if(a)if(ye(K.borrower)||ye(K.loan_product)){x(""),h(!0);try{const t=s?on(s.id||s.ID):null,n=new FormData;let r=[];try{r=await De()}catch(_n){console.error("Bank statement upload failed (draft):",_n)}let l=null;try{z&&("object"!==typeof z||!z.ID&&!z.id||z instanceof File||z instanceof Blob?(z instanceof File||z instanceof Blob)&&(l=await Te(z)):l=z.ID||z.id)}catch(_n){console.error("Collateral upload failed (draft):",_n)}let o=null;try{O&&("object"!==typeof O||!O.ID&&!O.id||O instanceof File||O instanceof Blob?(O instanceof File||O instanceof Blob)&&(o=await Te(O)):o=O.ID||O.id)}catch(_n){console.error("Loan contract upload failed (draft):",_n)}let i="",c="",d="",u="",m="";try{const e=K.loan_disbursement_account?JSON.parse(K.loan_disbursement_account):null;e&&(c=e.accountName||"",d=Array.isArray(e.bankName)?e.bankName[0]||"":e.bankName||"",u=e.bsb||"",m=e.accountNumber||"",i=[c,d,m,u&&"BSB ".concat(u)].filter(Boolean).join(" \u2022 "))}catch(e){}let p="",h="",f="",x="";const g=P.find(e=>String(e.id)===String(K.loan_repayment_account));if(g){h="Australia"===(Array.isArray(g.account_type)?g.account_type[0]:g.account_type)?Array.isArray(g.bank_name_au)?g.bank_name_au[0]:g.bank_name_au:Array.isArray(g.bank_name_mn)?g.bank_name_mn[0]:g.bank_name_mn,p=g.account_name||"",f=g.bsb||"",x=g.account_number||""}const y=C.find(e=>String(e.id)===String(K.borrower)),v=y&&y.first_name||"",j=y&&y.last_name||"",w=y&&y.email_address||"",N=y&&y.mobile_number||"",_={title:K.loan_id||"Draft Loan",status:"draft",loan_id:K.loan_id,borrower:K.borrower,borrower_name:[v,j].filter(Boolean).join(" "),co_borrower_status:K.co_borrower_status,co_borrower:K.co_borrower||"",loan_product:ne&&ne.product_name?ne.product_name:String(K.loan_product||""),loan_currency:K.loan_currency,loan_interest:K.loan_interest||(null===ne||void 0===ne?void 0:ne.interest_rate)||"",loan_term:K.loan_term,loan_amount:K.loan_amount,repayment_method:K.repayment_method,repayment_frequency:K.repayment_frequency,repayment_type:K.repayment_type,start_date:K.start_date,end_date:K.end_date,loan_disbursement_account:i||"",loan_disbursement_account_name:c||"",loan_disbursement_account_bank:d||"",loan_disbursement_account_bsb:u||"",loan_disbursement_account_number:m||"",loan_repayment_account:p?"".concat(p," \u2022 ").concat(h," \u2022 ").concat(x).concat(f?" \u2022 BSB ".concat(f):""):String(K.loan_repayment_account||""),loan_repayment_account_name:p||"",loan_repayment_account_bank:h||"",loan_repayment_account_bsb:f||"",loan_repayment_account_number:x||""};K.loan_note&&(_.loan_note=K.loan_note),_.loan_status="Draft",Object.entries(_).forEach(e=>{let[t,r]=e;return n.append(t,r)}),n.append("meta[loan_currency]",K.loan_currency),n.append("meta[loan_interest]",K.loan_interest||(null===ne||void 0===ne?void 0:ne.interest_rate)||""),n.append("meta[loan_id]",K.loan_id),K.loan_note&&n.append("meta[loan_note]",K.loan_note),n.append("meta[loan_status]","Draft"),ne&&(n.append("meta[loan_product_id]",String(ne.id)),n.append("meta[loan_product_name]",String(ne.product_name||""))),y&&(n.append("meta[borrower_id]",String(y.id)),n.append("meta[borrower_first_name]",String(v)),n.append("meta[borrower_last_name]",String(j)),n.append("meta[borrower_email]",String(w)),n.append("meta[borrower_phone]",String(N))),K.co_borrower&&n.append("meta[co_borrower_id]",String(K.co_borrower)),(c||d||m||u)&&(n.append("meta[disbursement_account_name]",c),n.append("meta[disbursement_account_bank]",d),n.append("meta[disbursement_account_bsb]",u),n.append("meta[disbursement_account_number]",m)),(p||h||x||f)&&(n.append("meta[repayment_account_name]",p),n.append("meta[repayment_account_bank]",h),n.append("meta[repayment_account_bsb]",f),n.append("meta[repayment_account_number]",x)),K.loan_repayment_account&&n.append("meta[repayment_account_id]",String(K.loan_repayment_account)),t&&0===r.length?(n.append("meta[bank_statement]",""),n.append("fields[bank_statement]","[]"),n.append("bank_statement","[]"),n.append("meta[bank_statement_count]","0")):r&&r.length>0&&(r.forEach(e=>n.append("meta[bank_statement][]",String(e))),r.forEach(e=>n.append("fields[bank_statement][]",String(e))),n.append("fields[bank_statement]",JSON.stringify(r.map(String))),n.append("bank_statement",JSON.stringify(r.map(String))),r.forEach(e=>n.append("bank_statement[]",String(e))),n.append("meta[bank_statement_count]",String(r.length))),t&&!l?(n.append("meta[collateral]",""),n.append("fields[collateral]",""),n.append("collateral","")):l&&(n.append("meta[collateral]",String(l)),n.append("fields[collateral]",String(l)),n.append("collateral",String(l))),t&&!o?(n.append("meta[loan_contract]",""),n.append("fields[loan_contract]",""),n.append("loan_contract","")):o&&(n.append("meta[loan_contract]",String(o)),n.append("fields[loan_contract]",String(o)),n.append("loan_contract",String(o)));const k=t?"".concat(an,"/wp/v2/loans/").concat(t):"".concat(an,"/wp/v2/loans"),S=await fetch(k,{method:"POST",headers:{Authorization:"Bearer ".concat(a)},body:n,mode:"cors"});if(!S.ok){const e=await S.text();throw console.error("Save draft error:",e),new Error(e||"Failed to save draft")}const L=await S.json();L.id||L.ID;b({show:!0,message:s?"Draft updated.":"Draft saved.",type:"success"})}catch(t){x(t.message||"Failed to save draft")}finally{h(!1)}}else x("Provide at least Borrower or Loan Product to save draft")},Ie=()=>{const e=["Loan Form","Borrowers","Schedule","Bank Statements","Collateral","Contract","Note","Confirm"],t=(y-1)/(e.length-1)*100;return(0,Et.jsxs)("div",{className:"mb-6",children:[(0,Et.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,Et.jsx)("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300 ease-in-out",style:{width:"".concat(t,"%")}})}),(0,Et.jsx)("div",{className:"flex justify-between items-center mt-3",children:e.map((e,t)=>(0,Et.jsxs)("div",{className:"flex flex-col items-center w-full",children:[(0,Et.jsx)("div",{className:"w-7 h-7 rounded-full flex items-center justify-center text-xs font-semibold ".concat(y-1>=t?"bg-blue-600 text-white":"bg-gray-200 text-gray-700"," transition-colors duration-300"),children:t+1}),(0,Et.jsx)("div",{className:"mt-1 text-[11px] ".concat(y-1===t?"font-semibold text-blue-700":"text-gray-700"),children:e})]},e))})]})},We=e=>{let{b:t}=e;return t?(0,Et.jsxs)("div",{className:"p-4 border rounded-lg bg-gray-50",children:[(0,Et.jsxs)("div",{className:"flex items-start justify-between",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsxs)("div",{className:"text-sm font-semibold text-gray-900",children:[t.first_name," ",t.last_name]}),(0,Et.jsx)("div",{className:"text-xs text-gray-600",children:t.email_address}),t.mobile_number&&(0,Et.jsx)("div",{className:"text-xs text-gray-600",children:t.mobile_number})]}),(0,Et.jsx)("button",{type:"button",onClick:()=>o&&o(t.id),className:"inline-flex items-center px-2 py-1 text-xs font-medium text-blue-700 bg-blue-50 hover:bg-blue-100 border border-blue-200 rounded",title:"Open borrower profile",children:"View Profile"})]}),(0,Et.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2 mt-3 text-xs text-gray-700",children:[t.date_of_birth&&(0,Et.jsxs)("div",{children:[(0,Et.jsx)("span",{className:"text-gray-500",children:"DOB:"})," ",t.date_of_birth]}),t.home_address&&(0,Et.jsxs)("div",{children:[(0,Et.jsx)("span",{className:"text-gray-500",children:"Address:"})," ",t.home_address]}),t.employment_status&&(0,Et.jsxs)("div",{children:[(0,Et.jsx)("span",{className:"text-gray-500",children:"Employment:"})," ",t.employment_status]}),t.monthly_income_aud&&(0,Et.jsxs)("div",{children:[(0,Et.jsx)("span",{className:"text-gray-500",children:"Monthly Income:"})," ",t.monthly_income_aud]}),t.bank_name&&(0,Et.jsxs)("div",{children:[(0,Et.jsx)("span",{className:"text-gray-500",children:"Bank:"})," ",t.bank_name]}),t.account_number&&(0,Et.jsxs)("div",{children:[(0,Et.jsx)("span",{className:"text-gray-500",children:"Account:"})," ",t.account_number]})]})]}):null};return(0,Et.jsxs)("div",{children:[(0,Et.jsx)("div",{className:"mb-8",children:(0,Et.jsx)("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4",children:(0,Et.jsxs)("div",{children:[(0,Et.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Create New Loan"}),(0,Et.jsx)("p",{className:"text-gray-600",children:"Start a new loan for a borrower"})]})})}),(0,Et.jsx)(Ie,{}),f&&(0,Et.jsx)("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:f}),i?(0,Et.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-12 text-center",children:[(0,Et.jsx)("div",{className:"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,Et.jsxs)("svg",{className:"animate-spin h-12 w-12 text-blue-600",fill:"none",viewBox:"0 0 24 24",children:[(0,Et.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,Et.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}),(0,Et.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Loading data..."}),(0,Et.jsx)("p",{className:"text-gray-500",children:"Please wait while we fetch borrowers, products, and accounts."})]}):(0,Et.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:(0,Et.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),!a)return;const t=Re();if(t)x(t);else{x(""),m(!0);try{const t=new FormData;let r=[];try{r=await De()}catch(e){console.error("Bank statement upload failed:",e)}let o=null;try{z&&("object"!==typeof z||!z.ID&&!z.id||z instanceof File||z instanceof Blob?(z instanceof File||z instanceof Blob)&&(o=await Te(z)):o=z.ID||z.id)}catch(e){console.error("Collateral upload failed:",e)}let i=null;try{O&&("object"!==typeof O||!O.ID&&!O.id||O instanceof File||O instanceof Blob?(O instanceof File||O instanceof Blob)&&(i=await Te(O)):i=O.ID||O.id)}catch(e){console.error("Loan contract upload failed:",e)}let c="",d="",u="",m="",p="";try{const e=K.loan_disbursement_account?JSON.parse(K.loan_disbursement_account):null;e&&(d=e.accountName||"",u=Array.isArray(e.bankName)?e.bankName[0]||"":e.bankName||"",m=e.bsb||"",p=e.accountNumber||"",c=[d,u,p,m&&"BSB ".concat(m)].filter(Boolean).join(" \u2022 "))}catch(n){}let h="",f="",x="",g="";const y=P.find(e=>String(e.id)===String(K.loan_repayment_account));if(y){f="Australia"===(Array.isArray(y.account_type)?y.account_type[0]:y.account_type)?Array.isArray(y.bank_name_au)?y.bank_name_au[0]:y.bank_name_au:Array.isArray(y.bank_name_mn)?y.bank_name_mn[0]:y.bank_name_mn,h=y.account_name||"",x=y.bsb||"",g=y.account_number||""}const v=C.find(e=>String(e.id)===String(K.borrower)),j=v&&v.first_name||"",w=v&&v.last_name||"",N=v&&v.email_address||"",_=v&&v.mobile_number||"",k={title:K.loan_id,status:"publish",loan_id:K.loan_id,borrower:K.borrower,borrower_name:[j,w].filter(Boolean).join(" "),co_borrower_status:K.co_borrower_status,co_borrower:K.co_borrower||"",loan_product:ne&&ne.product_name?ne.product_name:String(K.loan_product||""),loan_currency:K.loan_currency,loan_interest:K.loan_interest||(null===ne||void 0===ne?void 0:ne.interest_rate)||"",loan_term:K.loan_term,loan_amount:K.loan_amount,repayment_method:K.repayment_method,repayment_frequency:K.repayment_frequency,repayment_type:K.repayment_type,start_date:K.start_date,end_date:K.end_date,loan_disbursement_account:c||"",loan_disbursement_account_name:d||"",loan_disbursement_account_bank:u||"",loan_disbursement_account_bsb:m||"",loan_disbursement_account_number:p||"",loan_repayment_account:h?"".concat(h," \u2022 ").concat(f," \u2022 ").concat(g).concat(x?" \u2022 BSB ".concat(x):""):String(K.loan_repayment_account||""),loan_repayment_account_name:h||"",loan_repayment_account_bank:f||"",loan_repayment_account_bsb:x||"",loan_repayment_account_number:g||""};K.loan_note&&(k.loan_note=K.loan_note),k.loan_status="Active",Object.entries(k).forEach(e=>{let[n,r]=e;return t.append(n,r)}),t.append("meta[loan_currency]",K.loan_currency),t.append("meta[loan_interest]",K.loan_interest||(null===ne||void 0===ne?void 0:ne.interest_rate)||""),t.append("meta[loan_id]",K.loan_id),K.loan_note&&t.append("meta[loan_note]",K.loan_note),t.append("meta[loan_status]","Active"),ne&&(t.append("meta[loan_product_id]",String(ne.id)),t.append("meta[loan_product_name]",String(ne.product_name||""))),v&&(t.append("meta[borrower_id]",String(v.id)),t.append("meta[borrower_first_name]",String(j)),t.append("meta[borrower_last_name]",String(w)),t.append("meta[borrower_email]",String(N)),t.append("meta[borrower_phone]",String(_))),K.co_borrower&&t.append("meta[co_borrower_id]",String(K.co_borrower)),(d||u||p||m)&&(t.append("meta[disbursement_account_name]",d),t.append("meta[disbursement_account_bank]",u),t.append("meta[disbursement_account_bsb]",m),t.append("meta[disbursement_account_number]",p)),(h||f||g||x)&&(t.append("meta[repayment_account_name]",h),t.append("meta[repayment_account_bank]",f),t.append("meta[repayment_account_bsb]",x),t.append("meta[repayment_account_number]",g)),K.loan_repayment_account&&t.append("meta[repayment_account_id]",String(K.loan_repayment_account)),r&&r.length>0&&(r.forEach(e=>t.append("meta[bank_statement][]",String(e))),r.forEach(e=>t.append("fields[bank_statement][]",String(e))),t.append("fields[bank_statement]",JSON.stringify(r.map(String))),t.append("bank_statement",JSON.stringify(r.map(String))),r.forEach(e=>t.append("bank_statement[]",String(e))),t.append("meta[bank_statement_count]",String(r.length))),o&&(t.append("meta[collateral]",String(o)),t.append("fields[collateral]",String(o)),t.append("collateral",String(o))),i&&(t.append("meta[loan_contract]",String(i)),t.append("fields[loan_contract]",String(i)),t.append("loan_contract",String(i)));const S=s?on(s.id||s.ID):null,L=S?"".concat(an,"/wp/v2/loans/").concat(S):"".concat(an,"/wp/v2/loans"),E=await fetch(L,{method:"POST",headers:{Authorization:"Bearer ".concat(a)},body:t,mode:"cors"});if(!E.ok){const e=await E.text();throw new Error(e||(s?"Failed to update loan":"Failed to create loan"))}const A=await E.json(),M=A.id||A.ID||S;M&&!s&&setTimeout(async()=>{try{const e=await fetch("".concat(an,"/echovault/v2/force-generate-schedule?loan_id=").concat(M),{method:"GET",headers:{Authorization:"Bearer ".concat(a),Accept:"application/json"},mode:"cors",credentials:"omit"}),t=e.headers.get("content-type");if(e.ok&&t&&t.includes("application/json")){const t=await e.json();t.success?console.log("Schedule generated successfully:",t.segments_created,"segments"):console.error("Schedule generation failed:",t.error,t.debug)}else{const t=await e.text();console.error("Schedule generation failed:",e.status,t.substring(0,200))}}catch(e){console.error("Schedule generation error:",e)}},2e3),b({show:!0,message:s?"Loan updated successfully!":"Loan created successfully!",type:"success"}),setTimeout(()=>l("loans-active"),900)}catch(r){x(r.message||"Failed to create loan")}finally{m(!1)}}},className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[1===y&&(0,Et.jsxs)(Et.Fragment,{children:[(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Loan ID"}),(0,Et.jsx)("input",{type:"text",value:K.loan_id,disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 text-gray-600"})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Borrower"}),(0,Et.jsxs)("select",{name:"borrower",value:K.borrower,onChange:ge,className:"w-full px-3 py-2 border rounded-md ".concat(Ne&&1===y?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-500"),required:!0,children:[(0,Et.jsx)("option",{value:"",children:"Select verified borrower"}),ee.map(e=>(0,Et.jsxs)("option",{value:e.id,children:[e.first_name," ",e.last_name," (",e.email_address,")"]},e.id))]})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Co-borrower Status"}),(0,Et.jsxs)("select",{name:"co_borrower_status",value:K.co_borrower_status,onChange:ge,className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:[(0,Et.jsx)("option",{value:"No",children:"No"}),(0,Et.jsx)("option",{value:"Yes",children:"Yes"})]})]}),"Yes"===K.co_borrower_status&&(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Co-borrower"}),(0,Et.jsxs)("select",{name:"co_borrower",value:K.co_borrower,onChange:ge,className:"w-full px-3 py-2 border rounded-md ".concat(Le&&1===y?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-500"),children:[(0,Et.jsx)("option",{value:"",children:"Select borrower"}),ae.map(e=>(0,Et.jsxs)("option",{value:e.id,children:[e.first_name," ",e.last_name," (",e.email_address,")"]},e.id))]})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Loan Product"}),(0,Et.jsxs)("select",{name:"loan_product",value:K.loan_product,onChange:ge,className:"w-full px-3 py-2 border rounded-md ".concat(_e&&1===y?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-500"),required:!0,children:[(0,Et.jsx)("option",{value:"",children:"Select active product"}),Z.map(e=>(0,Et.jsxs)("option",{value:e.id,children:[e.product_name," (Term ",e.term_min,"-",e.term_max,"m, ",e.currency,")"]},e.id))]})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Currency"}),(0,Et.jsx)("input",{type:"text",value:K.loan_currency,disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 text-gray-600"})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Interest (%)"}),(0,Et.jsx)("input",{type:"number",step:"0.01",value:K.loan_interest,disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 text-gray-600"})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Loan Term (months)"}),(0,Et.jsx)("input",{name:"loan_term",type:"number",min:oe||1,max:se||void 0,value:K.loan_term,onChange:be,className:"w-full px-3 py-2 border rounded-md ".concat(ke&&1===y?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-500"),required:!0}),(oe||se)&&(0,Et.jsxs)("p",{className:"text-xs mt-1 ".concat(he&&1===y?"text-red-600":"text-gray-500"),children:["Allowed: ",oe||"?"," - ",se||"?"," months"]})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Loan Amount"}),(0,Et.jsxs)("div",{className:"relative",children:[(0,Et.jsx)("span",{className:"absolute inset-y-0 left-0 pl-3 flex items-center text-gray-500",children:ln(K.loan_currency||(null===ne||void 0===ne?void 0:ne.currency))}),(0,Et.jsx)("input",{name:"loan_amount",type:"number",min:ie||0,max:ce||void 0,value:K.loan_amount,onChange:be,className:"w-full pl-8 pr-3 py-2 border rounded-md ".concat(Se&&1===y?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-500"),required:!0})]}),(ie||ce)&&(0,Et.jsxs)("p",{className:"text-xs mt-1 ".concat(fe&&1===y?"text-red-600":"text-gray-500"),children:["Range: ",ln(K.loan_currency||(null===ne||void 0===ne?void 0:ne.currency)),ie||0," - ",ln(K.loan_currency||(null===ne||void 0===ne?void 0:ne.currency)),ce||"\u221e"]})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Repayment Method"}),(0,Et.jsxs)("select",{name:"repayment_method",value:K.repayment_method,onChange:ge,className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:[(0,Et.jsx)("option",{children:"Equal Principal"}),(0,Et.jsx)("option",{children:"Equal Total"}),(0,Et.jsx)("option",{children:"Interest-Only"})]})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Repayment Frequency"}),(0,Et.jsxs)("select",{name:"repayment_frequency",value:K.repayment_frequency,onChange:ge,className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:[(0,Et.jsx)("option",{children:"Weekly"}),(0,Et.jsx)("option",{children:"Fortnightly"}),(0,Et.jsx)("option",{children:"Monthly"})]})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Repayment Type"}),(0,Et.jsxs)("select",{name:"repayment_type",value:K.repayment_type,onChange:ge,className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:[(0,Et.jsx)("option",{children:"Graphical"}),(0,Et.jsx)("option",{children:"Non Graphical"})]})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),(0,Et.jsx)("input",{name:"start_date",type:"date",value:K.start_date,onChange:ge,className:"w-full px-3 py-2 border rounded-md ".concat(Ce&&1===y?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-500"),required:!0})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),(0,Et.jsx)("input",{name:"end_date",type:"date",value:K.end_date,onChange:ge,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50",disabled:!0}),(0,Et.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Auto-calculated from start date and loan term"})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Disbursement Account (Borrower)"}),(0,Et.jsxs)("select",{name:"loan_disbursement_account",value:K.loan_disbursement_account,onChange:ge,className:"w-full px-3 py-2 border rounded-md ".concat(Ee&&1===y?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-500"),disabled:!xe.length,children:[(0,Et.jsx)("option",{value:"",children:xe.length?"Select borrower account":"No borrower account found"}),xe.map((e,t)=>(0,Et.jsx)("option",{value:e.value,children:e.label},t))]})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Repayment Account (System)"}),(0,Et.jsxs)("select",{name:"loan_repayment_account",value:K.loan_repayment_account,onChange:ge,className:"w-full px-3 py-2 border rounded-md ".concat(Ae&&1===y?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-500"),required:!0,children:[(0,Et.jsx)("option",{value:"",children:"Select active system account"}),te.map(e=>(0,Et.jsxs)("option",{value:e.id,children:["Australia"===(Array.isArray(e.account_type)?e.account_type[0]:e.account_type)?Array.isArray(e.bank_name_au)?e.bank_name_au[0]:e.bank_name_au:Array.isArray(e.bank_name_mn)?e.bank_name_mn[0]:e.bank_name_mn," \u2022 ",e.account_name," \u2022 ",e.account_number,e.bsb?" \u2022 BSB ".concat(e.bsb):""]},e.id))]})]}),(0,Et.jsxs)("div",{className:"md:col-span-2 flex justify-between space-x-4 pt-6 border-t border-gray-200 mt-2",children:[(0,Et.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Et.jsx)("button",{type:"button",onClick:()=>{return e=()=>l("loans-active"),void(le?(_(()=>e),w(!0)):e());var e},className:"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg font-medium",children:"Cancel"}),(0,Et.jsx)("button",{type:"button",onClick:Oe,disabled:p||!ye(K.borrower)&&!ye(K.loan_product),className:"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:p?"Saving\u2026":(0,Et.jsxs)("span",{className:"inline-flex items-center",children:[(0,Et.jsxs)("svg",{className:"w-4 h-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 3H5a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2V7l-4-4z"}),(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 3v8h10V3"}),(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 13h10v8H7z"})]}),"Save as Draft"]})})]}),(0,Et.jsx)("button",{type:"button",disabled:ve().length>0,onClick:()=>v(2),className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:"Next: Borrower Details"})]})]}),2===y&&(0,Et.jsxs)(Et.Fragment,{children:[(0,Et.jsxs)("div",{className:"md:col-span-2",children:[(0,Et.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Borrower Details"}),(0,Et.jsx)(We,{b:re})]}),"Yes"===K.co_borrower_status&&(0,Et.jsxs)("div",{className:"md:col-span-2",children:[(0,Et.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Co-borrower Details"}),(0,Et.jsx)(We,{b:C.find(e=>String(e.id)===String(K.co_borrower))})]}),(0,Et.jsxs)("div",{className:"md:col-span-2 flex justify-between space-x-4 pt-6 border-t border-gray-200 mt-2",children:[(0,Et.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Et.jsx)("button",{type:"button",onClick:()=>v(1),className:"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg font-medium",children:"Back"}),(0,Et.jsx)("button",{type:"button",onClick:Oe,disabled:p||!ye(K.borrower)&&!ye(K.loan_product),className:"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:p?"Saving\u2026":(0,Et.jsxs)("span",{className:"inline-flex items-center",children:[(0,Et.jsxs)("svg",{className:"w-4 h-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 3H5a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2V7l-4-4z"}),(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 3v8h10V3"}),(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 13h10v8H7z"})]}),"Save as Draft"]})})]}),(0,Et.jsx)("button",{type:"button",disabled:je().length>0,onClick:()=>v(3),className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:"Next: Loan Schedule"})]})]}),3===y&&(0,Et.jsxs)(Et.Fragment,{children:[(0,Et.jsxs)("div",{className:"md:col-span-2",children:[(0,Et.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,Et.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Repayment Schedule"}),(0,Et.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Et.jsx)("button",{type:"button",onClick:async()=>{if(K.loan_amount&&K.loan_term&&K.start_date&&ne){$(!0),Q(""),Y(!1),U([]);try{const t=await(async()=>{try{const e="".concat(an,"/echovault/v2/test");console.log("Testing plugin connection:",e);const t=await fetch(e,{method:"GET",mode:"cors",headers:{Accept:"application/json"}});if(console.log("Test response status:",t.status),console.log("Test response headers:",Object.fromEntries(t.headers.entries())),t.ok){const e=await t.json();return console.log("\u2705 Plugin is active:",e),!0}{const e=await t.text();return console.error("\u274c Plugin test failed:",t.status,t.statusText,e),404===t.status&&(console.log("Test endpoint returned 404, trying main endpoint instead..."),!0)}}catch(f){return console.error("\u274c Plugin connection test failed:",f),console.log("\u26a0\ufe0f Test failed but continuing - will try main endpoint..."),!0}})();t||console.warn("Plugin test endpoint not accessible, but continuing to try main endpoint...");const n="".concat(an,"/echovault/v2/calculate-schedule");console.log("Testing API endpoint:",n),console.log("API Base URL:",an),console.log("Token present:",!!a);const r={loan_amount:Number(K.loan_amount),loan_term:Number(K.loan_term),loan_interest:Number(K.loan_interest||(null===ne||void 0===ne?void 0:ne.interest_rate)||0),repayment_method:K.repayment_method,repayment_frequency:K.repayment_frequency,start_date:K.start_date};console.log("Request body:",r);const l=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json",Authorization:a?"Bearer ".concat(a):"",Accept:"application/json"},body:JSON.stringify(r),mode:"cors",credentials:"omit"});if(console.log("Response status:",l.status),console.log("Response headers:",Object.fromEntries(l.headers.entries())),!l.ok){const e=await l.json().catch(()=>({message:"Unknown error"}));throw new Error(e.message||"HTTP ".concat(l.status,": ").concat(l.statusText))}const o=l.headers.get("content-length"),s=await l.text();if(console.log("Response content-length:",o),console.log("Response text length:",s.length),console.log("Response text (first 500 chars):",s.substring(0,500)),!s||0===s.trim().length)throw new Error("Empty response from server. The API endpoint returned no data.");let i;try{i=JSON.parse(s)}catch(e){throw console.error("JSON parse error:",e),console.error("Response text that failed to parse:",s),new Error("Failed to parse JSON response: ".concat(e.message,". Response: ").concat(s.substring(0,200)))}if(!i.success||!i.schedule)throw new Error("Invalid response format from API");{const e=i.schedule.map(e=>u(u({},e),{},{date:new Date(e.date)}));if(U(e),Y(!0),Q(""),W.length>0){const t=Fe(W,e);t.match?console.log("\u2705 Schedules match perfectly!",t):console.warn("\u26a0\ufe0f Schedule differences detected:",t)}}}catch(f){console.error("API Test Error:",f),console.error("Error details:",{name:f.name,message:f.message,stack:f.stack});let t=f.message||"Failed to calculate schedule from API";"Failed to fetch"!==f.message&&"TypeError"!==f.name||(t="Failed to connect to API. This is usually a CORS or network issue.\n        \nPlease check:\n1. \u2705 Plugin is installed and activated (test endpoint works)\n2. \ud83d\udd0d Check browser console (F12) \u2192 Network tab for detailed error\n3. \ud83d\udd0d Look for CORS errors in console\n4. \ud83d\udd0d Verify you're logged in (authentication required)\n\nAPI endpoint: ".concat(an,"/echovault/v2/calculate-schedule")),Q(t),Y(!1),U([])}finally{$(!1)}}else Q("Please fill in loan amount, term, and start date first")},disabled:q||!K.loan_amount||!K.loan_term||!K.start_date,className:"px-3 py-1.5 text-sm rounded border border-green-300 text-green-700 bg-green-50 hover:bg-green-100 disabled:opacity-50 disabled:cursor-not-allowed",title:"Test API calculation",children:q?"Testing...":"\ud83e\uddea Test API"}),(0,Et.jsx)("button",{type:"button",onClick:()=>window.print(),disabled:!W||0===W.length,className:"px-3 py-1.5 text-sm rounded border border-gray-300 text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",title:"Print schedule",children:"Print"}),(0,Et.jsx)("button",{type:"button",onClick:()=>{if(!W||0===W.length)return;const e=[["#","Date","Payment","Principal","Interest","Balance"],...W.map(e=>[e.idx,new Date(e.date).toISOString().slice(0,10),e.payment.toFixed(2),e.principal.toFixed(2),e.interest.toFixed(2),e.balance.toFixed(2)])].map(e=>e.join(",")).join("\n"),t=new Blob([e],{type:"text/csv;charset=utf-8;"}),n=URL.createObjectURL(t),r=document.createElement("a");r.href=n;const a="repayment_schedule_".concat(K.loan_id||"loan",".csv");r.setAttribute("download",a),document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n)},disabled:!W||0===W.length,className:"px-3 py-1.5 text-sm rounded border border-gray-300 text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",title:"Download CSV",children:"Download CSV"})]})]}),G&&(0,Et.jsxs)("div",{className:"mb-3 p-3 bg-red-50 border border-red-200 text-red-700 rounded-lg text-sm",children:[(0,Et.jsx)("strong",{children:"API Test Error:"})," ",G]}),J&&(0,Et.jsxs)("div",{className:"mb-3 p-3 bg-green-50 border border-green-200 text-green-700 rounded-lg text-sm",children:[(0,Et.jsx)("strong",{children:"\u2705 API Test Successful!"})," Schedule calculated from backend API.",H.length>0&&(0,Et.jsxs)("span",{className:"ml-2",children:["(",H.length," payments)"]})]}),H.length>0?(0,Et.jsxs)("div",{className:"mb-4",children:[(0,Et.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,Et.jsx)("h4",{className:"text-sm font-semibold text-gray-700",children:"\ud83d\udce1 Repayment Schedule (Calculated from Backend API)"}),(0,Et.jsxs)("span",{className:"text-xs font-medium text-gray-600 bg-gray-100 px-2 py-1 rounded",children:["Scheduled by ",K.repayment_frequency]})]}),(0,Et.jsx)("div",{className:"overflow-x-auto border rounded-md border-green-300 bg-green-50",children:(0,Et.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 text-sm",children:[(0,Et.jsx)("thead",{className:"bg-green-100",children:(0,Et.jsxs)("tr",{children:[(0,Et.jsx)("th",{className:"px-3 py-2 text-center font-medium text-gray-700",children:"#"}),(0,Et.jsx)("th",{className:"px-3 py-2 text-left font-medium text-gray-700",children:"Start Date"}),(0,Et.jsx)("th",{className:"px-3 py-2 text-left font-medium text-gray-700",children:"End Date"}),(0,Et.jsx)("th",{className:"px-3 py-2 text-center font-medium text-gray-700",children:"Days"}),(0,Et.jsx)("th",{className:"px-3 py-2 text-right font-medium text-gray-700",children:"Start Balance"}),(0,Et.jsx)("th",{className:"px-3 py-2 text-right font-medium text-gray-700",children:"Interest"}),(0,Et.jsx)("th",{className:"px-3 py-2 text-right font-medium text-gray-700",children:"Principal"}),(0,Et.jsx)("th",{className:"px-3 py-2 text-right font-medium text-gray-700",children:"Total Payment"}),(0,Et.jsx)("th",{className:"px-3 py-2 text-right font-medium text-gray-700",children:"Outstanding Interest"}),(0,Et.jsx)("th",{className:"px-3 py-2 text-right font-medium text-gray-700",children:"Remaining Balance"})]})}),(0,Et.jsx)("tbody",{className:"divide-y divide-gray-100 bg-white",children:H.map((e,t)=>{var n,r;const a=0===t?Number(K.loan_amount):(null===(n=H[t-1])||void 0===n?void 0:n.balance)||Number(K.loan_amount),l=e.period_start?new Date(e.period_start):0===t?new Date(K.start_date):new Date((null===(r=H[t-1])||void 0===r?void 0:r.date)||K.start_date),o=e.period_end?new Date(e.period_end):new Date(e.date),s=e.days||Math.ceil((o-l)/864e5);return(0,Et.jsxs)("tr",{className:"hover:bg-green-50",children:[(0,Et.jsx)("td",{className:"px-3 py-1 text-center",children:e.idx}),(0,Et.jsx)("td",{className:"px-3 py-1",children:l.toLocaleDateString("en-CA")}),(0,Et.jsx)("td",{className:"px-3 py-1",children:o.toLocaleDateString("en-CA")}),(0,Et.jsx)("td",{className:"px-3 py-1 text-center",children:s}),(0,Et.jsxs)("td",{className:"px-3 py-1 text-right",children:[ln(K.loan_currency||(null===ne||void 0===ne?void 0:ne.currency)),a.toFixed(2)]}),(0,Et.jsxs)("td",{className:"px-3 py-1 text-right",children:[ln(K.loan_currency||(null===ne||void 0===ne?void 0:ne.currency)),e.interest.toFixed(2)]}),(0,Et.jsxs)("td",{className:"px-3 py-1 text-right",children:[ln(K.loan_currency||(null===ne||void 0===ne?void 0:ne.currency)),e.principal.toFixed(2)]}),(0,Et.jsxs)("td",{className:"px-3 py-1 text-right",children:[ln(K.loan_currency||(null===ne||void 0===ne?void 0:ne.currency)),e.payment.toFixed(2)]}),(0,Et.jsxs)("td",{className:"px-3 py-1 text-right",children:[ln(K.loan_currency||(null===ne||void 0===ne?void 0:ne.currency)),"0.00"]}),(0,Et.jsxs)("td",{className:"px-3 py-1 text-right",children:[ln(K.loan_currency||(null===ne||void 0===ne?void 0:ne.currency)),e.balance.toFixed(2)]})]},e.idx)})})]})})]}):W.length>0?(0,Et.jsxs)("div",{className:"mb-4",children:[(0,Et.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,Et.jsx)("h4",{className:"text-sm font-semibold text-gray-700",children:"\ud83d\udcbb Repayment Schedule (Client-Side Calculation)"}),(0,Et.jsxs)("span",{className:"text-xs font-medium text-gray-600 bg-gray-100 px-2 py-1 rounded",children:["Scheduled by ",K.repayment_frequency]})]}),(0,Et.jsx)("div",{className:"overflow-x-auto border rounded-md",children:(0,Et.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 text-sm",children:[(0,Et.jsx)("thead",{className:"bg-gray-50",children:(0,Et.jsxs)("tr",{children:[(0,Et.jsx)("th",{className:"px-3 py-2 text-center font-medium text-gray-700",children:"#"}),(0,Et.jsx)("th",{className:"px-3 py-2 text-left font-medium text-gray-700",children:"Start Date"}),(0,Et.jsx)("th",{className:"px-3 py-2 text-left font-medium text-gray-700",children:"End Date"}),(0,Et.jsx)("th",{className:"px-3 py-2 text-center font-medium text-gray-700",children:"Days"}),(0,Et.jsx)("th",{className:"px-3 py-2 text-right font-medium text-gray-700",children:"Start Balance"}),(0,Et.jsx)("th",{className:"px-3 py-2 text-right font-medium text-gray-700",children:"Interest"}),(0,Et.jsx)("th",{className:"px-3 py-2 text-right font-medium text-gray-700",children:"Principal"}),(0,Et.jsx)("th",{className:"px-3 py-2 text-right font-medium text-gray-700",children:"Total Payment"}),(0,Et.jsx)("th",{className:"px-3 py-2 text-right font-medium text-gray-700",children:"Outstanding Interest"}),(0,Et.jsx)("th",{className:"px-3 py-2 text-right font-medium text-gray-700",children:"Remaining Balance"})]})}),(0,Et.jsx)("tbody",{className:"divide-y divide-gray-100",children:W.map((e,t)=>{var n,r;const a=0===t?Number(K.loan_amount):(null===(n=W[t-1])||void 0===n?void 0:n.balance)||Number(K.loan_amount),l=0===t?new Date(K.start_date):new Date((null===(r=W[t-1])||void 0===r?void 0:r.date)||K.start_date),o=new Date(e.date),s=Math.ceil((o-l)/864e5);return(0,Et.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,Et.jsx)("td",{className:"px-3 py-1 text-center",children:e.idx}),(0,Et.jsx)("td",{className:"px-3 py-1",children:l.toLocaleDateString("en-CA")}),(0,Et.jsx)("td",{className:"px-3 py-1",children:o.toLocaleDateString("en-CA")}),(0,Et.jsx)("td",{className:"px-3 py-1 text-center",children:s}),(0,Et.jsxs)("td",{className:"px-3 py-1 text-right",children:[ln(K.loan_currency||(null===ne||void 0===ne?void 0:ne.currency)),a.toFixed(2)]}),(0,Et.jsxs)("td",{className:"px-3 py-1 text-right",children:[ln(K.loan_currency||(null===ne||void 0===ne?void 0:ne.currency)),e.interest.toFixed(2)]}),(0,Et.jsxs)("td",{className:"px-3 py-1 text-right",children:[ln(K.loan_currency||(null===ne||void 0===ne?void 0:ne.currency)),e.principal.toFixed(2)]}),(0,Et.jsxs)("td",{className:"px-3 py-1 text-right",children:[ln(K.loan_currency||(null===ne||void 0===ne?void 0:ne.currency)),e.payment.toFixed(2)]}),(0,Et.jsxs)("td",{className:"px-3 py-1 text-right",children:[ln(K.loan_currency||(null===ne||void 0===ne?void 0:ne.currency)),"0.00"]}),(0,Et.jsxs)("td",{className:"px-3 py-1 text-right",children:[ln(K.loan_currency||(null===ne||void 0===ne?void 0:ne.currency)),e.balance.toFixed(2)]})]},e.idx)})})]})})]}):(0,Et.jsx)("div",{className:"text-sm text-gray-600 p-4 bg-gray-50 rounded-md border border-gray-200",children:"Adjust loan parameters (amount, term, start date) to generate the repayment schedule."})]}),(0,Et.jsxs)("div",{className:"md:col-span-2 flex justify-between space-x-4 pt-6 border-t border-gray-200 mt-2",children:[(0,Et.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Et.jsx)("button",{type:"button",onClick:()=>v(2),className:"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg font-medium",children:"Back"}),(0,Et.jsx)("button",{type:"button",onClick:Oe,disabled:p||!ye(K.borrower)&&!ye(K.loan_product),className:"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:p?"Saving\u2026":(0,Et.jsxs)("span",{className:"inline-flex items-center",children:[(0,Et.jsxs)("svg",{className:"w-4 h-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 3H5a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2V7l-4-4z"}),(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 3v8h10V3"}),(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 13h10v8H7z"})]}),"Save as Draft"]})})]}),(0,Et.jsx)("button",{type:"button",disabled:we().length>0,onClick:()=>v(4),className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:"Next: Bank Statements"})]})]}),4===y&&(0,Et.jsxs)(Et.Fragment,{children:[(0,Et.jsxs)("div",{className:"md:col-span-2",children:[(0,Et.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Bank Statements"}),(0,Et.jsxs)("div",{className:"border-2 border-dashed border-gray-300 hover:border-blue-400 rounded-md p-4 bg-gray-50",children:[(0,Et.jsxs)("label",{className:"w-full flex flex-col items-center cursor-pointer",children:[(0,Et.jsx)("svg",{className:"w-6 h-6 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M4 16v1a2 2 0 002 2h12a2 2 0 002-2v-1M12 12v9m0-9l3 3m-3-3l-3 3M12 3v9"})}),(0,Et.jsx)("span",{className:"text-xs text-gray-600 mt-1",children:"Click to upload PDF (max 5MB each)"}),(0,Et.jsx)("input",{type:"file",accept:"application/pdf",multiple:!0,onChange:e=>{D("");const t=Array.from(e.target.files||[]);t.filter(e=>"application/pdf"!==e.type||e.size>5242880).length&&D("Only PDF files up to 5MB are allowed.");const n=t.filter(e=>"application/pdf"===e.type&&e.size<=5242880);F(e=>[...e,...n])},className:"hidden"})]}),T&&(0,Et.jsx)("div",{className:"mt-2 text-xs text-red-600",children:T}),B&&B.length>0&&(0,Et.jsxs)("div",{className:"mt-3",children:[(0,Et.jsx)("div",{className:"text-sm font-medium text-gray-900 mb-2",children:"Uploaded Files"}),(0,Et.jsx)("ul",{className:"divide-y divide-gray-200 rounded-md border border-gray-200 bg-white",children:B.map((e,t)=>{var n;const r=e instanceof File||e instanceof Blob,a=r?(e.size/1048576).toFixed(2):"0.00",l=r?e.name:(null===(n=e.title)||void 0===n?void 0:n.rendered)||e.post_title||"Bank Statement";return(0,Et.jsxs)("li",{className:"flex items-center justify-between px-3 py-2 text-sm",children:[(0,Et.jsxs)("div",{className:"flex items-center gap-3 min-w-0",children:[(0,Et.jsx)("svg",{className:"w-5 h-5 text-gray-400 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})}),(0,Et.jsxs)("div",{className:"min-w-0",children:[(0,Et.jsx)("div",{className:"truncate text-gray-900",children:l}),(0,Et.jsxs)("div",{className:"text-xs text-gray-500",children:[a," MB"]})]})]}),(0,Et.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Et.jsx)("button",{type:"button",onClick:()=>{if(r){const t=URL.createObjectURL(e);window.open(t,"_blank","noopener"),setTimeout(()=>URL.revokeObjectURL(t),1e4)}else{var t,n;const r=e.source_url||(null===(t=e.guid)||void 0===t?void 0:t.rendered)||(null===(n=e.guid)||void 0===n?void 0:n.raw)||("string"===typeof e.guid?e.guid:null);r?window.open(r,"_blank","noopener"):console.error("No URL found for media:",e)}},className:"px-2 py-1 text-xs border border-gray-300 rounded hover:bg-gray-50",children:"View"}),(0,Et.jsx)("button",{type:"button",onClick:()=>F(e=>e.filter((e,n)=>n!==t)),className:"px-2 py-1 text-xs border border-red-200 text-red-700 rounded hover:bg-red-50",children:"Remove"})]})]},t)})})]})]})]}),(0,Et.jsxs)("div",{className:"md:col-span-2 flex justify-between space-x-4 pt-6 border-t border-gray-200 mt-2",children:[(0,Et.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Et.jsx)("button",{type:"button",onClick:()=>v(3),className:"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg font-medium",children:"Back"}),(0,Et.jsx)("button",{type:"button",onClick:Oe,disabled:p||!ye(K.borrower)&&!ye(K.loan_product),className:"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:p?"Saving\u2026":(0,Et.jsxs)("span",{className:"inline-flex items-center",children:[(0,Et.jsxs)("svg",{className:"w-4 h-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 3H5a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2V7l-4-4z"}),(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 3v8h10V3"}),(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 13h10v8H7z"})]}),"Save as Draft"]})})]}),(0,Et.jsx)("button",{type:"button",onClick:()=>v(5),className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium",children:"Next: Collateral"})]})]}),5===y&&(0,Et.jsxs)(Et.Fragment,{children:[(0,Et.jsxs)("div",{className:"md:col-span-2",children:[(0,Et.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Collateral"}),(0,Et.jsxs)("div",{className:"border-2 border-dashed border-gray-300 hover:border-blue-400 rounded-md p-4 bg-gray-50",children:[(0,Et.jsxs)("label",{className:"w-full flex flex-col items-center cursor-pointer",children:[(0,Et.jsx)("svg",{className:"w-6 h-6 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M4 16v1a2 2 0 002 2h12a2 2 0 002-2v-1M12 12v9m0-9l3 3m-3-3l-3 3M12 3v9"})}),(0,Et.jsx)("span",{className:"text-xs text-gray-600 mt-1",children:"Click to upload PDF (max 5MB)"}),(0,Et.jsx)("input",{type:"file",accept:"application/pdf",onChange:e=>{var t;return R((null===(t=e.target.files)||void 0===t?void 0:t[0])||null)},className:"hidden"})]}),z&&(0,Et.jsxs)("div",{className:"mt-3",children:[(0,Et.jsx)("div",{className:"text-sm font-medium text-gray-900 mb-2",children:"Uploaded File"}),(0,Et.jsx)("ul",{className:"divide-y divide-gray-200 rounded-md border border-gray-200 bg-white",children:(0,Et.jsxs)("li",{className:"flex items-center justify-between px-3 py-2 text-sm",children:[(0,Et.jsxs)("div",{className:"flex items-center gap-3 min-w-0",children:[(0,Et.jsx)("svg",{className:"w-5 h-5 text-gray-400 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})}),(0,Et.jsxs)("div",{className:"min-w-0",children:[(0,Et.jsx)("div",{className:"truncate text-gray-900",children:z instanceof File||z instanceof Blob?z.name:(null===(t=z.title)||void 0===t?void 0:t.rendered)||z.filename||z.post_title||"File #".concat(z.id||z.ID)}),(0,Et.jsx)("div",{className:"text-xs text-gray-500",children:z instanceof File||z instanceof Blob?"".concat((z.size/1048576).toFixed(2)," MB"):z.mime_type||z.post_mime_type||"PDF"})]})]}),(0,Et.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Et.jsx)("button",{type:"button",onClick:()=>{if(z instanceof File||z instanceof Blob){const e=URL.createObjectURL(z);window.open(e,"_blank","noopener"),setTimeout(()=>URL.revokeObjectURL(e),1e4)}else{var e,t;const n=z.source_url||(null===(e=z.guid)||void 0===e?void 0:e.rendered)||(null===(t=z.guid)||void 0===t?void 0:t.raw)||("string"===typeof z.guid?z.guid:null);n?window.open(n,"_blank","noopener"):console.error("No URL found for collateral media:",z)}},className:"px-2 py-1 text-xs border border-gray-300 rounded hover:bg-gray-50",children:"View"}),(0,Et.jsx)("button",{type:"button",onClick:()=>R(null),className:"px-2 py-1 text-xs border border-red-200 text-red-700 rounded hover:bg-red-50",children:"Remove"})]})]})})]})]})]}),(0,Et.jsxs)("div",{className:"md:col-span-2 flex justify-between space-x-4 pt-6 border-t border-gray-200 mt-2",children:[(0,Et.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Et.jsx)("button",{type:"button",onClick:()=>v(4),className:"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg font-medium",children:"Back"}),(0,Et.jsx)("button",{type:"button",onClick:Oe,disabled:p||!ye(K.borrower)&&!ye(K.loan_product),className:"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:p?"Saving\u2026":(0,Et.jsxs)("span",{className:"inline-flex items-center",children:[(0,Et.jsxs)("svg",{className:"w-4 h-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 3H5a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2V7l-4-4z"}),(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 3v8h10V3"}),(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 13h10v8H7z"})]}),"Save as Draft"]})})]}),(0,Et.jsx)("button",{type:"button",onClick:()=>v(6),className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium",children:"Next: Contract"})]})]}),6===y&&(0,Et.jsxs)(Et.Fragment,{children:[(0,Et.jsxs)("div",{className:"md:col-span-2",children:[(0,Et.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Contract"}),(0,Et.jsxs)("div",{className:"border-2 border-dashed border-gray-300 hover:border-blue-400 rounded-md p-4 bg-gray-50",children:[(0,Et.jsxs)("label",{className:"w-full flex flex-col items-center cursor-pointer",children:[(0,Et.jsx)("svg",{className:"w-6 h-6 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M4 16v1a2 2 0 002 2h12a2 2 0 002-2v-1M12 12v9m0-9l3 3m-3-3l-3 3M12 3v9"})}),(0,Et.jsx)("span",{className:"text-xs text-gray-600 mt-1",children:"Click to upload PDF (max 5MB)"}),(0,Et.jsx)("input",{type:"file",accept:"application/pdf",onChange:e=>{var t;return I((null===(t=e.target.files)||void 0===t?void 0:t[0])||null)},className:"hidden"})]}),O&&(0,Et.jsxs)("div",{className:"mt-3",children:[(0,Et.jsx)("div",{className:"text-sm font-medium text-gray-900 mb-2",children:"Uploaded File"}),(0,Et.jsx)("ul",{className:"divide-y divide-gray-200 rounded-md border border-gray-200 bg-white",children:(0,Et.jsxs)("li",{className:"flex items-center justify-between px-3 py-2 text-sm",children:[(0,Et.jsxs)("div",{className:"flex items-center gap-3 min-w-0",children:[(0,Et.jsx)("svg",{className:"w-5 h-5 text-gray-400 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})}),(0,Et.jsxs)("div",{className:"min-w-0",children:[(0,Et.jsx)("div",{className:"truncate text-gray-900",children:O instanceof File||O instanceof Blob?O.name:(null===(n=O.title)||void 0===n?void 0:n.rendered)||O.filename||O.post_title||"File #".concat(O.id||O.ID)}),(0,Et.jsx)("div",{className:"text-xs text-gray-500",children:O instanceof File||O instanceof Blob?"".concat((O.size/1048576).toFixed(2)," MB"):O.mime_type||O.post_mime_type||"PDF"})]})]}),(0,Et.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Et.jsx)("button",{type:"button",onClick:()=>{if(O instanceof File||O instanceof Blob){const e=URL.createObjectURL(O);window.open(e,"_blank","noopener"),setTimeout(()=>URL.revokeObjectURL(e),1e4)}else{var e,t;const n=O.source_url||(null===(e=O.guid)||void 0===e?void 0:e.rendered)||(null===(t=O.guid)||void 0===t?void 0:t.raw)||("string"===typeof O.guid?O.guid:null);n?window.open(n,"_blank","noopener"):console.error("No URL found for contract media:",O)}},className:"px-2 py-1 text-xs border border-gray-300 rounded hover:bg-gray-50",children:"View"}),(0,Et.jsx)("button",{type:"button",onClick:()=>I(null),className:"px-2 py-1 text-xs border border-red-200 text-red-700 rounded hover:bg-red-50",children:"Remove"})]})]})})]})]})]}),(0,Et.jsxs)("div",{className:"md:col-span-2 flex justify-between space-x-4 pt-6 border-t border-gray-200 mt-2",children:[(0,Et.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Et.jsx)("button",{type:"button",onClick:()=>v(5),className:"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg font-medium",children:"Back"}),(0,Et.jsx)("button",{type:"button",onClick:Oe,disabled:p||!ye(K.borrower)&&!ye(K.loan_product),className:"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:p?"Saving\u2026":(0,Et.jsxs)("span",{className:"inline-flex items-center",children:[(0,Et.jsxs)("svg",{className:"w-4 h-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 3H5a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2V7l-4-4z"}),(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 3v8h10V3"}),(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 13h10v8H7z"})]}),"Save as Draft"]})})]}),(0,Et.jsx)("button",{type:"button",onClick:()=>v(7),className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium",children:"Next: Note"})]})]}),7===y&&(0,Et.jsxs)(Et.Fragment,{children:[(0,Et.jsxs)("div",{className:"md:col-span-2",children:[(0,Et.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Note"}),(0,Et.jsx)("textarea",{name:"loan_note",value:K.loan_note,onChange:ge,rows:5,className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"Enter any notes about this loan"})]}),(0,Et.jsxs)("div",{className:"md:col-span-2 flex justify-between space-x-4 pt-6 border-t border-gray-200 mt-2",children:[(0,Et.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Et.jsx)("button",{type:"button",onClick:()=>v(6),className:"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg font-medium",children:"Back"}),(0,Et.jsx)("button",{type:"button",onClick:Oe,disabled:p||!ye(K.borrower)&&!ye(K.loan_product),className:"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:p?"Saving\u2026":(0,Et.jsxs)("span",{className:"inline-flex items-center",children:[(0,Et.jsxs)("svg",{className:"w-4 h-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 3H5a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2V7l-4-4z"}),(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 3v8h10V3"}),(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 13h10v8H7z"})]}),"Save as Draft"]})})]}),(0,Et.jsx)("button",{type:"button",onClick:()=>v(8),className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium",children:"Next: Confirm"})]})]}),8===y&&(0,Et.jsxs)(Et.Fragment,{children:[(0,Et.jsxs)("div",{className:"md:col-span-2 space-y-4",children:[(0,Et.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Et.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Confirm Loan"}),(0,Et.jsx)("span",{className:"px-2 py-1 text-xs rounded bg-blue-50 text-blue-700 border border-blue-200",children:"Step 8 of 8"})]}),(0,Et.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[(0,Et.jsxs)("div",{className:"p-4 border rounded-lg bg-gray-50",children:[(0,Et.jsx)("div",{className:"font-semibold text-gray-900 mb-2",children:"Loan Summary"}),(0,Et.jsxs)("div",{className:"grid grid-cols-2 gap-y-1",children:[(0,Et.jsx)("div",{className:"text-gray-500",children:"Loan ID"}),(0,Et.jsx)("div",{className:"text-gray-900 font-medium",children:K.loan_id}),(0,Et.jsx)("div",{className:"text-gray-500",children:"Status"}),(0,Et.jsx)("div",{className:"text-gray-900 font-medium",children:K.loan_status}),(0,Et.jsx)("div",{className:"text-gray-500",children:"Product"}),(0,Et.jsx)("div",{className:"text-gray-900 font-medium",children:null===ne||void 0===ne?void 0:ne.product_name}),(0,Et.jsx)("div",{className:"text-gray-500",children:"Interest"}),(0,Et.jsxs)("div",{className:"text-gray-900 font-medium",children:[K.loan_interest,"%"]}),(0,Et.jsx)("div",{className:"text-gray-500",children:"Term"}),(0,Et.jsxs)("div",{className:"text-gray-900 font-medium",children:[K.loan_term," months"]}),(0,Et.jsx)("div",{className:"text-gray-500",children:"Amount"}),(0,Et.jsxs)("div",{className:"text-gray-900 font-medium",children:[ln(K.loan_currency||(null===ne||void 0===ne?void 0:ne.currency)),K.loan_amount]}),(0,Et.jsx)("div",{className:"text-gray-500",children:"Method"}),(0,Et.jsx)("div",{className:"text-gray-900 font-medium",children:K.repayment_method}),(0,Et.jsx)("div",{className:"text-gray-500",children:"Frequency"}),(0,Et.jsx)("div",{className:"text-gray-900 font-medium",children:K.repayment_frequency}),(0,Et.jsx)("div",{className:"text-gray-500",children:"Start"}),(0,Et.jsx)("div",{className:"text-gray-900 font-medium",children:K.start_date}),(0,Et.jsx)("div",{className:"text-gray-500",children:"End"}),(0,Et.jsx)("div",{className:"text-gray-900 font-medium",children:K.end_date})]})]}),(0,Et.jsxs)("div",{className:"p-4 border rounded-lg bg-gray-50",children:[(0,Et.jsx)("div",{className:"font-semibold text-gray-900 mb-2",children:"Borrower"}),(0,Et.jsx)(We,{b:re}),"Yes"===K.co_borrower_status&&K.co_borrower&&(0,Et.jsxs)("div",{className:"mt-4",children:[(0,Et.jsx)("div",{className:"font-semibold text-gray-900 mb-2",children:"Co-borrower"}),(0,Et.jsx)(We,{b:C.find(e=>String(e.id)===String(K.co_borrower))})]})]}),(0,Et.jsxs)("div",{className:"p-4 border rounded-lg bg-gray-50",children:[(0,Et.jsx)("div",{className:"font-semibold text-gray-900 mb-2",children:"Accounts"}),(0,Et.jsxs)("div",{className:"grid grid-cols-1 gap-y-1",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsx)("div",{className:"text-gray-500",children:"Disbursement"}),(0,Et.jsx)("div",{className:"text-gray-900 font-medium break-all",children:(()=>{try{const e=K.loan_disbursement_account?JSON.parse(K.loan_disbursement_account):null;if(!e)return"";const t=Array.isArray(e.bankName)?e.bankName[0]||"":e.bankName||"";return[e.accountName||"",t,e.accountNumber||"",e.bsb?"BSB ".concat(e.bsb):""].filter(Boolean).join(" \u2022 ")}catch(e){return""}})()||"-"})]}),(0,Et.jsxs)("div",{className:"mt-2",children:[(0,Et.jsx)("div",{className:"text-gray-500",children:"Repayment"}),(0,Et.jsx)("div",{className:"text-gray-900 font-medium break-all",children:(()=>{const e=te.find(e=>String(e.id)===String(K.loan_repayment_account));if(!e)return"";const t="Australia"===(Array.isArray(e.account_type)?e.account_type[0]:e.account_type)?Array.isArray(e.bank_name_au)?e.bank_name_au[0]:e.bank_name_au:Array.isArray(e.bank_name_mn)?e.bank_name_mn[0]:e.bank_name_mn;return[e.account_name||"",t||"",e.account_number||"",e.bsb?"BSB ".concat(e.bsb):""].filter(Boolean).join(" \u2022 ")})()||"-"})]})]})]}),(0,Et.jsxs)("div",{className:"p-4 border rounded-lg bg-gray-50 md:col-span-3",children:[(0,Et.jsx)("div",{className:"font-semibold text-gray-900 mb-2",children:"Note"}),(0,Et.jsx)("div",{className:"text-gray-900 whitespace-pre-wrap",children:K.loan_note||"-"})]})]})]}),(0,Et.jsxs)("div",{className:"md:col-span-2 flex justify-between space-x-4 pt-6 border-t border-gray-200 mt-2",children:[(0,Et.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Et.jsx)("button",{type:"button",onClick:()=>v(7),className:"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg font-medium",children:"Back"}),(0,Et.jsx)("button",{type:"button",onClick:Oe,disabled:p,className:"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:p?"Saving\u2026":(0,Et.jsxs)("span",{className:"inline-flex items-center",children:[(0,Et.jsxs)("svg",{className:"w-4 h-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 3H5a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2V7l-4-4z"}),(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 3v8h10V3"}),(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 13h10v8H7z"})]}),"Save as Draft"]})})]}),(0,Et.jsxs)("button",{type:"submit",disabled:d||!!f,className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:[d&&(0,Et.jsxs)("svg",{className:"animate-spin h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[(0,Et.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,Et.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,Et.jsx)("span",{children:d?"Creating...":"Confirm & Create Loan"})]})]})]})]})}),(0,Et.jsx)(Ut,{isVisible:g.show,onClose:()=>b({show:!1,message:"",type:"success"}),message:g.message,type:g.type}),(0,Et.jsx)(Ht,{isOpen:j,onClose:()=>{w(!1),_(null)},onConfirm:()=>{w(!1);const e=N;_(null),e&&e()},title:"Discard changes?",message:"You have unsaved changes. Are you sure you want to leave this page?",confirmText:"Leave Without Saving",cancelText:"Continue Editing",type:"warning"})]})},cn=e=>{let{onSelectContract:t,onCreateNew:n}=e;const[a]=(0,r.useState)([]),[l]=(0,r.useState)(!1),[o]=(0,r.useState)("");return(0,Et.jsxs)("div",{children:[(0,Et.jsx)("div",{className:"mb-8",children:(0,Et.jsxs)("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Loan Contracts"}),(0,Et.jsx)("p",{className:"text-gray-600",children:"Manage and view loan contracts and agreements"})]}),(0,Et.jsxs)("button",{onClick:n,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-medium flex items-center space-x-2 self-start sm:self-center",children:[(0,Et.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),(0,Et.jsx)("span",{children:"Create New Contract"})]})]})}),0===a.length?(0,Et.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-12 text-center",children:[(0,Et.jsx)("div",{className:"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,Et.jsx)("svg",{className:"w-12 h-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),(0,Et.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No contracts found"}),(0,Et.jsx)("p",{className:"text-gray-500 mb-8 max-w-md mx-auto",children:"Get started by creating your first loan contract. This will help you manage agreements and handle contract templates."}),(0,Et.jsxs)("button",{onClick:n,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-medium flex items-center space-x-2 mx-auto",children:[(0,Et.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),(0,Et.jsx)("span",{children:"Create First Contract"})]})]}):(0,Et.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:(0,Et.jsx)("div",{className:"overflow-x-auto",children:(0,Et.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Et.jsx)("thead",{className:"bg-gray-50",children:(0,Et.jsxs)("tr",{children:[(0,Et.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contract"}),(0,Et.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Borrower"}),(0,Et.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Loan Amount"}),(0,Et.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,Et.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created"}),(0,Et.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,Et.jsx)("tbody",{className:"bg-white divide-y divide-gray-200"})]})})})]})},dn=e=>{let{token:t,setCurrentView:n}=e;const[a,l]=(0,r.useState)([]),[o,s]=(0,r.useState)(!1),[i,c]=(0,r.useState)(""),[d,m]=(0,r.useState)(!1),[p,h]=(0,r.useState)(!1),[f,x]=(0,r.useState)({account_type:"",bank_name_au:"",bank_name_mn:"",account_name:"",bsb:"",account_number:"",account_status:!0}),[g,b]=(0,r.useState)(!1),[y,v]=(0,r.useState)({show:!1,message:"",type:"success"}),[j,w]=(0,r.useState)(!1),[N,_]=(0,r.useState)(null),[k,S]=(0,r.useState)({account_status:!0}),[C,L]=(0,r.useState)({account_status:!0}),[E,A]=(0,r.useState)(!1),[P,M]=(0,r.useState)(""),[B,F]=(0,r.useState)(""),T="undefined"!==typeof window&&window.REACT_APP_API_URL||"https://echovault.space/wp-json",D=["Commonwealth Bank of Australia (CBA)","Westpac Banking Corporation","Australia and New Zealand Banking Group (ANZ)","National Australia Bank (NAB)","Macquarie Bank","Bank of Queensland (BOQ)","Bendigo and Adelaide Bank","Suncorp Bank","ING Bank (Australia)","AMP Bank","Bankwest","ME Bank (Members Equity Bank)","UBank","HSBC Bank Australia","Rabobank Australia","Bank Australia","Heritage Bank","Beyond Bank Australia","People's Choice Credit Union","Defence Bank","Teachers Mutual Bank","Police Bank","Newcastle Permanent Bank","Greater Bank"],z=["Khan Bank","Trade and Development Bank","Golomt Bank","XacBank","State Bank","Ard Bank","Capitron Bank","Bogd Bank","TransBank","Tenger Bank","National Investment Bank","Chingis Khaan Bank","Arig Bank","Credit Bank","Development Bank of Mongolia"],R=async()=>{if(t){s(!0),c("");try{const e=await fetch("".concat(T,"/wp/v2/bank-account-system?status=publish,draft&per_page=100"),{method:"GET",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"}});if(!e.ok)throw new Error("Failed to fetch bank accounts: ".concat(e.status," ").concat(e.statusText));const n=await e.json();l(n),h(!0)}catch(e){console.error("Error fetching bank accounts:",e),c("Failed to load bank accounts: ".concat(e.message)),l([]),h(!1)}finally{s(!1)}}},O=async e=>{if(e.preventDefault(),t){b(!0),c(""),v({show:!1,message:"",type:"success"});try{const e={title:f.account_name,status:f.account_status?"publish":"draft",account_type:f.account_type,bank_name_au:f.bank_name_au||"",bank_name_mn:f.bank_name_mn||"",account_name:f.account_name,bsb:f.bsb||"",account_number:f.account_number,account_status:f.account_status?"Active":"Inactive"},n=await fetch("".concat(T,"/wp/v2/bank-account-system"),{method:"POST",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify(e)});if(!n.ok){const e=await n.json().catch(()=>({}));throw new Error(e.message||"Failed to create bank account: ".concat(n.status," ").concat(n.statusText))}const r=await n.json();l(e=>[...e,r]),v({show:!0,message:"Bank account created successfully!",type:"success"}),x({account_type:"",bank_name_au:"",bank_name_mn:"",account_name:"",bsb:"",account_number:"",account_status:!0}),m(!1)}catch(n){console.error("Error creating bank account:",n),c("Failed to create bank account: ".concat(n.message))}finally{b(!1)}}},I=e=>{const{name:t,value:n,type:r,checked:a}=e.target;x(e=>u(u({},e),{},{[t]:"checkbox"===r?a:n}))},W=async()=>{if(t&&N){b(!0),c("");try{const e={status:k.account_status?"publish":"draft",account_status:k.account_status?"Active":"Inactive"},n=await fetch("".concat(T,"/wp/v2/bank-account-system/").concat(N.id),{method:"POST",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify(e)});if(!n.ok){const e=await n.json().catch(()=>({}));throw new Error(e.message||"Failed to update bank account: ".concat(n.status," ").concat(n.statusText))}v({show:!0,message:"Bank account updated successfully!",type:"success"}),_(e=>u(u({},e),{},{account_status:k.account_status})),l(e=>e.map(e=>e.id===N.id?u(u({},e),{},{account_status:k.account_status}):e)),w(!1),R()}catch(e){console.error("Bank account update error:",e),c("Failed to update bank account: ".concat(e.message))}finally{b(!1)}}},V=()=>{k.account_status!==C.account_status?A(!0):w(!1)},H=()=>{w(!1),A(!1)},U=()=>{A(!1),W()},q=a?a.filter(e=>{try{let t=!0;if(P){const n=P.toLowerCase();t=e.account_name&&String(e.account_name).toLowerCase().includes(n)||e.title&&String(e.title.rendered||e.title).toLowerCase().includes(n)||e.bank_name_au&&String(e.bank_name_au).toLowerCase().includes(n)||e.bank_name_mn&&String(e.bank_name_mn).toLowerCase().includes(n)||e.account_number&&String(e.account_number).includes(P)||e.bsb&&String(e.bsb).includes(P)}let n=!0;if(B){n=(Array.isArray(e.account_type)?e.account_type[0]:e.account_type)===B}return t&&n}catch(i){return console.error("Error filtering account:",i,e),!0}}):[];if((0,r.useEffect)(()=>{R()},[t]),d)return(0,Et.jsxs)("div",{children:[(0,Et.jsx)("div",{className:"mb-8",children:(0,Et.jsxs)("div",{children:[(0,Et.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Add New Bank Account"}),(0,Et.jsx)("p",{className:"text-gray-600",children:"Enter bank account details"})]})}),(0,Et.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:(0,Et.jsxs)("form",{onSubmit:O,className:"space-y-6",children:[(0,Et.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{htmlFor:"account_type",className:"block text-sm font-medium text-gray-700 mb-2",children:"Account Type *"}),(0,Et.jsxs)("select",{id:"account_type",name:"account_type",value:f.account_type,onChange:I,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,Et.jsx)("option",{value:"",children:"Select Country"}),(0,Et.jsx)("option",{value:"Australia",children:"Australia"}),(0,Et.jsx)("option",{value:"Mongolia",children:"Mongolia"})]})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{htmlFor:"bank_name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Bank Name *"}),(0,Et.jsxs)("select",{id:"bank_name",name:"Australia"===f.account_type?"bank_name_au":"bank_name_mn",value:"Australia"===f.account_type?f.bank_name_au:f.bank_name_mn,onChange:I,required:!0,disabled:!f.account_type,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-100",children:[(0,Et.jsx)("option",{value:"",children:"Select Bank"}),"Australia"===f.account_type&&D.map(e=>(0,Et.jsx)("option",{value:e,children:e},e)),"Mongolia"===f.account_type&&z.map(e=>(0,Et.jsx)("option",{value:e,children:e},e))]})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{htmlFor:"account_name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Account Name *"}),(0,Et.jsx)("input",{type:"text",id:"account_name",name:"account_name",value:f.account_name,onChange:I,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter account holder name"})]}),"Australia"===f.account_type&&(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{htmlFor:"bsb",className:"block text-sm font-medium text-gray-700 mb-2",children:"BSB *"}),(0,Et.jsx)("input",{type:"text",id:"bsb",name:"bsb",value:f.bsb,onChange:I,required:!0,pattern:"[0-9]{6}",maxLength:"6",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"123456"})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{htmlFor:"account_number",className:"block text-sm font-medium text-gray-700 mb-2",children:"Account Number *"}),(0,Et.jsx)("input",{type:"number",id:"account_number",name:"account_number",value:f.account_number,onChange:I,required:!0,min:"1",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter account number"})]}),(0,Et.jsxs)("div",{className:"md:col-span-2",children:[(0,Et.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Et.jsx)("button",{type:"button",onClick:()=>x(u(u({},f),{},{account_status:!f.account_status})),className:"relative inline-flex h-7 w-12 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 ".concat(f.account_status?"bg-green-500 focus:ring-green-300":"bg-gray-300 focus:ring-gray-300"),"aria-pressed":f.account_status,"aria-label":"Toggle account status",children:(0,Et.jsx)("span",{className:"inline-block h-5 w-5 transform rounded-full bg-white shadow transition-transform ".concat(f.account_status?"translate-x-6":"translate-x-1")})}),(0,Et.jsx)("span",{className:"text-sm ".concat(f.account_status?"text-green-700":"text-gray-700"),children:f.account_status?"Active":"Inactive"})]}),(0,Et.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Toggle to activate or deactivate this bank account"})]})]}),(0,Et.jsxs)("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-200",children:[(0,Et.jsx)("button",{type:"button",onClick:()=>m(!1),className:"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg font-medium",children:"Cancel"}),(0,Et.jsxs)("button",{type:"submit",disabled:g,className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:[g&&(0,Et.jsxs)("svg",{className:"animate-spin h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[(0,Et.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,Et.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,Et.jsx)("span",{children:g?"Creating...":"Create Account"})]})]})]})})]});try{return(0,Et.jsxs)("div",{children:[(0,Et.jsx)("div",{className:"mb-8",children:(0,Et.jsxs)("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Bank Accounts"}),(0,Et.jsx)("p",{className:"text-gray-600",children:"Manage and view bank accounts and financial information"})]}),(0,Et.jsxs)("button",{onClick:()=>m(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-medium flex items-center space-x-2 self-start sm:self-center",children:[(0,Et.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),(0,Et.jsx)("span",{children:"Add New Account"})]})]})}),(0,Et.jsx)("div",{className:"mb-6 bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:(0,Et.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{htmlFor:"search",className:"block text-sm font-medium text-gray-700 mb-2",children:"Search Accounts"}),(0,Et.jsxs)("div",{className:"relative",children:[(0,Et.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,Et.jsx)("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),(0,Et.jsx)("input",{type:"text",id:"search",value:P,onChange:e=>M(e.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Search by account name, bank, account number, or BSB..."})]})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{htmlFor:"countryFilter",className:"block text-sm font-medium text-gray-700 mb-2",children:"Filter by Country"}),(0,Et.jsxs)("select",{id:"countryFilter",value:B,onChange:e=>F(e.target.value),className:"block w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,Et.jsx)("option",{value:"",children:"All Countries"}),(0,Et.jsx)("option",{value:"Australia",children:"Australia"}),(0,Et.jsx)("option",{value:"Mongolia",children:"Mongolia"})]})]})]})}),i&&(0,Et.jsx)("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:i}),o&&(0,Et.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-12 text-center",children:[(0,Et.jsx)("div",{className:"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,Et.jsxs)("svg",{className:"animate-spin h-12 w-12 text-blue-600",fill:"none",viewBox:"0 0 24 24",children:[(0,Et.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,Et.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}),(0,Et.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Loading accounts..."}),(0,Et.jsx)("p",{className:"text-gray-500",children:"Please wait while we fetch your bank accounts."})]}),!o&&0===a.length&&(0,Et.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-12 text-center",children:[(0,Et.jsx)("div",{className:"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,Et.jsx)("svg",{className:"w-12 h-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})})}),(0,Et.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No accounts found"}),(0,Et.jsx)("p",{className:"text-gray-500 mb-8 max-w-md mx-auto",children:"Get started by adding your first bank account. This will help you manage financial information and track transactions."}),(0,Et.jsxs)("button",{onClick:()=>m(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-medium flex items-center space-x-2 mx-auto",children:[(0,Et.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),(0,Et.jsx)("span",{children:"Add First Account"})]})]}),!o&&a.length>0&&0===q.length&&(0,Et.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-12 text-center",children:[(0,Et.jsx)("div",{className:"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,Et.jsx)("svg",{className:"w-12 h-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),(0,Et.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No matching accounts"}),(0,Et.jsx)("p",{className:"text-gray-500 mb-4",children:"No accounts match your current search criteria."}),(0,Et.jsx)("p",{className:"text-sm text-gray-400 mb-6",children:"Try adjusting your search term or country filter."}),(0,Et.jsx)("button",{onClick:()=>{M(""),F("")},className:"bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg font-medium",children:"Clear Filters"})]}),!o&&q.length>0&&(0,Et.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:(0,Et.jsx)("div",{className:"overflow-x-auto",children:(0,Et.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Et.jsx)("thead",{className:"bg-gray-50",children:(0,Et.jsxs)("tr",{children:[(0,Et.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Account Name"}),(0,Et.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Country"}),(0,Et.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Bank"}),(0,Et.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Account Number"}),(0,Et.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"BSB"}),(0,Et.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,Et.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,Et.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:q.map((e,t)=>{let n=e.account_status;Array.isArray(n)&&(n=n[0]);const r=!0===n||"Active"===n||"active"===n;return(0,Et.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,Et.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.account_name||e.title}),(0,Et.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:Array.isArray(e.account_type)?e.account_type[0]:e.account_type}),(0,Et.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:"Australia"===(Array.isArray(e.account_type)?e.account_type[0]:e.account_type)?Array.isArray(e.bank_name_au)?e.bank_name_au[0]:e.bank_name_au:Array.isArray(e.bank_name_mn)?e.bank_name_mn[0]:e.bank_name_mn}),(0,Et.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.account_number}),(0,Et.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.bsb||"-"}),(0,Et.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Et.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat(r?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:r?"Active":"Inactive"})}),(0,Et.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(0,Et.jsx)("button",{onClick:()=>(e=>{_(e);let t=e.account_status;Array.isArray(t)&&(t=t[0]);const n={account_status:!0===t||"Active"===t||"active"===t};S(n),L(n),w(!0)})(e),className:"text-blue-600 hover:text-blue-900 p-1 rounded hover:bg-blue-50",title:"View/Edit Account",children:(0,Et.jsxs)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})})]},t)})})]})})}),j&&N&&(0,Et.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:(0,Et.jsx)("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:(0,Et.jsxs)("div",{className:"mt-3",children:[(0,Et.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Bank Account Details"}),(0,Et.jsxs)("div",{className:"space-y-3",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Account Name"}),(0,Et.jsx)("p",{className:"text-sm text-gray-900",children:N.account_name||N.title})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Country"}),(0,Et.jsx)("p",{className:"text-sm text-gray-900",children:Array.isArray(N.account_type)?N.account_type[0]:N.account_type})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Bank"}),(0,Et.jsx)("p",{className:"text-sm text-gray-900",children:"Australia"===(Array.isArray(N.account_type)?N.account_type[0]:N.account_type)?Array.isArray(N.bank_name_au)?N.bank_name_au[0]:N.bank_name_au:Array.isArray(N.bank_name_mn)?N.bank_name_mn[0]:N.bank_name_mn})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Account Number"}),(0,Et.jsx)("p",{className:"text-sm text-gray-900",children:N.account_number})]}),N.bsb&&(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"BSB"}),(0,Et.jsx)("p",{className:"text-sm text-gray-900",children:N.bsb})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Account Status"}),(0,Et.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Et.jsx)("button",{onClick:()=>S(u(u({},k),{},{account_status:!k.account_status})),className:"relative inline-flex h-7 w-12 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 ".concat(k.account_status?"bg-green-500 focus:ring-green-300":"bg-gray-300 focus:ring-gray-300"),"aria-pressed":k.account_status,"aria-label":"Toggle account status",children:(0,Et.jsx)("span",{className:"inline-block h-5 w-5 transform rounded-full bg-white shadow transition-transform ".concat(k.account_status?"translate-x-6":"translate-x-1")})}),(0,Et.jsx)("span",{className:"text-sm ".concat(k.account_status?"text-green-700":"text-gray-700"),children:k.account_status?"Active":"Inactive"})]})]})]}),(0,Et.jsxs)("div",{className:"flex justify-end gap-2 mt-6",children:[(0,Et.jsx)("button",{onClick:V,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-md",children:"Cancel"}),(0,Et.jsx)("button",{onClick:W,disabled:g,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-md disabled:opacity-50 disabled:cursor-not-allowed",children:g?"Updating...":"Update Account"})]})]})})}),E&&(0,Et.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:(0,Et.jsx)("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:(0,Et.jsxs)("div",{className:"mt-3",children:[(0,Et.jsx)("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-yellow-100",children:(0,Et.jsx)("svg",{className:"h-6 w-6 text-yellow-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,Et.jsxs)("div",{className:"mt-2 text-center",children:[(0,Et.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Unsaved Changes"}),(0,Et.jsx)("div",{className:"mt-2",children:(0,Et.jsx)("p",{className:"text-sm text-gray-500",children:"You have unsaved changes. Do you want to save them before closing?"})})]}),(0,Et.jsxs)("div",{className:"flex justify-center gap-3 mt-6",children:[(0,Et.jsx)("button",{onClick:H,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-md",children:"Discard Changes"}),(0,Et.jsx)("button",{onClick:U,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-md",children:"Save Changes"})]})]})})}),(0,Et.jsx)(Ut,{isVisible:y.show,onClose:()=>v({show:!1,message:"",type:"success"}),message:y.message,type:y.type})]})}catch(i){return console.error("BankAccounts component error:",i),(0,Et.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:(0,Et.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8 max-w-md w-full",children:(0,Et.jsxs)("div",{className:"text-center",children:[(0,Et.jsx)("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,Et.jsx)("svg",{className:"w-8 h-8 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,Et.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Error Loading Bank Accounts"}),(0,Et.jsx)("p",{className:"text-gray-500 mb-4",children:"There was an error loading the bank accounts page."}),(0,Et.jsx)("button",{onClick:()=>window.location.reload(),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-medium",children:"Reload Page"})]})})})}},un=e=>{var t,n;let{token:a}=e;const[l,o]=(0,r.useState)([]),[s,i]=(0,r.useState)(!1),[c,d]=(0,r.useState)(""),[m,p]=(0,r.useState)(!1),[h,f]=(0,r.useState)(!1),[x,g]=(0,r.useState)({show:!1,message:"",type:"success"}),[b,y]=(0,r.useState)({note_title:"",note:"",note_type:"General"}),[v,j]=(0,r.useState)(null),[w,N]=(0,r.useState)(!1),[_,k]=(0,r.useState)(null),[S,C]=(0,r.useState)(!1),[L,E]=(0,r.useState)({note_title:"",note:"",note_type:"General"}),[A,P]=(0,r.useState)(!1),[M,B]=(0,r.useState)(!1),[F,T]=(0,r.useState)(null),[D,z]=(0,r.useState)({note_title:"",note:"",note_type:"General"}),[R,O]=(0,r.useState)(""),[I,W]=(0,r.useState)("All"),[V,H]=(0,r.useState)(1),[U,q]=(0,r.useState)(50),[$,G]=(0,r.useState)("grid"),[Q,J]=(0,r.useState)([]),[Y,K]=(0,r.useState)(!1),[X,Z]=(0,r.useState)(""),[ee,te]=(0,r.useState)(0),ne="undefined"!==typeof window&&window.REACT_APP_API_URL||"https://echovault.space/wp-json",re=["General","Client","Loan","System","Other"];(0,r.useEffect)(()=>{(async()=>{if(a){i(!0),d("");try{const r=["notes","note-system","note"];let l=null,s=null;for(const e of r)try{if(l=await fetch("".concat(ne,"/wp/v2/").concat(e,"?status=publish,draft&per_page=100"),{method:"GET",headers:{Authorization:"Bearer ".concat(a),"Content-Type":"application/json"}}),l.ok){s=await l.json();break}}catch(n){}var e,t;if(!l||!l.ok)throw new Error("Failed to fetch notes from any endpoint. Last status: ".concat(null===(e=l)||void 0===e?void 0:e.status," ").concat(null===(t=l)||void 0===t?void 0:t.statusText));o(s||[])}catch(r){console.error("Error fetching notes:",r),d("Failed to load notes: ".concat(r.message,". Please check if the PODS backend is configured correctly.")),o([])}finally{i(!1)}}})(),(async()=>{if(a)try{const e=await fetch("".concat(ne,"/wp/v2/borrower-profile?per_page=100"),{method:"GET",headers:{Authorization:"Bearer ".concat(a),"Content-Type":"application/json"}});if(e.ok){const t=await e.json();J(t||[])}}catch(e){console.error("Error fetching borrowers:",e)}})()},[a]);const ae=()=>{y({note_title:"",note:"",note_type:"General"}),p(!0)},le=e=>{j(e),N(!0)},oe=()=>{j(null),N(!1)},se=()=>{(()=>{const e=Array.isArray(L.note_type)?L.note_type[0]:L.note_type,t=Array.isArray(D.note_type)?D.note_type[0]:D.note_type,n=L.note_title!==D.note_title,r=L.note!==D.note;return n||r||e!==t})()?B(!0):ie()},ie=()=>{k(null),C(!1),E({note_title:"",note:"",note_type:"General"}),z({note_title:"",note:"",note_type:"General"}),B(!1)},ce=()=>{C(!1),B(!1)},de=()=>{B(!1),ue({preventDefault:()=>{}})},ue=async e=>{if(e.preventDefault(),a&&_)if(L.note_title.trim())if(L.note.trim()){f(!0),d(""),g({show:!1,message:"",type:"success"});try{const e={title:L.note_title,status:"publish",note_title:L.note_title,note:L.note,note_type:L.note_type},t=await fetch("".concat(ne,"/wp/v2/notes/").concat(_.id),{method:"POST",headers:{Authorization:"Bearer ".concat(a),"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error("Failed to update note: ".concat(t.status," ").concat(t.statusText));const n=await t.json();o(e=>e.map(e=>e.id===_.id?n:e)),g({show:!0,message:"Note updated successfully",type:"success"}),ie()}catch(t){console.error("Error updating note:",t),d("Failed to update note: ".concat(t.message))}finally{f(!1)}}else d("Note content is required");else d("Note title is required")},me=async e=>{if(e.preventDefault(),a)if(b.note_title.trim())if(b.note.trim()){f(!0),d(""),g({show:!1,message:"",type:"success"});try{const e={title:b.note_title,status:"publish",note_title:b.note_title,note:b.note,note_type:b.note_type},l=["notes","note-system","note","posts","note_system"];let s=null,i=!1;for(const t of l)try{if(s=await fetch("".concat(ne,"/wp/v2/").concat(t),{method:"POST",headers:{Authorization:"Bearer ".concat(a),"Content-Type":"application/json"},body:JSON.stringify(e)}),s.ok){i=!0;break}}catch(r){}var t,n;if(!i||!s||!s.ok)throw new Error("Failed to create note with any endpoint. Last status: ".concat(null===(t=s)||void 0===t?void 0:t.status," ").concat(null===(n=s)||void 0===n?void 0:n.statusText));const c=await s.json();o(e=>[c,...e]),g({show:!0,message:"Note created successfully!",type:"success"}),y({note_title:"",note:"",note_type:"General"}),p(!1)}catch(l){console.error("Error creating note:",l),d("Failed to create note: ".concat(l.message))}finally{f(!1)}}else d("Note content is required");else d("Note title is required")},pe=e=>{const{name:t,value:n}=e.target;y(e=>u(u({},e),{},{[t]:n}))},he=e=>{switch(e){case"General":default:return"bg-gray-100 text-gray-800";case"Client":return"bg-blue-100 text-blue-800";case"Loan":return"bg-green-100 text-green-800";case"System":return"bg-purple-100 text-purple-800";case"Other":return"bg-yellow-100 text-yellow-800"}},fe=l.filter(e=>{var t,n;const r=""===R||(e.note_title||(null===(t=e.title)||void 0===t?void 0:t.rendered)||"").toLowerCase().includes(R.toLowerCase())||(e.note||(null===(n=e.content)||void 0===n?void 0:n.rendered)||"").toLowerCase().includes(R.toLowerCase()),a="All"===I||e.note_type===I;return r&&a}),xe=Math.ceil(fe.length/U),ge=(V-1)*U,be=ge+U,ye=fe.slice(ge,be);(0,r.useEffect)(()=>{H(1)},[R,I]);const ve=e=>{H(e)},je=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=e.target.value,r=e.target.selectionStart,a=n.substring(0,r),l=a.lastIndexOf("@");if(-1!==l){const e=a.substring(l+1);e.includes(" ")||e.includes("\n")?K(!1):(Z(e),te(l),K(!0))}else K(!1);t?E(e=>u(u({},e),{},{note:n})):y(e=>u(u({},e),{},{note:n}))},we=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n="@".concat(e.first_name," ").concat(e.last_name),r=(t?L:b).note,a=r.substring(0,ee)+n+r.substring(ee+1+X.length);t?E(e=>u(u({},e),{},{note:a})):y(e=>u(u({},e),{},{note:a})),K(!1),Z("")},Ne=Q.filter(e=>"".concat(e.first_name||""," ").concat(e.last_name||"").toLowerCase().includes(X.toLowerCase()));return m?(0,Et.jsxs)("div",{children:[(0,Et.jsx)("div",{className:"mb-8",children:(0,Et.jsxs)("div",{children:[(0,Et.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Add New Note"}),(0,Et.jsx)("p",{className:"text-gray-600",children:"Create and save an internal note"})]})}),(0,Et.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:(0,Et.jsxs)("form",{onSubmit:me,className:"space-y-6",children:[(0,Et.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{htmlFor:"note_title",className:"block text-sm font-medium text-gray-700 mb-2",children:"Note Title *"}),(0,Et.jsx)("input",{type:"text",id:"note_title",name:"note_title",value:b.note_title,onChange:pe,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter note title"})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{htmlFor:"note_type",className:"block text-sm font-medium text-gray-700 mb-2",children:"Note Type *"}),(0,Et.jsx)("select",{id:"note_type",name:"note_type",value:b.note_type,onChange:pe,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:re.map(e=>(0,Et.jsx)("option",{value:e,children:e},e))})]})]}),(0,Et.jsxs)("div",{className:"relative",children:[(0,Et.jsx)("label",{htmlFor:"note",className:"block text-sm font-medium text-gray-700 mb-2",children:"Note Content *"}),(0,Et.jsx)("textarea",{id:"note",name:"note",value:b.note,onChange:e=>je(e,!1),rows:8,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Write your note here... Type @ to mention a borrower"}),Y&&(0,Et.jsx)("div",{className:"absolute z-10 mt-1 w-full bg-white border border-gray-300 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:Ne.length>0?Ne.map(e=>{var t,n;return(0,Et.jsx)("div",{onClick:()=>we(e,!1),className:"px-3 py-2 hover:bg-blue-50 cursor-pointer border-b border-gray-100 last:border-b-0",children:(0,Et.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Et.jsx)("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:(0,Et.jsxs)("span",{className:"text-blue-600 font-medium text-sm",children:[null===(t=e.first_name)||void 0===t?void 0:t[0],null===(n=e.last_name)||void 0===n?void 0:n[0]]})}),(0,Et.jsxs)("div",{children:[(0,Et.jsxs)("div",{className:"font-medium text-gray-900",children:[e.first_name," ",e.last_name]}),(0,Et.jsx)("div",{className:"text-sm text-gray-500",children:e.email_address||"ID: ".concat(e.borrower_id||e.id)})]})]})},e.id)}):(0,Et.jsx)("div",{className:"px-3 py-2 text-gray-500 text-sm",children:"No borrowers found"})})]}),(0,Et.jsxs)("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-200",children:[(0,Et.jsx)("button",{type:"button",onClick:()=>p(!1),className:"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg font-medium",children:"Cancel"}),(0,Et.jsxs)("button",{type:"submit",disabled:h,className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:[h&&(0,Et.jsxs)("svg",{className:"animate-spin h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[(0,Et.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,Et.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,Et.jsx)("span",{children:h?"Creating...":"Create Note"})]})]})]})})]}):S&&_?(0,Et.jsxs)("div",{children:[(0,Et.jsx)("div",{className:"mb-8",children:(0,Et.jsxs)("div",{children:[(0,Et.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Edit Note"}),(0,Et.jsx)("p",{className:"text-gray-600",children:"Update note information"})]})}),(0,Et.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:(0,Et.jsxs)("form",{onSubmit:ue,className:"space-y-6",children:[(0,Et.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{htmlFor:"edit_note_title",className:"block text-sm font-medium text-gray-700 mb-2",children:"Note Title *"}),(0,Et.jsx)("input",{type:"text",id:"edit_note_title",name:"note_title",value:L.note_title,onChange:e=>E(t=>u(u({},t),{},{note_title:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter note title"})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{htmlFor:"edit_note_type",className:"block text-sm font-medium text-gray-700 mb-2",children:"Note Type *"}),(0,Et.jsx)("select",{id:"edit_note_type",name:"note_type",value:L.note_type,onChange:e=>E(t=>u(u({},t),{},{note_type:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:re.map(e=>(0,Et.jsx)("option",{value:e,children:e},e))})]})]}),(0,Et.jsxs)("div",{className:"relative",children:[(0,Et.jsx)("label",{htmlFor:"edit_note",className:"block text-sm font-medium text-gray-700 mb-2",children:"Note Content *"}),(0,Et.jsx)("textarea",{id:"edit_note",name:"note",value:L.note,onChange:e=>je(e,!0),rows:8,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Write your note here... Type @ to mention a borrower"}),Y&&(0,Et.jsx)("div",{className:"absolute z-10 mt-1 w-full bg-white border border-gray-300 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:Ne.length>0?Ne.map(e=>{var t,n;return(0,Et.jsx)("div",{onClick:()=>we(e,!0),className:"px-3 py-2 hover:bg-blue-50 cursor-pointer border-b border-gray-100 last:border-b-0",children:(0,Et.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Et.jsx)("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:(0,Et.jsxs)("span",{className:"text-blue-600 font-medium text-sm",children:[null===(t=e.first_name)||void 0===t?void 0:t[0],null===(n=e.last_name)||void 0===n?void 0:n[0]]})}),(0,Et.jsxs)("div",{children:[(0,Et.jsxs)("div",{className:"font-medium text-gray-900",children:[e.first_name," ",e.last_name]}),(0,Et.jsx)("div",{className:"text-sm text-gray-500",children:e.email_address||"ID: ".concat(e.borrower_id||e.id)})]})]})},e.id)}):(0,Et.jsx)("div",{className:"px-3 py-2 text-gray-500 text-sm",children:"No borrowers found"})})]}),(0,Et.jsxs)("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-200",children:[(0,Et.jsx)("button",{type:"button",onClick:se,className:"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg font-medium",children:"Cancel"}),(0,Et.jsxs)("button",{type:"submit",disabled:h,className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:[h&&(0,Et.jsxs)("svg",{className:"animate-spin h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[(0,Et.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,Et.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,Et.jsx)("span",{children:h?"Updating...":"Update Note"})]})]})]})}),M&&(0,Et.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:(0,Et.jsx)("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:(0,Et.jsxs)("div",{className:"mt-3 text-center",children:[(0,Et.jsx)("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-yellow-100 mb-4",children:(0,Et.jsx)("svg",{className:"h-6 w-6 text-yellow-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,Et.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Unsaved Changes"}),(0,Et.jsx)("div",{className:"mt-2 px-7 py-3",children:(0,Et.jsx)("p",{className:"text-sm text-gray-500",children:"You have unsaved changes. Do you want to save them before closing?"})}),(0,Et.jsxs)("div",{className:"flex justify-center gap-3 mt-6",children:[(0,Et.jsx)("button",{onClick:ce,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-md",children:"Discard Changes"}),(0,Et.jsx)("button",{onClick:de,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-md",children:"Save Changes"})]})]})})})]}):(0,Et.jsxs)("div",{children:[(0,Et.jsx)("div",{className:"mb-8",children:(0,Et.jsxs)("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Notes"}),(0,Et.jsx)("p",{className:"text-gray-600",children:"Create and manage your internal notes"})]}),(0,Et.jsxs)("button",{onClick:ae,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-medium flex items-center space-x-2 self-start sm:self-center",children:[(0,Et.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),(0,Et.jsx)("span",{children:"Add New Note"})]})]})}),c&&(0,Et.jsx)("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:c}),s&&(0,Et.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-12 text-center",children:[(0,Et.jsx)("div",{className:"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,Et.jsxs)("svg",{className:"animate-spin h-12 w-12 text-blue-600",fill:"none",viewBox:"0 0 24 24",children:[(0,Et.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,Et.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}),(0,Et.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Loading notes..."}),(0,Et.jsx)("p",{className:"text-gray-500",children:"Please wait while we fetch your notes."})]}),!s&&l.length>0&&0===fe.length&&(0,Et.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-12 text-center",children:[(0,Et.jsx)("div",{className:"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,Et.jsx)("svg",{className:"w-12 h-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),(0,Et.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No notes found"}),(0,Et.jsx)("p",{className:"text-gray-500 mb-6",children:"No notes match your search criteria. Try adjusting your search or filter."}),(0,Et.jsxs)("button",{onClick:()=>{O(""),W("All")},className:"inline-flex items-center px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium",children:[(0,Et.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Clear Filters"]})]}),!s&&0===l.length&&(0,Et.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-12 text-center",children:[(0,Et.jsx)("div",{className:"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,Et.jsx)("svg",{className:"w-12 h-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M7 7h10M7 11h10M7 15h10"})})}),(0,Et.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No notes yet"}),(0,Et.jsx)("p",{className:"text-gray-500 mb-8 max-w-md mx-auto",children:"Create and organize notes related to loans and borrowers. This section will hold your internal notes."}),(0,Et.jsxs)("button",{onClick:ae,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-medium flex items-center space-x-2 mx-auto",children:[(0,Et.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),(0,Et.jsx)("span",{children:"Add First Note"})]})]}),!s&&l.length>0&&(0,Et.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6",children:[(0,Et.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{htmlFor:"search",className:"block text-sm font-medium text-gray-700 mb-2",children:"Search Notes"}),(0,Et.jsxs)("div",{className:"relative",children:[(0,Et.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,Et.jsx)("svg",{className:"h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),(0,Et.jsx)("input",{type:"text",id:"search",value:R,onChange:e=>O(e.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Search by title or content..."})]})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{htmlFor:"filter",className:"block text-sm font-medium text-gray-700 mb-2",children:"Filter by Type"}),(0,Et.jsxs)("select",{id:"filter",value:I,onChange:e=>W(e.target.value),className:"block w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,Et.jsx)("option",{value:"All",children:"All Types"}),re.map(e=>(0,Et.jsx)("option",{value:e,children:e},e))]})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Per Page"}),(0,Et.jsxs)("select",{value:U,onChange:e=>{const t=Number(e.target.value);q(t),H(1)},className:"block w-full px-3 py-2 border border-gray-300 rounded-md bg-white focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",children:[(0,Et.jsx)("option",{value:5,children:"5"}),(0,Et.jsx)("option",{value:10,children:"10"}),(0,Et.jsx)("option",{value:50,children:"50"}),(0,Et.jsx)("option",{value:100,children:"100"})]})]})]}),(0,Et.jsxs)("div",{className:"flex justify-between items-center mt-4 pt-4 border-t border-gray-200",children:[(0,Et.jsxs)("div",{className:"text-sm text-gray-600",children:["Showing ",ge+1,"-",Math.min(be,fe.length)," of ",fe.length," notes",fe.length!==l.length&&(0,Et.jsx)("span",{className:"ml-2 text-blue-600",children:"(filtered)"})]}),(0,Et.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Et.jsx)("span",{className:"text-sm text-gray-600",children:"View:"}),(0,Et.jsxs)("div",{className:"flex bg-gray-100 rounded-lg p-1",children:[(0,Et.jsx)("button",{onClick:()=>G("grid"),className:"px-3 py-1 text-sm rounded-md transition-colors duration-200 ".concat("grid"===$?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"),title:"Grid View",children:(0,Et.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})})}),(0,Et.jsx)("button",{onClick:()=>G("list"),className:"px-3 py-1 text-sm rounded-md transition-colors duration-200 ".concat("list"===$?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"),title:"List View",children:(0,Et.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 10h16M4 14h16M4 18h16"})})})]})]})]})]}),!s&&fe.length>0&&("grid"===$?(0,Et.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:ye.map((e,t)=>{var n,r;let a=e.note_type;Array.isArray(a)&&(a=a[0]);const l=e.note||(null===(n=e.content)||void 0===n?void 0:n.rendered)||"No content",o=l.length>150?l.substring(0,150)+"...":l;return(0,Et.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 hover:shadow-md transition-shadow duration-200 ".concat("grid"===$?"p-6":"p-4"),children:"grid"===$?(0,Et.jsxs)("div",{className:"flex flex-col h-full",children:[(0,Et.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,Et.jsx)("div",{className:"flex-1 min-w-0",children:(0,Et.jsx)("h3",{className:"text-lg font-semibold text-gray-900 truncate",children:e.note_title||(null===(r=e.title)||void 0===r?void 0:r.rendered)||"Untitled Note"})}),(0,Et.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ml-2 flex-shrink-0 ".concat(he(a)),children:a||"General"})]}),(0,Et.jsx)("div",{className:"text-gray-700 text-sm flex-1 mb-4",children:(0,Et.jsx)("div",{className:"overflow-hidden",style:{display:"-webkit-box",WebkitLineClamp:4,WebkitBoxOrient:"vertical",lineHeight:"1.4",maxHeight:"5.6em"},children:o})}),(0,Et.jsx)("div",{className:"mt-auto pt-4 border-t border-gray-100",children:(0,Et.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Et.jsx)("div",{className:"text-xs text-gray-500",children:new Date(e.date).toLocaleDateString()}),(0,Et.jsx)("button",{onClick:()=>le(e),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"View Details"})]})})]}):null},t)})}):(0,Et.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:(0,Et.jsx)("div",{className:"overflow-x-auto",children:(0,Et.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Et.jsx)("thead",{className:"bg-gray-50",children:(0,Et.jsxs)("tr",{children:[(0,Et.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Title"}),(0,Et.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),(0,Et.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Content Preview"}),(0,Et.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created Date"}),(0,Et.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,Et.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:ye.map((e,t)=>{var n,r;let a=e.note_type;Array.isArray(a)&&(a=a[0]);const l=e.note||(null===(n=e.content)||void 0===n?void 0:n.rendered)||"No content",o=l.length>100?l.substring(0,100)+"...":l;return(0,Et.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,Et.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Et.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.note_title||(null===(r=e.title)||void 0===r?void 0:r.rendered)||"Untitled Note"})}),(0,Et.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Et.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat(he(a)),children:a||"General"})}),(0,Et.jsx)("td",{className:"px-6 py-4",children:(0,Et.jsx)("div",{className:"text-sm text-gray-700 max-w-xs",children:(0,Et.jsx)("div",{className:"overflow-hidden",style:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",lineHeight:"1.4",maxHeight:"2.8em"},children:o})})}),(0,Et.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(e.date).toLocaleDateString()}),(0,Et.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(0,Et.jsx)("button",{onClick:()=>le(e),className:"text-blue-600 hover:text-blue-900 p-1 rounded hover:bg-blue-50",title:"View Note Details",children:(0,Et.jsxs)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})})]},t)})})]})})})),!s&&fe.length>0&&xe>1&&(0,Et.jsxs)("div",{className:"mt-8 flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4",children:[(0,Et.jsxs)("div",{className:"text-sm text-gray-600",children:["Page ",V," of ",xe]}),(0,Et.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,Et.jsx)("button",{onClick:()=>ve(V-1),disabled:1===V,className:"px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),(0,Et.jsx)("div",{className:"flex items-center gap-1",children:Array.from({length:xe},(e,t)=>t+1).map(e=>1===e||e===xe||e>=V-1&&e<=V+1?(0,Et.jsx)("button",{onClick:()=>ve(e),className:"px-3 py-2 text-sm font-medium rounded-md ".concat(e===V?"bg-blue-600 text-white":"text-gray-700 bg-white border border-gray-300 hover:bg-gray-50"),children:e},e):e===V-2||e===V+2?(0,Et.jsx)("span",{className:"px-2 py-1 text-sm text-gray-500",children:"..."},e):null)}),(0,Et.jsx)("button",{onClick:()=>ve(V+1),disabled:V===xe,className:"px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]}),(0,Et.jsx)(Ut,{isVisible:x.show,onClose:()=>g({show:!1,message:"",type:"success"}),message:x.message,type:x.type}),w&&v&&(0,Et.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:(0,Et.jsx)("div",{className:"relative top-20 mx-auto p-5 border w-11/12 md:w-3/4 lg:w-1/2 shadow-lg rounded-md bg-white",children:(0,Et.jsxs)("div",{className:"mt-3",children:[(0,Et.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Et.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Note Details"}),(0,Et.jsx)("button",{onClick:oe,className:"text-gray-400 hover:text-gray-600",children:(0,Et.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,Et.jsxs)("div",{className:"space-y-4",children:[(0,Et.jsxs)("div",{className:"flex items-start justify-between",children:[(0,Et.jsx)("div",{className:"flex-1",children:(0,Et.jsx)("h4",{className:"text-xl font-semibold text-gray-900",children:v.note_title||(null===(t=v.title)||void 0===t?void 0:t.rendered)||"Untitled Note"})}),(0,Et.jsx)("span",{className:"inline-flex px-3 py-1 text-sm font-semibold rounded-full ml-4 ".concat(he(v.note_type)),children:v.note_type||"General"})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:"Content"}),(0,Et.jsx)("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200 max-h-60 overflow-y-auto",children:(0,Et.jsx)("div",{className:"whitespace-pre-wrap",children:v.note||(null===(n=v.content)||void 0===n?void 0:n.rendered)||"No content"})})]}),(0,Et.jsx)("div",{className:"pt-4 border-t border-gray-200",children:(0,Et.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-gray-600",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsx)("span",{className:"font-medium",children:"Created:"})," ",new Date(v.date).toLocaleDateString()," at ",new Date(v.date).toLocaleTimeString()]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("span",{className:"font-medium",children:"Note ID:"})," ",v.id]})]})}),(0,Et.jsxs)("div",{className:"pt-4 border-t border-gray-200 flex justify-between items-center",children:[(0,Et.jsxs)("button",{onClick:()=>{return e=v.id,T(e),void P(!0);var e},className:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg font-medium flex items-center space-x-2",children:[(0,Et.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),(0,Et.jsx)("span",{children:"Delete"})]}),(0,Et.jsxs)("div",{className:"flex space-x-3",children:[(0,Et.jsx)("button",{onClick:oe,className:"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg font-medium",children:"Close"}),(0,Et.jsx)("button",{onClick:()=>(e=>{var t,n;k(e);const r={note_title:e.note_title||(null===(t=e.title)||void 0===t?void 0:t.rendered)||"",note:(a=e.note||(null===(n=e.content)||void 0===n?void 0:n.rendered)||"",a?a.replace(/<[^>]*>/g,"").trim():""),note_type:e.note_type||"General"};var a;const l=u({},r),o=u({},r);E(l),z(o),C(!0),oe()})(v),className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium",children:"Edit Note"})]})]})]})]})})}),(0,Et.jsx)(Ht,{isOpen:A,onClose:()=>{P(!1),T(null)},onConfirm:async()=>{if(a&&F)try{const e=await fetch("".concat(ne,"/wp/v2/notes/").concat(F,"?force=true"),{method:"DELETE",headers:{Authorization:"Bearer ".concat(a),"Content-Type":"application/json"}});if(!e.ok)throw new Error("Failed to delete note: ".concat(e.status," ").concat(e.statusText));o(e=>e.filter(e=>String(e.id)!==String(F))),g({show:!0,message:"Note deleted successfully",type:"success"}),P(!1),T(null),oe()}catch(e){console.error("Error deleting note:",e),d("Failed to delete note: ".concat(e.message)),P(!1),T(null)}},title:"Delete Note",message:"Are you sure you want to delete this note? This action cannot be undone.",confirmText:"Delete",cancelText:"Cancel",type:"error"})]})};const mn=function(){const[e,t]=(0,r.useState)([]),[n,a]=(0,r.useState)(!0),[l,o]=(0,r.useState)("");return(0,r.useEffect)(()=>{(async()=>{a(!0),o("");try{const e=await fetch("https://yourfinservices.com.au/wp-json/wp/v2/categories?slug=system-news",{mode:"cors"});let n=null;if(e.ok){const t=await e.json();t&&t.length>0&&(n=t[0].id)}const r=n?"https://yourfinservices.com.au/wp-json/wp/v2/posts?categories=".concat(n,"&per_page=20&_embed"):"https://yourfinservices.com.au/wp-json/wp/v2/posts?per_page=20&_embed",a=await fetch(r,{mode:"cors"});if(!a.ok)throw new Error("Failed to load news");const l=await a.json();t(l||[])}catch(_n){console.error("Error loading news:",_n),o(_n.message||"Failed to load news")}finally{a(!1)}})()},[]),(0,Et.jsxs)("div",{className:"p-6",children:[(0,Et.jsx)("div",{className:"mb-8",children:(0,Et.jsx)("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4",children:(0,Et.jsxs)("div",{children:[(0,Et.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"News"}),(0,Et.jsx)("p",{className:"text-gray-600",children:"Latest updates and announcements."})]})})}),n&&(0,Et.jsx)("p",{className:"text-sm text-gray-500",children:"Loading news..."}),l&&(0,Et.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[(0,Et.jsx)("p",{className:"text-sm text-yellow-800",children:l}),(0,Et.jsx)("p",{className:"text-xs text-yellow-600 mt-1",children:"Unable to load news from external source. Please try again later."})]}),!n&&!l&&0===e.length&&(0,Et.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-12 text-center",children:(0,Et.jsx)("p",{className:"text-gray-600",children:"No news articles found."})}),(0,Et.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:e.map(e=>{var t,n,r,a;const l=(e=>{var t,n;if(!e)return null;const r=null===(t=e._embedded)||void 0===t||null===(n=t["wp:featuredmedia"])||void 0===n?void 0:n[0];if(r){var a;if(r.source_url)return r.source_url;if(null!==(a=r.media_details)&&void 0!==a&&a.sizes){var l,o,s,i;const e=r.media_details.sizes;if(null!==(l=e.large)&&void 0!==l&&l.source_url)return e.large.source_url;if(null!==(o=e.medium_large)&&void 0!==o&&o.source_url)return e.medium_large.source_url;if(null!==(s=e.medium)&&void 0!==s&&s.source_url)return e.medium.source_url;if(null!==(i=e.full)&&void 0!==i&&i.source_url)return e.full.source_url}}return e.featured_media_url?e.featured_media_url:null})(e),o=((null===(t=e.excerpt)||void 0===t?void 0:t.rendered)||(null===(n=e.content)||void 0===n?void 0:n.rendered)||"").replace(/<[^>]*>/g,"").substring(0,120);return(0,Et.jsxs)("article",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden hover:shadow-md transition-shadow flex flex-col",children:[l&&(0,Et.jsx)("div",{className:"w-full h-40 overflow-hidden bg-gray-100",children:(0,Et.jsx)("img",{src:l,alt:(null===(r=e.title)||void 0===r?void 0:r.rendered)||"News image",className:"w-full h-full object-cover",onError:e=>{e.target.style.display="none"}})}),(0,Et.jsxs)("div",{className:"p-4 flex-1 flex flex-col",children:[(0,Et.jsx)("h3",{className:"text-base font-semibold text-gray-900 mb-2 line-clamp-2",children:(null===(a=e.title)||void 0===a?void 0:a.rendered)||"News"}),(0,Et.jsx)("p",{className:"text-xs text-gray-500 mb-2",children:new Date(e.date).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}),(0,Et.jsxs)("div",{className:"text-xs text-gray-600 mb-3 flex-1 line-clamp-3",children:[o,o.length>=120&&"..."]}),e.link&&(0,Et.jsxs)("a",{href:e.link,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center text-xs text-blue-600 hover:text-blue-700 font-medium mt-auto",children:["Read more",(0,Et.jsx)("svg",{className:"w-3 h-3 ml-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})]},e.id)})})]})},pn=e=>{let{onSelectReport:t,onCreateNew:n}=e;const[a]=(0,r.useState)([]),[l]=(0,r.useState)(!1),[o]=(0,r.useState)("");return(0,Et.jsxs)("div",{children:[(0,Et.jsx)("div",{className:"mb-8",children:(0,Et.jsxs)("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Reports"}),(0,Et.jsx)("p",{className:"text-gray-600",children:"Generate and view system reports and analytics"})]}),(0,Et.jsxs)("button",{onClick:n,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-medium flex items-center space-x-2 self-start sm:self-center",children:[(0,Et.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),(0,Et.jsx)("span",{children:"Generate Report"})]})]})}),0===a.length?(0,Et.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-12 text-center",children:[(0,Et.jsx)("div",{className:"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,Et.jsx)("svg",{className:"w-12 h-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),(0,Et.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No reports found"}),(0,Et.jsx)("p",{className:"text-gray-500 mb-8 max-w-md mx-auto",children:"Get started by generating your first report. This will help you analyze loan data, track performance, and monitor system metrics."}),(0,Et.jsxs)("button",{onClick:n,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-medium flex items-center space-x-2 mx-auto",children:[(0,Et.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),(0,Et.jsx)("span",{children:"Generate First Report"})]})]}):(0,Et.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:(0,Et.jsx)("div",{className:"overflow-x-auto",children:(0,Et.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Et.jsx)("thead",{className:"bg-gray-50",children:(0,Et.jsxs)("tr",{children:[(0,Et.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Report"}),(0,Et.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),(0,Et.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,Et.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Generated"}),(0,Et.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,Et.jsx)("tbody",{className:"bg-white divide-y divide-gray-200"})]})})})]})},hn=e=>{let{onSelectSetting:t,onCreateNew:n}=e;const[a]=(0,r.useState)([]),[l]=(0,r.useState)(!1),[o]=(0,r.useState)("");return(0,Et.jsxs)("div",{children:[(0,Et.jsx)("div",{className:"mb-8",children:(0,Et.jsxs)("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Settings"}),(0,Et.jsx)("p",{className:"text-gray-600",children:"Configure system settings and preferences"})]}),(0,Et.jsxs)("button",{onClick:n,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-medium flex items-center space-x-2 self-start sm:self-center",children:[(0,Et.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),(0,Et.jsx)("span",{children:"Add Setting"})]})]})}),0===a.length?(0,Et.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-12 text-center",children:[(0,Et.jsx)("div",{className:"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,Et.jsx)("svg",{className:"w-12 h-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z M15 12a3 3 0 11-6 0 3 3 0 016 0z"})})}),(0,Et.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No settings configured"}),(0,Et.jsx)("p",{className:"text-gray-500 mb-8 max-w-md mx-auto",children:"Get started by configuring your first system setting. This will help you customize the application behavior and preferences."}),(0,Et.jsxs)("button",{onClick:n,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-medium flex items-center space-x-2 mx-auto",children:[(0,Et.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),(0,Et.jsx)("span",{children:"Configure First Setting"})]})]}):(0,Et.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:(0,Et.jsx)("div",{className:"overflow-x-auto",children:(0,Et.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Et.jsx)("thead",{className:"bg-gray-50",children:(0,Et.jsxs)("tr",{children:[(0,Et.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Setting"}),(0,Et.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Value"}),(0,Et.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),(0,Et.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,Et.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,Et.jsx)("tbody",{className:"bg-white divide-y divide-gray-200"})]})})})]})},fn=e=>{let{user:t,token:n}=e;const[a,l]=(0,r.useState)({username:"",email:"",firstName:"",lastName:"",phone:"",department:"Administration",role:"Administrator",lastLogin:"",accountCreated:""});return(0,r.useEffect)(()=>{console.log("AdminProfile received user:",t),t&&(l(e=>u(u({},e),{},{username:t.username||"",email:t.user_email||t.email||"",firstName:t.firstName||"",lastName:t.lastName||"",phone:t.phone||"",lastLogin:t.lastLogin||(new Date).toLocaleDateString(),accountCreated:t.accountCreated||(new Date).toLocaleDateString()})),console.log("AdminProfile set profile with email:",t.user_email||t.email||""))},[t]),(0,r.useEffect)(()=>{(async()=>{try{if(n&&(!a.email||!a.firstName||!a.lastName)){try{const e="undefined"!==typeof window&&window.REACT_APP_API_URL||"https://echovault.space/wp-json",t=await fetch("".concat(e,"/wp/v2/settings"),{method:"GET",headers:{Authorization:"Bearer ".concat(n),"Content-Type":"application/json"},mode:"cors"});if(t.ok){const r=await t.json(),a=(null===r||void 0===r?void 0:r.email)||(null===r||void 0===r?void 0:r.admin_email)||"";if(a){l(e=>u(u({},e),{},{email:a}));try{const t=await fetch("".concat(e,"/wp/v2/users/me?context=edit"),{method:"GET",headers:{Authorization:"Bearer ".concat(n),"Content-Type":"application/json"},mode:"cors"});if(t.ok){const e=await t.json(),n=e.first_name||e.firstName||"",r=e.last_name||e.lastName||"";l(e=>u(u({},e),{},{firstName:n,lastName:r}))}}catch(s){}}}}catch(s){}try{const a=String(n).split(".");if(3===a.length){var e,t,r;const n=JSON.parse(atob(a[1])),o=(null===n||void 0===n||null===(e=n.data)||void 0===e||null===(t=e.user)||void 0===t?void 0:t.user_email)||(null===n||void 0===n||null===(r=n.data)||void 0===r?void 0:r.user_email)||(null===n||void 0===n?void 0:n.user_email)||(null===n||void 0===n?void 0:n.email)||"";if(o){l(e=>u(u({},e),{},{email:o}));try{const e=localStorage.getItem("user");if(e){const t=u(u({},JSON.parse(e)),{},{user_email:o,email:o});localStorage.setItem("user",JSON.stringify(t))}}catch(s){}return}}}catch(s){}const a="undefined"!==typeof window&&window.REACT_APP_API_URL||"https://echovault.space/wp-json",i=await fetch("".concat(a,"/wp/v2/users/me?context=edit"),{method:"GET",headers:{Authorization:"Bearer ".concat(n),"Content-Type":"application/json"},mode:"cors"});if(i.ok){const e=await i.json(),t=e.email||e.user_email||"",n=e.first_name||e.firstName||"",r=e.last_name||e.lastName||"";l(e=>u(u({},e),{},{email:t||e.email,firstName:n,lastName:r}));try{const e=localStorage.getItem("user");if(e){const a=JSON.parse(e),l=u(u({},a),{},{user_email:t||a.user_email,email:t||a.email,firstName:n,lastName:r});localStorage.setItem("user",JSON.stringify(l))}}catch(s){}}else{const e=await fetch("".concat(a,"/jwt-auth/v1/token/validate"),{method:"POST",headers:{Authorization:"Bearer ".concat(n),"Content-Type":"application/json"},mode:"cors"});if(e.ok){var o;const t=await e.json(),n=(null===t||void 0===t||null===(o=t.data)||void 0===o?void 0:o.user_email)||(null===t||void 0===t?void 0:t.user_email)||"";n&&l(e=>u(u({},e),{},{email:n}))}}}}catch(_n){}})()},[a.email,n]),(0,Et.jsx)("div",{className:"max-w-4xl mx-auto p-6",children:(0,Et.jsxs)("div",{className:"bg-white rounded-lg shadow-md",children:[(0,Et.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,Et.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,Et.jsx)("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center overflow-hidden",children:(0,Et.jsx)("img",{src:"/avatars/monster (1).svg",alt:"Admin Avatar",className:"w-full h-full object-contain"})}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Admin Profile"}),(0,Et.jsx)("p",{className:"text-gray-600 mt-1",children:"View your administrator account details"})]})]})}),(0,Et.jsx)("div",{className:"p-6",children:(0,Et.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,Et.jsxs)("div",{className:"space-y-4",children:[(0,Et.jsx)("h3",{className:"text-lg font-semibold text-gray-900 border-b border-gray-200 pb-2",children:"Personal Information"}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Username"}),(0,Et.jsx)("input",{type:"text",value:a.username,disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 text-gray-500"})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),(0,Et.jsx)("input",{type:"email",value:a.email,disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 text-gray-500"})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name"}),(0,Et.jsx)("input",{type:"text",value:a.firstName,disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 text-gray-500"})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name"}),(0,Et.jsx)("input",{type:"text",value:a.lastName,disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 text-gray-500"})]})]}),(0,Et.jsxs)("div",{className:"space-y-4",children:[(0,Et.jsx)("h3",{className:"text-lg font-semibold text-gray-900 border-b border-gray-200 pb-2",children:"Account Information"}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Department"}),(0,Et.jsx)("input",{type:"text",value:a.department,disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 text-gray-500"})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role"}),(0,Et.jsx)("input",{type:"text",value:a.role,disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 text-gray-500"})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Login"}),(0,Et.jsx)("input",{type:"text",value:a.lastLogin,disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 text-gray-500"})]}),(0,Et.jsxs)("div",{children:[(0,Et.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Account Created"}),(0,Et.jsx)("input",{type:"text",value:a.accountCreated,disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 text-gray-500"})]})]})]})})]})})};function xn(){const[e,t]=(0,r.useState)(null),[n,a]=(0,r.useState)(null),[l,o]=(0,r.useState)([]),[s,i]=(0,r.useState)(!1),[c,d]=(0,r.useState)(null),[u,m]=(0,r.useState)(null),p=ve(),h=ge();(0,r.useEffect)(()=>{const e=localStorage.getItem("jwt_token"),n=localStorage.getItem("user");if(e&&t(e),n)try{a(JSON.parse(n))}catch(_n){console.error("Error parsing user data:",_n)}const r=new URLSearchParams(h.search),l=r.get("view"),o=r.get("borrowerId"),s=r.get("loanId");if("borrower-detail"===l&&o)p("/clients/".concat(o),{replace:!0});else if("loan-detail"===l&&s)p("/loans/".concat(s),{replace:!0});else if(l&&"/"===h.pathname){const e={dashboard:"/",borrowers:"/clients","create-borrower":"/clients/new","loans-active":"/loans","loans-create":"/loans/new","loan-requests":"/loan-requests","loan-requests-create":"/loan-requests/new","loan-calculator":"/loan-calculator","loan-products":"/loan-products","loan-contract":"/loan-contract","bank-accounts":"/bank-accounts",notes:"/notes",news:"/news",reports:"/reports",settings:"/settings","admin-profile":"/admin-profile"};e[l]&&p(e[l],{replace:!0})}},[p,h]);const f=async()=>{if(e){i(!0),d(null);try{const t="undefined"!==typeof window&&window.REACT_APP_API_URL||"https://echovault.space/wp-json",n=await fetch("".concat(t,"/wp/v2/borrower-profile"),{headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"},mode:"cors"});if(n.ok){const e=await n.json();o(e)}else d("Failed to fetch borrowers")}catch(t){d("Network error occurred")}finally{i(!1)}}};(0,r.useEffect)(()=>{e&&f()},[e]);const x=(()=>{const e=h.pathname;return"/"===e||"/dashboard"===e?"dashboard":e.startsWith("/clients")?"/clients/new"===e?"create-borrower":e.match(/^\/clients\/\d+$/)?"borrower-detail":e.match(/^\/clients\/\d+\/edit$/)?"edit-borrower":"borrowers":e.startsWith("/loans")?"/loans/new"===e?"loans-create":e.match(/^\/loans\/\d+$/)?"loan-detail":"loans-active":"/loan-requests"===e?"loan-requests":"/loan-requests/new"===e?"loan-requests-create":"/loan-calculator"===e?"loan-calculator":"/loan-products"===e?"loan-products":"/loan-contract"===e?"loan-contract":"/bank-accounts"===e?"bank-accounts":"/notes"===e?"notes":"/news"===e?"news":"/reports"===e?"reports":"/settings"===e?"settings":"/admin-profile"===e?"admin-profile":"dashboard"})();return(0,Et.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,Et.jsxs)("div",{className:"flex",children:[(0,Et.jsx)(Pt,{currentView:x,setCurrentView:e=>{const t={dashboard:"/",borrowers:"/clients","create-borrower":"/clients/new","loans-active":"/loans","loans-create":"/loans/new","loan-requests":"/loan-requests","loan-requests-create":"/loan-requests/new","loan-calculator":"/loan-calculator","loan-products":"/loan-products","loan-contract":"/loan-contract","bank-accounts":"/bank-accounts",notes:"/notes",news:"/news",reports:"/reports",settings:"/settings","admin-profile":"/admin-profile"}[e];t&&(p(t),"borrowers"===e&&f())},onCreateNew:()=>p("/clients/new")}),(0,Et.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,Et.jsx)(Mt,{onLogout:()=>{localStorage.removeItem("jwt_token"),localStorage.removeItem("borrowerProfile"),localStorage.removeItem("user"),window.location.href="/"},user:n,onNavigateToProfile:()=>p("/admin-profile")}),(0,Et.jsxs)(We,{children:[(0,Et.jsx)(Oe,{path:"/",element:(0,Et.jsx)($t,{currentView:"dashboard",borrowers:l,loading:s,error:c,token:e,onCreateNew:()=>p("/clients/new")})}),(0,Et.jsx)(Oe,{path:"/dashboard",element:(0,Et.jsx)(Re,{to:"/",replace:!0})}),(0,Et.jsx)(Oe,{path:"/clients",element:(0,Et.jsx)($t,{currentView:"borrowers",borrowers:l,onSelectBorrower:e=>p("/clients/".concat(e.id)),onCreateNew:()=>p("/clients/new"),loading:s,error:c})}),(0,Et.jsx)(Oe,{path:"/clients/new",element:(0,Et.jsx)($t,{currentView:"create-borrower",borrowers:l,onCreateNew:()=>p("/clients/new"),onBack:()=>p("/"),loading:s,error:c})}),(0,Et.jsx)(Oe,{path:"/clients/:id",element:(0,Et.jsx)(gn,{token:e,navigate:p,borrowers:l})}),(0,Et.jsx)(Oe,{path:"/clients/:id/edit",element:(0,Et.jsx)(bn,{token:e,navigate:p})}),(0,Et.jsx)(Oe,{path:"/loans",element:(0,Et.jsxs)("div",{className:"p-6",children:[(0,Et.jsx)("div",{className:"mb-8",children:(0,Et.jsxs)("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Loans"}),(0,Et.jsx)("p",{className:"text-gray-600",children:"Manage and view loan applications and approvals"})]}),(0,Et.jsxs)("button",{onClick:()=>p("/loans/new"),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-medium flex items-center space-x-2 self-start sm:self-center",children:[(0,Et.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),(0,Et.jsx)("span",{children:"Create New Loan"})]})]})}),(0,Et.jsx)(Yt,{token:e,setCurrentView:e=>{if("object"===typeof e&&"loan-detail"===e.view)p("/loans/".concat(e.loanId));else if("string"===typeof e){const t={"loans-create":"/loans/new","loans-active":"/loans"};t[e]&&p(t[e])}}})]})}),(0,Et.jsx)(Oe,{path:"/loans/new",element:(0,Et.jsx)("div",{className:"p-6",children:(0,Et.jsx)(sn,{token:e,setCurrentView:e=>{m(null),"loans-active"===e?p("/loans"):"loan-detail"===e&&u&&p("/loans/".concat(u.id))},onOpenBorrower:e=>{window.open("".concat(window.location.origin,"/clients/").concat(e),"_blank","noopener")},editingLoan:u})})}),(0,Et.jsx)(Oe,{path:"/loans/:id",element:(0,Et.jsx)(yn,{token:e,navigate:p,setEditingLoan:m})}),(0,Et.jsx)(Oe,{path:"/loan-requests",element:(0,Et.jsx)(vn,{navigate:p})}),(0,Et.jsx)(Oe,{path:"/loan-requests/new",element:(0,Et.jsx)(jn,{})}),(0,Et.jsx)(Oe,{path:"/loan-calculator",element:(0,Et.jsx)(wn,{})}),(0,Et.jsx)(Oe,{path:"/loan-products",element:(0,Et.jsx)("div",{className:"p-6",children:(0,Et.jsx)(rn,{token:e})})}),(0,Et.jsx)(Oe,{path:"/loan-contract",element:(0,Et.jsx)("div",{className:"p-6",children:(0,Et.jsx)(cn,{})})}),(0,Et.jsx)(Oe,{path:"/bank-accounts",element:(0,Et.jsx)("div",{className:"p-6",children:(0,Et.jsx)(dn,{token:e,setCurrentView:e=>{"object"===typeof e&&"loan-detail"===e.view&&p("/loans/".concat(e.loanId))}})})}),(0,Et.jsx)(Oe,{path:"/notes",element:(0,Et.jsx)("div",{className:"p-6",children:(0,Et.jsx)(un,{token:e})})}),(0,Et.jsx)(Oe,{path:"/news",element:(0,Et.jsx)(mn,{})}),(0,Et.jsx)(Oe,{path:"/reports",element:(0,Et.jsx)("div",{className:"p-6",children:(0,Et.jsx)(pn,{})})}),(0,Et.jsx)(Oe,{path:"/settings",element:(0,Et.jsx)("div",{className:"p-6",children:(0,Et.jsx)(hn,{})})}),(0,Et.jsx)(Oe,{path:"/admin-profile",element:(0,Et.jsx)("div",{className:"p-6",children:(0,Et.jsx)(fn,{user:n,token:e})})})]})]})]})})}function gn(e){let{token:t,navigate:n,borrowers:a}=e;const{id:l}=je(),[o,s]=(0,r.useState)(null),[i,c]=(0,r.useState)(!0);return(0,r.useEffect)(()=>{if(t&&l){c(!0);const e="undefined"!==typeof window&&window.REACT_APP_API_URL||"https://echovault.space/wp-json";fetch("".concat(e,"/wp/v2/borrower-profile/").concat(l,"?context=edit"),{headers:{Authorization:"Bearer ".concat(t)},mode:"cors"}).then(e=>e.ok?e.json():null).then(e=>{s(e),c(!1)}).catch(()=>c(!1))}},[t,l]),(0,r.useEffect)(()=>{if(!o&&a&&a.length>0){const e=a.find(e=>String(e.id)===String(l));e&&s(e)}},[a,l,o]),(0,Et.jsx)($t,{currentView:"borrower-detail",borrowers:a,selectedBorrower:o,onSelectBorrower:()=>{},onCreateNew:()=>n("/clients/new"),onEdit:e=>n("/clients/".concat(e.id,"/edit")),onBack:()=>n("/clients"),loading:i&&!o,error:null})}function bn(e){let{token:t,navigate:n}=e;const{id:a}=je(),[l,o]=(0,r.useState)(null),[s,i]=(0,r.useState)(!0);return(0,r.useEffect)(()=>{if(t&&a){i(!0);const e="undefined"!==typeof window&&window.REACT_APP_API_URL||"https://echovault.space/wp-json";fetch("".concat(e,"/wp/v2/borrower-profile/").concat(a,"?context=edit"),{headers:{Authorization:"Bearer ".concat(t)},mode:"cors"}).then(e=>e.ok?e.json():null).then(e=>{o(e),i(!1)}).catch(()=>i(!1))}},[t,a]),s?(0,Et.jsx)("div",{className:"p-6",children:(0,Et.jsx)("p",{className:"text-sm text-gray-500",children:"Loading borrower data..."})}):l?(0,Et.jsx)("div",{className:"p-6",children:(0,Et.jsx)(qt,{editingBorrower:l,isEditing:!0,onProfileComplete:()=>n("/clients/".concat(a)),onCancel:()=>n("/clients/".concat(a)),token:t})}):(0,Et.jsx)("div",{className:"p-6",children:(0,Et.jsx)("p",{className:"text-sm text-red-600",children:"Failed to load borrower data."})})}function yn(e){let{token:t,navigate:n,setEditingLoan:r}=e;const{id:a}=je();return(0,Et.jsx)("div",{className:"p-6",children:(0,Et.jsx)(nn,{token:t,loanId:a,onBack:()=>n("/loans"),onOpenBorrower:e=>{window.open("".concat(window.location.origin,"/clients/").concat(e),"_blank","noopener")},onEditLoan:e=>{r(e),n("/loans/new")}})})}function vn(e){let{navigate:t}=e;return(0,Et.jsxs)("div",{className:"p-6",children:[(0,Et.jsx)("div",{className:"mb-8",children:(0,Et.jsxs)("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4",children:[(0,Et.jsxs)("div",{children:[(0,Et.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Loan Requests"}),(0,Et.jsx)("p",{className:"text-gray-600",children:"Review and process incoming loan requests"})]}),(0,Et.jsxs)("button",{onClick:()=>t("/loan-requests/new"),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-medium flex items-center space-x-2 self-start sm:self-center",children:[(0,Et.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),(0,Et.jsx)("span",{children:"Create Loan Request"})]})]})}),(0,Et.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-12 text-center",children:[(0,Et.jsx)("div",{className:"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,Et.jsx)("svg",{className:"w-12 h-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}),(0,Et.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No loan requests"}),(0,Et.jsx)("p",{className:"text-gray-500 mb-8 max-w-md mx-auto",children:"New loan requests submitted by borrowers will be listed here for your review."}),(0,Et.jsxs)("button",{onClick:()=>t("/loan-requests/new"),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-medium flex items-center space-x-2 mx-auto",children:[(0,Et.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),(0,Et.jsx)("span",{children:"Create Loan Request"})]})]})]})}function jn(){return(0,Et.jsxs)("div",{className:"p-6",children:[(0,Et.jsx)("div",{className:"mb-8",children:(0,Et.jsx)("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4",children:(0,Et.jsxs)("div",{children:[(0,Et.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Create Loan Request"}),(0,Et.jsx)("p",{className:"text-gray-600",children:"Start a new loan request for a borrower"})]})})}),(0,Et.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-12 text-center",children:[(0,Et.jsx)("div",{className:"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,Et.jsx)("svg",{className:"w-12 h-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 12h6m-8 4h10M7 8h10"})})}),(0,Et.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Form coming soon"}),(0,Et.jsx)("p",{className:"text-gray-500 max-w-md mx-auto",children:"We will add the loan request form here with borrower selection and product details."})]})]})}function wn(){return(0,Et.jsxs)("div",{className:"p-6",children:[(0,Et.jsx)("div",{className:"mb-8",children:(0,Et.jsx)("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4",children:(0,Et.jsxs)("div",{children:[(0,Et.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Loan Calculator"}),(0,Et.jsx)("p",{className:"text-gray-600",children:"Estimate repayments and terms"})]})})}),(0,Et.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-12 text-center",children:[(0,Et.jsx)("div",{className:"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,Et.jsx)("svg",{className:"w-12 h-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M7 7h10M7 11h10M9 15h6M9 19h6"})})}),(0,Et.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Calculator coming soon"}),(0,Et.jsx)("p",{className:"text-gray-500 max-w-md mx-auto",children:"We will add repayment and term estimation here with inputs and instant results."})]})]})}const Nn=function(){const[e,t]=(0,r.useState)(!1);(0,r.useEffect)(()=>{localStorage.getItem("jwt_token")&&t(!0)},[]);const n=(e,n)=>{t(!0),localStorage.setItem("jwt_token",e),localStorage.setItem("user",JSON.stringify(n))};return e?(0,Et.jsx)(vt,{children:(0,Et.jsx)(xn,{})}):(0,Et.jsx)(At,{onLoginSuccess:n})};l.createRoot(document.getElementById("root")).render((0,Et.jsx)(r.StrictMode,{children:(0,Et.jsx)(Nn,{})}))})();
//# sourceMappingURL=main.dcd37494.js.map